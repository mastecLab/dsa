import "dart:typed_data";import "dart:async";import "dart:io";import "dart:io" as vY;import "dart:convert";import "dart:math";import "dart:math" as wF;import "dart:collection";class cP extends HB{List<int> bB;int mY;cP.Li(Uint8List A):super.Pi(A){mY=A[0];bB=uF().sublist(1);}Uint8List Hj(){var A=[mY];A.addAll(bB);Ij=A.length;Jj();Kj(A);return Lj;}String toString()=>"BitString(${bB})";}class bP extends HB{bool Mj;bP.Ji(Uint8List A):super.Pi(A){var B=A[Nj];Mj=(B==jP);}Uint8List Hj(){super.Jj();super.Kj([Mj==true?jP:JZ]);return Lj;}}const int CZ=0x01;const int dP=0x02;const int EZ=0x03;const int eP=0x04;const int fP=0x05;const int FZ=0x0A;const int GZ=0x13;const int HZ=0x17;const int GI=0x30;const int iP=0x31;const int IZ=0x06;const int jP=0xff;const int JZ=0x00;class nG{String message;nG(this.message);}class eD extends HB{var VC;eD(this.VC,{tag: dP}):super(tag:tag);eD.Hi(Uint8List A):super.Pi(A){VC=NZ(this.uF());}Uint8List Hj(){var A=LZ(this.VC);Ij=A.length;super.Jj();Kj(A);return Lj;}static Uint8List LZ(var A){var B;if(A is JF){B=new Uint8List.fromList(A.LP());}else{var C=new JF(A);B=new Uint8List.fromList(C.LP());}return B;}static dynamic NZ(Uint8List A,{int offset: 0}){if(A.length-offset>8){return new JF(A.sublist(offset));}else{return new JF(A.sublist(offset)).VC();}}String toString()=>"ASNInteger(${VC})";}class yF{int Oj;int get length=>Oj;int Nj;int get Di=>Nj;yF(this.Oj,this.Nj);static Uint8List KZ(int C){Uint8List A;if(C<=127){A=new Uint8List(1);A[0]=C;}else{var G=new Uint32List(1);G[0]=C;var H=new Uint8List.view(G.buffer);int B=3;while(H[B]==0) --B;A=new Uint8List(B+2);A[0]=0x80+B+1;for(int D=1;D<A.length; ++D)A[D]=H[B-- ];}return A;}static yF MZ(Uint8List B){int C=2;int A=(B[1]&0x7F);if(A!=B[1]){int G=A;A=0;for(int D=0;D<G;D++ ){A<<= 8;A|= (B[C++ ]&0xFF);}}return new yF(A,C);}}class ZP extends HB{static final BZ=new Uint8List.fromList([fP,0x00]);Uint8List get MD=>BZ;ZP.Gi(Uint8List A):super.Pi(A);}class HB{final int Pj;int get tag=>Pj;Uint8List Lj;Uint8List get MD{if(Lj==null)Hj();return Lj;}HB({int tag: 0}):Pj=tag;HB.Pi(A):Pj=A[0]{Lj=A;Qj();}void Qj(){yF A=yF.MZ(Lj);Ij=A.length;Nj=A.Di;}int get kY=>Nj+Ij;int Ij;int Nj=2;Uint8List Jj(){if(Lj==null){Uint8List A=yF.KZ(Ij);Lj=new Uint8List(1+A.length+Ij);Lj[0]=tag;Lj.setRange(1,1+A.length,A,0);Nj=1+A.length;}return Lj;}Uint8List Hj()=>Jj();Uint8List uF(){return new Uint8List.view(Lj.buffer,Nj+Lj.offsetInBytes,Ij);}void Kj(List<int> A){this.MD.setRange(Nj,Nj+A.length,A);}yh()=>AZ.DZ(MD);String toString()=>"ASN1Object(tag=${tag.toRadixString(16)} valueByteLength=${Ij}) startpos=${Nj} bytes=${yh()}";}class aP extends HB{List<int> FY;aP.Fi(Uint8List A):super.Pi(A);Uint8List Hj(){Ij=FY.length;super.Jj();Kj(FY);return Lj;}}class SB extends HB{Uint8List qF;SB(dynamic A,{int tag: eP}):super(tag:tag){if(A is String)this.qF=new Uint8List.fromList(A.codeUnits);else if(A is Uint8List)this.qF=A;else if(A is List<int>)this.qF=new Uint8List.fromList(A);else throw new ArgumentError("Parameters octets should be either of type String or List<int>.");}SB.Oi(Uint8List A):super.Pi(A){qF=uF();}String get bB=>new String.fromCharCodes(qF);Uint8List Hj(){Ij=qF.length;Jj();Kj(qF);return Lj;}String toString()=>"OctetString(${bB})";}class yK{Uint8List Rj;yK(this.Rj);int Sj=0;bool hasNext(){return Sj<Rj.length;}HB EY(){int A=Rj[Sj];bool D=(0xC0&A)==0;bool G=(0x40&A)!=0;int H=Rj.length-Sj;var C=new Uint8List.view(Rj.buffer,Sj+Rj.offsetInBytes,H);HB B=null;if(D)B=Tj(A,C);else if(G){if((A&GI)!=0)B=new GB.Ki(C);else throw new nG("Parser for tag ${A} not implemented yet");}else{B=new HB.Pi(C);}Sj=Sj+B.kY;return B;}HB Tj(int B,Uint8List A){switch (B){case GI:return new GB.Ki(A);case eP:return new SB.Oi(A);case dP:case FZ:return new eD.Hi(A);case iP:return new xF.Ii(A);case CZ:return new bP.Ji(A);case IZ:return new aP.Fi(A);case EZ:return new cP.Li(A);case fP:return new ZP.Gi(A);case GZ:return new gP.Mi(A);case HZ:return new hP.Ni(A);default:throw new nG("Parser for tag ${B} not implemented yet");}}}class gP extends HB{String bB;gP.Mi(Uint8List A):super.Pi(A){var B=uF();bB=KO.decode(B);}Uint8List Hj(){var A=KO.encode(bB);Ij=A.length;Jj();Kj(A);return Lj;}String toString()=>"PrintableString(${bB})";}class GB extends HB{List<HB> i=new List();GB.Ki(Uint8List A):super.Pi(A){if((tag&0x30)==0)throw new nG("The tag ${tag} does not look like a sequence type");Uj();}GB({int tag: GI}):super(tag:tag);add(HB A){i.add(A);}Uint8List Hj(){Ij=Vj();super.Jj();var A=Nj;i.forEach((C){var B=C.MD;MD.setRange(A,A+B.length,B);A+= B.length;});return Lj;}int Vj(){int A=0;i.forEach((B){A+= B.Hj().length;});return A;}Uj(){var A=new yK(uF());while(A.hasNext()){i.add(A.EY());}}String toString(){var A=new StringBuffer("Seq[");i.forEach((B){A.write(B.toString());A.write(" ");});A.write("]");return A.toString();}}class xF extends HB{Set<HB> i=new Set<HB>();xF.Ii(Uint8List A):super.Pi(A){if((tag&0x30)==0)throw new nG("The tag ${tag} does not look like a set type");Wj();}xF({int tag: iP}):super(tag:tag);add(HB A){i.add(A);}Uint8List Hj(){Ij=Vj();super.Jj();var A=Nj;i.forEach((C){var B=C.MD;MD.setRange(A,A+B.length,B);A+= B.length;});return Lj;}int Vj(){int A=0;i.forEach((B){B.Hj();A+= B.MD.length;});return A;}Wj(){var A=new yK(uF());while(A.hasNext()){i.add(A.EY());}}String toString(){var A=new StringBuffer("Set[");i.forEach((B){A.write(B.toString());A.write(" ");});A.write("]");return A.toString();}}class hP extends HB{DateTime VO;hP.Ni(Uint8List B):super.Pi(B){var C=uF();var A=KO.decode(C);var D=int.parse(A.substring(0,2));if(D>75)A="19"+A;else A="20"+A;A=A.substring(0,8)+"T"+A.substring(8);VO=DateTime.parse(A);}Uint8List Hj(){var A=VO.toUtc();var C=A.year.toString().substring(2).padLeft(2,"0");var D=A.month.toString().padLeft(2,"0");var G=A.day.toString().padLeft(2,"0");var H=A.hour.toString().padLeft(2,"0");var I=A.minute.toString().padLeft(2,"0");var K=A.second.toString().padLeft(2,"0");var L="${C}${D}${G}${H}${I}${K}Z";var B=new List<int>();B.addAll(KO.encode(L));Ij=B.length;Jj();Kj(B);return Lj;}String toString()=>"UtcTime(${VO})";}class AZ{static String DZ(List<int> C){StringBuffer A=new StringBuffer("[");bool B=false;C.forEach((D){B?A.write(", "):B=true;A.write("0x${D.toRadixString(16)}");});A.write("]");return A.toString();}}abstract class JF{static bool OZ=(){if(0.0 is int){return true;}try {return 3.modInverse(7)==-1;}catch (A){return true;}return false;}();factory JF([A,B,C]){if(OZ){return new Y(A,B,C);}else{return new a(A,B,C);}}}class a implements JF{int data;a([A,B,C]){if(A!=null){if(A is int){data=A;}else if(A is num){data=A.toInt();}else if(A is List){this.vg(A);}else{this.cG(A,B);}}}void qH(a A){A.data=data;}void WK(int A){data=A;}void cG(String A,int B){data=int.parse(A,radix:B,onError:(C)=>0);}void vg(List B,[bool G=false]){if(B==null||B.length==0){data=0;return;}bool D=false;if(!G&&B[0]&0xFF>0x7F){D=true;}if(D){int A=0;for(int C in B){A=(A<<8)|(~((C&0xFF)-256));}data=~A;}else{int A=0;for(int C in B){A=(A<<8)|(C&0xFF);}data=A;}}String toString([int A=10]){return data.toRadixString(A);}iG(){return new a(-data);}a abs(){return (data<0)?this.iG():this.jF();}int compareTo(A){if(A is num){return data.compareTo(A);}if(A is a){return data.compareTo(A.data);}return 0;}int BY(A){var C=1,B;if(A is num)A=A.toInt();if((B=A>>16)!=0){A=B;C+= 16;}if((B=A>>8)!=0){A=B;C+= 8;}if((B=A>>4)!=0){A=B;C+= 4;}if((B=A>>2)!=0){A=B;C+= 2;}if((B=A>>1)!=0){A=B;C+= 1;}return C;}void uH(int A,B){B.data=data<<A;}void CE(int A,B){B.data=data>>A;}void dB(A,B){B.data=data-A.data;}void AY(A,B){B.data=data*A.data;}bG(a A,a B,a C){B.data=data~/A.data;C.data=data%A.data;}zX(A){return new a(data%A.data);}isEven(){return data.isEven;}isOdd(){return data.isOdd;}jF(){return new a(this.data);}int VC(){return data;}int dD(){return data.sign;}String jY([int A=10]){return data.toRadixString(A);}void TX(A,B){data=int.parse(A,radix:B,onError:(C)=>0);}List<int> LP(){String G;bool O=false;if(data<0){G=(~data).toRadixString(16);O=true;}else{G=data.toRadixString(16);}int D=0;int L=G.length;int I=(L+1)~/2;int K=0;List A;if(O){if(L&1==1){D=-1;}int B=~int.parse(G.substring(0,D+2),radix:16);if(B<-128)B+= 256;if(B>=0){K=1;A=new List<int>(I+1);A[0]=-1;A[1]=B;}else{A=new List<int>(I);A[0]=B;}for(int C=1;C<I; ++C){int H=~int.parse(G.substring(D+(C<<1),D+(C<<1)+2),radix:16);if(H<-128)H+= 256;A[C+K]=H;}}else{if(L&1==1){D=-1;}int B=int.parse(G.substring(0,D+2),radix:16);if(B>127)B-= 256;if(B<0){K=1;A=new List<int>(I+1);A[0]=0;A[1]=B;}else{A=new List<int>(I);A[0]=B;}for(int C=1;C<I; ++C){int H=int.parse(G.substring(D+(C<<1),D+(C<<1)+2),radix:16);if(H>127)H-= 256;A[C+K]=H;}}return A;}bool TC(a A){return this.compareTo(A)==0?true:false;}void JK(a A,Function B,a C){C.data=B(data,A.data);}HY(A,B){return A&B;}oH(A){return new a(data&A.data);}IY(A,B){return A|B;}lE(A){return new a(data|A.data);}JY(A,B){return A^B;}RP(A){return new a(data^A.data);}xH(){return new a(~data);}BP(int A){return new a(data<<A);}CP(int A){return new a(data>>A);}nH(A,B){B.data=data+A.data;}a add(A){return new a(data+A.data);}a subtract(A){return new a(data-A.data);}a qO(A){return new a(data*A.data);}a rH(A){return new a(data~/A.data);}a remainder(a A){return new a(data.remainder(A.data));}UO(A){data*= A;}TO(A,B){if(B==0){data+= A;}else{throw 'dAddOffset(${A},${B}) not implemented';}}a modInverse(a A){return new a(data.modInverse(A.data));}a operator+(a A)=>add(A);a operator-(a A)=>subtract(A);a operator*(a A)=>qO(A);a operator%(a A)=>zX(A);a operator/(a A)=>rH(A);a operator~/(a A)=>rH(A);a operator-()=>this.iG();bool operator<(a A)=>compareTo(A)<0?true:false;bool operator<=(a A)=>compareTo(A)<=0?true:false;bool operator>(a A)=>compareTo(A)>0?true:false;bool operator>=(a A)=>compareTo(A)>=0?true:false;bool operator==(A)=>compareTo(A)==0?true:false;a operator&(a A)=>oH(A);a operator|(a A)=>lE(A);a operator^(a A)=>RP(A);a operator~()=>xH();a operator<<(int A)=>BP(A);a operator>>(int A)=>CP(A);}class HI<BC>{operator[](var A){return data[A];}operator[]=(var A,var B){if(A>data.length-1){data.length=A+1;}return data[A]=B;}List<BC> data=new List<BC>();}class Y implements JF{static int zF;static int BB;static int bC;static int KF;static int II;static int kP;static int zK;static int AL;static Y lB(){return new Y(null,null,null);}static Y MF(int B){var A=lB();A.WK(B);return A;}static Y get IE=>MF(0);static Y get lP=>MF(1);static final List<int> mP=const[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];static int PZ;static int QZ=0xdeadbeefcafe;static bool RZ;HI<int> d;Function HK;static var nP="0123456789abcdefghijklmnopqrstuvwxyz";static Map NF;int Q;var e;Y([A,B,C]){TZ(28);HK=Xj;this.d=new HI<int>();if(A!=null){if(A is int){this.cG(A.toString(),10);}else if(A is num){this.cG(A.toInt().toString(),10);}else if(B==null&&A is!String){this.cG(A,256);}else{this.cG(A,B);}}}Xj(C,D,c,G,B,q){var H=this.d;var I=c.d;var K=D.toInt()&0x3fff,L=D.toInt()>>14;while( --q>=0){var A=H[C]&0x3fff;var O=H[C++ ]>>14;var X=L*A+O*K;A=K*A+((X&0x3fff)<<14)+I[G]+B;B=(A>>28)+(X>>14)+L*O;I[G++ ]=A&0xfffffff;}return B;}static SZ(int A){zF=A;BB=zF;bC=((1<<zF)-1);KF=(1<<zF);II=52;kP=pow(2,II);zK=II-zF;AL=2*zF-II;}static TZ(int A){if(NF!=null)return;NF=new Map();RZ=((QZ&0xffffff)==0xefcafe);UZ();PZ=(1<<26)~/mP[mP.length-1];SZ(A);}static UZ(){nP="0123456789abcdefghijklmnopqrstuvwxyz";NF=new Map();int B,A;B="0".codeUnitAt(0);for(A=0;A<=9; ++A)NF[B++ ]=A;B="a".codeUnitAt(0);for(A=10;A<36; ++A)NF[B++ ]=A;B="A".codeUnitAt(0);for(A=10;A<36; ++A)NF[B++ ]=A;}Yj(A){return nP[A];}Zj(B,C){var A=NF[B.codeUnitAt(C)];return (A==null)?-1:A;}void qH(Y B){var C=this.d;var D=B.d;for(var A=this.Q-1;A>=0; --A)D[A]=C[A];B.Q=this.Q;B.e=this.e;}void WK(int A){var B=this.d;this.Q=1;this.e=(A<0)?-1:0;if(A>0){B[0]=A;}else if(A<-1){B[0]=A+KF;}else{this.Q=0;}}void cG(D,int C){var G=this.d;var B;if(C==16){B=4;}else if(C==8){B=3;}else if(C==256){B=8;}else if(C==2){B=1;}else if(C==32){B=5;}else if(C==4){B=2;}else{this.TX(D,C);return;}this.Q=0;this.e=0;var I=D.length,K=false,A=0;while( --I>=0){var H=(B==8)?D[I]&0xff:Zj(D,I);if(H<0){if(D[I]=="-")K=true;continue;}K=false;if(A==0){G[this.Q++ ]=H;}else if(A+B>BB){G[this.Q-1]|=(H&((1<<(BB-A))-1))<<A;G[this.Q++ ]=(H>>(BB-A));}else{G[this.Q-1]|=H<<A;}A+= B;if(A>=BB)A-= BB;}if(B==8&&(D[0]&0x80)!=0){this.e=-1;if(A>0)G[this.Q-1]|=((1<<(BB-A))-1)<<A;}this.clamp();if(K)Y.IE.dB(this,this);}String toString([int D]){var H=this.d;if(this.e<0){return "-${this.iG().toString(D)}";}var A;if(D==16){A=4;}else if(D==8){A=3;}else if(D==2){A=1;}else if(D==32){A=5;}else if(D==4){A=2;}else{return this.jY(D);}var L=(1<<A)-1,G,I=false,K="",C=this.Q;var B=BB-(C*BB)%A;if(C-- >0){if(B<BB&&(G=H[C]>>B)>0){I=true;K=Yj(G);}while(C>=0){if(B<A){G=(H[C]&((1<<B)-1))<<(A-B);G|= H[ --C]>>(B+= BB-A);}else{G=(H[C].toInt()>>(B-= A.toInt()).toInt())&L.toInt();if(B<=0){B+= BB; --C;}}if(G>0)I=true;if(I)K="${K}${Yj(G)}";}}return I?K:"0";}iG(){var A=lB();Y.IE.dB(this,A);return A;}Y abs(){return (this.e<0)?this.iG():this;}int compareTo(B){if(B is num){B=new Y(B);}var D=this.d;var G=B.d;var A=this.e-B.e;if(A!=0)return A;var C=this.Q;A=C-B.Q;if(A!=0)return A;while( --C>=0)if((A=D[C]-G[C])!=0)return A;return 0;}int BY(A){var C=1,B;if(A is num)A=A.toInt();if((B=A>>16)!=0){A=B;C+= 16;}if((B=A>>8)!=0){A=B;C+= 8;}if((B=A>>4)!=0){A=B;C+= 4;}if((B=A>>2)!=0){A=B;C+= 2;}if((B=A>>1)!=0){A=B;C+= 1;}return C;}void aO(B,C){var G=this.d;var D=C.d;var A;for(A=this.Q-1;A>=0; --A)D[A+B]=G[A];for(A=B-1;A>=0; --A)D[A]=0;C.Q=this.Q+B;C.e=this.e;}void jg(B,C){var D=this.d;var G=C.d;for(var A=B;A<this.Q; ++A)G[A-B]=D[A];C.Q=wF.max(this.Q-B,0);C.e=this.e;}void uH(I,B){var K=this.d;var D=B.d;var G=I%BB;var L=BB-G;var O=(1<<L)-1;int C=I~/BB;var H=(this.e<<G)&bC;var A;for(A=this.Q-1;A>=0; --A){D[A+C+1]=(K[A]>>L)|H;H=(K[A]&O)<<G;}for(A=C-1;A>=0; --A)D[A]=0;D[C]=H;B.Q=this.Q+C+1;B.e=this.e;B.clamp();}void CE(I,C){var H=this.d;var G=C.d;C.e=this.e;var A=I~/BB;if(A>=this.Q){C.Q=0;return;}var D=I%BB;var K=BB-D;var L=(1<<D)-1;G[0]=H[A]>>D;for(var B=A+1;B<this.Q; ++B){G[B-A-1]|=(H[B]&L)<<K;G[B-A]=H[B]>>D;}if(D>0)G[this.Q-A-1]|=(this.e&L)<<K;C.Q=this.Q-A;C.clamp();}void clamp(){var A=this.d;var B=this.e&bC;while(this.Q>0&&A[this.Q-1]==B){ --this.Q;}}void dB(C,G){var H=this.d;var D=G.d;var I=C.d;int B=0;int A=0;int K=wF.min(C.Q,this.Q);while(B<K){A+= (H[B].toInt()-I[B].toInt()).toInt();D[B++ ]=A&bC;A>>= BB;if(A==4294967295){A=-1;}}if(C.Q<this.Q){A-= C.e;while(B<this.Q){A+= H[B];D[B++ ]=A&bC;A>>= BB;if(A==4294967295){A=-1;}}A+= this.e;}else{A+= this.e;while(B<C.Q){A-= I[B];D[B++ ]=A&bC;A>>= BB;if(A==4294967295){A=-1;}}A-= C.e;}G.e=(A<0)?-1:0;if(A<-1){D[B++ ]=KF+A;}else if(A>0){D[B++ ]=A;}G.Q=B;G.clamp();}bool aj=true;void AY(G,B){var K=this.d;var H=B.d;Y C=this.abs();Y D=G.abs();var I=D.d;var A=C.Q;B.Q=A+D.Q;while( --A>=0)H[A]=0;for(A=0;A<D.Q; ++A)H[A+C.Q]=C.HK(0,I[A],B,A,0,C.Q);B.e=0;B.clamp();if(this.e!=G.e){Y.IE.dB(B,B);}}bG(Y AC,D,Y A){var H=AC.abs();if(H.Q<=0)return;var X=this.abs();if(X.Q<H.Q){if(D!=null)D.WK(0);if(A!=null)this.qH(A);return;}if(A==null)A=lB();var B=lB(),WC=this.e,HE=AC.e;var pE=H.d;var L=BB-BY(pE[H.Q-1]);if(L>0){H.uH(L,B);X.uH(L,A);}else{H.qH(B);X.qH(A);}var C=B.Q;var c=B.d;var q=c[C-1];if(q==0)return;var aC=q*(1<<zK)+((C>1)?c[C-2]>>AL:0);var qE=kP/aC,lG=(1<<zK)/aC,uK=1<<AL;var I=A.Q,O=I-C;Y G=(D==null)?lB():D;B.aO(O,G);var K=A.d;if(A.compareTo(G)>=0){K[A.Q++ ]=1;A.dB(G,A);}Y.lP.aO(C,G);G.dB(B,B);while(B.Q<C)c[B.Q++ ]=0;while( --O>=0){var KB=(K[ --I]==q)?bC:(K[I]*qE+(K[I-1]+uK)*lG).floor();if((K[I]+=B.HK(0,KB,A,O,0,C))<KB){B.aO(O,G);A.dB(G,A);while(K[I]< --KB)A.dB(G,A);}}if(D!=null){A.jg(C,D);if(WC!=HE)Y.IE.dB(D,D);}A.Q=C;A.clamp();if(L>0)A.CE(L,A);if(WC<0)Y.IE.dB(A,A);}zX(B){var A=lB();this.abs().bG(B,null,A);if(this.e<0&&A.compareTo(Y.IE)>0)B.dB(A,A);return A;}isEven(){var A=this.d;return ((this.Q>0)?(A[0]&1):this.e)==0;}isOdd()=>!isEven();jF(){var A=lB();this.qH(A);return A;}int VC(){var A=this.d;if(this.e<0){if(this.Q==1){return A[0]-KF;}else if(this.Q==0)return -1;}else if(this.Q==1){return A[0];}else if(this.Q==0)return 0;return ((A[1]&((1<<(32-BB))-1))<<BB)|A[0];}int rW(A){return (LN2*BB/log(A)).floor().toInt();}int dD(){var A=this.d;if(this.e<0){return -1;}else if(this.Q<=0||(this.Q==1&&A[0]<=0)){return 0;}else{return 1;}}String jY([int A=10]){if(A==null)A=10;if(this.dD()==0||A<2||A>36)return "0";var I=this.rW(A);int G=pow(A,I);var H=MF(G),B=lB(),C=lB(),D="";this.bG(H,B,C);while(B.dD()>0){D="${(G+C.VC()).toInt().toRadixString(A).substring(1)}${D}";B.bG(H,B,C);}return "${C.VC().toRadixString(A)}${D}";}void TX(C,A){this.WK(0);if(A==null)A=10;var H=this.rW(A);num L=pow(A,H);bool I=false;int D=0,B=0;for(var G=0;G<C.length; ++G){var K=Zj(C,G);if(K<0){if(C is String){if(C[0]=="-"&&this.dD()==0){I=true;}}continue;}B=A*B+K;if( ++D>=H){this.UO(L);this.TO(B,0);D=0;B=0;}}if(D>0){this.UO(pow(A,D));if(B!=0){this.TO(B,0);}}if(I){Y.IE.dB(this,this);}}List<int> LP(){var G=this.d;var C=this.Q;HI<int> H=new HI<int>();H[0]=this.e;var A=BB-(C*BB)%8,B,D=0;if(C-- >0){if(A<BB&&(B=G[C]>>A)!=(this.e&bC)>>A){H[D++ ]=B|(this.e<<(BB-A));}while(C>=0){if(A<8){B=(G[C]&((1<<A)-1))<<(8-A);B|= G[ --C]>>(A+= BB-8);}else{B=(G[C]>>(A-= 8))&0xff;if(A<=0){A+= BB; --C;}}if((B&0x80)!=0)B|= -256;if(D==0&&(this.e&0x80)!=(B&0x80)) ++D;if(D>0||B!=this.e)H[D++ ]=B;}}return H.data;}bool TC(Y A){return this.compareTo(A)==0?true:false;}void JK(Y B,Function D,Y C){var K=this.d;var L=B.d;var H=C.d;var A,G,I=wF.min(B.Q,this.Q);for(A=0;A<I; ++A)H[A]=D(K[A],L[A]);if(B.Q<this.Q){G=B.e&bC;for(A=I;A<this.Q; ++A)H[A]=D(K[A],G);C.Q=this.Q;}else{G=this.e&bC;for(A=I;A<B.Q; ++A)H[A]=D(G,L[A]);C.Q=B.Q;}C.e=D(this.e,B.e);C.clamp();}HY(A,B){return A&B;}oH(B){var A=lB();this.JK(B,HY,A);return A;}IY(A,B){return A|B;}lE(B){var A=lB();this.JK(B,IY,A);return A;}JY(A,B){return A^B;}RP(B){var A=lB();this.JK(B,JY,A);return A;}xH(){var C=this.d;var A=lB();var D=A.d;for(var B=0;B<this.Q; ++B){D[B]=bC&~C[B];}A.Q=this.Q;A.e=~this.e;return A;}BP(A){var B=lB();if(A<0){this.CE(-A,B);}else{this.uH(A,B);}return B;}CP(A){var B=lB();if(A<0){this.uH(-A,B);}else{this.CE(A,B);}return B;}nH(C,G){var H=this.d;var I=C.d;var D=G.d;var B=0,A=0,K=wF.min(C.Q,this.Q);while(B<K){A+= H[B]+I[B];D[B++ ]=A&bC;A>>= BB;}if(C.Q<this.Q){A+= C.e;while(B<this.Q){A+= H[B];D[B++ ]=A&bC;A>>= BB;}A+= this.e;}else{A+= this.e;while(B<C.Q){A+= I[B];D[B++ ]=A&bC;A>>= BB;}A+= C.e;}G.e=(A<0)?-1:0;if(A>0){D[B++ ]=A;}else if(A<-1)D[B++ ]=KF+A;G.Q=B;G.clamp();}Y add(B){var A=lB();this.nH(B,A);return A;}Y subtract(B){var A=lB();this.dB(B,A);return A;}Y qO(B){var A=lB();this.AY(B,A);return A;}Y rH(B){var A=lB();this.bG(B,A,null);return A;}Y remainder(Y B){Y A=lB();this.bG(B,null,A);return (A.dD()>=0)?A:(A+B);}UO(A){var B=this.d;B[this.Q]=this.HK(0,A-1,this,0,0,this.Q); ++this.Q;this.clamp();}TO(C,A){var B=this.d;while(this.Q<=A)B[this.Q++ ]=0;B[A]+=C;while(B[A]>=KF){B[A]-=KF;if( ++A>=this.Q)B[this.Q++ ]=0; ++B[A];}}Y modInverse(Y B){var K=B.isEven();if((this.isEven()&&K)||B.dD()==0)return Y.IE;var G=B.jF(),C=this.jF();if(C.dD()<0)C=-C;var H=MF(1),D=MF(0),I=MF(0),A=MF(1);while(G.dD()!=0){while(G.isEven()){G.CE(1,G);if(K){if(!H.isEven()||!D.isEven()){H.nH(this,H);D.dB(B,D);}H.CE(1,H);}else if(!D.isEven())D.dB(B,D);D.CE(1,D);}while(C.isEven()){C.CE(1,C);if(K){if(!I.isEven()||!A.isEven()){I.nH(this,I);A.dB(B,A);}I.CE(1,I);}else if(!A.isEven())A.dB(B,A);A.CE(1,A);}if(G.compareTo(C)>=0){G.dB(C,G);if(K)H.dB(I,H);D.dB(A,D);}else{C.dB(G,C);if(K)I.dB(H,I);A.dB(D,A);}}if(C.compareTo(Y.lP)!=0)return Y.IE;if(A.compareTo(B)>=0)return bj(A.subtract(B),B);if(A.dD()<0)A.nH(B,A);else return bj(A,B);if(A.dD()<0)return bj(A.add(B),B);else return bj(A,B);}bj(A,B)=>(dD()<0)?(B-A):A;Y operator+(Y A)=>add(A);Y operator-(Y A)=>subtract(A);Y operator*(Y A)=>qO(A);Y operator%(Y A)=>remainder(A);Y operator/(Y A)=>rH(A);Y operator~/(Y A)=>rH(A);Y operator-()=>this.iG();bool operator<(Y A)=>compareTo(A)<0?true:false;bool operator<=(Y A)=>compareTo(A)<=0?true:false;bool operator>(Y A)=>compareTo(A)>0?true:false;bool operator>=(Y A)=>compareTo(A)>=0?true:false;bool operator==(A)=>compareTo(A)==0?true:false;Y operator&(Y A)=>oH(A);Y operator|(Y A)=>lE(A);Y operator^(Y A)=>RP(A);Y operator~()=>xH();Y operator<<(int A)=>BP(A);Y operator>>(int A)=>CP(A);}const iC=0x2e;const DD=0x2f;const HM=0x3a;const TT=0x41;const UT=0x5a;const VT=0x61;const WT=0x7a;const GG=0x5c;const int oP=0x09;const int BL=0x0A;const int pP=0x0D;const int VZ=0x20;const int CL=0x2B;const int DL=0x2D;const int JI=0x2E;const int rE=0x30;const int KI=0x39;const int WZ=0x46;const int XZ=0x4E;const int YZ=0x54;const int EL=0x61;const int qP=0x66;const int ZZ=0x6E;const int aZ=0x6F;const int bZ=0x74;const int cZ=0x78;const int dZ=0x7E;abstract class pS{}abstract class Yb{}class dI extends eb{static const qS=16;bool cj;List<List<int>> dj;int ej;int fj;int gj;int hj;int ij;int get blockSize=>qS;void reset(){ej=0;fj=gj=hj=ij=0;cj=false;dj=null;}void init(bool K,pS L){var H=(L as xG).key;int B=(H.lengthInBytes/4).floor();if(((B!=4)&&(B!=6)&&(B!=8))||((B*4)!=H.lengthInBytes)){throw new ArgumentError("Key length must be 128/192/256 bits");}this.cj=K;ej=B+6;dj=new List.generate(ej+1,(int A)=>new List<int>(4));var O=new ByteData.view((L as xG).key.buffer);for(var A=0,I=0;A<H.lengthInBytes;A+= 4,I++ ){var C=zG(O,A,Endianness.LITTLE_ENDIAN);dj[I>>2][I&3]=C;}int X=(ej+1)<<2;for(int A=B;A<X;A++ ){int D=dj[(A-1)>>2][(A-1)&3].toInt();if((A%B)==0){D=rS(eI(D,8))^db[((A/B)-1).floor()];}else if((B>6)&&((A%B)==4)){D=rS(D);}var C=dj[(A-B)>>2][(A-B)&3]^D;dj[A>>2][A&3]=C;}if(!K){for(var G=1;G<ej;G++ ){for(var A=0;A<4;A++ ){var C=cb(dj[G][A].toInt());dj[G][A]=C;}}}}int NY(Uint8List C,int A,Uint8List D,int B){if(dj==null){throw new StateError("AES engine not initialised");}if((A+(32/2))>C.lengthInBytes){throw new ArgumentError("Input buffer too short");}if((B+(32/2))>D.lengthInBytes){throw new ArgumentError("Output buffer too short");}var G=new ByteData.view(C.buffer);var H=new ByteData.view(D.buffer);if(cj){jj(G,A);kj(dj);lj(H,B);}else{jj(G,A);mj(dj);lj(H,B);}return qS;}void kj(List<List<int>> B){int A,C,D,G,H;fj^= B[0][0].toInt();gj^= B[0][1].toInt();hj^= B[0][2].toInt();ij^= B[0][3].toInt();A=1;while(A<ej-1){C=sC[fj&255]^tC[(gj>>8)&255]^uC[(hj>>16)&255]^vC[(ij>>24)&255]^B[A][0].toInt();D=sC[gj&255]^tC[(hj>>8)&255]^uC[(ij>>16)&255]^vC[(fj>>24)&255]^B[A][1].toInt();G=sC[hj&255]^tC[(ij>>8)&255]^uC[(fj>>16)&255]^vC[(gj>>24)&255]^B[A][2].toInt();H=sC[ij&255]^tC[(fj>>8)&255]^uC[(gj>>16)&255]^vC[(hj>>24)&255]^B[A][3].toInt();A++ ;fj=sC[C&255]^tC[(D>>8)&255]^uC[(G>>16)&255]^vC[(H>>24)&255]^B[A][0].toInt();gj=sC[D&255]^tC[(G>>8)&255]^uC[(H>>16)&255]^vC[(C>>24)&255]^B[A][1].toInt();hj=sC[G&255]^tC[(H>>8)&255]^uC[(C>>16)&255]^vC[(D>>24)&255]^B[A][2].toInt();ij=sC[H&255]^tC[(C>>8)&255]^uC[(D>>16)&255]^vC[(G>>24)&255]^B[A][3].toInt();A++ ;}C=sC[fj&255]^tC[(gj>>8)&255]^uC[(hj>>16)&255]^vC[(ij>>24)&255]^B[A][0].toInt();D=sC[gj&255]^tC[(hj>>8)&255]^uC[(ij>>16)&255]^vC[(fj>>24)&255]^B[A][1].toInt();G=sC[hj&255]^tC[(ij>>8)&255]^uC[(fj>>16)&255]^vC[(gj>>24)&255]^B[A][2].toInt();H=sC[ij&255]^tC[(fj>>8)&255]^uC[(gj>>16)&255]^vC[(hj>>24)&255]^B[A][3].toInt();A++ ;fj=(oB[C&255]&255)^((oB[(D>>8)&255]&255)<<8)^((oB[(G>>16)&255]&255)<<16)^(oB[(H>>24)&255]<<24)^B[A][0].toInt();gj=(oB[D&255]&255)^((oB[(G>>8)&255]&255)<<8)^((oB[(H>>16)&255]&255)<<16)^(oB[(C>>24)&255]<<24)^B[A][1].toInt();hj=(oB[G&255]&255)^((oB[(H>>8)&255]&255)<<8)^((oB[(C>>16)&255]&255)<<16)^(oB[(D>>24)&255]<<24)^B[A][2].toInt();ij=(oB[H&255]&255)^((oB[(C>>8)&255]&255)<<8)^((oB[(D>>16)&255]&255)<<16)^(oB[(G>>24)&255]<<24)^B[A][3].toInt();}void mj(List<List<int>> A){int B,C,D,G,H;fj^= A[ej][0].toInt();gj^= A[ej][1].toInt();hj^= A[ej][2].toInt();ij^= A[ej][3].toInt();B=ej-1;while(B>1){C=wC[fj&255]^xC[(ij>>8)&255]^yC[(hj>>16)&255]^zC[(gj>>24)&255]^A[B][0].toInt();D=wC[gj&255]^xC[(fj>>8)&255]^yC[(ij>>16)&255]^zC[(hj>>24)&255]^A[B][1].toInt();G=wC[hj&255]^xC[(gj>>8)&255]^yC[(fj>>16)&255]^zC[(ij>>24)&255]^A[B][2].toInt();H=wC[ij&255]^xC[(hj>>8)&255]^yC[(gj>>16)&255]^zC[(fj>>24)&255]^A[B][3].toInt();B-- ;fj=wC[C&255]^xC[(H>>8)&255]^yC[(G>>16)&255]^zC[(D>>24)&255]^A[B][0].toInt();gj=wC[D&255]^xC[(C>>8)&255]^yC[(H>>16)&255]^zC[(G>>24)&255]^A[B][1].toInt();hj=wC[G&255]^xC[(D>>8)&255]^yC[(C>>16)&255]^zC[(H>>24)&255]^A[B][2].toInt();ij=wC[H&255]^xC[(G>>8)&255]^yC[(D>>16)&255]^zC[(C>>24)&255]^A[B][3].toInt();B-- ;}C=wC[fj&255]^xC[(ij>>8)&255]^yC[(hj>>16)&255]^zC[(gj>>24)&255]^A[B][0].toInt();D=wC[gj&255]^xC[(fj>>8)&255]^yC[(ij>>16)&255]^zC[(hj>>24)&255]^A[B][1].toInt();G=wC[hj&255]^xC[(gj>>8)&255]^yC[(fj>>16)&255]^zC[(ij>>24)&255]^A[B][2].toInt();H=wC[ij&255]^xC[(hj>>8)&255]^yC[(gj>>16)&255]^zC[(fj>>24)&255]^A[B][3].toInt();fj=(NC[C&255]&255)^((NC[(H>>8)&255]&255)<<8)^((NC[(G>>16)&255]&255)<<16)^(NC[(D>>24)&255]<<24)^A[0][0].toInt();gj=(NC[D&255]&255)^((NC[(C>>8)&255]&255)<<8)^((NC[(H>>16)&255]&255)<<16)^(NC[(G>>24)&255]<<24)^A[0][1].toInt();hj=(NC[G&255]&255)^((NC[(D>>8)&255]&255)<<8)^((NC[(C>>16)&255]&255)<<16)^(NC[(H>>24)&255]<<24)^A[0][2].toInt();ij=(NC[H&255]&255)^((NC[(G>>8)&255]&255)<<8)^((NC[(D>>16)&255]&255)<<16)^(NC[(C>>24)&255]<<24)^A[0][3].toInt();}void jj(ByteData A,int B){fj=zG(A,B,Endianness.LITTLE_ENDIAN);gj=zG(A,B+4,Endianness.LITTLE_ENDIAN);hj=zG(A,B+8,Endianness.LITTLE_ENDIAN);ij=zG(A,B+12,Endianness.LITTLE_ENDIAN);}void lj(ByteData A,int B){fI(fj,A,B,Endianness.LITTLE_ENDIAN);fI(gj,A,B+4,Endianness.LITTLE_ENDIAN);fI(hj,A,B+8,Endianness.LITTLE_ENDIAN);fI(ij,A,B+12,Endianness.LITTLE_ENDIAN);}}int eI(int A,int B)=>ib(A,B);const int Zb=0x80808080;const int ab=0x7f7f7f7f;const int bb=0x0000001b;int lL(int A){var B=hb((A&Zb),7);return (((A&ab)<<1)^B*bb);}int cb(int D){int A=lL(D);int B=lL(A);int G=lL(B);int C=D^G;return A^B^G^eI(A^C,8)^eI(B^C,16)^eI(C,24);}int rS(int A){return (oB[A&255]&255|((oB[(A>>8)&255]&255)<<8)|((oB[(A>>16)&255]&255)<<16)|oB[(A>>24)&255]<<24);}final oB=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];final NC=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];final db=[0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91];final sC=[0xa56363c6,0x847c7cf8,0x997777ee,0x8d7b7bf6,0x0df2f2ff,0xbd6b6bd6,0xb16f6fde,0x54c5c591,0x50303060,0x03010102,0xa96767ce,0x7d2b2b56,0x19fefee7,0x62d7d7b5,0xe6abab4d,0x9a7676ec,0x45caca8f,0x9d82821f,0x40c9c989,0x877d7dfa,0x15fafaef,0xeb5959b2,0xc947478e,0x0bf0f0fb,0xecadad41,0x67d4d4b3,0xfda2a25f,0xeaafaf45,0xbf9c9c23,0xf7a4a453,0x967272e4,0x5bc0c09b,0xc2b7b775,0x1cfdfde1,0xae93933d,0x6a26264c,0x5a36366c,0x413f3f7e,0x02f7f7f5,0x4fcccc83,0x5c343468,0xf4a5a551,0x34e5e5d1,0x08f1f1f9,0x937171e2,0x73d8d8ab,0x53313162,0x3f15152a,0x0c040408,0x52c7c795,0x65232346,0x5ec3c39d,0x28181830,0xa1969637,0x0f05050a,0xb59a9a2f,0x0907070e,0x36121224,0x9b80801b,0x3de2e2df,0x26ebebcd,0x6927274e,0xcdb2b27f,0x9f7575ea,0x1b090912,0x9e83831d,0x742c2c58,0x2e1a1a34,0x2d1b1b36,0xb26e6edc,0xee5a5ab4,0xfba0a05b,0xf65252a4,0x4d3b3b76,0x61d6d6b7,0xceb3b37d,0x7b292952,0x3ee3e3dd,0x712f2f5e,0x97848413,0xf55353a6,0x68d1d1b9,0x00000000,0x2cededc1,0x60202040,0x1ffcfce3,0xc8b1b179,0xed5b5bb6,0xbe6a6ad4,0x46cbcb8d,0xd9bebe67,0x4b393972,0xde4a4a94,0xd44c4c98,0xe85858b0,0x4acfcf85,0x6bd0d0bb,0x2aefefc5,0xe5aaaa4f,0x16fbfbed,0xc5434386,0xd74d4d9a,0x55333366,0x94858511,0xcf45458a,0x10f9f9e9,0x06020204,0x817f7ffe,0xf05050a0,0x443c3c78,0xba9f9f25,0xe3a8a84b,0xf35151a2,0xfea3a35d,0xc0404080,0x8a8f8f05,0xad92923f,0xbc9d9d21,0x48383870,0x04f5f5f1,0xdfbcbc63,0xc1b6b677,0x75dadaaf,0x63212142,0x30101020,0x1affffe5,0x0ef3f3fd,0x6dd2d2bf,0x4ccdcd81,0x140c0c18,0x35131326,0x2fececc3,0xe15f5fbe,0xa2979735,0xcc444488,0x3917172e,0x57c4c493,0xf2a7a755,0x827e7efc,0x473d3d7a,0xac6464c8,0xe75d5dba,0x2b191932,0x957373e6,0xa06060c0,0x98818119,0xd14f4f9e,0x7fdcdca3,0x66222244,0x7e2a2a54,0xab90903b,0x8388880b,0xca46468c,0x29eeeec7,0xd3b8b86b,0x3c141428,0x79dedea7,0xe25e5ebc,0x1d0b0b16,0x76dbdbad,0x3be0e0db,0x56323264,0x4e3a3a74,0x1e0a0a14,0xdb494992,0x0a06060c,0x6c242448,0xe45c5cb8,0x5dc2c29f,0x6ed3d3bd,0xefacac43,0xa66262c4,0xa8919139,0xa4959531,0x37e4e4d3,0x8b7979f2,0x32e7e7d5,0x43c8c88b,0x5937376e,0xb76d6dda,0x8c8d8d01,0x64d5d5b1,0xd24e4e9c,0xe0a9a949,0xb46c6cd8,0xfa5656ac,0x07f4f4f3,0x25eaeacf,0xaf6565ca,0x8e7a7af4,0xe9aeae47,0x18080810,0xd5baba6f,0x887878f0,0x6f25254a,0x722e2e5c,0x241c1c38,0xf1a6a657,0xc7b4b473,0x51c6c697,0x23e8e8cb,0x7cdddda1,0x9c7474e8,0x211f1f3e,0xdd4b4b96,0xdcbdbd61,0x868b8b0d,0x858a8a0f,0x907070e0,0x423e3e7c,0xc4b5b571,0xaa6666cc,0xd8484890,0x05030306,0x01f6f6f7,0x120e0e1c,0xa36161c2,0x5f35356a,0xf95757ae,0xd0b9b969,0x91868617,0x58c1c199,0x271d1d3a,0xb99e9e27,0x38e1e1d9,0x13f8f8eb,0xb398982b,0x33111122,0xbb6969d2,0x70d9d9a9,0x898e8e07,0xa7949433,0xb69b9b2d,0x221e1e3c,0x92878715,0x20e9e9c9,0x49cece87,0xff5555aa,0x78282850,0x7adfdfa5,0x8f8c8c03,0xf8a1a159,0x80898909,0x170d0d1a,0xdabfbf65,0x31e6e6d7,0xc6424284,0xb86868d0,0xc3414182,0xb0999929,0x772d2d5a,0x110f0f1e,0xcbb0b07b,0xfc5454a8,0xd6bbbb6d,0x3a16162c];final tC=[0x6363c6a5,0x7c7cf884,0x7777ee99,0x7b7bf68d,0xf2f2ff0d,0x6b6bd6bd,0x6f6fdeb1,0xc5c59154,0x30306050,0x01010203,0x6767cea9,0x2b2b567d,0xfefee719,0xd7d7b562,0xabab4de6,0x7676ec9a,0xcaca8f45,0x82821f9d,0xc9c98940,0x7d7dfa87,0xfafaef15,0x5959b2eb,0x47478ec9,0xf0f0fb0b,0xadad41ec,0xd4d4b367,0xa2a25ffd,0xafaf45ea,0x9c9c23bf,0xa4a453f7,0x7272e496,0xc0c09b5b,0xb7b775c2,0xfdfde11c,0x93933dae,0x26264c6a,0x36366c5a,0x3f3f7e41,0xf7f7f502,0xcccc834f,0x3434685c,0xa5a551f4,0xe5e5d134,0xf1f1f908,0x7171e293,0xd8d8ab73,0x31316253,0x15152a3f,0x0404080c,0xc7c79552,0x23234665,0xc3c39d5e,0x18183028,0x969637a1,0x05050a0f,0x9a9a2fb5,0x07070e09,0x12122436,0x80801b9b,0xe2e2df3d,0xebebcd26,0x27274e69,0xb2b27fcd,0x7575ea9f,0x0909121b,0x83831d9e,0x2c2c5874,0x1a1a342e,0x1b1b362d,0x6e6edcb2,0x5a5ab4ee,0xa0a05bfb,0x5252a4f6,0x3b3b764d,0xd6d6b761,0xb3b37dce,0x2929527b,0xe3e3dd3e,0x2f2f5e71,0x84841397,0x5353a6f5,0xd1d1b968,0x00000000,0xededc12c,0x20204060,0xfcfce31f,0xb1b179c8,0x5b5bb6ed,0x6a6ad4be,0xcbcb8d46,0xbebe67d9,0x3939724b,0x4a4a94de,0x4c4c98d4,0x5858b0e8,0xcfcf854a,0xd0d0bb6b,0xefefc52a,0xaaaa4fe5,0xfbfbed16,0x434386c5,0x4d4d9ad7,0x33336655,0x85851194,0x45458acf,0xf9f9e910,0x02020406,0x7f7ffe81,0x5050a0f0,0x3c3c7844,0x9f9f25ba,0xa8a84be3,0x5151a2f3,0xa3a35dfe,0x404080c0,0x8f8f058a,0x92923fad,0x9d9d21bc,0x38387048,0xf5f5f104,0xbcbc63df,0xb6b677c1,0xdadaaf75,0x21214263,0x10102030,0xffffe51a,0xf3f3fd0e,0xd2d2bf6d,0xcdcd814c,0x0c0c1814,0x13132635,0xececc32f,0x5f5fbee1,0x979735a2,0x444488cc,0x17172e39,0xc4c49357,0xa7a755f2,0x7e7efc82,0x3d3d7a47,0x6464c8ac,0x5d5dbae7,0x1919322b,0x7373e695,0x6060c0a0,0x81811998,0x4f4f9ed1,0xdcdca37f,0x22224466,0x2a2a547e,0x90903bab,0x88880b83,0x46468cca,0xeeeec729,0xb8b86bd3,0x1414283c,0xdedea779,0x5e5ebce2,0x0b0b161d,0xdbdbad76,0xe0e0db3b,0x32326456,0x3a3a744e,0x0a0a141e,0x494992db,0x06060c0a,0x2424486c,0x5c5cb8e4,0xc2c29f5d,0xd3d3bd6e,0xacac43ef,0x6262c4a6,0x919139a8,0x959531a4,0xe4e4d337,0x7979f28b,0xe7e7d532,0xc8c88b43,0x37376e59,0x6d6ddab7,0x8d8d018c,0xd5d5b164,0x4e4e9cd2,0xa9a949e0,0x6c6cd8b4,0x5656acfa,0xf4f4f307,0xeaeacf25,0x6565caaf,0x7a7af48e,0xaeae47e9,0x08081018,0xbaba6fd5,0x7878f088,0x25254a6f,0x2e2e5c72,0x1c1c3824,0xa6a657f1,0xb4b473c7,0xc6c69751,0xe8e8cb23,0xdddda17c,0x7474e89c,0x1f1f3e21,0x4b4b96dd,0xbdbd61dc,0x8b8b0d86,0x8a8a0f85,0x7070e090,0x3e3e7c42,0xb5b571c4,0x6666ccaa,0x484890d8,0x03030605,0xf6f6f701,0x0e0e1c12,0x6161c2a3,0x35356a5f,0x5757aef9,0xb9b969d0,0x86861791,0xc1c19958,0x1d1d3a27,0x9e9e27b9,0xe1e1d938,0xf8f8eb13,0x98982bb3,0x11112233,0x6969d2bb,0xd9d9a970,0x8e8e0789,0x949433a7,0x9b9b2db6,0x1e1e3c22,0x87871592,0xe9e9c920,0xcece8749,0x5555aaff,0x28285078,0xdfdfa57a,0x8c8c038f,0xa1a159f8,0x89890980,0x0d0d1a17,0xbfbf65da,0xe6e6d731,0x424284c6,0x6868d0b8,0x414182c3,0x999929b0,0x2d2d5a77,0x0f0f1e11,0xb0b07bcb,0x5454a8fc,0xbbbb6dd6,0x16162c3a];final uC=[0x63c6a563,0x7cf8847c,0x77ee9977,0x7bf68d7b,0xf2ff0df2,0x6bd6bd6b,0x6fdeb16f,0xc59154c5,0x30605030,0x01020301,0x67cea967,0x2b567d2b,0xfee719fe,0xd7b562d7,0xab4de6ab,0x76ec9a76,0xca8f45ca,0x821f9d82,0xc98940c9,0x7dfa877d,0xfaef15fa,0x59b2eb59,0x478ec947,0xf0fb0bf0,0xad41ecad,0xd4b367d4,0xa25ffda2,0xaf45eaaf,0x9c23bf9c,0xa453f7a4,0x72e49672,0xc09b5bc0,0xb775c2b7,0xfde11cfd,0x933dae93,0x264c6a26,0x366c5a36,0x3f7e413f,0xf7f502f7,0xcc834fcc,0x34685c34,0xa551f4a5,0xe5d134e5,0xf1f908f1,0x71e29371,0xd8ab73d8,0x31625331,0x152a3f15,0x04080c04,0xc79552c7,0x23466523,0xc39d5ec3,0x18302818,0x9637a196,0x050a0f05,0x9a2fb59a,0x070e0907,0x12243612,0x801b9b80,0xe2df3de2,0xebcd26eb,0x274e6927,0xb27fcdb2,0x75ea9f75,0x09121b09,0x831d9e83,0x2c58742c,0x1a342e1a,0x1b362d1b,0x6edcb26e,0x5ab4ee5a,0xa05bfba0,0x52a4f652,0x3b764d3b,0xd6b761d6,0xb37dceb3,0x29527b29,0xe3dd3ee3,0x2f5e712f,0x84139784,0x53a6f553,0xd1b968d1,0x00000000,0xedc12ced,0x20406020,0xfce31ffc,0xb179c8b1,0x5bb6ed5b,0x6ad4be6a,0xcb8d46cb,0xbe67d9be,0x39724b39,0x4a94de4a,0x4c98d44c,0x58b0e858,0xcf854acf,0xd0bb6bd0,0xefc52aef,0xaa4fe5aa,0xfbed16fb,0x4386c543,0x4d9ad74d,0x33665533,0x85119485,0x458acf45,0xf9e910f9,0x02040602,0x7ffe817f,0x50a0f050,0x3c78443c,0x9f25ba9f,0xa84be3a8,0x51a2f351,0xa35dfea3,0x4080c040,0x8f058a8f,0x923fad92,0x9d21bc9d,0x38704838,0xf5f104f5,0xbc63dfbc,0xb677c1b6,0xdaaf75da,0x21426321,0x10203010,0xffe51aff,0xf3fd0ef3,0xd2bf6dd2,0xcd814ccd,0x0c18140c,0x13263513,0xecc32fec,0x5fbee15f,0x9735a297,0x4488cc44,0x172e3917,0xc49357c4,0xa755f2a7,0x7efc827e,0x3d7a473d,0x64c8ac64,0x5dbae75d,0x19322b19,0x73e69573,0x60c0a060,0x81199881,0x4f9ed14f,0xdca37fdc,0x22446622,0x2a547e2a,0x903bab90,0x880b8388,0x468cca46,0xeec729ee,0xb86bd3b8,0x14283c14,0xdea779de,0x5ebce25e,0x0b161d0b,0xdbad76db,0xe0db3be0,0x32645632,0x3a744e3a,0x0a141e0a,0x4992db49,0x060c0a06,0x24486c24,0x5cb8e45c,0xc29f5dc2,0xd3bd6ed3,0xac43efac,0x62c4a662,0x9139a891,0x9531a495,0xe4d337e4,0x79f28b79,0xe7d532e7,0xc88b43c8,0x376e5937,0x6ddab76d,0x8d018c8d,0xd5b164d5,0x4e9cd24e,0xa949e0a9,0x6cd8b46c,0x56acfa56,0xf4f307f4,0xeacf25ea,0x65caaf65,0x7af48e7a,0xae47e9ae,0x08101808,0xba6fd5ba,0x78f08878,0x254a6f25,0x2e5c722e,0x1c38241c,0xa657f1a6,0xb473c7b4,0xc69751c6,0xe8cb23e8,0xdda17cdd,0x74e89c74,0x1f3e211f,0x4b96dd4b,0xbd61dcbd,0x8b0d868b,0x8a0f858a,0x70e09070,0x3e7c423e,0xb571c4b5,0x66ccaa66,0x4890d848,0x03060503,0xf6f701f6,0x0e1c120e,0x61c2a361,0x356a5f35,0x57aef957,0xb969d0b9,0x86179186,0xc19958c1,0x1d3a271d,0x9e27b99e,0xe1d938e1,0xf8eb13f8,0x982bb398,0x11223311,0x69d2bb69,0xd9a970d9,0x8e07898e,0x9433a794,0x9b2db69b,0x1e3c221e,0x87159287,0xe9c920e9,0xce8749ce,0x55aaff55,0x28507828,0xdfa57adf,0x8c038f8c,0xa159f8a1,0x89098089,0x0d1a170d,0xbf65dabf,0xe6d731e6,0x4284c642,0x68d0b868,0x4182c341,0x9929b099,0x2d5a772d,0x0f1e110f,0xb07bcbb0,0x54a8fc54,0xbb6dd6bb,0x162c3a16];final vC=[0xc6a56363,0xf8847c7c,0xee997777,0xf68d7b7b,0xff0df2f2,0xd6bd6b6b,0xdeb16f6f,0x9154c5c5,0x60503030,0x02030101,0xcea96767,0x567d2b2b,0xe719fefe,0xb562d7d7,0x4de6abab,0xec9a7676,0x8f45caca,0x1f9d8282,0x8940c9c9,0xfa877d7d,0xef15fafa,0xb2eb5959,0x8ec94747,0xfb0bf0f0,0x41ecadad,0xb367d4d4,0x5ffda2a2,0x45eaafaf,0x23bf9c9c,0x53f7a4a4,0xe4967272,0x9b5bc0c0,0x75c2b7b7,0xe11cfdfd,0x3dae9393,0x4c6a2626,0x6c5a3636,0x7e413f3f,0xf502f7f7,0x834fcccc,0x685c3434,0x51f4a5a5,0xd134e5e5,0xf908f1f1,0xe2937171,0xab73d8d8,0x62533131,0x2a3f1515,0x080c0404,0x9552c7c7,0x46652323,0x9d5ec3c3,0x30281818,0x37a19696,0x0a0f0505,0x2fb59a9a,0x0e090707,0x24361212,0x1b9b8080,0xdf3de2e2,0xcd26ebeb,0x4e692727,0x7fcdb2b2,0xea9f7575,0x121b0909,0x1d9e8383,0x58742c2c,0x342e1a1a,0x362d1b1b,0xdcb26e6e,0xb4ee5a5a,0x5bfba0a0,0xa4f65252,0x764d3b3b,0xb761d6d6,0x7dceb3b3,0x527b2929,0xdd3ee3e3,0x5e712f2f,0x13978484,0xa6f55353,0xb968d1d1,0x00000000,0xc12ceded,0x40602020,0xe31ffcfc,0x79c8b1b1,0xb6ed5b5b,0xd4be6a6a,0x8d46cbcb,0x67d9bebe,0x724b3939,0x94de4a4a,0x98d44c4c,0xb0e85858,0x854acfcf,0xbb6bd0d0,0xc52aefef,0x4fe5aaaa,0xed16fbfb,0x86c54343,0x9ad74d4d,0x66553333,0x11948585,0x8acf4545,0xe910f9f9,0x04060202,0xfe817f7f,0xa0f05050,0x78443c3c,0x25ba9f9f,0x4be3a8a8,0xa2f35151,0x5dfea3a3,0x80c04040,0x058a8f8f,0x3fad9292,0x21bc9d9d,0x70483838,0xf104f5f5,0x63dfbcbc,0x77c1b6b6,0xaf75dada,0x42632121,0x20301010,0xe51affff,0xfd0ef3f3,0xbf6dd2d2,0x814ccdcd,0x18140c0c,0x26351313,0xc32fecec,0xbee15f5f,0x35a29797,0x88cc4444,0x2e391717,0x9357c4c4,0x55f2a7a7,0xfc827e7e,0x7a473d3d,0xc8ac6464,0xbae75d5d,0x322b1919,0xe6957373,0xc0a06060,0x19988181,0x9ed14f4f,0xa37fdcdc,0x44662222,0x547e2a2a,0x3bab9090,0x0b838888,0x8cca4646,0xc729eeee,0x6bd3b8b8,0x283c1414,0xa779dede,0xbce25e5e,0x161d0b0b,0xad76dbdb,0xdb3be0e0,0x64563232,0x744e3a3a,0x141e0a0a,0x92db4949,0x0c0a0606,0x486c2424,0xb8e45c5c,0x9f5dc2c2,0xbd6ed3d3,0x43efacac,0xc4a66262,0x39a89191,0x31a49595,0xd337e4e4,0xf28b7979,0xd532e7e7,0x8b43c8c8,0x6e593737,0xdab76d6d,0x018c8d8d,0xb164d5d5,0x9cd24e4e,0x49e0a9a9,0xd8b46c6c,0xacfa5656,0xf307f4f4,0xcf25eaea,0xcaaf6565,0xf48e7a7a,0x47e9aeae,0x10180808,0x6fd5baba,0xf0887878,0x4a6f2525,0x5c722e2e,0x38241c1c,0x57f1a6a6,0x73c7b4b4,0x9751c6c6,0xcb23e8e8,0xa17cdddd,0xe89c7474,0x3e211f1f,0x96dd4b4b,0x61dcbdbd,0x0d868b8b,0x0f858a8a,0xe0907070,0x7c423e3e,0x71c4b5b5,0xccaa6666,0x90d84848,0x06050303,0xf701f6f6,0x1c120e0e,0xc2a36161,0x6a5f3535,0xaef95757,0x69d0b9b9,0x17918686,0x9958c1c1,0x3a271d1d,0x27b99e9e,0xd938e1e1,0xeb13f8f8,0x2bb39898,0x22331111,0xd2bb6969,0xa970d9d9,0x07898e8e,0x33a79494,0x2db69b9b,0x3c221e1e,0x15928787,0xc920e9e9,0x8749cece,0xaaff5555,0x50782828,0xa57adfdf,0x038f8c8c,0x59f8a1a1,0x09808989,0x1a170d0d,0x65dabfbf,0xd731e6e6,0x84c64242,0xd0b86868,0x82c34141,0x29b09999,0x5a772d2d,0x1e110f0f,0x7bcbb0b0,0xa8fc5454,0x6dd6bbbb,0x2c3a1616];final wC=[0x50a7f451,0x5365417e,0xc3a4171a,0x965e273a,0xcb6bab3b,0xf1459d1f,0xab58faac,0x9303e34b,0x55fa3020,0xf66d76ad,0x9176cc88,0x254c02f5,0xfcd7e54f,0xd7cb2ac5,0x80443526,0x8fa362b5,0x495ab1de,0x671bba25,0x980eea45,0xe1c0fe5d,0x02752fc3,0x12f04c81,0xa397468d,0xc6f9d36b,0xe75f8f03,0x959c9215,0xeb7a6dbf,0xda595295,0x2d83bed4,0xd3217458,0x2969e049,0x44c8c98e,0x6a89c275,0x78798ef4,0x6b3e5899,0xdd71b927,0xb64fe1be,0x17ad88f0,0x66ac20c9,0xb43ace7d,0x184adf63,0x82311ae5,0x60335197,0x457f5362,0xe07764b1,0x84ae6bbb,0x1ca081fe,0x942b08f9,0x58684870,0x19fd458f,0x876cde94,0xb7f87b52,0x23d373ab,0xe2024b72,0x578f1fe3,0x2aab5566,0x0728ebb2,0x03c2b52f,0x9a7bc586,0xa50837d3,0xf2872830,0xb2a5bf23,0xba6a0302,0x5c8216ed,0x2b1ccf8a,0x92b479a7,0xf0f207f3,0xa1e2694e,0xcdf4da65,0xd5be0506,0x1f6234d1,0x8afea6c4,0x9d532e34,0xa055f3a2,0x32e18a05,0x75ebf6a4,0x39ec830b,0xaaef6040,0x069f715e,0x51106ebd,0xf98a213e,0x3d06dd96,0xae053edd,0x46bde64d,0xb58d5491,0x055dc471,0x6fd40604,0xff155060,0x24fb9819,0x97e9bdd6,0xcc434089,0x779ed967,0xbd42e8b0,0x888b8907,0x385b19e7,0xdbeec879,0x470a7ca1,0xe90f427c,0xc91e84f8,0x00000000,0x83868009,0x48ed2b32,0xac70111e,0x4e725a6c,0xfbff0efd,0x5638850f,0x1ed5ae3d,0x27392d36,0x64d90f0a,0x21a65c68,0xd1545b9b,0x3a2e3624,0xb1670a0c,0x0fe75793,0xd296eeb4,0x9e919b1b,0x4fc5c080,0xa220dc61,0x694b775a,0x161a121c,0x0aba93e2,0xe52aa0c0,0x43e0223c,0x1d171b12,0x0b0d090e,0xadc78bf2,0xb9a8b62d,0xc8a91e14,0x8519f157,0x4c0775af,0xbbdd99ee,0xfd607fa3,0x9f2601f7,0xbcf5725c,0xc53b6644,0x347efb5b,0x7629438b,0xdcc623cb,0x68fcedb6,0x63f1e4b8,0xcadc31d7,0x10856342,0x40229713,0x2011c684,0x7d244a85,0xf83dbbd2,0x1132f9ae,0x6da129c7,0x4b2f9e1d,0xf330b2dc,0xec52860d,0xd0e3c177,0x6c16b32b,0x99b970a9,0xfa489411,0x2264e947,0xc48cfca8,0x1a3ff0a0,0xd82c7d56,0xef903322,0xc74e4987,0xc1d138d9,0xfea2ca8c,0x360bd498,0xcf81f5a6,0x28de7aa5,0x268eb7da,0xa4bfad3f,0xe49d3a2c,0x0d927850,0x9bcc5f6a,0x62467e54,0xc2138df6,0xe8b8d890,0x5ef7392e,0xf5afc382,0xbe805d9f,0x7c93d069,0xa92dd56f,0xb31225cf,0x3b99acc8,0xa77d1810,0x6e639ce8,0x7bbb3bdb,0x097826cd,0xf418596e,0x01b79aec,0xa89a4f83,0x656e95e6,0x7ee6ffaa,0x08cfbc21,0xe6e815ef,0xd99be7ba,0xce366f4a,0xd4099fea,0xd67cb029,0xafb2a431,0x31233f2a,0x3094a5c6,0xc066a235,0x37bc4e74,0xa6ca82fc,0xb0d090e0,0x15d8a733,0x4a9804f1,0xf7daec41,0x0e50cd7f,0x2ff69117,0x8dd64d76,0x4db0ef43,0x544daacc,0xdf0496e4,0xe3b5d19e,0x1b886a4c,0xb81f2cc1,0x7f516546,0x04ea5e9d,0x5d358c01,0x737487fa,0x2e410bfb,0x5a1d67b3,0x52d2db92,0x335610e9,0x1347d66d,0x8c61d79a,0x7a0ca137,0x8e14f859,0x893c13eb,0xee27a9ce,0x35c961b7,0xede51ce1,0x3cb1477a,0x59dfd29c,0x3f73f255,0x79ce1418,0xbf37c773,0xeacdf753,0x5baafd5f,0x146f3ddf,0x86db4478,0x81f3afca,0x3ec468b9,0x2c342438,0x5f40a3c2,0x72c31d16,0x0c25e2bc,0x8b493c28,0x41950dff,0x7101a839,0xdeb30c08,0x9ce4b4d8,0x90c15664,0x6184cb7b,0x70b632d5,0x745c6c48,0x4257b8d0];final xC=[0xa7f45150,0x65417e53,0xa4171ac3,0x5e273a96,0x6bab3bcb,0x459d1ff1,0x58faacab,0x03e34b93,0xfa302055,0x6d76adf6,0x76cc8891,0x4c02f525,0xd7e54ffc,0xcb2ac5d7,0x44352680,0xa362b58f,0x5ab1de49,0x1bba2567,0x0eea4598,0xc0fe5de1,0x752fc302,0xf04c8112,0x97468da3,0xf9d36bc6,0x5f8f03e7,0x9c921595,0x7a6dbfeb,0x595295da,0x83bed42d,0x217458d3,0x69e04929,0xc8c98e44,0x89c2756a,0x798ef478,0x3e58996b,0x71b927dd,0x4fe1beb6,0xad88f017,0xac20c966,0x3ace7db4,0x4adf6318,0x311ae582,0x33519760,0x7f536245,0x7764b1e0,0xae6bbb84,0xa081fe1c,0x2b08f994,0x68487058,0xfd458f19,0x6cde9487,0xf87b52b7,0xd373ab23,0x024b72e2,0x8f1fe357,0xab55662a,0x28ebb207,0xc2b52f03,0x7bc5869a,0x0837d3a5,0x872830f2,0xa5bf23b2,0x6a0302ba,0x8216ed5c,0x1ccf8a2b,0xb479a792,0xf207f3f0,0xe2694ea1,0xf4da65cd,0xbe0506d5,0x6234d11f,0xfea6c48a,0x532e349d,0x55f3a2a0,0xe18a0532,0xebf6a475,0xec830b39,0xef6040aa,0x9f715e06,0x106ebd51,0x8a213ef9,0x06dd963d,0x053eddae,0xbde64d46,0x8d5491b5,0x5dc47105,0xd406046f,0x155060ff,0xfb981924,0xe9bdd697,0x434089cc,0x9ed96777,0x42e8b0bd,0x8b890788,0x5b19e738,0xeec879db,0x0a7ca147,0x0f427ce9,0x1e84f8c9,0x00000000,0x86800983,0xed2b3248,0x70111eac,0x725a6c4e,0xff0efdfb,0x38850f56,0xd5ae3d1e,0x392d3627,0xd90f0a64,0xa65c6821,0x545b9bd1,0x2e36243a,0x670a0cb1,0xe757930f,0x96eeb4d2,0x919b1b9e,0xc5c0804f,0x20dc61a2,0x4b775a69,0x1a121c16,0xba93e20a,0x2aa0c0e5,0xe0223c43,0x171b121d,0x0d090e0b,0xc78bf2ad,0xa8b62db9,0xa91e14c8,0x19f15785,0x0775af4c,0xdd99eebb,0x607fa3fd,0x2601f79f,0xf5725cbc,0x3b6644c5,0x7efb5b34,0x29438b76,0xc623cbdc,0xfcedb668,0xf1e4b863,0xdc31d7ca,0x85634210,0x22971340,0x11c68420,0x244a857d,0x3dbbd2f8,0x32f9ae11,0xa129c76d,0x2f9e1d4b,0x30b2dcf3,0x52860dec,0xe3c177d0,0x16b32b6c,0xb970a999,0x489411fa,0x64e94722,0x8cfca8c4,0x3ff0a01a,0x2c7d56d8,0x903322ef,0x4e4987c7,0xd138d9c1,0xa2ca8cfe,0x0bd49836,0x81f5a6cf,0xde7aa528,0x8eb7da26,0xbfad3fa4,0x9d3a2ce4,0x9278500d,0xcc5f6a9b,0x467e5462,0x138df6c2,0xb8d890e8,0xf7392e5e,0xafc382f5,0x805d9fbe,0x93d0697c,0x2dd56fa9,0x1225cfb3,0x99acc83b,0x7d1810a7,0x639ce86e,0xbb3bdb7b,0x7826cd09,0x18596ef4,0xb79aec01,0x9a4f83a8,0x6e95e665,0xe6ffaa7e,0xcfbc2108,0xe815efe6,0x9be7bad9,0x366f4ace,0x099fead4,0x7cb029d6,0xb2a431af,0x233f2a31,0x94a5c630,0x66a235c0,0xbc4e7437,0xca82fca6,0xd090e0b0,0xd8a73315,0x9804f14a,0xdaec41f7,0x50cd7f0e,0xf691172f,0xd64d768d,0xb0ef434d,0x4daacc54,0x0496e4df,0xb5d19ee3,0x886a4c1b,0x1f2cc1b8,0x5165467f,0xea5e9d04,0x358c015d,0x7487fa73,0x410bfb2e,0x1d67b35a,0xd2db9252,0x5610e933,0x47d66d13,0x61d79a8c,0x0ca1377a,0x14f8598e,0x3c13eb89,0x27a9ceee,0xc961b735,0xe51ce1ed,0xb1477a3c,0xdfd29c59,0x73f2553f,0xce141879,0x37c773bf,0xcdf753ea,0xaafd5f5b,0x6f3ddf14,0xdb447886,0xf3afca81,0xc468b93e,0x3424382c,0x40a3c25f,0xc31d1672,0x25e2bc0c,0x493c288b,0x950dff41,0x01a83971,0xb30c08de,0xe4b4d89c,0xc1566490,0x84cb7b61,0xb632d570,0x5c6c4874,0x57b8d042];final yC=[0xf45150a7,0x417e5365,0x171ac3a4,0x273a965e,0xab3bcb6b,0x9d1ff145,0xfaacab58,0xe34b9303,0x302055fa,0x76adf66d,0xcc889176,0x02f5254c,0xe54ffcd7,0x2ac5d7cb,0x35268044,0x62b58fa3,0xb1de495a,0xba25671b,0xea45980e,0xfe5de1c0,0x2fc30275,0x4c8112f0,0x468da397,0xd36bc6f9,0x8f03e75f,0x9215959c,0x6dbfeb7a,0x5295da59,0xbed42d83,0x7458d321,0xe0492969,0xc98e44c8,0xc2756a89,0x8ef47879,0x58996b3e,0xb927dd71,0xe1beb64f,0x88f017ad,0x20c966ac,0xce7db43a,0xdf63184a,0x1ae58231,0x51976033,0x5362457f,0x64b1e077,0x6bbb84ae,0x81fe1ca0,0x08f9942b,0x48705868,0x458f19fd,0xde94876c,0x7b52b7f8,0x73ab23d3,0x4b72e202,0x1fe3578f,0x55662aab,0xebb20728,0xb52f03c2,0xc5869a7b,0x37d3a508,0x2830f287,0xbf23b2a5,0x0302ba6a,0x16ed5c82,0xcf8a2b1c,0x79a792b4,0x07f3f0f2,0x694ea1e2,0xda65cdf4,0x0506d5be,0x34d11f62,0xa6c48afe,0x2e349d53,0xf3a2a055,0x8a0532e1,0xf6a475eb,0x830b39ec,0x6040aaef,0x715e069f,0x6ebd5110,0x213ef98a,0xdd963d06,0x3eddae05,0xe64d46bd,0x5491b58d,0xc471055d,0x06046fd4,0x5060ff15,0x981924fb,0xbdd697e9,0x4089cc43,0xd967779e,0xe8b0bd42,0x8907888b,0x19e7385b,0xc879dbee,0x7ca1470a,0x427ce90f,0x84f8c91e,0x00000000,0x80098386,0x2b3248ed,0x111eac70,0x5a6c4e72,0x0efdfbff,0x850f5638,0xae3d1ed5,0x2d362739,0x0f0a64d9,0x5c6821a6,0x5b9bd154,0x36243a2e,0x0a0cb167,0x57930fe7,0xeeb4d296,0x9b1b9e91,0xc0804fc5,0xdc61a220,0x775a694b,0x121c161a,0x93e20aba,0xa0c0e52a,0x223c43e0,0x1b121d17,0x090e0b0d,0x8bf2adc7,0xb62db9a8,0x1e14c8a9,0xf1578519,0x75af4c07,0x99eebbdd,0x7fa3fd60,0x01f79f26,0x725cbcf5,0x6644c53b,0xfb5b347e,0x438b7629,0x23cbdcc6,0xedb668fc,0xe4b863f1,0x31d7cadc,0x63421085,0x97134022,0xc6842011,0x4a857d24,0xbbd2f83d,0xf9ae1132,0x29c76da1,0x9e1d4b2f,0xb2dcf330,0x860dec52,0xc177d0e3,0xb32b6c16,0x70a999b9,0x9411fa48,0xe9472264,0xfca8c48c,0xf0a01a3f,0x7d56d82c,0x3322ef90,0x4987c74e,0x38d9c1d1,0xca8cfea2,0xd498360b,0xf5a6cf81,0x7aa528de,0xb7da268e,0xad3fa4bf,0x3a2ce49d,0x78500d92,0x5f6a9bcc,0x7e546246,0x8df6c213,0xd890e8b8,0x392e5ef7,0xc382f5af,0x5d9fbe80,0xd0697c93,0xd56fa92d,0x25cfb312,0xacc83b99,0x1810a77d,0x9ce86e63,0x3bdb7bbb,0x26cd0978,0x596ef418,0x9aec01b7,0x4f83a89a,0x95e6656e,0xffaa7ee6,0xbc2108cf,0x15efe6e8,0xe7bad99b,0x6f4ace36,0x9fead409,0xb029d67c,0xa431afb2,0x3f2a3123,0xa5c63094,0xa235c066,0x4e7437bc,0x82fca6ca,0x90e0b0d0,0xa73315d8,0x04f14a98,0xec41f7da,0xcd7f0e50,0x91172ff6,0x4d768dd6,0xef434db0,0xaacc544d,0x96e4df04,0xd19ee3b5,0x6a4c1b88,0x2cc1b81f,0x65467f51,0x5e9d04ea,0x8c015d35,0x87fa7374,0x0bfb2e41,0x67b35a1d,0xdb9252d2,0x10e93356,0xd66d1347,0xd79a8c61,0xa1377a0c,0xf8598e14,0x13eb893c,0xa9ceee27,0x61b735c9,0x1ce1ede5,0x477a3cb1,0xd29c59df,0xf2553f73,0x141879ce,0xc773bf37,0xf753eacd,0xfd5f5baa,0x3ddf146f,0x447886db,0xafca81f3,0x68b93ec4,0x24382c34,0xa3c25f40,0x1d1672c3,0xe2bc0c25,0x3c288b49,0x0dff4195,0xa8397101,0x0c08deb3,0xb4d89ce4,0x566490c1,0xcb7b6184,0x32d570b6,0x6c48745c,0xb8d04257];final zC=[0x5150a7f4,0x7e536541,0x1ac3a417,0x3a965e27,0x3bcb6bab,0x1ff1459d,0xacab58fa,0x4b9303e3,0x2055fa30,0xadf66d76,0x889176cc,0xf5254c02,0x4ffcd7e5,0xc5d7cb2a,0x26804435,0xb58fa362,0xde495ab1,0x25671bba,0x45980eea,0x5de1c0fe,0xc302752f,0x8112f04c,0x8da39746,0x6bc6f9d3,0x03e75f8f,0x15959c92,0xbfeb7a6d,0x95da5952,0xd42d83be,0x58d32174,0x492969e0,0x8e44c8c9,0x756a89c2,0xf478798e,0x996b3e58,0x27dd71b9,0xbeb64fe1,0xf017ad88,0xc966ac20,0x7db43ace,0x63184adf,0xe582311a,0x97603351,0x62457f53,0xb1e07764,0xbb84ae6b,0xfe1ca081,0xf9942b08,0x70586848,0x8f19fd45,0x94876cde,0x52b7f87b,0xab23d373,0x72e2024b,0xe3578f1f,0x662aab55,0xb20728eb,0x2f03c2b5,0x869a7bc5,0xd3a50837,0x30f28728,0x23b2a5bf,0x02ba6a03,0xed5c8216,0x8a2b1ccf,0xa792b479,0xf3f0f207,0x4ea1e269,0x65cdf4da,0x06d5be05,0xd11f6234,0xc48afea6,0x349d532e,0xa2a055f3,0x0532e18a,0xa475ebf6,0x0b39ec83,0x40aaef60,0x5e069f71,0xbd51106e,0x3ef98a21,0x963d06dd,0xddae053e,0x4d46bde6,0x91b58d54,0x71055dc4,0x046fd406,0x60ff1550,0x1924fb98,0xd697e9bd,0x89cc4340,0x67779ed9,0xb0bd42e8,0x07888b89,0xe7385b19,0x79dbeec8,0xa1470a7c,0x7ce90f42,0xf8c91e84,0x00000000,0x09838680,0x3248ed2b,0x1eac7011,0x6c4e725a,0xfdfbff0e,0x0f563885,0x3d1ed5ae,0x3627392d,0x0a64d90f,0x6821a65c,0x9bd1545b,0x243a2e36,0x0cb1670a,0x930fe757,0xb4d296ee,0x1b9e919b,0x804fc5c0,0x61a220dc,0x5a694b77,0x1c161a12,0xe20aba93,0xc0e52aa0,0x3c43e022,0x121d171b,0x0e0b0d09,0xf2adc78b,0x2db9a8b6,0x14c8a91e,0x578519f1,0xaf4c0775,0xeebbdd99,0xa3fd607f,0xf79f2601,0x5cbcf572,0x44c53b66,0x5b347efb,0x8b762943,0xcbdcc623,0xb668fced,0xb863f1e4,0xd7cadc31,0x42108563,0x13402297,0x842011c6,0x857d244a,0xd2f83dbb,0xae1132f9,0xc76da129,0x1d4b2f9e,0xdcf330b2,0x0dec5286,0x77d0e3c1,0x2b6c16b3,0xa999b970,0x11fa4894,0x472264e9,0xa8c48cfc,0xa01a3ff0,0x56d82c7d,0x22ef9033,0x87c74e49,0xd9c1d138,0x8cfea2ca,0x98360bd4,0xa6cf81f5,0xa528de7a,0xda268eb7,0x3fa4bfad,0x2ce49d3a,0x500d9278,0x6a9bcc5f,0x5462467e,0xf6c2138d,0x90e8b8d8,0x2e5ef739,0x82f5afc3,0x9fbe805d,0x697c93d0,0x6fa92dd5,0xcfb31225,0xc83b99ac,0x10a77d18,0xe86e639c,0xdb7bbb3b,0xcd097826,0x6ef41859,0xec01b79a,0x83a89a4f,0xe6656e95,0xaa7ee6ff,0x2108cfbc,0xefe6e815,0xbad99be7,0x4ace366f,0xead4099f,0x29d67cb0,0x31afb2a4,0x2a31233f,0xc63094a5,0x35c066a2,0x7437bc4e,0xfca6ca82,0xe0b0d090,0x3315d8a7,0xf14a9804,0x41f7daec,0x7f0e50cd,0x172ff691,0x768dd64d,0x434db0ef,0xcc544daa,0xe4df0496,0x9ee3b5d1,0x4c1b886a,0xc1b81f2c,0x467f5165,0x9d04ea5e,0x015d358c,0xfa737487,0xfb2e410b,0xb35a1d67,0x9252d2db,0xe9335610,0x6d1347d6,0x9a8c61d7,0x377a0ca1,0x598e14f8,0xeb893c13,0xceee27a9,0xb735c961,0xe1ede51c,0x7a3cb147,0x9c59dfd2,0x553f73f2,0x1879ce14,0x73bf37c7,0x53eacdf7,0x5f5baafd,0xdf146f3d,0x7886db44,0xca81f3af,0xb93ec468,0x382c3424,0xc25f40a3,0x1672c31d,0xbc0c25e2,0x288b493c,0xff41950d,0x397101a8,0x08deb30c,0xd89ce4b4,0x6490c156,0x7b6184cb,0xd570b632,0x48745c6c,0xd04257b8];abstract class eb implements Yb{Uint8List process(Uint8List B){var A=new Uint8List(blockSize);var C=NY(B,0,A,0);return A.sublist(0,C);}}class xG extends pS{final Uint8List key;xG(this.key);}const mL=0x1F;const yG=0xFFFFFFFF;final fb=[0xFFFFFFFF,0x7FFFFFFF,0x3FFFFFFF,0x1FFFFFFF,0x0FFFFFFF,0x07FFFFFF,0x03FFFFFF,0x01FFFFFF,0x00FFFFFF,0x007FFFFF,0x003FFFFF,0x001FFFFF,0x000FFFFF,0x0007FFFF,0x0003FFFF,0x0001FFFF,0x0000FFFF,0x00007FFF,0x00003FFF,0x00001FFF,0x00000FFF,0x000007FF,0x000003FF,0x000001FF,0x000000FF,0x0000007F,0x0000003F,0x0000001F,0x0000000F,0x00000007,0x00000003,0x00000001,0x00000000];int gb(int A,int B){assert((A>=0)&&(A<=yG));B&= mL;A&= fb[B];return ((A<<B)&yG);}int hb(int A,int B){assert((A>=0)&&(A<=yG));B&= mL;return (A>>B);}int ib(int A,int B){assert(B>=0);assert((A>=0)&&(A<=yG));B&= mL;return (A>>B)|gb(A,(32-B));}void fI(int B,dynamic A,int C,Endianness D){assert((B>=0)&&(B<=yG));if(A is!ByteData){A=new ByteData.view(A.buffer);}(A as ByteData).setUint32(C,B,D);}int zG(dynamic A,int B,Endianness C){if(A is!ByteData){A=new ByteData.view(A.buffer);}return (A as ByteData).getUint32(B,C);}const String oc='\u001b[31m';const String wT='\u001b[0m';TD ac()=>new TD.di();class TD{factory TD({gB style,String current}){if(current==null){if(style==null){current=OT;}else{current=".";}}if(style==null){style=gB.LM;}else if(style is!NE){throw new ArgumentError("Only styles defined by the path package are " "allowed.");}return new TD.ei(style as NE,current);}TD.di():S=gB.LM as NE,nj=null;TD.ei(this.S,this.nj);final NE S;final String nj;String get current=>nj!=null?nj:OT;String get OD=>S.OD;String absolute(String A,[String B,String C,String D,String G,String H,String I]){YT("absolute",[A,B,C,D,G,H,I]);if(B==null&&isAbsolute(A)&&!DC(A)){return A;}return join(current,A,B,C,D,G,H,I);}String MO(String A)=>oj(A).MO;String NO(String A)=>oj(A).NO;String ig(String B){var A=oj(B);A.CI();if(A.s.isEmpty)return A.FB==null?'.':A.FB;if(A.s.length==1){return A.FB==null?'.':A.FB;}A.s.removeLast();A.zB.removeLast();A.CI();return A.toString();}String eO(String A)=>oj(A).eO;String nh(String A)=>A.substring(0,S.ND(A));bool isAbsolute(String A)=>S.ND(A)>0;bool dG(String A)=>!this.isAbsolute(A);bool DC(String A)=>S.DC(A);String join(String B,[String C,String D,String G,String H,String I,String K,String L]){var A=<String>[B,C,D,G,H,I,K,L];YT("join",A);return Uh(A.where((O)=>O!=null));}String Uh(Iterable<String> I){var B=new StringBuffer();var D=false;var G=false;for(var A in I.where((A)=>A!='')){if(this.DC(A)&&G){var C=oj(A);var H=B.toString();C.FB=H.substring(0,S.ND(H,withDrive:true));if(S.hG(C.FB)){C.zB[0]=S.OD;}B.clear();B.write(C.toString());}else if(this.isAbsolute(A)){G=!this.DC(A);B.clear();B.write(A);}else{if(A.length>0&&S.PK(A[0])){}else if(D){B.write(OD);}B.write(A);}D=S.hG(A);}return B.toString();}List<String> split(String B){var A=oj(B);A.s=A.s.where((C)=>!C.isEmpty).toList();if(A.FB!=null)A.s.insert(0,A.FB);return A.s;}String kE(String A){if(!pj(A))return A;var B=oj(A);B.kE();return B.toString();}bool pj(String I){var K=0;var D=I.codeUnits;int B;int A;var G=S.ND(I);if(G!=0){K=G;A=DD;if(S==gB.qI){for(var C=0;C<G;C++ ){if(D[C]==DD)return true;}}}for(var C=K;C<D.length;C++ ){var H=D[C];if(S.p(H)){if(S==gB.qI&&H==DD)return true;if(A!=null&&S.p(A))return true;if(A==iC&&(B==null||B==iC||S.p(B))){return true;}}B=A;A=H;}if(A==null)return true;if(S.p(A))return true;if(A==iC&&(B==null||S.p(B)||B==iC)){return true;}return false;}String QY(String C,{String from}){if(from==null&&this.dG(C))return this.kE(C);from=from==null?current:absolute(from);if(this.dG(from)&&this.isAbsolute(C)){return this.kE(C);}if(this.dG(C)||this.DC(C)){C=this.absolute(C);}if(this.dG(C)&&this.isAbsolute(from)){throw new pI('Unable to find a path to "${C}" from "${from}".');}var B=oj(from)..kE();var A=oj(C)..kE();if(B.s.length>0&&B.s[0]=='.'){return A.toString();}if(B.FB!=A.FB&&((B.FB==null||A.FB==null)||!S.tO(B.FB,A.FB))){return A.toString();}while(B.s.length>0&&A.s.length>0&&S.tO(B.s[0],A.s[0])){B.s.removeAt(0);B.zB.removeAt(1);A.s.removeAt(0);A.zB.removeAt(1);}if(B.s.length>0&&B.s[0]=='..'){throw new pI('Unable to find a path to "${C}" from "${from}".');}A.s.insertAll(0,new List.filled(B.s.length,'..'));A.zB[0]='';A.zB.insertAll(1,new List.filled(B.s.length,S.OD));if(A.s.length==0)return '.';if(A.s.length>1&&A.s.last=='.'){A.s.removeLast();A.zB..removeLast()..removeLast()..add('');}A.FB='';A.CI();return A.toString();}bool TC(String A,String B)=>qj(A,B)==IB.oI;IB qj(String A,String B){var D=isAbsolute(A);var G=isAbsolute(B);if(D&&!G){B=absolute(B);if(S.DC(A))A=absolute(A);}else if(G&&!D){A=absolute(A);if(S.DC(B))B=absolute(B);}else if(G&&D){var H=S.DC(B);var I=S.DC(A);if(H&&!I){B=absolute(B);}else if(I&&!H){A=absolute(A);}}var K=rj(A,B);if(K!=IB.QF)return K;String C;try {C=this.QY(B,from:A);}on pI catch (L){return IB.ME;}if(!this.dG(C))return IB.ME;if(C=='.')return IB.oI;if(C=='..')return IB.ME;return (C.length>=3&&C.startsWith('..')&&S.p(C.codeUnitAt(2)))?IB.ME:IB.ZT;}IB rj(String C,String D){if(C=='.')C='';var L=S.ND(C);var c=S.ND(D);if(L!=c)return IB.ME;for(var X=0;X<L;X++ ){var G=C.codeUnitAt(X);var H=D.codeUnitAt(X);if(!S.NK(G,H)){return IB.ME;}}var I=DD;int K;var A=L;var B=c;while(A<C.length&&B<D.length){var G=C.codeUnitAt(A);var H=D.codeUnitAt(B);if(S.NK(G,H)){if(S.p(G)){K=A;}I=G;A++ ;B++ ;continue;}if(S.p(G)&&S.p(I)){K=A;A++ ;continue;}else if(S.p(H)&&S.p(I)){B++ ;continue;}if(G==iC&&S.p(I)){A++ ;if(A==C.length)break;G=C.codeUnitAt(A);if(S.p(G)){K=A;A++ ;continue;}if(G==iC){A++ ;if(A==C.length||S.p(C.codeUnitAt(A))){return IB.QF;}}}if(H==iC&&S.p(I)){B++ ;if(B==D.length)break;H=D.codeUnitAt(B);if(S.p(H)){B++ ;continue;}if(H==iC){B++ ;if(B==D.length||S.p(D.codeUnitAt(B))){return IB.QF;}}}var q=sj(D,B);if(q!=PC.KM){return IB.QF;}var KB=sj(C,A);if(KB!=PC.KM){return IB.QF;}return IB.ME;}if(B==D.length){if(A==C.length||S.p(C.codeUnitAt(A))){K=A;}else{K??= wF.max(0,L-1);}var O=sj(C,K??L-1);if(O==PC.JM)return IB.oI;return O==PC.IM?IB.QF:IB.ME;}var O=sj(D,B);if(O==PC.JM)return IB.oI;if(O==PC.IM){return IB.QF;}return (S.p(D.codeUnitAt(B))||S.p(I))?IB.ZT:IB.ME;}PC sj(String B,int H){var C=0;var G=false;var A=H;while(A<B.length){while(A<B.length&&S.p(B.codeUnitAt(A))){A++ ;}if(A==B.length)break;var D=A;while(A<B.length&&!S.p(B.codeUnitAt(A))){A++ ;}if(A-D==1&&B.codeUnitAt(D)==iC){}else if(A-D==2&&B.codeUnitAt(D)==iC&&B.codeUnitAt(D+1)==iC){C-- ;if(C<0)break;if(C==0)G=true;}else{C++ ;}if(A==B.length)break;A++ ;}if(C<0)return PC.IM;if(C==0)return PC.JM;if(G)return PC.bc;return PC.KM;}int hash(String A){A=absolute(A);var B=tj(A);if(B!=null)return B;var C=oj(A);C.kE();return tj(C.toString());}int tj(String B){var C=4603;var H=true;var D=true;for(var A=0;A<B.length;A++ ){var G=S.oW(B.codeUnitAt(A));if(S.p(G)){D=true;continue;}if(G==iC&&D){if(A+1==B.length)break;var I=B.codeUnitAt(A+1);if(S.p(I))continue;if(!H&&I==iC&&(A+2==B.length||S.p(B.codeUnitAt(A+2)))){return null;}}C&= 0x3FFFFFF;C*= 33;C^= G;D=false;H=false;}return C;}String wg(A)=>S.AI(XT(A));String ih(D){var A=XT(D);if(A.scheme=='file'&&S==gB.HG){return A.toString();}else if(A.scheme!='file'&&A.scheme!=''&&S!=gB.HG){return A.toString();}var B=kE(wg(A));var C=QY(B);return split(C).length>split(B).length?B:C;}RF oj(String A)=>new RF.fi(A,S);}Uri XT(A){if(A is String)return Uri.parse(A);if(A is Uri)return A;throw new ArgumentError.value(A,'uri','Value must be a String or a Uri');}void YT(String H,List<String> A){for(var B=1;B<A.length;B++ ){if(A[B]==null||A[B-1]!=null)continue;int C;for(C=A.length;C>=1;C-- ){if(A[C-1]!=null)break;}var D=new StringBuffer();D.write("${H}(");D.write(A.take(C).map((G)=>G==null?"null":'"${G}"').join(", "));D.write("): part ${B-1} was null, but part ${B} was not.");throw new ArgumentError(D.toString());}}class PC{static const IM=const PC("above root");static const JM=const PC("at root");static const bc=const PC("reaches root");static const KM=const PC("below root");final String name;const PC(this.name);String toString()=>name;}class IB{static const ZT=const IB("within");static const oI=const IB("equal");static const ME=const IB("different");static const QF=const IB("inconclusive");final String name;const IB(this.name);String toString()=>name;}const fZ=const yP.Qi();class yP extends Codec<List<int>,String>{IL get encoder=>hZ;GL get decoder=>gZ;const yP.Qi();}const gZ=const GL.Ri();class GL extends Converter<String,List<int>>{const GL.Ri();List<int> convert(String A){if(!A.length.isEven){throw new FormatException("Invalid input length, must be even.",A,A.length);}var B=new Uint8List(A.length~/2);HL(A.codeUnits,0,A.length,B,0);return B;}StringConversionSink startChunkedConversion(Sink<List<int>> A)=>new zP(A);}class zP extends StringConversionSinkBase{final Sink<List<int>> uj;int vj;zP(this.uj);void addSlice(String D,int A,int B,bool H){RangeError.checkValidRange(A,B,D.length);if(A==B){if(H)wj(D,B);return;}var I=D.codeUnits;Uint8List C;int G;if(vj==null){C=new Uint8List((B-A)~/2);G=0;}else{var K=(B-A-1)~/2;C=new Uint8List(1+K);C[0]=vj+pG(I,A);A++ ;G=1;}vj=HL(I,A,B,C,G);uj.add(C);if(H)wj(D,B);}ByteConversionSink asUtf8Sink(bool A)=>new AQ(uj);void close()=>wj();void wj([String A,int B]){if(vj!=null){throw new FormatException("Input ended with incomplete encoded byte.",A,B);}uj.close();}}class AQ extends ByteConversionSinkBase{final Sink<List<int>> uj;int vj;AQ(this.uj);void add(List<int> A)=>addSlice(A,0,A.length,false);void addSlice(List<int> C,int A,int B,bool H){RangeError.checkValidRange(A,B,C.length);if(A==B){if(H)wj(C,B);return;}Uint8List D;int G;if(vj==null){D=new Uint8List((B-A)~/2);G=0;}else{var I=(B-A-1)~/2;D=new Uint8List(1+I);D[0]=vj+pG(C,A);A++ ;G=1;}vj=HL(C,A,B,D,G);uj.add(D);if(H)wj(C,B);}void close()=>wj();void wj([List<int> A,int B]){if(vj!=null){throw new FormatException("Input ended with incomplete encoded byte.",A,B);}uj.close();}}int HL(List<int> B,int D,int C,List<int> G,int H){var I=H;for(var A=D;A<C-1;A+= 2){var K=pG(B,A);var L=pG(B,A+1);G[I++ ]=16*K+L;}if((C-D).isEven)return null;return 16*pG(B,C-1);}const hZ=const IL.Si();class IL extends Converter<List<int>,String>{const IL.Si();String convert(List<int> A)=>JL(A,0,A.length);ByteConversionSink startChunkedConversion(Sink<String> A)=>new BQ(A);}class BQ extends ByteConversionSinkBase{final Sink<String> xj;BQ(this.xj);void add(List<int> A){xj.add(JL(A,0,A.length));}void addSlice(List<int> A,int B,int C,bool D){RangeError.checkValidRange(B,C,A.length);xj.add(JL(A,B,C));if(D)xj.close();}void close(){xj.close();}}String JL(List<int> C,int D,int G){var H=new Uint8List((G-D)*2);var K=0;var I=0;for(var A=D;A<G;A++ ){var B=C[A];I|= B;H[K++ ]=CQ((B&0xF0)>>4);H[K++ ]=CQ(B&0x0F);}if(I>=0&&I<=255)return new String.fromCharCodes(H);for(var A=D;A<G;A++ ){var B=C[A];if(B>=0&&B<=0xff)continue;throw new FormatException("Invalid byte ${B<0?"-":""}0x${B.abs().toRadixString(16)}.",C,A);}throw 'unreachable';}int CQ(int A)=>A<10?A+rE:A+EL-10;int pG(List<int> D,int G){var A=D[G];var B=rE^A;if(B<=9){if(B>=0)return B;}else{var C=0x20|A;if(EL<=C&&C<=qP)return C-EL+10;}throw new FormatException("Invalid hexadecimal code unit " "U+${A.toRadixString(16).padLeft(4,'0')}.",D,G);}const String wY="""
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>com.dglogik.dglux-server</string>
  <key>ProgramArguments</key>
  <array>
    <string>/bin/bash</string>
    <string>-c</string>
    <string>{{dart.path}} {{watcher.file}} --log-file=logs/dglux_server.log</string>
  </array>
  <key>RunAtLoad</key>
  <true/>
  <key>KeepAlive</key>
  <false/>
  <key>WorkingDirectory</key>
  <string>{{dir.path}}</string>
  <key>HardResourceLimits</key>
  <dict>
    <key>NumberOfFiles</key>
    <integer>4096</integer>
  </dict>
  <key>SoftResourceLimits</key>
  <dict>
    <key>NumberOfFiles</key>
    <integer>4096</integer>
  </dict>
  <key>EnvironmentVariables</key>
  <dict>
	  <key>HOME</key>
	  <string>{{home.path}}</string>
  </dict>
</dict>
</plist>
""";final Map<String,String> TP={"start":"Start Atrius Server","stop":"Stop Atrius Server","restart":"Restart Atrius Server","run":"Run Atrius Server","configure":"Configure Atrius Server","verify":"Verify Atrius Server Configuration","install-service":"Install Atrius Server System Service","uninstall-service":"Uninstall Atrius Server System Service","rebind":"Rebind Atrius Server","help":"Display this Help Message"};main(List<String> A)async{Cb();if(A.isEmpty||(A.length==1&&const["--help","help"].contains(A[0]))){print("Usage: daemon <command> [args]");print("Commands:");for(String B in TP.keys){print("  ${B}: ${TP[B]}");}exit(A.isEmpty?1:0);}var D=Platform.script.toFilePath(windows:Platform.isWindows);var G=mI(D);var C=mI(G);var H=new File(QB(C,"bin","daemon.dart"));if(await H.exists()){Directory.current=new Directory(C);}await mG(A.join(" "));exit(0);}String vK;mG(String B,{bool doExit: true})async{var WC=Platform.script;var aC=WC.toFilePath(windows:Platform.isWindows);vK=mI(aC);if(B=="start"){await UP();if(doExit){exit(0);}}else if(B=="stop"){if(!(await YP())){print("Server is not running.");try {await IF.delete(recursive:true);}catch (AC){}if(doExit){exit(1);}return;}var A=await WP("stop");if(!A){print("Failed to stop server.");if(doExit){exit(1);}return;}else{print("Server Stopped.");}try {await IF.delete(recursive:true);}catch (AC){}if(doExit){exit(0);}}else if(B=="restart"){await mG("stop",doExit:false);await mG("start");}else if(B=="verify"){await VP();}else if(B=="install-service"){await mG("verify");if(Platform.isWindows){var G=EU.iM==32?"nssm-x32.exe":"nssm-x64.exe";var L=new File(QB("bin","server_watcher.bat")).absolute;if(!(await L.exists())){L=new File(QB("bin","dglux_server.bat")).absolute;}if(!(await L.exists())){print("Failed to find the server script.");exit(1);}var O=await Process.run("sc.exe",["query","dglux_server"]);var H=Directory.current.absolute.path;var A=GQ.convert(UTF8.encode(H)).toString();var I=new File("C:\\services\\${A}_dgserver.bat");if(!(await I.exists())){await I.create(recursive:true);}H=nI(H).map((X){return X.contains(" ")?'"${X}"':X;}).join("\\");await I.writeAsString("""
      @echo off
      cd /d ${H}
      bin\\server_watcher.bat --log-file=logs\\dglux_server.log
      """);if(O.exitCode!=0){var K=await Process.run("cmd",["/C",QB("bin","tools",G),"install","dglux_server",I.path]);var HE=await Process.run(QB("bin","tools",G),["set","dglux_server","DisplayName","DGLux Server"]);var pE=await Process.run(QB("bin","tools",G),["set","dglux_server","Description","DGLux Server"]);if(K.exitCode!=0||HE.exitCode!=0||pE.exitCode!=0){print("Failed to Install Windows Service!");print("STDOUT:");print(K.stdout);if(K.stderr.isNotEmpty){print("STDERR:");print(K.stderr);}exit(1);}else{print("Windows Service Installed.");var qE=await Process.run("net",["start","dglux_server"]);if(qE.exitCode!=0){print("Failed to start Windows Service.");exit(1);}print("Windows Service Started.");}exit(0);}else{print("Windows Service is already installed.");exit(1);}}else if(Platform.isMacOS){var D=new File(QB(Platform.environment["HOME"],"Library","LaunchAgents","com.dglogik.dglux-server.plist"));if(await D.exists()){print("Service is already installed.");exit(1);}var c=new File("bin/server_watcher.dart");if(!(await c.exists())){c=new File("bin/watcher.dart");}String C=wY;C=C.replaceAll("{{dart.path}}",lS());C=C.replaceAll("{{dir.path}}",Directory.current.absolute.path);C=C.replaceAll("{{watcher.file}}",c.absolute.path);C=C.replaceAll("{{home.path}}",Platform.environment["HOME"] is String?Platform.environment["HOME"]:Directory.current.absolute.path);await D.writeAsString(C);var A=await Process.run("launchctl",["load",D.absolute.path]);if(A.exitCode!=0){print("Failed to Install Service:");if(A.stdout.isNotEmpty){print("STDOUT:");print(A.stdout);}if(A.stderr.isNotEmpty){print("STDERR:");print(A.stderr);}exit(A.exitCode);}print("Service Installed.");exit(0);}else{print("Services are not supported on your Operating System.");exit(1);}}else if(B=="uninstall-service"){if(Platform.isWindows){var G=EU.iM==32?"nssm-x32.exe":"nssm-x64.exe";var O=await Process.run("sc.exe",["query","dglux_server"]);if(O.exitCode==0){var q=await Process.run(QB("bin","tools",G),["remove","dglux_server","confirm"]);if(q.exitCode!=0){print("Failed to Uninstall Windows Service!");print("STDOUT:");print(q.stdout);print("STDERR:");print(q.stderr);exit(1);}else{print("Windows Service Uninstalled.");}}else{print("Windows Service is Not Installed");exit(1);}}else if(Platform.isMacOS){var D=new File(QB(Platform.environment["HOME"],"Library","LaunchAgents","com.dglogik.dglux-server.plist"));if(!(await D.exists())){print("Service is not installed.");exit(1);}await Process.run("launchctl",["unload",D.absolute.path]);await D.delete();print("Service Uninstalled.");exit(0);}else{print("Services are not supported on your Operating System.");exit(1);}}else if(B=="rebind"){var A=await WP("rebind");if(A){print("Server Rebound.");if(doExit){exit(0);return;}}else{print("Rebind Failed.");if(doExit){exit(1);return;}}}else if(B=="run"){await UP(true);}else if(B=="configure"){String KB;try {KB=Platform.resolvedExecutable;}catch (AC){KB=Platform.executable.isNotEmpty?Platform.executable:"dart";}var A=await jS(KB,args:["bin/configure.dart"],inherit:true);exit(A.exitCode);}else{print("Unknown Command: ${B}");exit(1);}}UP([bool H=false])async{if(await YP()){print("Server is already started.");exit(1);}var B=QB(vK,"server_watcher.dart");var A=new File(B);File C;if(!(await A.exists())){B=QB(vK,"watcher.dart");A=new File(B);}await VP();{var I=await Lb(A.path);var O=QB(A.parent.path,Vc(A.path)+".snapshot");C=new File(O);if(!(await C.exists())){I=ChecksumState.MODIFIED;}if(I!=ChecksumState.SAME){try {await Nb(C.path,A.path);}catch (X){}}A=C;}String G;try {G=Platform.resolvedExecutable;}catch (X){G=Platform.executable.isNotEmpty?Platform.executable:"dart";}var K=await xY();String L=await Gb();Process D=await Process.start(G,[B,"--log-file=logs/dglux_server.log","--manager-port=${K}","--manager-token=${L}"],mode:H?ProcessStartMode.NORMAL:ProcessStartMode.DETACHED);if(!(await IF.exists())){await IF.create(recursive:true);}await IF.writeAsString("ws://${InternetAddress.LOOPBACK_IP_V4.address}:${K}" "/ws?${L}");if(!H){print("Server Started. (pid: ${D.pid})");}else{D.stdout.pipe(vY.stdout);D.stderr.pipe(vY.stderr);wK=ProcessSignal.SIGINT.watch().listen((q)async{await mG("stop");wK.cancel();});var c=await D.exitCode;wK.cancel();await new Future.delayed(const Duration(milliseconds:50));exit(c);}}StreamSubscription wK;const int xK=65536;VP()async{print("DSA Version: ${sb}");var L=await zY();if(L!="unknown"){print("Atrius Solution Builder Build: r${L}");}var O=await yY();if(O!="unknown"){print("Atrius Server Build: ${O}");}var X=new File("install.json");var B=true;print("Verifying Environment...");if(await X.exists()){print("Detected a Get DSA installation.");var WC=await X.readAsString();var I=const JsonDecoder().convert(WC);if(I["links"].any((C)=>C["language"]=="Java")){var aC=await JE("java");if(aC==null){print("Warning: Please install Java." " See https://www.java.com/ for more information.");}}if(I["links"].any((C)=>C["language"]=="JavaScript")){var HE=await JE("node");if(HE==null){print("Warning: Please install NodeJS." " See https://nodejs.org/ for more information.");}}if(I["links"].any((C)=>C["language"]=="Ruby")){var pE=await JE("ruby");if(pE==null){print("Warning: Please install Ruby." "See https://www.ruby-lang.org/en/documentation/installation/ " "for more information.");}}if(I["links"].any((C)=>C["language"]=="Python")){var qE=await JE("python");if(qE==null){print("Warning: Please install Python." " See https://www.python.org/downloads/" " for more information.");}}}print("Verifying Configuration...");var A=new jD();await A.Wh();try {var lG=await InternetAddress.lookup(A.host);if(lG.isEmpty){print('Error: Unable to find host name: ${A.host}');B=false;}}catch (G){print('Error: Unable to look up host name: ${A.host}.');B=false;}if(A.zO){var c=false;var q=false;if(A.port!=null&&A.port>0){c=true;if(A.port>xK||(A.port is num&&A.port is!int)){print('Error: The configured HTTP Port is invalid: ${A.port}');B=false;}else if(!(await hL(A.port))){print("Error: The configured HTTP Port" " (${A.port}) is currently in use.");B=false;}}if(A.yD!=null&&A.yD>0&&A.LK!=null&&A.LK.isNotEmpty){q=true;if(A.yD>xK||(A.yD is num&&A.yD is!int)){print("Error: The configured HTTPS Port is invalid: " "${A.yD}");B=false;}else if(!(await hL(A.yD))){print("Error: The configured HTTPS Port (${A.yD}) " "is currently in use.");B=false;}}if(!c&&!q){print("Error: HTTP and HTTPS Ports are both disabled. " "At least one active port is required.");B=false;}var H=A.get('authServer');if(H is Map&&H['enabled']==true){var KB=H["host"];var K=H["port"];var uK=H["token"];try {var Ei=Uri.parse(KB);}catch (G){print('Error parsing authServer host (${KB}). Error: ${G}');B=false;}int D;if(K is!num){try {D=int.parse(K);}catch (G){print('Error parsing authServer port (${K}). Error: ${G}');B=false;}}else{D=K.toInt();}if(D<=0||D>=xK){print('Invalid authServer port number (${D})');B=false;}else if(!(await hL(D))){print('Error: The configured authServer port (${D}) is currently ' 'in use.');B=false;}if(uK==null){print("Authentication Server token not set.");B=false;}}}SD AC=US(A.IK);if(AC==null){B=false;}else{try {await AC.init(A);}catch (G){print("Failed to initialize Authentication System: ${G}");B=false;}}if(A.WO==true){print("!!WARNING!! You have debug mode set to on. Performance and resources WILL suffer.");print("To fix this issue, edit the server.json and set the 'debug' setting to false.");}if(A.vF>128||A.vF<0||(A.vF is num&&A.vF is!int)){print('Error: Invalid number of workers: ${A.vF}');B=false;}if(!B){print("Verification Failed. Please fix the above problems and then try again.");exit(1);}}File IF=new File("dglux_server.run");Future<bool> WP(String B)async{var A=await XP();A.add(B);var C=await A.where((D)=>!D.startsWith("STD")).first.timeout(const Duration(seconds:8),onTimeout:(){return "ERROR";});if(C=="OK"){return true;}else{return false;}}Future<WebSocket> XP()async{if(!(await IF.exists())){throw new Exception("No Server Run File Found");}var A=await IF.readAsString();return await WebSocket.connect(A.trim());}Future<int> xY()async{var A=await ServerSocket.bind(InternetAddress.LOOPBACK_IP_V4.address,0);var B=A.port;await A.close();return B;}Future<String> yY()async{var A=new File("BUILD_NUMBER");try {if(!(await A.exists())){return "unknown";}else{return (await A.readAsString()).trim();}}catch (B){return "unknown";}}Future<String> zY()async{var A=Tb.Wb;try {if(!(await A.exists())){return "unknown";}else{return (await A.readAsString()).trim();}}catch (B){return "unknown";}}Future<bool> YP()async{try {var A=await XP().timeout(const Duration(seconds:6));try {await A.close();}catch (B){}return true;}catch (B){return false;}}abstract class PF{Stopwatch yj=new Stopwatch()..start();vB message;PF(this.message);String toString()=>"PendingOp m=${message}";bool OY(hD A);done(){var A=yj.elapsedMilliseconds;XL.UC("LDAP request serviced: ${message} (${A} ms)");}}class UQ extends PF{var RO=new Completer<b>();UQ(vB A):super(A);bool OY(hD B){var A=B.mX;if(A.nE==j.UI||A.nE==j.SL||A.nE==j.TL){RO.complete(A);}else{RO.completeError(A.tg());}done();return true;}}typedef bool NL(X509Certificate _0);class QI{Queue<PF> zj=new Queue<PF>();Map<int,PF> Ak=new Map();static const Ea=const Duration(seconds:3);bool Bk=false;Socket Ck;bool isClosed()=>Ck==null;int Dk=1;int Ek;String Fk;bool Gk;SecurityContext Hk;NL Ik=null;Completer Jk;QI(this.Fk,this.Ek,this.Gk,this.Ik,[this.Hk]);Future<QI> connect()async{try {if(isClosed()){var B=(Gk)?SecureSocket.connect(Fk,Ek,onBadCertificate:Ik,context:Hk):Socket.connect(Fk,Ek);Ck=await B;Jk=new Completer();Ck.transform(qZ()).listen((C)=>Kk(C),onError:Lk,onDone:Mk);}return this;}on SocketException catch (A){if(A.osError!=null){if(A.osError.errorCode==61){throw new QL(A,Fk,Ek);}else if(A.osError.errorCode==8){throw new PL(A,Fk);}}rethrow;}}void Kk(vB A){var B=Ma.Na(A);if(B is WL){iD.UC("Got extended response ${B.SY} code=${B.mX.nE}");}var C=Ak[A.AE];if(C==null)throw new TI("Server sent us an unknown message id = ${A.AE} opCode=${A.vO}");if(C.OY(B)){Ak.remove(A.AE);}if(A.vO==VL)Bk=false;}void Lk(A,StackTrace B){cB.tB("listen: onError",A,B);if(A is SocketException){if(A.osError!=null){if(A.osError.errorCode==61){throw new QL(A,Fk,Ek);}else if(A.osError.errorCode==8){throw new PL(A,Fk);}}throw new RI(A);}else{throw A;}}void Mk(){cB.uB("message stream done");assert(Jk!=null);Jk.complete();Nk();}Future<b> process(sG B){if(isClosed()){throw new AG("not connected");}var C=new vB( ++Dk,B);var A=new UQ(C);Ok(A);return A.RO.future;}Ok(PF A){zj.add(A);Pk();}Pk(){while(Qk()){var A=zj.removeFirst();Rk(A);}}bool Qk()=>(!zj.isEmpty)&&(Bk==false);Rk(PF A){XL.UC("[${A.message.AE}] Sending LDAP message: ${A.message}");var C=A.message.toBytes();WI.uB("[${A.message.AE}] Bytes sending: ${C}");Ck.add(C);Ak[A.message.AE]=A;if(A.message.vO==UL){Bk=true;}try {Ck.flush().then((D){WI.tB("[${A.message.AE}] Sent ${C.length} bytes");}).catchError((B){WI.DE("[${A.message.AE}] ${B}");throw B;});}catch (B){WI.DE("[${A.message.AE}] caught: ${B}");throw B;}}Future close(bool B)async{if(B||Sk()){await Nk();}else{cB.tB("wait for queue to drain pendingResponse=${Ak}");var A=new Completer();new Timer.periodic(Ea,(Timer C){if(Sk()){C.cancel();Nk().then((D)=>A.complete());}});await A.future;}if(Jk!=null){cB.uB("wait for message stream to be done");await Jk.future;}}bool Sk(){if(Ak.isEmpty&&zj.isEmpty){return true;}Pk();return false;}Future Nk()async{if(!isClosed()){await Ck.destroy();Ck=null;}}}class SI{static const int RL=389;static const int aQ=636;QI Tk;bool Uk=true;static const String oQ="localhost";String Fk=oQ;String get host=>Fk;void sh(String A){var B=(A!=null&&A.isNotEmpty)?A:oQ;if(B!=Fk){if(state==ConnectionState.ready||state==ConnectionState.bindRequired){throw new StateError("cannot change host while connection is open");}}Fk=B;}bool Vk=false;int Ek=RL;SecurityContext Hk=null;int get port=>Ek;void th(bool B,[int A=null,SecurityContext C=null]){if(A!=null){if(A<0||65535<A){throw new ArgumentError.value(A,"port","outside range of 0-65535");}}B=(B==null||!B)?false:true;if(A==null){A=(B)?aQ:RL;}if(B!=Vk||A!=Ek||C!=Hk){if(state==ConnectionState.ready||state==ConnectionState.bindRequired){throw new StateError("cannot change protocol while connection is open");}Vk=B;Ek=A;Hk=C;}}NL jW;String Wk="";String Xk="";String Yk="";String Zk="";bool get isAuthenticated{return (Wk.isNotEmpty);}List<Completer> ak=new List<Completer>();List<Completer<b>> bk=new List<Completer<b>>();var ck;List<Completer> dk=new List<Completer>();ConnectionState get state{if(Tk==null){return ConnectionState.closed;}else{if(Tk.isClosed()){return ConnectionState.disconnected;}else{if(Wk!=Yk||Xk!=Zk){return ConnectionState.bindRequired;}else{return ConnectionState.ready;}}}}SI({String host: null,bool ssl: false,int port: null,String bindDN: null,String password: null,NL badCertificateHandler: null,SecurityContext context: null}){sh(host);th(ssl,port,context);ek(bindDN,password);jW=badCertificateHandler;this.Uk=true;}Future<b> open()async{cB.UC("open: ${this.rC}");await fk(true);if(Uk){return await gk(mustSend:false);}else{return null;}}Future close([bool A=false])async{cB.UC("close${A?": immediate":""}");if(ak.isNotEmpty){var B=new Completer();ak.add(B);await B.future;}switch (state){case ConnectionState.ready:case ConnectionState.bindRequired:await Nk(A);cB.tB("close: done");break;case ConnectionState.closed:cB.tB("close: was closed");break;case ConnectionState.disconnected:await Tk.close(A);cB.tB("close: was disconnected");break;}Tk=null;}Future<Object> Nk(bool C)async{assert(ak.isEmpty);var B=new Completer();dk.add(B);if(dk.length==1){var A=null;try {cB.uB("close: started");await Tk.close(C);cB.uB("close: done");}catch (D){A=D;rethrow;}finally {for(var G in dk){G.complete(A);}dk.removeRange(0,dk.length);}return null;}else{cB.uB("close in progress");var A=await B.future;if(A!=null){throw A;}return null;}}void ek(String A,String B){if(A!=null&&A is!String){throw new ArgumentError.value(A,"bindDN","not a String");}if(B!=null&&B is!String){throw new ArgumentError.value(A,"password","not a String");}if(A==null||A.isEmpty){Wk="";Xk="";}else{Wk=A;Xk=B??"";}}Future fk(bool A)async{if(dk.isNotEmpty){var B=new Completer();dk.add(B);await B.future;}switch (state){case ConnectionState.closed:case ConnectionState.disconnected:if(A||Uk){if(A){cB.tB("explicit open");}else{cB.tB("automatic open: ${this.rC}");}await hk();}else{throw new StateError("connection is not open: ${this.rC}");}break;case ConnectionState.bindRequired:case ConnectionState.ready:if(A&&!Uk){throw new StateError("cannot open: already open: ${this.rC}");}break;}}Future<Object> hk()async{assert(dk.isEmpty);assert(bk.isEmpty);var B=new Completer<Object>();ak.add(B);if(ak.length==1){var A=null;try {cB.uB("opening connection: started");var C=new QI(Fk,Ek,Vk,jW??La,Hk);await C.connect();assert(Tk==null||Tk.isClosed());Tk=C;Yk="";Zk="";cB.uB("opening connection: done");}catch (D){A=D;rethrow;}finally {for(var G in ak){G.complete(A);}ak.removeRange(0,ak.length);}return null;}else{cB.uB("open in progress");var A=await B.future;if(A!=null){throw A;}return null;}}Future ik()async{switch (state){case ConnectionState.closed:if(Uk){await open();}else{assert(Tk==null);throw new StateError("connection not open");}break;case ConnectionState.disconnected:if(Uk){await open();}else{throw new XQ();}break;case ConnectionState.bindRequired:if(Uk){await gk(mustSend:false);}else{throw new StateError("connection requires BIND");}break;case ConnectionState.ready:break;}assert(state==ConnectionState.ready);}Future<b> gk({bool mustSend: true})async{assert(mustSend!=null);if(!mustSend){if(state==ConnectionState.closed||state==ConnectionState.disconnected){cB.tB("bind not required: connection not open");return null;}if(Yk==Wk&&Zk==Xk){cB.tB("bind not required: no change in credentials");return null;}}assert(Tk!=null&&!Tk.isClosed());if(mustSend){return await jk();}else{return await kk();}}Future<b> kk()async{cB.tB("automatic bind: ${(Wk.isNotEmpty)?Wk:"anonymous"}");assert(ak.isEmpty);assert(dk.isEmpty);var B=new Completer<b>();bk.add(B);if(bk.length==1){ck=null;b A=null;try {cB.tB("explicit bind: ${(Wk.isNotEmpty)?Wk:"anonymous"}");A=await jk();ck=null;return A;}catch (C){A=null;ck=C;rethrow;}finally {for(var D in bk){D.complete(A);}bk.removeRange(0,bk.length);}}else{var A=await B.future;if(ck){assert(A==null);throw ck;}assert(A!=null);return A;}}Future<b> jk()async{var A=await Tk.process(new BS(this.Wk,this.Xk));if(A.nE==j.UI){cB.tB("bind: success");Yk=Wk;Zk=Xk;}else{assert(false);return null;}return A;}Future<b> add(String A,Map<String,dynamic> B)async{cB.UC("add: ${A}");await ik();return await Tk.process(new AS(A,cC.xZ(B)));}static bool La(X509Certificate A){throw new ZQ(A);}String get rC{if(Vk){return "ldaps://"+Fk+(Ek!=aQ?":${Ek}":"");}else{return "ldap://"+Fk+(Ek!=RL?":${Ek}":"");}}}enum ConnectionState {closed,bindRequired,ready,disconnected}StreamTransformer<Uint8List,vB> qZ(){Uint8List B=null;return new StreamTransformer.fromHandlers(handleData:(Uint8List D,EventSink<vB> H){if(D==null||D.length==0){RD.UC("received: zero");return;}Uint8List A;if(B==null){RD.UC("received: ${D.length}");A=new Uint8List.view(D.buffer);}else{RD.UC("received: ${D.length} (+${B.length} leftover)");A=new Uint8List(B.length+D.length);A.setRange(0,B.length,B);A.setRange(B.length,A.length,D);B=null;}RD.uB(()=>"received: ${D}");assert(0<A.length);do{var C=null;var G;if(2<=A.length){int L=A[1];if(L&0x80==0){G=1;C=L&0x7F;}else{var O=(L&0x7F);if(2+O<=A.length){G=1+O;C=0;for(int X=2;X<O+2;X++ ){C<<= 8;C|= A[X]&0xFF;}}}}if(C!=null&&(1+G+C)<=A.length){var I=(1+G+C);RD.tB(()=>"parsed ASN.1 object: ${I} bytes");OS.UC(()=>"ASN.1 object received: tag=${A[0]}, length=${C}");OS.uB(()=>"ASN.1 value: ${new Uint8List.view(A.buffer,1+G,C)}");if(A[0]==10){RD.GE("LDAP stream transformer: got a tag 10 object");}var c=new vB.ai(A);assert(c.Zh==I);H.add(c);if(A.length==I){A=null;}else{A=new Uint8List.view(A.buffer,A.offsetInBytes+I);}}else{B=A;A=null;}}while(A!=null);if(B==null){RD.tB("processed: all");}else{RD.tB("processed: leftover ${B.length} bytes");}},handleError:(Object K,StackTrace KB,EventSink<vB> H){if(K is TlsException){TlsException q=K;if(q.osError==null&&q.message=="OSStatus = -9805: connection closed gracefully error -9805"){RD.uB("LDAP stream transformer: closed gracefully"+((B==null)?"":": ${B.length} bytes left over"));return;}}RD.DE("LDAP stream transformer: error=${K}");throw K;},handleDone:(EventSink<vB> H){RD.uB("LDAP stream transformer: byte stream done");H.close();});}r OI=new r("ldap.control");abstract class sE{String get rO;static const sZ=0xA0;bool Rh=false;GB oE()=>throw new Exception("Not implemented. Subclass must implement");sE();static List<sE> tZ(GB A){OI.uB("Create Controls from ${A}");var B=[] ;if(A!=null){A.i.forEach((C)=>B.add(vZ(C)));}return B;}static vZ(GB A){var B=(A.i.first as SB).bB;OI.uB("Got control ${B}");switch (B){case OL.YQ:return new OL.Xi(A.i[1]);case ML.MQ:return new ML.Wi(A.i[1]);default:throw new Exception("Control ${B} not implemented");}}String toString()=>"${rO} ${this.runtimeType}, isCritical=${Rh}}";}class ML extends sE{static const MQ="1.2.840.113556.1.4.474";String get rO=>MQ;ML.Wi(SB A){}}class OL extends sE{static const YQ="2.16.840.1.113730.3.4.10";get rO=>YQ;int fY;int sW;int QX=0;int Aj;OL.Xi(SB B){var C=B.MD;C[0]=GI;var D=new GB.Ki(C);OI.uB("Create control from ${B}  seq=${D}");var A=(D.i.first as GB);A.i.forEach((G)=>OI.uB(" ${G.runtimeType}  ${G}"));fY=(A.i[0] as eD).VC;sW=(A.i[1] as eD).VC;QX=(A.i[2] as eD).VC;}String toString()=>"${super.toString()}(targetpos=${fY}, contentCount=${sW},x=${QX})";}class cC{String lk;Set mk=new Set();String get name=>lk;Set get values=>mk;cC(String B,dynamic A){this.lk=B;if(A is Iterable){mk.addAll(A);}else{mk.add(A);}}String toString()=>"${mk}";bool operator==(Object A)=>(A is cC&&lk==A.lk)&&mk.containsAll(A.mk)&&A.mk.containsAll(mk);static Map<String,cC> xZ(Map<String,dynamic> D){var B=new Map<String,cC>();D.forEach((C,A){B[C]=(A is cC?A:new cC(C,A));});return B;}}class Z{int nk;int get mF=>nk;String ok;String get Yg=>ok;String pk;String get LO=>pk;List<Z> qk=new List<Z>();List<Z> get FP=>qk;static const int LQ=0xA0;static const int NQ=0xA1;static const int OQ=0xA2;static const int PQ=0xA3;static const int uZ=0xA4;static const int QQ=0xA5;static const int RQ=0xA6;static const int SQ=0x87;static const int TQ=0xA8;static const int wZ=0xA9;Z(this.nk,[this.pk,this.ok,this.qk]);static Z yZ(String A,String B)=>new Z(PQ,A,B);static Z VQ(List<Z> A)=>new Z(LQ,null,null,A);static Z WQ(List<Z> A)=>new Z(NQ,null,null,A);static Z zZ(Z A)=>new Z(OQ,null,null,[A]);static Z Aa(String A)=>new Z(SQ,A);static Z Ba(String A)=>new qG(A);static Z Ca(String A,String B)=>new Z(QQ,A,B);static Z Da(String A,String B)=>new Z(RQ,A,B);static Z Fa(String A,String B)=>new Z(TQ,A,B);Z operator&(Z A)=>Z.VQ([this,A]);Z operator|(Z A)=>Z.WQ([this,A]);String toString()=>"Filter(type=${nk} attrName=${pk} val=${ok}, subFilters=${qk})";HB oE(){switch (mF){case Z.PQ:case Z.QQ:case Z.RQ:case Z.TQ:var A=new GB(tag:mF);A.add(new SB(LO));A.add(new SB(pZ.rZ(Yg)));return A;case Z.LQ:case Z.NQ:var B=new xF(tag:mF);FP.forEach((Z D){B.add(D.oE());});return B;case Z.SQ:return new SB(LO,tag:mF);case Z.OQ:assert(FP!=null);var C=new xF(tag:mF);C.add(FP[0].oE());return C;case Z.wZ:throw "Not Done yet. Fix me!!";default:throw new AG("Unexpected filter type = ${mF}. This should never happen");}}}class qG extends Z{static const int Ga=0x80;static const int Ha=0x81;static const int Ia=0x82;String rk;List<String> sk=[] ;String tk;String get eX=>rk;List<String> get any=>sk;String get RX=>tk;qG(String C):super(Z.uZ){var B=C.split("=");if(B.length!=2||B[0]==""||B[1]==""){throw new AG("Invalid substring pattern: expecting attr=match: '${C}'");}pk=B[0];var G=B[1];var A=G.split("*");if(A.length==1){throw new AG("Invalid substring pattern: missing '*': '${C}'");}if(!A.any((H)=>H.isNotEmpty)){throw new AG("Invalid substring pattern: use \"present\" filter instead: '${C}'");}if(A[0]!=""){rk=A[0];}if(A.last!=""){tk=A.last;}for(int D=1;D<A.length-1; ++D){sk.add(A[D]);}}HB oE(){var B=new GB(tag:mF);B.add(new SB(LO));var A=new GB();if(eX!=null){A.add(new SB(eX,tag:qG.Ga));}any.forEach((String C)=>A.add(new SB(C,tag:qG.Ha)));if(RX!=null){A.add(new SB(RX,tag:qG.Ia));}B.add(A);return B;}String toString()=>"SubstringFilter(_init=${rk}, any=${sk}, fin=${tk})";}abstract class tE implements Exception{String uk;String get message=>uk;tE(this.uk);String toString()=>uk;}class AG extends tE{AG(String A):super(A);}class XQ extends tE{XQ():super("connection disconnected");}class RI extends tE{SocketException EE;RI(this.EE,[String A="Socket exception"]):super(A){assert(EE!=null);}String toString()=>EE.toString();}class PL extends RI{String BI;PL(SocketException A,this.BI):super(A,"Server not found"){assert(EE!=null);assert(EE.osError!=null);assert(EE.osError.errorCode==8);}String toString()=>"Cannot connect to ${BI}";}class QL extends RI{int localPort;String BI;int remotePort;QL(SocketException A,this.BI,this.remotePort):super(A,"Cannot establish connection"){assert(EE!=null);assert(EE.osError!=null);assert(EE.osError.errorCode==61);this.localPort=EE.port;}String toString()=>"Cannot connect to ${BI}:${remotePort} from port ${localPort}";}class ZQ extends tE{X509Certificate certificate;ZQ(this.certificate):super("Bad X.509 certificate");String toString()=>"${message}: subject=${certificate.subject}; issuer=${certificate.issuer}";}class TI extends tE{TI(String A):super(A);}abstract class n extends tE{b vk;b get result=>vk;n(this.vk):super("LDAP Result"){assert(result!=null);}String toString()=>vk.toString();}class bQ extends n{bQ(b A):super(A);}class cQ extends n{cQ(b A):super(A);}class dQ extends n{dQ(b A):super(A);}class eQ extends n{eQ(b A):super(A);}class fQ extends n{fQ(b A):super(A);}class gQ extends n{gQ(b A):super(A);}class hQ extends n{hQ(b A):super(A);}class iQ extends n{iQ(b A):super(A);}class jQ extends n{jQ(b A):super(A);}class kQ extends n{kQ(b A):super(A);}class lQ extends n{lQ(b A):super(A);}class mQ extends n{mQ(b A):super(A);}class nQ extends n{nQ(b A):super(A);}class pQ extends n{pQ(b A):super(A);}class qQ extends n{qQ(b A):super(A);}class rQ extends n{rQ(b A):super(A);}class sQ extends n{sQ(b A):super(A);}class tQ extends n{tQ(b A):super(A);}class uQ extends n{uQ(b A):super(A);}class vQ extends n{vQ(b A):super(A);}class wQ extends n{wQ(b A):super(A);}class xQ extends n{xQ(b A):super(A);}class yQ extends n{yQ(b A):super(A);}class zQ extends n{zQ(b A):super(A);}class BR extends n{BR(b A):super(A);}class GR extends n{GR(b A):super(A);}class JR extends n{JR(b A):super(A);}class NR extends n{NR(b A):super(A);}class RR extends n{RR(b A):super(A);}class VR extends n{VR(b A):super(A);}class ZR extends n{ZR(b A):super(A);}class eR extends n{eR(b A):super(A);}class iR extends n{iR(b A):super(A);}class oR extends n{oR(b A):super(A);}class sR extends n{sR(b A):super(A);}class wR extends n{wR(b A):super(A);}class yR extends n{yR(b A):super(A);}class zR extends n{zR(b A):super(A);}class b{int wk;String xk;String yk;List<String> zk;int get nE=>wk;b(this.wk,this.yk,this.xk,this.zk){}String toString()=>j.Ka(wk)+((xk!=null&&xk.isNotEmpty)?": ${xk}":"")+((yk!=null&&yk.isNotEmpty)?": ${yk}":"");tE tg(){switch (nE){case j.AR:return new bQ(this);break;case j.DR:return new cQ(this);break;case j.ER:return new dQ(this);break;case j.FR:return new eQ(this);break;case j.HR:return new fQ(this);break;case j.IR:return new gQ(this);break;case j.KR:return new hQ(this);break;case j.LR:return new iQ(this);break;case j.MR:return new jQ(this);break;case j.OR:return new kQ(this);break;case j.PR:return new lQ(this);break;case j.QR:return new mQ(this);break;case j.SR:return new nQ(this);break;case j.TR:return new pQ(this);break;case j.UR:return new qQ(this);break;case j.WR:return new rQ(this);break;case j.XR:return new sQ(this);break;case j.YR:return new tQ(this);break;case j.aR:return new uQ(this);break;case j.bR:return new vQ(this);break;case j.cR:return new wQ(this);break;case j.dR:return new xQ(this);break;case j.fR:return new yQ(this);break;case j.gR:return new zQ(this);break;case j.hR:return new BR(this);break;case j.jR:return new GR(this);break;case j.kR:return new JR(this);break;case j.lR:return new NR(this);break;case j.mR:return new RR(this);break;case j.nR:return new VR(this);break;case j.pR:return new ZR(this);break;case j.qR:return new eR(this);break;case j.rR:return new iR(this);break;case j.tR:return new oR(this);break;case j.uR:return new sR(this);break;case j.vR:return new wR(this);break;case j.xR:return new yR(this);break;default:assert(nE!=j.UI);assert(nE!=j.SL);assert(nE!=j.TL);return new zR(this);break;}}}class rG{String Al;final List<String> Bl;Map<String,cC> get Zg=>Cl;Map<String,cC> Cl=new Map<String,cC>();rG(this.Al,{List<String> referrals: const[] }):Bl=referrals;String toString()=>"Entry[${Al},${Cl}]";}class j{static const UI=0;static const AR=1;static const DR=2;static const ER=3;static const FR=4;static const SL=5;static const TL=6;static const HR=7;static const IR=8;static const KR=9;static const LR=11;static const MR=12;static const OR=13;static const PR=14;static const QR=16;static const SR=17;static const TR=18;static const UR=19;static const WR=20;static const XR=21;static const YR=32;static const aR=33;static const bR=34;static const cR=35;static const dR=36;static const fR=48;static const gR=49;static const hR=50;static const jR=51;static const kR=52;static const lR=53;static const mR=54;static const nR=64;static const pR=65;static const qR=66;static const rR=67;static const tR=68;static const uR=69;static const vR=71;static const xR=80;static final Map<int,String> Ja={UI:"OK",AR:"Operations error",DR:"Protocol error",ER:"Time limit exceeded",FR:"Size limit exceeded",SL:"Compare false",TL:"Compare true",HR:"Auth method not supported",IR:"Strong auth required",KR:"Referral",LR:"Admin limit exceeded",MR:"Unavailable critical extension",OR:"Confidentiality required",PR:"SASL bind in progress",QR:"No such attribute",SR:"Undefined attribute type",TR:"Inappropriate matching",UR:"Constraint violation",WR:"Attribute or value exists",XR:"Invalid attribute syntax",YR:"No such object",aR:"Alias problem",bR:"Invalid DN syntax",cR:"Is leaf",dR:"Alias dereferencing problem",fR:"Inappropriate authentication",gR:"Invalid credentials",hR:"Insufficient access rights",jR:"Busy",kR:"Unavailable",lR:"Unwilling to perform",mR:"Loop detect",nR:"Naming violation",pR:"Object class violation",qR:"Not allowed on nonleaf",rR:"Not allowed on RDN",tR:"Entry already exists",uR:"Object class mods prohibited",vR:"Affects multiple DSAS",xR:"Other"};static String Ka(int A)=>Ja[A]??"LDAP result code ${A}";}class pZ{static String rZ(String C){StringBuffer A=new StringBuffer();C.codeUnits.forEach((B){switch (B){case 0x2a:case 0x28:case 0x29:case 0x00:case 0x5c:A.write('\\');A.write(B.toRadixString(16));break;default:A.writeCharCode(B);break;}});return A.toString();}}SD US(String A){SD B;if(A=="file"||A=="json"){B=new YL();}else if(A=="proxy"){B=new PS();}else if(A=="openId"){B=new WS();}else if(A=="ldap"){B=new CG();}else if(A=="external"){B=new Xa();}else if(A=="ldap-with-fallback"){B=new BG([new CG(),new CG("ldap2")]);}else if(A=="ldap-with-fallback-and-file"){B=new BG([new CG(),new CG("ldap2"),new YL()]);}else if(A=="open"){B=new Ya();}else if(A.startsWith(BG.RS)&&A.endsWith("]")){String C=A.substring(BG.RS.length,A.length-1);List<String> D=C.split(",").map((G)=>G.trim()).toList();return new BG(D.map(US).toList());}else{EB.GE("Invalid Authentication Method: ${A}");}return B;}abstract class SD{Future init(jD A);Map<String,int> Cj=<String,int>{};}abstract class tG{}abstract class ca{}abstract class uG{}class TS{final String message;TS(this.message);String toString()=>message;}class MC{final String username;final bool GP;final String sH;final Map oO;MC(this.username,this.GP,[this.sH,Map A]):oO=A is!Map?{}:A;static MC VS(Map A){var B=new MC(A["username"],A["superuser"] is bool?A["superuser"]:false,A["email"],A["metadata"]);for(String C in A.keys.where((D)=>!(const["username","superuser","email","metadata"]).contains(D))){B.lO[C]=A[C];}return B;}Map iY([List<String> C]){var A={"username":username,"superuser":GP,"metadata":oO};if(sH!=null&&sH.isNotEmpty){A["email"]=sH;}if(C!=null){for(String B in C){if(lO.containsKey(B)){A[B]=lO[B];}}}return A;}MC jF(){return new MC(username,GP,sH,new Map.from(oO));}Map<String,dynamic> lO={};}class BG extends SD implements tG{final List<SD> yX;static const String RS='composite[';BG(this.yX);Future init(jD A)async{for(var B in yX){await B.init(A);}}}class Xa extends SD implements tG,uG{WebSocket socket;String rC;String LC;Duration timeout=new Duration(seconds:10);bool FI;Future init(jD C)async{var A=C.get("externalAuth");B(String D){EB.FF(D);exit(1);}if(A==null){B("External Authentication not configured.");}rC=A["url"];if(rC==null||rC.isEmpty){B("External Authentication URL not configured.");}LC=A["token"];if(A.containsKey('timeout')){timeout=new Duration(seconds:A['timeout']);}if(LC==null){B("External Authentication token not configured.");}FI=A["verifyOnStart"];if(FI==null){FI=true;}await connect(true);}connect([bool A=false])async{if(Dl){return;}EB.UC("External Authentication connecting");try {socket=await kb.nb(rC);Dl=true;El=0;socket.done.then((K){EB.UC("External Authentication is closed");Dl=false;new Timer(const Duration(seconds:5),(){connect();});});socket.listen((String G){try {var B=const JsonDecoder().convert(G);if(B is!Map){return;}if(B["event"]=="changed"){for(var H in Fl){H();}return;}Gl.add(B);}catch (C){EB.UC("External Authentication data error : ${C}");}});socket.add(const JsonEncoder().convert({"token":LC}));Map D=await Hl.first.timeout(const Duration(seconds:5));if(D["error"]!=null){if(A&&FI){EB.DE("External Authentcation system says '${D["error"]}'");exit(1);}else{throw new TS(D["error"]);}}if(A){EB.FF("External Authentication System Connected.");}}catch (C,I){EB.DE("Failed to connect to the External Authentication system.",C,I);if(A&&FI){exit(1);}new Timer(const Duration(seconds:5),(){connect();});}}StreamController<Map> Gl=new StreamController.broadcast();Stream<Map> get Hl=>Gl.stream;bool Dl=false;int El=0;List<Function> Fl=[] ;}CH QS;CH ba;class YL extends SD implements uG,tG,ca{File file=new File("users.json");List<MC> EI=[] ;YL();Future init(jD A)async{QS=new CH(keyLength:A.eK,iterations:A.dK);if(A.zH!=null||A.yH!=null){var B=A.yH??A.dK;var C=A.zH??A.eK;ba=new CH(keyLength:C,iterations:B);}await load();if(!Platform.isAndroid){var D=new MG(file.path);D.TK.listen((dC G)async{if(G.type==mD.wI){EB.FF("Reloading Users");await load();}});}}String zg(){var A={"username":"dgSuper"};var B=[A];A["password"]=QS.Jh('dg1234');A["superuser"]=true;A["metadata"]={"forcePasswordChange":true};return eL.convert(B);}Future load()async{if(Il){return;}Il=true;try {if(!(await file.exists())){await file.create(recursive:true);await file.writeAsString(zg()+"\n");}var B=await file.readAsString();var A=const JsonDecoder().convert(B);if(A is!List){A=[] ;}List C=A;EI=C.map(MC.VS).toList();Jl();}on FormatException catch (D){EB.GE("Failed to load Users File: ${D.toString().trim()}");}Il=false;}bool Il=false;hK()async{var A=const JsonEncoder.withIndent("  ");var B=A.convert(EI.map((MC C){return C.iY(const["password"]);}).toList())+"\n";await file.writeAsString(B);}List<Function> Fl=[] ;void Jl(){for(var A in Fl){A();}}}class Za<BC>{}class mB{static const String da='url';static const String ea='dn';static const String fa='password';static const String aL='searchBase';static const String ga='groupAttribute';static const String ha='usernameAttribute';static const String ia='emailAttribute';static const String ja='allowListUsers';static const String ka='superuserGroup';static const String la='metadata';static const String ma='serverCertificate';static const String na='clientCertificate';static const String oa='clientCertificateKey';static const String pa='clientKeyPassword';static const String qa='searchFilter';final String host;final bool ssl;final int port;String lW;String password;SecurityContext context;mB(this.host,{this.ssl: false,this.port: null});}class CG extends SD implements tG,uG{static const String bL='certs';mB oF;List<String> AP;String jO;String OP;String cO;String jK;bool JO;Map<String,String> pO;Z oh;dynamic HP;String Kl;CG([this.Kl="ldap"]);Future init(jD q)async{void B(String pE){EB.DE("Error while initializing LDAP: ${pE}");exit(1);}if(q.get(Kl)==null){B("LDAP Authentication is not configured.");}var A=q.get(Kl);var AC=A[mB.da];if(AC==null){B("LDAP URL was not specified.");}Uri D;try {D=Uri.parse(AC);}catch (G){B("Failed to parse LDAP URL: ${G}");}var L=new mB(D.host,port:D.port!=0?D.port:null,ssl:D.scheme=="ldaps");SecurityContext C;String O,X,c,WC;var KB=A[mB.ma];if(KB is String&&KB.isNotEmpty){O=QB(bL,KB);var H=new File(O);if(!H.existsSync()){B('Specified server certificate does not exist at ${O}');}C=SecurityContext.defaultContext;C.setTrustedCertificates(O);}var I=A[mB.na];var K=A[mB.oa];WC=A[mB.pa];if(I!=K&&(I==null||K==null)){B('Both Client Certificate and Client Certificate Key must be provided');}if(I is String&&I.isNotEmpty&&K is String&&K.isNotEmpty){X=QB(bL,I);var H=new File(X);if(!H.existsSync()){B('Specified Client certificate does not exist at ${X}');}c=QB(bL,K);H=new File(c);if(!H.existsSync()){B('Specified Client certificate key does not exist at ${c}');}if(C==null)C=SecurityContext.defaultContext;C.useCertificateChain(X);C.usePrivateKey(c,password:WC);}L.context=C;var aC=A[mB.ea];if(aC==null){B("LDAP DN is not configured.");}L.lW=aC;var HE=A[mB.fa];if(HE!=null){L.password=HE;}if(A[mB.aL] is String){AP=[A[mB.aL]];}else{AP=A[mB.aL];}if(AP==null){B("LDAP Search Base is not configured.");}jO=A[mB.ga];if(jO==null){jO="gid";}OP=A[mB.ha];if(OP==null){OP="uid";}cO=A[mB.ia];if(cO==null){cO='mail';}JO=A[mB.ja];if(JO==null){JO=false;}jK=A[mB.qa];if(jK!=null&&jK.isNotEmpty){var qE=new Sb();try {oh=qE.Oe(jK);}catch (G){B('Unable to parse search filter: ${G}');}}HP=A[mB.ka];if(HP==null){HP="superuser";}pO=A[mB.la];if(pO==null){pO={};}oF=L;try {pH=await Eh();EB.FF("LDAP Authentication Configured.");}catch (G){if(q.IK=="ldap"){B("LDAP Connection failed: ${G}");}}new Timer.periodic(const Duration(seconds:10),(lG){Ll.clear();});new Timer.periodic(const Duration(hours:1),(lG){Jl();});Ml();Nl();}SI pH;Future<SI> Eh()async{if(pH==null||pH.state==ConnectionState.closed){pH=new SI(host:oF.host,ssl:oF.ssl,port:oF.port,bindDN:oF.lW,password:oF.password,badCertificateHandler:(A){EB.GE('Received warning of bad server certificate');return true;},context:oF.context);}return pH;}Map<String,MC> Ll=new Map<String,MC>();Map<String,Za<MC>> Ol={};Ml(){var A=new File("${Kl}_meta.json");if(A.existsSync()){Pl=aS.convert(A.readAsStringSync());}}Nl(){var A=new File("${Kl}_meta.json");A.writeAsStringSync(eL.convert(Pl)+"\n");}Map<String,Map<String,dynamic>> Pl={};void Jl(){for(var A in Fl){A();}}List<Function> Fl=[] ;}class Ya extends SD{Future init(jD A)async{}final MC Dj=new MC("dgUser",false,null,{"open":true});}TD aa=new TD(style:gB.HG);class ZL{final Uri issuer;final String eg;final String rh;final String Bi;final String uh;final List<String> qh=<String>["openid"];final String clientRoles;final String realmRoles;Uri iW;Uri zh;Uri dX;Uri sg;Uri cg;String Th;static const String SS='.well-known/openid-configuration';ZL(this.issuer,this.eg,this.rh,this.Bi,this.uh,A,{this.clientRoles: null,this.realmRoles: null}){this.qh.addAll(A);}Future init({bool strictTls: false})async{var C=new HttpClient();C.badCertificateCallback=ra(strictTls);Uri B;if(issuer.path.contains(SS)){B=issuer;}else{B=issuer.replace(path:aa.join(issuer.path,SS));}try {var D=await C.getUrl(B);var G=await D.close();Map A=JSON.decode(await UTF8.decodeStream(G));var H=Uri.parse(A['issuer']);if(H.host!=issuer.host){throw new StateError('Configuration issuer does not match issuer host address');}Th=A['issuer'];iW=Uri.parse(A['authorization_endpoint']);zh=Uri.parse(A['token_endpoint']);if(A['userinfo_endpoint']!=null){dX=Uri.parse(A['userinfo_endpoint']);}else{dX=iW.resolve('userinfo');}if(A['end_session_endpoint']!=null){sg=Uri.parse(A['end_session_endpoint']);}if(A['check_session_iframe']!=null){cg=Uri.parse(A['check_session_iframe']);}else{EB.FF('OpenID Provider does not support session management');}}catch (I,K){EB.DE('Error retreiving openId configuration.',I,K);EB.DE('Config Path: ${B}');throw new StateError('Unable to configure OpenID');}finally {C.close(force:true);}}static Function ra(bool A){return (X509Certificate D,String B,int C){EB.FF('OpenID configuration: Bad certificate for ${B}:${C}');return !A;};}}class WS extends SD implements uG{ZL KY;List<Function> Fl=[] ;WS();Future init(jD L)async{var A=L.get('openId');String B=A['issuer'];if(B==null||B.isEmpty){throw new ArgumentError.value(B,'issuer');}var C=A['clientId'];if(C==null||C.isEmpty){throw new ArgumentError.value(C,'clientId');}var H=A['secret'];if(H==null||H.isEmpty){throw new ArgumentError.value(H,'secret');}var D=A['clientRoles'] as String;var c=A['realmRoles'] as String;if(D!=null&&D.isNotEmpty){D=D.replaceAll(r'${client_id}',C);}String I=A['usernameKey'];String q=A['superuserGroup'];List<String> G=A['scope'];Uri O;try {O=Uri.parse(B);}catch (KB){throw new ArgumentError.value(B,'issuer');}String X;if(I!=null&&I.isNotEmpty)X=I;List<String> K=[] ;if(G==null||G.isEmpty){K..add('profile')..add('email');}else if(G is List<String>){K.addAll(G);}else{throw new ArgumentError.value(G,'scope','must be a list of strings');}KY=new ZL(O,C,H,X,q,K,clientRoles:D,realmRoles:c);await KY.init(strictTls:L.EP);EB.FF('OpenId configuration is complete.');}void Jl(){for(var A in Fl){A();}}}class PS extends SD implements tG,uG{File file=new File("users.json");List<MC> EI=[] ;bool Il=false;List<Function> Fl=<Function>[] ;String Ql;int Rl;PS();Future init(jD C)async{if(Il)return;Nh(C);Il=true;try {if(!(await file.exists())){await file.create(recursive:true);await file.writeAsString('[{"username": "dgSuper",\n  "superuser": true,\n  "metadata": {}\n}]');}}catch (A){EB.GE("Failed to create users file",A);Il=false;return;}try {var D=await file.readAsString();var B=const JsonDecoder().convert(D);if(B is!List)B=[] ;EI=(B as List).map(MC.VS).toList();}catch (A){EB.GE("Failed to read users from file ${file.path}",A);}Il=false;}void Nh(jD D){Map<String,String> B=D.get("proxy",{});if(B.isEmpty)return;var A=B['password'];if(A==null||A.isEmpty)return;String C=cS(A);if(C==null||C.isEmpty){C=A;var G=Sl(A);if(G!=null){B['password']=G;D.map['proxy']=B;D.iK();}}Ql=C.toLowerCase();}String Sl(String A){if(A==null||A.isEmpty)return null;var B=dS(A);if(B==null||B.isEmpty){return null;}return B;}Future hK()async{var A=const JsonEncoder.withIndent("  ");var B=A.convert(EI.map((MC C)=>C.iY(null)).toList());try {await file.writeAsString(B+"\n");}catch (D){EB.GE('Error writing to users file ${file.path}',D);}}}String sa(List<int> A){return const XS().convert(A);}List<int> ta(String A){return const YS().convert(A);}class XS extends Converter<List<int>,String>{final bool qY;final bool IO;const XS([bool this.qY=false,bool this.IO=false]);static const int cL=61;static const int ua=13;static const int va=10;static const int wa=76;static const String xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";static const String ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";String convert(List<int> G){int I=G.length;if(I==0){return "";}final String D=qY?ya:xa;final int K=I.remainder(3);final int c=I-K;int L=((I~/3)*4)+((K>0)?4:0);if(IO){L+= ((L-1)~/wa)<<1;}List<int> A=new List<int>(L);int B=0,H=0,O=0;while(H<c){int C=((G[H++ ]<<16)&0xFFFFFF)|((G[H++ ]<<8)&0xFFFFFF)|G[H++ ];A[B++ ]=D.codeUnitAt(C>>18);A[B++ ]=D.codeUnitAt((C>>12)&0x3F);A[B++ ]=D.codeUnitAt((C>>6)&0x3F);A[B++ ]=D.codeUnitAt(C&0x3f);if(IO&& ++O==19&&B<L-2){A[B++ ]=ua;A[B++ ]=va;O=0;}}if(K==1){int C=G[H];A[B++ ]=D.codeUnitAt(C>>2);A[B++ ]=D.codeUnitAt((C<<4)&0x3F);A[B++ ]=cL;A[B++ ]=cL;}else if(K==2){int C=G[H];int X=G[H+1];A[B++ ]=D.codeUnitAt(C>>2);A[B++ ]=D.codeUnitAt(((C<<4)|(X>>4))&0x3F);A[B++ ]=D.codeUnitAt((X<<2)&0x3F);A[B++ ]=cL;}return new String.fromCharCodes(A);}}class YS extends Converter<String,List<int>>{const YS();static const List<int> dL=const[-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,0,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2];static const int za=61;List<int> convert(String B){int D=B.length;if(D==0){return new List<int>(0);}int L=0;for(int A=0;A<D;A++ ){int G=dL[B.codeUnitAt(A)];if(G<0){L++ ;if(G==-2){throw new FormatException('Invalid character: ${B[A]}');}}}if((D-L)%4!=0){throw new FormatException('''Size of Base 64 characters in Input
          must be a multiple of 4. Input: ${B}''');}int O=0;for(int A=D-1;A>=0;A-- ){int X=B.codeUnitAt(A);if(dL[X]>0)break;if(X==za)O++ ;}int I=(((D-L)*6)>>3)-O;List<int> K=new Uint8List(I);for(int A=0,C=0;C<I;){int H=0;for(int c=4;c>0;){int G=dL[B.codeUnitAt(A++ )];if(G>=0){H=((H<<6)&0xFFFFFF)|G;c-- ;}}K[C++ ]=H>>16;if(C<I){K[C++ ]=(H>>8)&0xFF;if(C<I)K[C++ ]=H&0xFF;}}return K;}}class jD{bool WO;int port;int yD;String XO;String MK;String LK;String qW;bool GX;bool DX;bool xW;bool nW;int vF;String host;int nY;String OO;String QO;Map<String,String> lK;Map<String,Map<String,dynamic>> nX;Map<String,Map<String,dynamic>> oY;bool EP;String PO;bool yO;List<String> yW;String pY;bool PY;bool cW;void set YO(List A){if(A!=null){var B=(List D)=>D[0]=='default';var C=A.firstWhere(B,orElse:()=>null);if(C!=null){A.removeWhere(B);A.add(C);}}Tl=A;}List get YO=>Tl;List Tl;bool tY;int dK;int eK;int yH;int zH;String uX;String ZX;String IK;String lY;String pX;String AX;bool rY;bool sY;String BX;bool zO;bool KX;String YY;bool IX;int qX;List<String> rX;Map<String,String> proxies;Map<String,List<String>> bX;List<String> ZY;List<String> vW;List<String> kX;int uY;bool dW;bool HX;bool eW;int LY;bool lX;Map<String,String> oX;bool hY;String VX;bool EX;String gW;Map<String,List<String>> cX;bool fX;String tW;bool FX;bool JX;int xX;String fW;String tX;bool sX;int wX;int vX;bool mW;String uW;Map hW;RegExp Ul=null;String dY;dynamic cK;String aY;bool SX;dynamic get(A,[B]){if(A is!List){A=[A];}for(var C in A){if(map[C]!=null){return map[C];}}if(B is Function){return B();}else{return B;}}dynamic map;void load(Map B){this.map=B;WO=get("debug",false);port=get("port",Vl);yD=get(["httpsPort","httpsport"],Wl);LK=get("certName","");MK=get("certPassword");Xl(MK);qW=get("certKeyName","");GX=get("enableHSTS",false);DX=get("enableCSRFProtection",false);xW=get("disableFileSecurity",false);nW=get("broadcast",false);OO=get("broadcastUrl");vF=get("workers",Platform.numberOfProcessors==1?1:2);nY=get("updateInterval",200);var A=<String,String>{"/.well-known":"${Directory.current.absolute.path}/.well-known"};lK=get("static",A);if(!lK.containsKey("/.well-known")){lK.addAll(A);}nX=get("linkConfig",{});QO=get("brokerUrl");PO=get("brokerName","broker-");yW=get("disabledLinks",[] );yO=get("runBrokerInMain",Platform.numberOfProcessors==1?true:false);KX=get("enableUptimeChecker",true);pY=get("uptimeCheckUrl");oY=get("upstream",{});EP=get("strictTls",false);PY=get("quarantine",false);cW=get("allowAllLinks",true);YO=get("defaultPermission",null);tY=get("useRuntimeManager",false);rY=get("useDartRuntimeManager",false);sY=get("useJavaRuntimeManager",false);dK=get("passwordHasherIterations",1000);eK=get("passwordHasherKeyLength",32);yH=get('old_passwordHasherIterations',null);zH=get('old_passwordHasherKeyLength',null);uX=get("loginRedirectPath","/");IK=get("authType","file");lY=get("twoFactorAuth","none");BX=get("downstreamName","conns");zO=get("runPortChecks",true);dY=get("storageDriver",'simple');cK=get("observe",false);host=get("host","0.0.0.0");rX=get("loggers",[] );proxies=get("proxies",{});bX=get("hooks",{});AX=get("distributionUrl",Bb);pX=get("linkRepositoryUrl",Ab);ZY=get("serverVmFlags",[] );vW=get("dartRuntimeManagerVmFlags",[] );kX=get("javaRuntimeManagerVmFlags",[] );uY=get("userTimeout",525600);dW=get("allowBrowserCaching",false);YY=get("serverLogLevel","INFO");IX=get("enableLogCompression",true);qX=get("logRotationInterval",0);HX=get("enableIPv6",false);ZX=get("guestLoginRedirectPath",null);eW=get("allowPasswordChanges",true);LY=get("passwordExpireAfterDays",0);lX=get("keepCustomAssets",false);oX=get("linkManagerEnvironment",{});hY=get("timeHttpRequests",false);VX=get("generatedCertificateSubject","/C=US/ST=California/L=Oakland/O=Acuity Brands Inc./OU=Customers/CN=*");EX=get("enableCertificateGeneration",true);gW=get("alternativeBrokerUrl",null);cX=get("httpPathClassification",{});fX=get("isAlwaysOffline",false);tW=get("corsProxyRules","");FX=get("enableGit",false);JX=get("enableSingleSignOnServer",false);xX=get("maxQueueSize",256);aY=get("ssoProviderUrl",null);SX=get("formatDg5",false);fW=get("allowedCorsRegexString",null);tX=get("loginAuditFileName","audit.log");sX=get("loginAudit",false);wX=get("loginThrottleDuration",60);vX=get("loginThrottleAttempts",5);mW=get("blockOutsideGuests",false);uW=get("customLogo",null);hW=get("audit",null);}Future<bool> Wh([String A="server"])async{if(await wG.kL.iO(".docker").exists()){Vl=80;Wl=443;}var B=await ZS(A);if(!(await B.exists())){load({"downstreamName":"downstream","corsProxyRules":""});await iK(A);return true;}var C=await Db(B);load(C);var D=hK();if(const JsonEncoder().convert(C)!=const JsonEncoder().convert(D)){await iK(A);}return false;}int Wl=8443;int Vl=8080;Map hK(){var A={"debug":WO,"host":host,"port":port,"httpsPort":yD,"certName":LK,"certKeyName":qW,"certPassword":MK,"enableHSTS":GX,"enableCSRFProtection":DX,"strictFileUpload":{"enabled":false,"useClamAV":false,"extensions":const["dg5","dgi","crt","key","woff","ttf","gif","svg","png","jpg","xml","json","sql","csv"]},"disableFileSecurity":xW,"isAlwaysOffline":fX,"broadcast":nW,"workers":vF,"updateInterval":nY,"static":lK,"linkConfig":nX,"disabledLinks":yW,"enableUptimeChecker":KX,"uptimeCheckUrl":pY,"upstream":oY,"strictTls":EP,"quarantine":PY,"allowAllLinks":cW,"defaultPermission":YO,"useRuntimeManager":tY,"useDartRuntimeManager":rY,"useJavaRuntimeManager":sY,"passwordHasherIterations":dK,"passwordHasherKeyLength":eK,"loginRedirectPath":uX,"guestLoginRedirectPath":ZX,"authType":IK,"twoFactorAuth":lY,"runPortChecks":zO,"storageDriver":dY,"downstreamName":BX,"loggers":rX,"proxies":proxies,"hooks":bX,"distributionUrl":AX,"linkRepositoryUrl":pX,"serverVmFlags":ZY,"userTimeout":uY,"allowBrowserCaching":dW,"serverLogLevel":YY,"enableLogCompression":IX,"logRotationInterval":qX,"enableIPv6":HX,"dartRuntimeManagerVmFlags":vW,"javaRuntimeManagerVmFlags":kX,"allowPasswordChanges":eW,"passwordExpireAfterDays":LY,"keepCustomAssets":lX,"linkManagerEnvironment":oX,"timeHttpRequests":hY,"generatedCertificateSubject":VX,"enableCertificateGeneration":EX,"alternativeBrokerUrl":gW,"httpPathClassification":cX,"corsProxyRules":tW,"enableGit":FX,"enableSingleSignOnServer":JX,"maxQueueSize":xX,"ssoProviderUrl":aY,"formatDg5":SX,"allowedCorsRegexString":fW,"loginAuditFileName":tX,"loginAudit":sX,"loginThrottleDuration":wX,"loginThrottleAttempts":vX,"blockOutsideGuests":mW,"customLogo":uW,"audit":hW};if(OO!=null){A["broadcastUrl"]=OO;}if(PO!=null){A["brokerName"]=PO;}if(QO!=null){A["brokerUrl"]=QO;}if(yO!=null){A["runBrokerInMain"]=yO;}if(map["ldap"]!=null){A["ldap"]=map["ldap"];}if(map["ldap2"]!=null){A["ldap2"]=map["ldap2"];}if(map["duo"]!=null){A["duo"]=map["duo"];}if(map["strictFileUpload"]!=null){A["strictFileUpload"]=map["strictFileUpload"];}if(map["externalAuth"]!=null){A["externalAuth"]=map["externalAuth"];}if(map["authServer"]!=null){A["authServer"]=map["authServer"];}if(map['openId']!=null){A['openId']=map['openId'];}if(map['proxy']!=null){A['proxy']=map['proxy'];}if(yH!=null){A['old_passwordHasherIterations']=yH;}if(zH!=null){A["old_passwordHasherKeyLength"]=zH;}if(cK==true||cK is String){A["observe"]=cK;}if(map['smtp']!=null){A['smtp']=map['smtp'];}return A;}bool Yl=false;Future iK([String A="server"])async{if(Yl){return;}Yl=true;var B=await ZS(A);await Eb(B,hK());Yl=false;}void Xl(String A){if(A==null||A.isEmpty){XO=A;return;}var B=cS(A);if(B==null||B.isEmpty){XO=A;Zl(A);return;}XO=B;}void Zl(String B){var A=dS(B);if(A==null||A.isEmpty){return;}MK=A;iK();}}const String Ab="https://dsa.s3.amazonaws.com/links/links.json";const String Bb="https://dsa.s3.amazonaws.com/dists/dists.json";r EB;Cb(){if(EB==null){FG=true;EB=new r("DGServer");EB.GY.listen((A){List<String> B=A.message.split("\n");for(String C in B){print("[${A.level.name}] ${C}");}if(A.error!=null){print(A.error);}if(A.stackTrace!=null&&EB.iX(h.EM)){print(A.stackTrace);}});}}Future<EG> ZS(String A)async{var B=["${A}.json","${A}.toml","${A}.yaml"];for(var D in B){var C=wG.kL.iO(D);if(await C.exists()){return C;}}return wG.kL.iO(B.first);}Future<dynamic> Db(EG B)async{if(!(await B.exists())){return null;}var A=await B.readAsString();var C=RT(B.path);if(C==".toml"){var D=new HU();return DG(D.IC(A).value);}else if(C==".yaml"){return DG(Ee(A));}else{if(A.trim().isEmpty||A==" "){A="{}";}return DG(aS.convert(A));}}Future Eb(EG B,dynamic D)async{if(!(await B.exists())){await B.create();}var A="";var C=RT(B.path);if(C==".toml"){var G=new xc();A=G.encode(D);}else if(C==".yaml"){A=He(D);}else{A=eL.convert(D);}if(!A.endsWith("\n")){A=A+"\n";}final H=C!='.toml'&&C!='.yaml';await B.writeAsString(A,verifyJson:H);}JsonEncoder eL=const JsonEncoder.withIndent("  ");JsonDecoder aS=const JsonDecoder();dynamic DG(A){if(A is Map){var B={};for(var C in A.keys){B[DG(C)]=DG(A[C]);}return B;}else if(A is List){return A.map((D)=>DG(D)).toList();}else{return A;}}final Fb=new Uint8List.fromList([0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0x88,0x77,0x66,0x55,0x44,0xFF,0xFF,0x44,0x55,0x66,0x77,0x88,0x99,0x88,0x77,0x66,0x55,0x44,0x33,0x22,0x11,0xAA]);final xG bS=new xG(Fb);dI XI;dI get YI{if(XI!=null)return XI;XI=new dI();return XI;}String cS(String A){if(A==null||A.isEmpty)return null;YI..reset()..init(false,bS);String B;try {var D=ta(A);var G=eS(YI,D);var C=UTF8.decode(G);var H=int.parse(C.substring(0,2),radix:10);B=C.substring(2,2+H);}catch (I){return null;}return B;}String dS(String B){if(B==null||B.isEmpty)return null;String G;YI..reset()..init(true,bS);var I=B.length.toString().padLeft(2,'0');var A=I+B;var D=UTF8.encode(A);var H=16-(D.length%16);if(H!=16){var C=A.length+H;C=(C<16?16:C);A=A.padRight(C,'.');D=UTF8.encode(A);}try {var K=eS(YI,D);G=sa(K);}catch (L){EB.GE("Error encoding password",L);return null;}return G;}Uint8List eS(dI D,Uint8List B){var C=new Uint8List(B.length);for(var A=0;A<B.lengthInBytes;){var G=D.NY(B,A,C,A);A+= G;}return C;}Future<String> Gb({int length: 50})async{var B=new StringBuffer();for(int C=1;C<=length;C++ ){await new Future.value();var A=new Random.secure();if(A.nextBool()){String D=fS[A.nextInt(fS.length)];B.write(A.nextBool()?D.toLowerCase():D);}else{B.write(gS[A.nextInt(gS.length)]);}}return B.toString();}const List<String> fS=const["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];const List<int> gS=const[0,1,2,3,4,5,6,7,8,9];typedef dynamic Hb<BC>(BC _0);typedef void Ib(Process _0);typedef void fL(String _0);class gL extends ProcessResult{final eh;gL(int A,int B,C,D,this.eh):super(A,B,C,D);}class Jb{}Future<String> hS(File A,{bool useSmartHash: true})async{var B=await JE("md5sum");if(useSmartHash&&B!=null){try {var C=await Process.run(B,[A.absolute.path]);if(C.exitCode!=0){throw "Fail";}var D=C.stdout.split("\n").first;return D.split(" ").first;}catch (H){}}var G=await A.readAsBytes();return jZ.convert(G).toString();}Future<bool> Kb(File A,String B)async{var C=await hS(A);return B==C;}Future iS(File A)async{var B=A.path+".md5";var C=new File(B);var D=await hS(A);await C.writeAsString(D);}enum ChecksumState {CREATED,SAME,MODIFIED}Future<ChecksumState> Lb(String C)async{var A=new File(C);var B=new File(A.path+".md5");if(!(await B.exists())){await iS(A);return ChecksumState.CREATED;}var D=(await B.readAsString()).trim();var G=await Kb(A,D);if(G){return ChecksumState.SAME;}else{await iS(A);return ChecksumState.MODIFIED;}}bool Mb=false;Future<gL> jS(String D,{List<String> args: const[] ,String workingDirectory,Map<String,String> environment,bool includeParentEnvironment: true,bool runInShell: true,stdin,Ib handler,fL stdoutHandler,fL stderrHandler,fL outputHandler,Jb controller,File outputFile,bool logCompression: true,Hb<int> exitHandler,bool inherit: false,bool writeToBuffer: false,bool binary: false,bool capture: true,bool inheritStdin: false,Duration timeout,bool sudo: false})async{if(sudo&&(Platform.isLinux||Platform.isMacOS)&&(await JE("sudo"))!=null){var AC=D;D=await JE("sudo");args=new List<String>.from(args);args.insert(0,AC);}iL B;if(outputFile!=null){B=new iL(outputFile,logCompression:logCompression);await B.start();}if(workingDirectory==null){workingDirectory=Directory.current.path;}var L=new Map.from(environment is Map?environment:{});if(includeParentEnvironment){L["PATH"]=kS();}try {if(Mb){EB.FF("Execute '${D} ${args.join(' ')}' in ${workingDirectory}");}Process A=await Process.start(D,args,workingDirectory:workingDirectory,environment:L,includeParentEnvironment:includeParentEnvironment,runInShell:runInShell);if(controller!=null){controller.al=A;controller.bl.complete();}if(B!=null){var WC="[${ZI}] ==" " Executing ${D} with arguments" " ${args} (pid: ${A.pid}) ==";B.write(WC);}var H=new StringBuffer();var O=new StringBuffer();var X=new StringBuffer();var I=<int>[] ;var c=<int>[] ;var q=<int>[] ;if(capture){if(!binary){A.stdout.transform(const Utf8Decoder(allowMalformed:true)).transform(const LineSplitter()).listen((C)async{if(writeToBuffer){O.writeln(C);H.writeln(C);}if(stdoutHandler!=null){stdoutHandler(C);}if(outputHandler!=null){outputHandler(C);}if(inherit){vY.stdout.writeln(C);}if(B!=null){B.write("[${ZI}] ${C}");}});A.stderr.transform(const Utf8Decoder(allowMalformed:true)).transform(const LineSplitter()).listen((C)async{if(writeToBuffer){X.writeln(C);H.writeln(C);}if(stderrHandler!=null){stderrHandler(C);}if(outputHandler!=null){outputHandler(C);}if(inherit){vY.stderr.writeln(C);}if(B!=null){B.write("[${ZI}] ${C}");}});}else{A.stdout.listen((G){if(writeToBuffer){I.addAll(G);q.addAll(G);}});A.stderr.listen((G){if(writeToBuffer){I.addAll(G);c.addAll(G);}});}}if(handler!=null){handler(A);}if(stdin!=null){if(stdin is File){stdin=await stdin.openRead();}if(stdin is Stream){stdin.listen(A.stdin.add,onDone:A.stdin.close);}else if(stdin is List){A.stdin.add(stdin);}else{A.stdin.write(stdin);await A.stdin.close();}}else if(inherit&&inheritStdin){stdin.listen(A.stdin.add,onDone:A.stdin.close);}var KB=false;if(timeout!=null){new Future.delayed(timeout,(){if(!KB){A.kill(ProcessSignal.SIGKILL);}});}var K=await A.exitCode;KB=true;var aC=A.pid;await new Future.delayed(const Duration(milliseconds:5));if(B!=null){B.write("[${ZI}] == Exited with status ${K} ==");}if(exitHandler!=null){exitHandler(K);}if(B!=null){await B.stop();}return new gL(aC,K,binary?q:O.toString(),binary?c:X.toString(),binary?I:H.toString());}finally {if(B!=null){await B.stop();}}}Map<String,String> vG={};String kS(){var A=Platform.environment["PATH"].split(Platform.isWindows?";":":");if(Platform.isMacOS&&!A.contains("/usr/local/bin")){A.add("/usr/local/bin");}return A.join(Platform.isWindows?";":":");}Future<String> JE(String B)async{if(vG.containsKey(B)){var A=new File(vG[B]);if(await A.exists()){return A.path;}}if(const["dart","pub"].contains(B)){try {var I=new File(Platform.resolvedExecutable);var K=I.parent;var A=new File(QB(K.path,B));if(await A.exists()){return vG[B]=A.absolute.path;}}catch (q){}}if(const["openssl"].contains(B)&&Platform.isWindows){var L=<String>[QB(Directory.current.path,"bin","tools","openssl","openssl.exe")];for(var O in L){var A=new File(O);if(await A.exists()){return vG[B]=A.absolute.path;}}}var X=kS().split(Platform.isWindows?";":":");var G=[B];if(Platform.isWindows){G.addAll(["${B}.exe","${B}.bat"]);}for(var C in X){if(C.startsWith('"')&&C.endsWith('"')){C=C.substring(1,C.length-1);}if(Platform.environment.containsKey("HOME")){var D=Platform.environment["HOME"];if(!D.endsWith("/")){D+= "/";}C=C.replaceAll("~/",D);}var H=new Directory(Yc(C)).absolute;if(!(await H.exists())){continue;}for(var c in G){var A=new File(QB(H.path,c)).absolute;if(await A.exists()){vG[B]=A.path;return A.path;}}}return null;}Future<bool> hL(int A,{String host: "0.0.0.0"})async{try {if((Platform.isLinux||Platform.isMacOS)&&await JE("lsof")!=null){var B=await Process.run("lsof",["-n","-i4TCP@${host}:${A}"]);if(B.exitCode==0&&B.stdout.contains("LISTEN")){return false;}else{return true;}}ServerSocket C=await ServerSocket.bind(host,A);await C.close();return true;}catch (D){return false;}}Future Nb(String B,String A)async{var C=await Process.run(lS(),["--snapshot=${B}",A]);if(C.exitCode!=0){throw new Exception("Failed to generate snapshot for ${A}.");}}String lS(){String A;try {A=Platform.resolvedExecutable;}catch (B){try {A=Platform.executable.isNotEmpty?Platform.executable:"dart";}catch (B){A="dart";}}return A;}String get ZI{return new DateTime.now().toString();}GZipCodec Ob=new GZipCodec();Future Pb(File A,File B,{bool clearOld: false})async{var G=await JE("gzip");if(!(await B.parent.exists())){await B.parent.create(recursive:true);}if(G!=null){await B.create(recursive:true);var D=await B.openWrite();var C=await jS(G,stdin:A,handler:(Process H)async{H.stderr.drain();await D.addStream(H.stdout);},capture:false);if(C.exitCode!=0){await D.close();await B.delete();throw new Exception("Failed to GZIP Compress File ${A.path} to ${B.path}");}await new Future.delayed(const Duration(milliseconds:5));await D.close();if(clearOld){if(Platform.isWindows){await A.delete();await A.create(recursive:true);}else{await A.writeAsBytes([] ,flush:true);}}}else{var K=Ob.encoder;var I=await A.readAsBytes();var C=K.convert(I);await B.writeAsBytes(C,flush:true);I=null;C=null;if(clearOld){if(Platform.isWindows){await A.delete();await A.create(recursive:true);}else{await A.writeAsBytes([] ,flush:true);}}}}const int Qb=5242880;const int Rb=2;const Duration mS=const Duration(milliseconds:200);class iL{final File file;int Ej;bool logCompression;iL(this.file,{this.logCompression: true}){if(!file.existsSync()){file.createSync(recursive:true);}}oL cl;Future start([int B=0])async{if(cl!=null){cl.ZO();cl=null;}void K(String D,File O,[int C=0]){var G=new File('${D}.${C}');if(G.existsSync()){if(C>=Rb){G.deleteSync();}else{K(D,G,C+1);}}O.renameSync('${D}.${C}');}var A=B==0?null:new Duration(seconds:B);cl=wb.xb(mS,()async{if(A!=null){A-= mS;}if(dl.isNotEmpty){if(A!=null&&A<=Duration.ZERO){try {K(file.path,file);file.createSync();A=new Duration(seconds:B);}catch (H,I){if(EB!=null){EB.GE("Failed to roll log: ${file.path}.",H,I);}}}var L=dl;dl=<String>[] ;await file.writeAsString(L.join("\n")+"\n",mode:FileMode.WRITE_ONLY_APPEND);L=null;if(!logCompression)return;try {var X=await file.stat();if(X.size>=Qb&&B<=0){var c=QT(file.path);var q=new DateTime.now().millisecondsSinceEpoch;var KB=new File(QB(file.parent.path,"${c}.${q}.gz"));await Pb(file,KB);await file.delete();await file.create();}}catch (H,I){if(EB!=null){EB.GE("Failed to compress log ${file.path}.",H,I);}}}});}Future stop()async{if(cl!=null){cl.ZO();cl=null;}if(dl.isNotEmpty){await file.writeAsString(dl.join("\n")+"\n",mode:FileMode.WRITE_ONLY_APPEND);}}bool get isActive=>cl!=null;void write(String A){if(A.contains("\n")){dl.addAll(LineSplitter.split(A.trim()));}else{dl.add(A);}}List<String> dl=<String>[] ;}abstract class jL{}abstract class EG implements jL{}abstract class bI implements jL{}abstract class wG{static wG kL=new Xb();bI get FB;EG iO(String A){return FB.dg(A);}}class oS implements EG{final File file;oS(this.file);Future create()async{await file.create(recursive:true);}Future delete()async{await file.delete(recursive:true);}Future<bool> exists(){return file.exists();}jL get parent{return new cI(file.parent);}String get path=>file.path;Future<List<int>> readAsBytes(){return file.readAsBytes();}Future<String> readAsString(){return file.readAsString();}Future writeAsString(String A,{bool verifyJson: false})async{return qb(file,A,verifyJson:verifyJson);}}class cI implements bI{final Directory lF;cI(this.lF);EG dg(String A){var B=QB(lF.path,A);return new oS(new File(B));}Future create(){return lF.create(recursive:true);}Future delete(){return lF.delete(recursive:true);}Future<bool> exists(){return lF.exists();}bI get parent=>new cI(lF.parent);String get path=>lF.path;}class Xb extends wG{bI get FB=>new cI(Directory.current);}class TB{final List<int> LD;TB(this.LD);bool operator==(Object A)=>A is TB&&const FL().TC(LD,A.LD);int get hashCode=>const FL().hash(LD);String toString()=>fZ.encode(LD);}class KL extends Sink<TB>{TB get value{assert(el!=null);return el;}TB el;void add(TB A){assert(el==null);el=A;}void close(){assert(el!=null);}}const bool jb=const bool.fromEnvironment("dsa.io.tcpNoDelay",defaultValue:true);class kb{static const String lb="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";static const bool mb=const bool.fromEnvironment("calzone.build",defaultValue:false)||const bool.fromEnvironment("websocket.standard",defaultValue:true);static Future<WebSocket> nb(String O,{Iterable<String> protocols,Map<String,dynamic> headers,HttpClient httpClient,bool useStandardWebSocket})async{Uri A=Uri.parse(O);if(useStandardWebSocket==null){useStandardWebSocket=mb;}if(useStandardWebSocket==true&&A.scheme!="wss"){return await rb(WebSocket.connect(O,protocols:protocols,headers:headers),60000,onSuccessAfterTimeout:(WebSocket D){D.close();});}if(A.scheme!="ws"&&A.scheme!="wss"){throw new WebSocketException("Unsupported URL scheme '${A.scheme}'");}Random WC=new Random();Uint8List X=new Uint8List(16);for(int C=0;C<16;C++ ){X[C]=WC.nextInt(256);}String c=BASE64.encode(X);int I=A.port;if(I==0){I=A.scheme=="wss"?443:80;}A=new Uri(scheme:A.scheme=="wss"?"https":"http",userInfo:A.userInfo,host:A.host,port:I,path:A.path,query:A.query);HttpClient q=httpClient==null?(new HttpClient()..badCertificateCallback=(lG,uK,Ei)=>true):httpClient;return q.openUrl("GET",A).then((HttpClientRequest G)async{if(A.userInfo!=null&&!A.userInfo.isEmpty){String aC=BASE64.encode(UTF8.encode(A.userInfo));G.headers.set(HttpHeaders.AUTHORIZATION,"Basic ${aC}");}if(headers!=null){headers.forEach((HE,K)=>G.headers.add(HE,K));}G.headers..set(HttpHeaders.CONNECTION,"Upgrade")..set(HttpHeaders.UPGRADE,"websocket")..set("Sec-WebSocket-Key",c)..set("Cache-Control","no-cache")..set("Sec-WebSocket-Version","13");if(protocols!=null){G.headers.add("Sec-WebSocket-Protocol",protocols.toList());}return G.close();}).then((B){return B;}).then((HttpClientResponse B){void H(String pE){B.detachSocket().then((Socket D){D.destroy();});throw new WebSocketException(pE);}if(B.statusCode!=HttpStatus.SWITCHING_PROTOCOLS||B.headers[HttpHeaders.CONNECTION]==null||!B.headers[HttpHeaders.CONNECTION].any((K)=>K.toLowerCase()=="upgrade")||B.headers.value(HttpHeaders.UPGRADE).toLowerCase()!="websocket"){H("Connection to '${A}' was not upgraded to websocket");}String KB=B.headers.value("Sec-WebSocket-Accept");if(KB==null){H("Response did not contain a 'Sec-WebSocket-Accept' header");}List<int> L=GQ.convert("${c}${lb}".codeUnits).LD;List<int> AC=BASE64.decode(KB);if(L.length!=AC.length){H("Response header 'Sec-WebSocket-Accept' is the wrong length");}for(int C=0;C<L.length;C++ ){if(L[C]!=AC[C]){H("Bad response 'Sec-WebSocket-Accept' header");}}var qE=B.headers.value('Sec-WebSocket-Protocol');return B.detachSocket().then((D){D.setOption(SocketOption.TCP_NODELAY,jb);return new WebSocket.fromUpgradedSocket(D,protocol:qE,serverSide:false);});}).timeout(new Duration(minutes:1),onTimeout:(){q.close(force:true);throw new WebSocketException('timeout');});}}final ob=Uc;Future<File> pb(File B,dynamic G,Future<File> H(File file,dynamic content),{bool verifyJson: false})async{final C=await Directory.current.createTemp();final I=QT(B.path);var A=new File("${C.path}${ob}${I}");A=await H(A,G);var D=true;if(verifyJson){final K=await A.readAsString();try {JSON.decode(K);}on FormatException catch (L,O){D=false;nL.DE("Couldn't parse JSON after trying to write ${B.path}",L,O);}}if(D){A=await A.rename(B.absolute.path);C.delete();return A;}else{nL.DE("${B.path} wasn't saved, the original will be preserved");return B;}}Future<File> qb(File B,String A,{bool verifyJson: false})async{return pb(B,A,(File C,A)=>C.writeAsString(A,flush:true),verifyJson:verifyJson);}Future rb(Future G,int H,{Function onTimeout: null,Function onSuccessAfterTimeout: null,Function onErrorAfterTimeout: null}){Completer A=new Completer();Timer B=new Timer(new Duration(milliseconds:H),(){if(!A.isCompleted){if(onTimeout!=null){onTimeout();}A.completeError(new Exception('Future timeout before complete'));}});G.then((C){if(A.isCompleted){if(onSuccessAfterTimeout!=null){onSuccessAfterTimeout(C);}}else{B.cancel();A.complete(C);}}).catchError((D){if(A.isCompleted){if(onErrorAfterTimeout!=null){onErrorAfterTimeout(D);}}else{B.cancel();A.completeError(D);}});return A.future;}typedef dynamic sS();const String sb="1.1.2";r AH;const bool tb=identical(1,1.0);bool BH(LE B,String A,[bool D=false]){if(!tb){bool C=new bool.fromEnvironment(A,defaultValue:null);if(C!=null){return C;}}if(B.zone[A] is bool){return B.zone[A];}return D;}r get nL{if(AH!=null){return AH;}FG=true;AH=new r("DSA");AH.GY.listen((A){List<String> D=A.message.split("\n");bool G=BH(A,"dsa.logger.inline_errors",true);bool H=BH(A,"dsa.logger.sequence",false);if(G){if(A.error!=null){D.addAll(A.error.toString().split("\n"));}if(A.stackTrace!=null){D.addAll(A.stackTrace.toString().split("\n").where((I)=>I.isNotEmpty).toList());}}String C=A.nO;if(A.zone["dsa.logger.name"] is String){C=A.zone["dsa.logger.name"];}bool K=BH(A,"dsa.logger.show_timestamps",false);if(!BH(A,"dsa.logger.show_name",true)){C=null;}for(String L in D){String B="";if(H){B+= "[${A.XY}]";}if(K){B+= "[${A.gY}]";}B+= "[${A.level.name}]";if(C!=null){B+= "[${C}]";}B+= " ";B+= L;if(BH(A,"dsa.logger.print",true)){print(B);}}if(!G){if(A.error!=null){print(A.error);}if(A.stackTrace!=null){print(A.stackTrace);}}});ub(const String.fromEnvironment("dsa.logger.default_level",defaultValue:"INFO"));return AH;}void ub(String A){A=A.trim().toUpperCase();if(A=="DEBUG"){A="ALL";}Map<String,h> C={};for(var B in h.Pc){C[B.name]=B;}var B=C[A];if(B!=null){nL.level=B;}}class vb{}abstract class oL{void ZO();}class tS extends oL{final sS function;tS(this.function);void ZO(){if(function!=null){function();}}}class wb{static oL xb(A,H()){Duration B;if(A is Duration){B=A;}else if(A is int){B=new Duration(milliseconds:A);}else if(A is vb){B=A.duration;}else{throw new Exception("Invalid Interval: ${A}");}sS C;Timer D;bool G=false;C=()async{await H();if(!G){new Timer(B,C);}};D=new Timer(B,C);return new tS((){if(D!=null){D.cancel();}G=true;});}}final zT=new RegExp(r"\r\n?|\n");class eM extends LG{int get HC=>fl;int fl=0;int get LB=>gl;int gl=0;wE get state=>new AU(this,position,HC,LB);bool get hl=>k(-1)==pP&&k()==BL;set position(int A){var C=position;super.position=A;if(A>C){var B=il(string.substring(C,A));fl+= B.length;if(B.isEmpty){gl+= A-C;}else{gl=A-B.last.end;}}else{var B=il(string.substring(A,C));if(hl)B.removeLast();fl-= B.length;if(B.isEmpty){gl-= C-A;}else{gl=A-string.lastIndexOf(zT,A)-1;}}}eM(String A,{sourceUrl,int position}):super(A,sourceUrl:sourceUrl,position:position);int f(){var A=super.f();jl(A);return A;}void jl(int A){if(A==BL||(A==pP&&k()!=BL)){fl+= 1;gl=0;}else{gl+= 1;}}bool kB(Pattern B){if(!super.kB(B))return false;var A=il(eG[0]);fl+= A.length;if(A.isEmpty){gl+= eG[0].length;}else{gl=eG[0].length-A.last.end;}return true;}List<Match> il(String B){var A=zT.allMatches(B).toList();if(hl)A.removeLast();return A;}}class AU implements wE{final eM kl;final int position;final int HC;final int LB;AU(this.kl,this.position,this.HC,this.LB);}const int PD=0x7fffffff;abstract class fD<V>{}class LI<V> implements fD<V>{const LI();bool TC(V A,V B)=>A==B;int hash(V A)=>A.hashCode;bool aK(Object A)=>true;}class rP<V> implements fD<Iterable<V>>{final fD<V> ll;const rP([fD<V> A=const LI()]):ll=A;bool TC(Iterable<V> A,Iterable<V> B){if(identical(A,B))return true;if(A==null||B==null)return false;var C=A.iterator;var D=B.iterator;while(true){bool G=C.moveNext();if(G!=D.moveNext())return false;if(!G)return true;if(!ll.TC(C.current,D.current))return false;}}int hash(Iterable<V> B){int A=0;for(V C in B){int D=ll.hash(C);A=(A+D)&PD;A=(A+(A<<10))&PD;A^= (A>>6);}A=(A+(A<<3))&PD;A^= (A>>11);A=(A+(A<<15))&PD;return A;}bool aK(Object A)=>A is Iterable<V>;}class FL<V> implements fD<List<V>>{final fD<V> ll;const FL([fD<V> A=const LI()]):ll=A;bool TC(List<V> A,List<V> B){if(identical(A,B))return true;if(A==null||B==null)return false;int D=A.length;if(D!=B.length)return false;for(int C=0;C<D;C++ ){if(!ll.TC(A[C],B[C]))return false;}return true;}int hash(List<V> C){int A=0;for(int B=0;B<C.length;B++ ){int D=ll.hash(C[B]);A=(A+D)&PD;A=(A+(A<<10))&PD;A^= (A>>6);}A=(A+(A<<3))&PD;A^= (A>>11);A=(A+(A<<15))&PD;return A;}bool aK(Object A)=>A is List<V>;}abstract class sP<V,BC extends Iterable<V>> implements fD<BC>{final fD<V> ll;const sP(this.ll);bool TC(BC D,BC G){if(identical(D,G))return true;if(D==null||G==null)return false;HashMap<V,int> C=new HashMap(equals:ll.TC,hashCode:ll.hash,isValidKey:ll.aK);int H=0;for(var B in D){int A=C[B];if(A==null)A=0;C[B]=A+1;H++ ;}for(var B in G){int A=C[B];if(A==null||A==0)return false;C[B]=A-1;H-- ;}return H==0;}int hash(BC B){int A=0;for(V C in B){int D=ll.hash(C);A=(A+D)&PD;}A=(A+(A<<3))&PD;A^= (A>>11);A=(A+(A<<15))&PD;return A;}}class tP<V> extends sP<V,Iterable<V>>{const tP([fD<V> A=const LI()]):super(A);bool aK(Object A)=>A is Iterable<V>;}class tI extends cM{String get source=>super.source;Uri get AB=>N.AB;tI(String A,eB B,String C):super(A,B,C);}const int aM=10;const int pc=13;class UF{final Uri rC;final ml=<int>[0];final Uint32List nl;int get length=>nl.length;int get fG=>ml.length;int ol;UF(String A,{url}):this.ki(A.runes,url:url);UF.ki(Iterable<int> D,{url}):rC=url is String?Uri.parse(url):url,nl=new Uint32List.fromList(D.toList()){for(var A=0;A<nl.length;A++ ){var B=nl[A];if(B==pc){var C=A+1;if(C>=nl.length||nl[C]!=aM)B=aM;}if(B==aM)ml.add(A+1);}}RB N(int B,[int A]){if(A==null)A=length-1;return new PE(this,B,A);}vE location(int A)=>new vE.li(this,A);int XK(int A){if(A<0){throw new RangeError("Offset may not be negative, was ${A}.");}else if(A>length){throw new RangeError("Offset ${A} must not be greater than the number " "of characters in the file, ${length}.");}if(A<ml.first)return -1;if(A>=ml.last)return ml.length-1;if(pl(A))return ol;ol=ql(A)-1;return ol;}bool pl(int A){if(ol==null)return false;if(A<ml[ol])return false;if(ol>=ml.length-1||A<ml[ol+1]){return true;}if(ol>=ml.length-2||A<ml[ol+2]){ol++ ;return true;}return false;}int ql(int D){int A=0;int B=ml.length-1;while(A<B){var C=A+((B-A)~/2);if(ml[C]>D){B=C;}else{A=C+1;}}return B;}int hO(int A,{int line}){if(A<0){throw new RangeError("Offset may not be negative, was ${A}.");}else if(A>length){throw new RangeError("Offset ${A} must be not be greater than the " "number of characters in the file, ${length}.");}if(line==null){line=XK(A);}else if(line<0){throw new RangeError("Line may not be negative, was ${line}.");}else if(line>=fG){throw new RangeError("Line ${line} must be less than the number of " "lines in the file, ${fG}.");}var B=ml[line];if(B>A){throw new RangeError("Line ${line} comes after offset ${A}.");}return A-B;}int WX(int A,[int B]){if(B==null)B=0;if(A<0){throw new RangeError("Line may not be negative, was ${A}.");}else if(A>=fG){throw new RangeError("Line ${A} must be less than the number of " "lines in the file, ${fG}.");}else if(B<0){throw new RangeError("Column may not be negative, was ${B}.");}var C=ml[A]+B;if(C>length||(A+1<fG&&C>=ml[A+1])){throw new RangeError("Line ${A} doesn't have ${B} columns.");}return C;}String YX(int A,[int B])=>new String.fromCharCodes(nl.sublist(A,B));}class vE extends qc implements jC{final UF file;final int offset;Uri get AB=>file.rC;int get HC=>file.XK(offset);int get LB=>file.hO(offset);vE.li(this.file,this.offset){if(offset<0){throw new RangeError("Offset may not be negative, was ${offset}.");}else if(offset>file.length){throw new RangeError("Offset ${offset} must not be greater than the number " "of characters in the file, ${file.length}.");}}RB JC()=>new PE(file,offset,offset);}abstract class RB implements dM{}class PE extends yT implements RB{final UF file;final int rl;final int sl;Uri get AB=>file.rC;int get length=>sl-rl;vE get start=>new vE.li(file,rl);vE get end=>new vE.li(file,sl);String get tF=>file.YX(rl,sl);String get context=>file.YX(file.WX(start.HC),end.HC==file.fG-1?null:file.WX(end.HC+1));PE(this.file,this.rl,this.sl){if(sl<rl){throw new ArgumentError('End ${sl} must come after start ${rl}.');}else if(sl>file.length){throw new RangeError("End ${sl} must not be greater than the number " "of characters in the file, ${file.length}.");}else if(rl<0){throw new RangeError("Start may not be negative, was ${rl}.");}}int compareTo(eB A){if(A is!PE)return super.compareTo(A);PE B=A;var C=rl.compareTo(B.rl);return C==0?sl.compareTo(B.sl):C;}bool operator==(A){if(A is!RB)return super==A;if(A is!PE){return super==A&&AB==A.AB;}return rl==A.rl&&sl==A.sl&&AB==A.AB;}int get hashCode=>super.hashCode;RB expand(RB A){if(AB!=A.AB){throw new ArgumentError("Source URLs \"${AB}\" and " " \"${A.AB}\" don't match.");}if(A is PE){var B=wF.min(this.rl,A.rl);var C=wF.max(this.sl,A.sl);return new PE(file,B,C);}else{var B=wF.min(this.rl,A.start.offset);var C=wF.max(this.sl,A.end.offset);return new PE(file,B,C);}}}abstract class Tb{static const String Ub='www';static final String Vb=QB(Ub,'dgsb');static final File Wb=new File(QB(Vb,"REVISION"));}class uS extends Object with ListMixin<String>{static final bool xS=Platform.isWindows;final Directory RK;bool tl;List<String> ul;Function vl;String wl;uS(this.RK,String A,{bool caseSensitive,void notify(String path)}){if(RK==null){throw new ArgumentError("directory: ${RK}");}if(A==null){throw new ArgumentError("pattern: ${A}");}if(caseSensitive==null){if(xS){caseSensitive=false;}else{caseSensitive=true;}}tl=caseSensitive;vl=notify;wl=pL.qL(A);ul=xl();}int get length{return ul.length;}void set length(int A){throw new UnsupportedError("length=");}String operator[](int A){return ul[A];}void operator[]=(int A,String B){throw new UnsupportedError("[]=");}bool yl(String A){if(!new Directory(A).existsSync()){if(!new File(A).existsSync()){if(!new Link(A).existsSync()){return false;}}}return true;}List<String> xl(){var A=new zS(wl,caseSensitive:tl,exists:yl,isDirectory:zl,isWindows:xS,list:Am);return A.list(RK.path,notify:vl);}bool zl(String A){return new Directory(A).existsSync();}List<String> Am(String C,bool D){List<String> A;try {A=new Directory(C).listSync(followLinks:D).map((B)=>B.path).toList();}catch (B){A=new List<String>();}return A;}}class pL{static final bool vS=Platform.isWindows;static String qL(String A){if(A==null||A.isEmpty){return A;}A=zb(A);if(A[0]!="~"){return A;}String B;if(vS){var C=Platform.environment["HOMEDRIVE"];var A=Platform.environment["HOMEPATH"];if(C!=null&&!C.isEmpty&&A!=null&&!A.isEmpty){B=C+A;}else{B=Platform.environment["USERPROFILE"];}B=B.replaceAll("\\","/");}else{B=Platform.environment["HOME"];}if(B==null||B.isEmpty){return A;}if(B.endsWith("/")||B.endsWith("\\")){B=B.substring(0,B.length-1);}if(A=="~"||A=="~/"){return B;}if(A.startsWith("~/")){return B+"/"+A.substring(2);}return A;}static String zb(String G){var D=new StringBuffer();var I=G.length;for(var A=0;A<I;A++ ){var B=G[A];switch (B){case "\$":if(A+1<I){var H=A+1;var C=G.codeUnitAt(H);if((C>=65&&C<=90)||C==95){while(true){if(H==I){break;}var C=G.codeUnitAt(H);if((C>=65&&C<=90)||(C>=48&&C<=57)||C==95){H++ ;continue;}break;}}if(H>A+1){var L=G.substring(A+1,H);var K=Platform.environment[L];if(K==null){K="";}else if(vS){K=K.replaceAll("\\","/");}D.write(K);A=H-1;}else{D.write(B);}}else{D.write(B);}break;case "[":D.write(B);if(A+1<I){B=G[ ++A];D.write(B);while(true){if(A==I){break;}B=G[ ++A];D.write(B);if(B=="]"){break;}}}break;default:D.write(B);break;}}return D.toString();}}class gI{static final bool wS=Platform.isWindows;static String yb(String A){if(A==null){return null;}if(A.isEmpty){return ".";}var D=nI(A);if(D.length==1){if(ST(A)){var B=Wc(A);if(wS){B=B.replaceAll("\\","/");}return B;}else{return ".";}}var C=mI(A);if(wS){C=C.replaceAll("\\","/");}return C;}static List<String> yS(String A,{bool caseSensitive,void notify(String path)}){if(A==null){return null;}A=pL.qL(A);Directory B;if(ST(A)){var K=new BT();var D=K.IC(A);var G=[] ;var H=D.hC;var L=H.length;for(var C=1;C<L;C++ ){var I=D.hC[C];if(I.strict){G.add(I);}else{break;}}var O=H.first.source+G.join("/");B=new Directory(O);}else{B=Directory.current;}return new uS(B,A,caseSensitive:caseSensitive,notify:notify);}static bool Ac(String A,String B){if(A==null){return false;}A=pL.qL(A);switch (B){case "directory":return new Directory(A).existsSync();case "exists":return FileStat.statSync(A).type!=FileSystemEntityType.NOT_FOUND;case "file":return new File(A).existsSync();case "link":return new Link(A).existsSync();default:return null;}}}abstract class MG implements sM{factory MG(String A,{Duration pollingDelay}){if(FileSystemEntity.isWatchSupported&&!Platform.isWindows){return new LU(A);}return new NU(A,pollingDelay:pollingDelay);}}class BM implements Pattern{final bool caseSensitive;final String pattern;bool Bm;Pattern Cm;bool Dm;List<KE> Em;BM(this.pattern,{this.caseSensitive: true}){if(pattern==null){throw new ArgumentError("pattern: ${pattern}");}if(caseSensitive==null){throw new ArgumentError("caseSensitive: ${caseSensitive}");}Fm(caseSensitive);}bool get crossesDirectory=>Bm;bool get isAbsolute=>Dm;List<KE> get kK=>Em;Iterable<Match> allMatches(String A,[int B=0]){return Cm.allMatches(A,B);}bool cD(String A){return !allMatches(A).isEmpty;}Match matchAsPrefix(String A,[int B=0]){return Cm.matchAsPrefix(A,B);}String toString(){return pattern;}void Fm(bool B){var C=new Hc();var A=C.gg(pattern,caseSensitive:B);Bm=A.crossesDirectory;Cm=A.PX;Dm=A.isAbsolute;Em=A.kK;}}class KE implements Pattern{Pattern Cm;final bool crossesDirectory;final bool onlyDirectory;final String pattern;final bool strict;KE(this.pattern,Pattern A,{this.crossesDirectory,this.onlyDirectory,this.strict}){if(pattern==null){throw new ArgumentError("pattern: ${pattern}");}if(A==null){throw new ArgumentError("expression: ${A}");}if(crossesDirectory==null){throw new ArgumentError("crossing: ${crossesDirectory}");}if(strict==null){throw new ArgumentError("strict: ${strict}");}if(onlyDirectory==null){throw new ArgumentError("trailingSlash: ${onlyDirectory}");}Cm=A;}Iterable<Match> allMatches(String A,[int B=0]){return Cm.allMatches(A,B);}bool cD(String A){return !allMatches(A).isEmpty;}Match matchAsPrefix(String A,[int B=0]){return Cm.matchAsPrefix(A,B);}String toString(){return pattern;}}class Hc{static const String Ic="Cannot escape slash '/' character";static const String Jc="Range out of order in character class";static const String CM="Explicit slash '/' not allowed in character class";static const String DT="Unterminated backslash '\\' escape sequence";static const String DM="Unexpected end of character class";bool Gm;StringBuffer Hm;String Im;StringBuffer Jm;ET gg(String A,{bool caseSensitive: true}){if(A==null){throw new ArgumentError("input: ${A}");}if(caseSensitive==null){throw new ArgumentError("caseSensitive: ${caseSensitive}");}Gm=caseSensitive;Im=A;return Fm();}Fm(){Km();var C=new BT();var B=C.IC(Im);var D=Lm(B.hC);var A=new ET();A.crossesDirectory=B.crossesDirectory;A.PX=new RegExp(Hm.toString(),caseSensitive:Gm);A.isAbsolute=B.isAbsolute;A.kK=D;return A;}void Mm(rL B,bool A){if(A){Nm("(?![.])");}Nm("[^/]*");}void Om(sL B,bool A){if(A){Nm("(?![.])");}Nm(".*");}void Pm(hI D,bool B){Nm("(?:");var G=D.hC;var H=G.length;for(var C=0;C<H;C++ ){var A=G[C];switch (A.type){case g.tL:Mm(A,B);break;case g.uL:Om(A,B);break;case g.vL:Pm(A,B);break;case g.wL:Qm(A);break;case g.xL:Rm(A);break;case g.yL:Sm(A);break;default:Tm(D,A);}B=false;if(C<H-1){Nm("|");}}Nm(")");}void Qm(iI D){var B="";var G=D.source;var H=G.length;var A=0;var I=(){switch (B){case "/":var C=CM;Um(C,D.position+A);break;case "\\":if(A>=H){var C=DT;Um(C,D.position+A);}B=G[A++ ];switch (B){case "/":var C=CM;Um(C,D.position+A);break;default:Nm("\\");Nm(B);break;}break;case "^":Nm(B);break;default:Nm(B);break;}var X=B.codeUnitAt(0);if(A<H){B=G[A++ ];}else{B="";}return X;};if(A<H){B=G[A++ ];}if(B!="["){Vm(D.type,"starts","[",0);}Nm("[");B=G[A++ ];if(B=="!"){Nm("^");if(A<H){B=G[A++ ];}else{var C=DM;Um(C,D.position+A);}}if(B=="]"){Nm("\\]-\\]'");if(A<H){B=G[A++ ];}else{var C=DM;Um(C,D.position+A);}}var K=false;while(true){if(B==""){Vm(D.type,"ends","]",0);}switch (B){case "/":var C=CM;Um(C,D.position+1+A);break;case "]":if(A!=H){Vm(D.type,"ends","]",0);}K=true;break;default:if(B=="-"){if(A<H){if(G[A]=="]"){B="]";A++ ;Nm("-");break;}}}int L=I();var O=L;switch (B){case "-":if(A>=H){var C=DM;Um(C,D.position+A);}B=G[A++ ];if(B=="]"){A-= 2;B=G[A];}else{Nm("-");O=I();if(L>O){var C=Jc;Um(C,A);}}break;}}if(K){break;}}Nm("]");}void Rm(AD C){var D=C.source;var H=D.length;var B=0;while(true){if(B==H){break;}var A=D[B++ ];switch (A){case "\\":if(B==H){var G=DT;Um(G,C.position+B);}A=D[B++ ];switch (A){case "/":var G=Ic;Um(G,C.position+B);break;case "*":case "{":case "[":case "?":case "}":Nm("\\");Nm(A);break;case "\\":Nm("\\");Nm(A);break;default:Nm(A);}break;case "\$":case "(":case ")":case "*":case "+":case ".":case "?":case "[":case "]":case "^":case "{":case "|":case "}":Nm("\\");Nm(A);break;default:Nm(A);break;}}}void Sm(kI A){Nm(".");}KE Wm(BD B){Xm();var C=true;for(var A in B.hC){switch (A.type){case g.tL:Mm(A,C);break;case g.uL:Om(A,C);break;case g.vL:Pm(A,C);break;case g.wL:Qm(A);break;case g.xL:Rm(A);break;case g.yL:Sm(A);break;default:Tm(B,A);}C=false;}Jm.write("\$");var D=Jm.toString();var G=new RegExp(D,caseSensitive:Gm);var H=B.crossesDirectory;var I=B.onlyDirectory;var K=B.source;var L=B.strict;var O=new KE(K,G,crossesDirectory:H,onlyDirectory:I,strict:L);return O;}List<KE> Lm(List<BD> C){Hm.write("^");var D=new List<KE>();var G=C.length;for(var A=0;A<G;A++ ){var B=C[A];switch (B.type){case g.AT:var H=Wm(B);D.add(H);break;default:throw new StateError("Illegal node: '${B}'.");break;}if(A<G-1){if(!B.jX){Hm.write("/");}}}Hm.write("\$");return D;}void Um(String A,int B){throw new FormatException("(column: ${B+1}), ${A} in '${Im}'.");}void Tm(fB A,fB B){var C=A.position;var D="<null>";if(B!=null){D=B.type.toString();C=B.position;}var G=A.type;var H="Illegal element '${D}' in ${G} node '${A}'";Um(H,C);}void Vm(g A,String B,String C,int D){var G="'${A}' should ${B} with '${C}'";Um(G,D);}void Km(){Hm=new StringBuffer();}void Xm(){Jm=new StringBuffer();Jm.write("^");}void Nm(String A){Hm.write(A);Jm.write(A);}}class ET{bool isAbsolute;bool crossesDirectory;Pattern PX;List<KE> kK;}class zS{final String pattern;bool Ym;Function Zm;List<String> am;bool bm;BM cm;Function dm;bool em;Function fm;Function gm;int hm;bool im;List<KE> jm;bool km;zS(this.pattern,{bool caseSensitive,bool exists(String path),bool followLinks: true,bool isDirectory(String path),bool isWindows,List<String> list(String path,bool followLinks)}){if(pattern==null){throw new ArgumentError("pattern: ${pattern}");}if(exists==null){throw new ArgumentError("exists: ${exists}");}if(followLinks==null){throw new ArgumentError("followLinks: ${followLinks}");}if(isDirectory==null){throw new ArgumentError("isDirectory: ${isDirectory}");}if(isWindows==null){throw new ArgumentError("isWindows: ${isWindows}");}if(list==null){throw new ArgumentError("list: ${list}");}if(caseSensitive==null){if(isWindows){caseSensitive=false;}else{caseSensitive=true;}}Ym=caseSensitive;Zm=exists;bm=followLinks;dm=isDirectory;em=isWindows;fm=list;cm=new BM(pattern,caseSensitive:caseSensitive);jm=cm.kK;if(!jm.isEmpty){im=jm.last.onlyDirectory;}else{im=false;}}List<String> list(String A,{void notify(String path)}){am=<String>[] ;if(!dm(A)){return am;}gm=notify;if(Ym){if(em){km=false;}else{km=true;}}else{if(em){km=true;}else{km=false;}}var B=cm.isAbsolute;if(B){hm=0;}else{hm=A.length;}if(B){if(cm.crossesDirectory){lm(A);}else{mm(A);}}else{if(jm[0].crossesDirectory){nm(A);}else{om(A,0);}}return am;}void pm(String A){am.add(A);if(gm!=null){gm(A);}}void lm(String A){if(em){A=A.replaceAll("\\","/");}var D=nI(A);var C=D.length;if(C>jm.length){C=jm.length;}for(var B=0;B<C;B++ ){var G=jm[B];if(G.crossesDirectory){break;}if(!jm[B].cD(D[B])){return;}}if(Zm(A)&&dm(A)){nm(A);}}void mm(String A){if(em){A=A.replaceAll("\\","/");}var H=nI(A);var D=H.length;if(D>jm.length){return;}var B=0;for(;B<D;B++ ){var I=H[B];var C=jm[B];if(C.onlyDirectory){I+= "/";}if(!C.cD(I)){return;}}if(B==jm.length){var C=jm[B-1];var G=false;if(C.onlyDirectory){G=dm(A);}else{G=Zm(A);}if(G){pm(A);}return;}if(dm(A)){qm(A,D);}}void qm(String A,int D){var C=jm[D];if(C.strict&&km){A=QB(A,C.pattern);var G=dm(A);var L=false;if(!G){L=Zm(A);}if(!(G||L)){return;}if(D==jm.length-1){if(em){A=A.replaceAll("\\","/");}if(C.onlyDirectory){if(G){pm(A);}}else{pm(A);}return;}if(G){qm(A,D+1);}return;}List<String> X=fm(A,bm);for(var I in X){var B=I;if(em){B=B.replaceAll("\\","/");}var O=B.lastIndexOf("/");String H;if(O!=-1){H=B.substring(O+1);}else{H=B;}bool K=dm(I);if(C.onlyDirectory){if(K){H+= "/";}}if(!C.cD(H)){continue;}if(D==jm.length-1){if(C.onlyDirectory){if(K){pm(B);}}else{pm(B);}continue;}if(K){qm(I,D+1);}}}void nm(String G){List<String> H=fm(G,bm);for(var C in H){var A=C;if(em){A=A.replaceAll("\\","/");}var B=A;if(hm>0){B=A.substring(hm+1);}bool D=dm(C);if(im){if(D){B+= "/";if(cm.cD(B)){pm(A);}}}else{if(cm.cD(B)){pm(A);}}if(D){nm(C);}}}void om(String A,int G){var D=jm[G];if(D.strict&&km){A=QB(A,D.pattern);bool H=dm(A);var X=false;if(!H){X=Zm(A);}if(!(H||X)){return;}if(G==jm.length-1){if(em){A=A.replaceAll("\\","/");}if(D.onlyDirectory){if(H){pm(A);}}else{pm(A);}return;}if(H){var B=G+1;var L=jm[B];if(!L.crossesDirectory){om(A,B);}else{nm(A);}}return;}List<String> c=fm(A,bm);for(var I in c){var C=I;if(em){C=C.replaceAll("\\","/");}var B=C.lastIndexOf("/");String K;if(B!=-1){K=C.substring(B+1);}else{K=C;}bool O=dm(I);if(D.onlyDirectory){if(O){K+= "/";}}if(!D.cD(K)){continue;}if(G==jm.length-1){if(D.onlyDirectory){if(O){pm(C);}}else{pm(C);}continue;}if(O){var B=G+1;var L=jm[B];if(!L.crossesDirectory){om(I,B);}else{nm(I);}}}}}abstract class fB{final String source;final int position;fB(this.source,this.position){if(source==null){throw new ArgumentError("source: ${source}");}if(position==null){throw new ArgumentError("position: ${position}");}}bool get crossesDirectory;bool get strict;g get type;String toString(){return source;}}class rL extends fB{rL(String A,int B):super(A,B);bool get crossesDirectory=>false;bool get strict=>false;g get type=>g.tL;}class sL extends fB{sL(String A,int B):super(A,B);bool get crossesDirectory=>true;bool get strict=>false;g get type=>g.uL;}class hI extends jI{hI(String A,int B,List<fB> C):super(A,B,C){if(rm.length<2){throw new ArgumentError("The number of elements in the list of nodes must be at least 2");}}bool get strict=>false;g get type=>g.vL;}class iI extends fB{iI(String A,int B):super(A,B){if(A==null||A.length<3){throw new ArgumentError("source: ${A}");}if(A[0]!="["||A[A.length-1]!="]"){throw new ArgumentError("source: ${A}");}}bool get crossesDirectory=>false;bool get strict=>false;g get type=>g.wL;}abstract class jI extends fB{bool sm;List<fB> rm;bool tm;jI(String B,int C,List<fB> A):super(B,C){if(A==null||A.isEmpty){throw new ArgumentError("nodes: ${A}");}for(var D in A){if(D is!fB){throw new ArgumentError("List of nodes contains invalid elements.");}}rm=A.toList();}bool get crossesDirectory{if(sm==null){sm=false;for(var A in rm){if(A.crossesDirectory){sm=true;break;}}}return sm;}List<fB> get hC=>new UnmodifiableListView<fB>(rm);bool get strict{if(tm==null){tm=true;for(var A in rm){if(!A.strict){tm=false;break;}}}return tm;}}class AD extends fB{AD(String A,int B):super(A,B);bool get crossesDirectory=>false;bool get strict=>true;g get type=>g.xL;}class kI extends fB{kI(String A,int B):super(A,B);bool get crossesDirectory=>false;bool get strict=>false;g get type=>g.yL;}class BD extends jI{bool um;bool vm;BD(String B,int C,bool A,List<fB> D):super(B,C,D){if(A==null){throw new ArgumentError("isRoot: ${A}");}um=A;}bool get jX=>um;bool get onlyDirectory{if(vm==null){vm=false;if(!um){var A=rm.last;if(A is AD){vm=A.source.endsWith("/");}}}return vm;}g get type=>g.AT;}class lI extends jI{bool wm;List<BD> rm;lI(String A,int B,List<BD> C):super(A,B,C);bool get isAbsolute{if(wm==null){wm=rm.first.jX;}return wm;}List<BD> get hC=>new UnmodifiableListView<BD>(rm);g get type=>g.Bc;}class g{static const g tL=const g("ASTERISK");static const g uL=const g("ASTERISKS");static const g vL=const g("BRACE");static const g wL=const g("CHARACTER_CLASS");static const g xL=const g("LITERAL");static const g yL=const g("QUESTION");static const g AT=const g("SEGMENT");static const g Bc=const g("SEGMENTS");final String name;const g(this.name);}class BT{static const String OC="";static const String Cc="Cannot escape slash '/' character";static const String Dc="Choice should contains at least two elements";static const String Ec="Range out of order in character class";static const String zL="Explicit slash '/' not allowed in character class";static const String Fc="Explicit slash '/' not allowed in brace";static const String CT="Unterminated backslash '\\' escape sequence";static const String AM="Unexpected end of character class";static const String Gc="Unexpected end of brace";String xm;String ym;bool zm;bool um;int An;int Bn;List<fB> Cn;List<BD> Dn;int En;lI IC(String A){if(A==null){throw new ArgumentError("input: ${A}");}if(A.isEmpty){var B=new AD("",0);var C=new BD("",0,false,[B]);return new lI("",0,[C]);}this.ym=A;Fn();Gn();return new lI(ym,0,Dn);}bool Hn(String B){if(B.isEmpty){return false;}var A=B.codeUnitAt(0);if(A>=65&&A<=90||A>=97&&A<=122){return true;}return false;}BD In(){var G=Bn;var C=ym.substring(En,Bn);var D=false;if(xm=="/"){while(true){Jn();if(xm!="/"){break;}}if(xm==OC&&!um){D=true;}}if(D){C+= "/";if(!Cn.isEmpty){var A=Cn.last;if(A is AD){var B=new AD(A.source+"/",A.position);Cn[Cn.length-1]=B;}else{var B=new AD("/",G);Cn.add(B);}}}var H=new BD(C,En,um,Cn);Kn();return H;}void Ln(String A,int B){throw new FormatException("(column: ${B+1}), ${A} in '${ym}'.");}int Mn(){int B;switch (xm){case OC:var A=AM;Ln(A,Bn);break;case "/":var A=zL;Ln(A,Bn);break;case "\\":Jn();switch (xm){case OC:var A=CT;Ln(A,Bn);break;case "/":var A=zL;Ln(A,Bn);break;default:B=xm.codeUnitAt(0);Jn();break;}break;case "^":B=xm.codeUnitAt(0);Jn();break;default:B=xm.codeUnitAt(0);Jn();break;}return B;}String Nn(int B){var A=Bn+B;if(A<An){return ym[A];}return OC;}String Jn(){if(Bn+1>=An){xm=OC;Bn=An;return OC;}xm=ym[ ++Bn];return xm;}void Gn(){switch (xm){case OC:break;case "/":Jn();um=true;var A=new AD("/",0);Cn.add(A);var B=In();Dn.add(B);break;default:if(Hn(xm)&&Nn(1)==":"&&Nn(2)=="/"){um=true;Bn+= 2;Jn();var C=ym.substring(0,3);var A=new AD(C,0);Cn.add(A);var B=In();Dn.add(B);}break;}if(xm!=OC){On();}}hI Pn(){var D=Bn;var B=Cn.length;Jn();var G=true;var H=zm;var C=false;zm=true;while(true){switch (xm){case OC:var A=Gc;Ln(A,Bn);break;case "/":var A=Fc;Ln(A,Bn);break;case ",":Jn();if(xm=="}"){Jn();var I=new AD("",Bn);Cn.add(I);C=true;}G=false;break;case "}":Jn();C=true;break;default:Qn();break;}if(C){break;}}if(G){var A=Dc;Ln(A,Bn);}zm=H;Cn.sublist(B,Cn.length);var K=Cn.sublist(B,Cn.length);Cn.length=B;var L=ym.substring(D,Bn);return new hI(L,D,K);}void Qn(){fB A;switch (xm){case "*":A=Rn();break;case "?":A=Sn();break;case "[":A=Tn();break;case "{":A=Pn();break;default:A=Un();break;}Cn.add(A);}iI Tn(){var B=Bn;Jn();var G=Bn;if(xm=="!"){Jn();}if(xm=="]"){Jn();}var C=false;while(true){switch (xm){case "/":var A=zL;Ln(A,Bn);break;case OC:var A=AM;Ln(A,Bn);break;case "]":Jn();C=true;break;default:Vn();break;}if(C){break;}}var D=ym.substring(B,Bn);return new iI(D,B);}AD Un(){var C=Bn;var A=false;while(true){switch (xm){case OC:case "*":case "{":case "[":case "}":case "?":case "/":A=true;break;case ",":if(zm){A=true;}else{Jn();}break;case "\\":Jn();if(xm==OC){var B=CT;Ln(B,Bn);}switch (xm){case "/":var B=Cc;Ln(B,Bn);break;case "*":case "{":case "[":case "?":case "}":Jn();break;case "\\":Jn();break;default:break;}break;case "^":case "\$":case "(":case ".":case "+":case ")":case "|":Jn();break;default:Jn();break;}if(A){break;}}var D=ym.substring(C,Bn);return new AD(D,C);}kI Sn(){Jn();return new kI("?",Bn-1);}void Vn(){if(xm=="-"){if(Nn(1)=="]"){Jn();return;}}var B=Mn();var C=B;switch (xm){case "-":Jn();if(xm==OC){var A=AM;Ln(A,Bn);return;}else if(xm=="]"){Bn-= 2;Jn();}else{var D=Bn;C=Mn();if(B>C){var A=Ec;Ln(A,D);}}break;}}void Wn(){while(true){fB A;switch (xm){case OC:case "/":break;case "*":A=Rn();break;case "?":A=Sn();break;case "[":A=Tn();break;case "{":A=Pn();break;default:A=Un();break;}if(A!=null){Cn.add(A);}else{break;}}}void On(){var A=false;while(true){Wn();var B=In();Dn.add(B);switch (xm){case OC:A=true;break;}if(A){break;}}}fB Rn(){var A=Bn;Jn();var B=false;switch (xm){case "*":B=true;while(true){Jn();if(xm!="*"){break;}}B=true;break;}var C=ym.substring(A,Bn);if(B){return new sL(C,A);}else{return new rL(C,A);}}void Fn(){zm=false;An=ym.length;Bn=0;Dn=<BD>[] ;if(Bn<An){xm=ym[Bn];}else{Bn=An;xm=OC;}Kn();}void Kn(){um=false;Cn=new List<fB>();En=Bn;}}abstract class QD extends Converter<List<int>,TB>{int get blockSize;const QD();TB convert(List<int> C){var A=new KL();var B=startChunkedConversion(A);B.add(C);B.close();return A.value;}ByteConversionSink startChunkedConversion(Sink<TB> A);}abstract class MI implements Sink<List<int>>{final Sink<TB> Xn;final Endianness Yn;final Uint32List Zn;static const iZ=0x1fffffffffffffff;int an=0;final bn=new KU();bool cn=false;Uint32List get W;MI(this.Xn,int A,{Endianness endian: Endianness.BIG_ENDIAN}):Yn=endian,Zn=new Uint32List(A);void tK(Uint32List A);void add(List<int> A){if(cn)throw new StateError('Hash.add() called after close().');an+= A.length;bn.addAll(A);dn();}void close(){if(cn)return;cn=true;en();dn();assert(bn.isEmpty);Xn.add(new TB(fn()));Xn.close();}Uint8List fn(){if(Yn==Endianness.HOST_ENDIAN)return W.buffer.asUint8List();var B=new Uint8List(W.lengthInBytes);var C=B.buffer.asByteData();for(var A=0;A<W.length;A++ ){C.setUint32(A*OF,W[A]);}return B;}void dn(){var D=bn.buffer.asByteData();var C=bn.length~/Zn.lengthInBytes;for(var B=0;B<C;B++ ){for(var A=0;A<Zn.length;A++ ){Zn[A]=D.getUint32(B*Zn.lengthInBytes+A*OF,Yn);}tK(Zn);}bn.removeRange(0,C*Zn.lengthInBytes);}void en(){bn.add(0x80);var C=an+9;var K=gn(C,Zn.lengthInBytes);for(var D=0;D<K-C;D++ ){bn.add(0);}if(an>iZ){throw new UnsupportedError('Hashing is unsupported for messages with more than 2^64 bits.');}var G=an*oZ;var A=bn.length;bn.addAll(new Uint8List(8));var B=bn.buffer.asByteData();var H=G>>32;var I=G&gD;if(Yn==Endianness.BIG_ENDIAN){B.setUint32(A,H,Yn);B.setUint32(A+OF,I,Yn);}else{B.setUint32(A,I,Yn);B.setUint32(A+OF,H,Yn);}}int gn(int B,int A)=>(B+A-1)&-A;}class LL extends Converter<List<int>,TB>{final QD hn;final Uint8List jn;LL(QD B,List<int> A):hn=B,jn=new Uint8List(B.blockSize){if(A.length>hn.blockSize)A=hn.convert(A).LD;jn.setRange(0,A.length,A);}TB convert(List<int> C){var A=new KL();var B=startChunkedConversion(A);B.add(C);B.close();return A.value;}ByteConversionSink startChunkedConversion(Sink<TB> A)=>new DQ(A,hn,jn);}class DQ extends ByteConversionSink{final ByteConversionSink kn;final ln=new KL();ByteConversionSink mn;bool nn=false;DQ(Sink<TB> G,QD D,List<int> C):kn=D.startChunkedConversion(G){mn=D.startChunkedConversion(ln);var B=new Uint8List(C.length);for(var A=0;A<B.length;A++ ){B[A]=0x5c^C[A];}kn.add(B);for(var A=0;A<B.length;A++ ){B[A]=0x36^C[A];}mn.add(B);}void add(List<int> A){if(nn)throw new StateError('HMAC is closed');mn.add(A);}void addSlice(List<int> A,int B,int C,bool D){if(nn)throw new StateError('HMAC is closed');mn.addSlice(A,B,C,D);}void close(){if(nn)return;nn=true;mn.close();kn.add(ln.value.LD);kn.close();}}abstract class NE extends gB{String get OD;bool PK(String A);bool p(int A);bool hG(String A);int ND(String A,{bool withDrive: false});String XX(String A){var B=ND(A);if(B>0)return A.substring(0,B);return DC(A)?A[0]:null;}bool DC(String A);String AI(Uri A);bool NK(int A,int B)=>A==B;bool tO(String A,String B)=>A==B;int oW(int A)=>A;String pW(String A)=>A;}enum _type {and,or,not,equal,approx,greater,less,present,ident,substring,lParen,rParen,END}class nB{_type type;String zD;nB(this.type,this.zD);}class nS{final String input;int kG=0;int ZC=0;nS(this.input);String f(){var A=input[ZC];ZC+= 1;return A;}String aB(){if(ZC>=input.length){return null;}return input[ZC];}bool cD(String A){if(ZC>=input.length||input[ZC]!=A){return false;}ZC+= 1;return true;}List<nB> Ch(){var A=<nB>[] ;while(ZC<input.length){kG=ZC;A.add(ph());}A.add(new nB(_type.END,""));return A;}nB ph(){var A=f();switch (A){case '(':return new nB(_type.lParen,A);case ')':return new nB(_type.rParen,A);case '&':return new nB(_type.and,A);case '|':return new nB(_type.or,A);case '!':return new nB(_type.not,A);case '=':if(aB()=='*'){f();return new nB(_type.present,input.substring(kG,ZC));}return new nB(_type.equal,A);case '~':if(cD('=')){return new nB(_type.approx,input.substring(kG,ZC));}throw 'Unexpected character after "~" expected "=" got: "${aB}()"';case '>':if(cD('=')){return new nB(_type.greater,input.substring(kG,ZC));}throw 'Unexpected character after ">" expected "=" got: "${aB}()"';case '<':if(cD('=')){return new nB(_type.less,input.substring(kG,ZC));}throw 'Unexpected character after "<" expected "=" got: "${aB}()"';default:if(hX(A)){return Mh();}throw "Unknown token: '${A}'";}}final Lh=new RegExp(r'\w+|\s');bool hX(String A){return Lh.hasMatch(A);}nB Mh(){var A=aB();bool B=false;while(ZC<input.length&&(A=='.'||A=='*'||A==' '||hX(A))){if(A=='*')B=true;f();A=aB();}var C=B?_type.substring:_type.ident;return new nB(C,input.substring(kG,ZC));}}class aI{_type type;String iF;String value;List<Z> fO;Z Bj;}class Sb{int index=0;nB MB;nB jh;List<nB> sK;void jE(){if(MB.type==_type.END||index>=sK.length)return;index+= 1;jh=MB;MB=sK[index];}Z Oe(String A){var B=new nS(A);sK=B.Ch();MB=sK[index];return sO();}Z sO(){var A=new aI();if(MB.type!=_type.lParen){throw 'Unexpected token "${MB.zD}". expected "("';}jE();if(MB.type==_type.and){jE();return Z.VQ(fO());}if(MB.type==_type.or){jE();return Z.WQ(fO());}if(MB.type==_type.not){jE();return Z.zZ(sO());}if(MB.type!=_type.ident){throw 'Unexpected token "${MB.zD}". Expected attribute name.';}A.iF=MB.zD;jE();if(MB.type==_type.present){pn(isPresent:true);return Z.Aa(A.iF);}A.type=MB.type;jE();switch (A.type){case _type.equal:return TC(A);case _type.approx:return Xg(A);case _type.less:case _type.greater:return Xh(A);}throw 'Unexpected token: "${MB.zD}". '+"Expected filterType after attribute.";}List<Z> fO(){var A=<Z>[] ;while(MB.type!=_type.END&&MB.type!=_type.rParen){A.add(sO());}if(MB.type!=_type.rParen){throw 'Unexpected token: "${MB.zD}". '+'Expected ")" after filter list.';}jE();return A;}Z TC(aI A){A.value=qn('=',acceptSubstring:true);if(MB.type==_type.substring)A.type=MB.type;pn();if(A.type==_type.substring){return Z.Ba('${A.iF}=${A.value}');}return Z.yZ(A.iF,A.value);}Z Xg(aI A){A.value=qn('~=');pn();return Z.Fa(A.iF,A.value);}Z Xh(aI A){var B=A.type==_type.less?'<=':'>=';A.value=qn(B);pn();if(A.type==_type.less){return Z.Da(A.iF,A.value);}return Z.Ca(A.iF,A.value);}String qn(String A,{bool acceptSubstring: false}){if(MB.type==_type.ident||(MB.type==_type.substring&&acceptSubstring)){return MB.zD;}throw 'Unexpected token: "${MB.zD}". '+'Expected value after "${A}".';}String pn({bool isPresent: false}){jE();if(MB.type!=_type.rParen){if(isPresent){throw 'Unexpected token: "${MB.zD}". '+'Expected ")" after present filter.';}throw 'Unexpected token: "${MB.zD}". '+'Expected ")" after filter value.';}jE();}}class AS extends sG{String rn;Map<String,cC> sn;AS(this.rn,Map<String,cC> this.sn):super(JS);HB oE(){var A=tn();A.add(new SB(rn));var C=new GB();sn.forEach((I,cC D){var B=new GB();B.add(new SB(D.name));var G=new GB();D.values.forEach((dynamic H){G.add(new SB(H));});B.add(G);C.add(B);});A.add(C);return A;}}class BS extends sG{String un;String vn;static const int Oa=0x80;BS(this.un,this.vn):super(UL);HB oE(){var A=tn();var B=new eD(3);A.add(B);var C=new SB(un);var D=new SB(vn,tag:Oa);A.add(C);A.add(D);return A;}}class vB{int wn;int xn;int get vO=>xn;GB yn;GB zn;HB Ao;List<HB> get i=>(Ao as GB).i;int get AE=>wn;bool get Hh=>zn!=null;GB get jG=>yn;int get Zh=>Ao.kY;vB(this.wn,sG B,[List<sE> A=null]){xn=B.kh;Ao=B.oE();if(A!=null&&A.length>0){zn=new GB(tag:Wa);A.forEach((C){zn.add(C.oE());XL.uB("Adding control ${C}");});}}vB.ai(Uint8List A){Ao=new GB.Ki(A);if(Ao==null){throw new TI("Parsing error on ${A}");}if(i.length!=2&&i.length!=3){throw new TI("Expecting 2 or 3 elements: got ${i.length} obj=${Ao}");}var C=i[0] as eD;wn=C.VC;yn=i[1] as GB;xn=yn.tag;if(i.length==3){var B=i[2].MD;if(B[0]==sE.sZ)zn=new GB.Ki(B);}iD.UC(()=>"LDAP message received: Id=${AE} protocolOp=${jG}");}List<int> toBytes(){GB A=new GB();A.add(new eD(wn));A.add(Ao);if(zn!=null)A.add(zn);var B=A.MD;return B;}String toString(){var A=NS(xn);return "Msg(id=${wn}, op=${A},controls=${zn})";}}const int UL=0x60;const int VL=0x61;const int Pa=0x63;const int FS=0x64;const int GS=0x65;const int HS=0x73;const int Qa=0x66;const int Ra=0x67;const int JS=0x68;const int KS=0x69;const int Sa=0x78;const int Ta=0x6B;const int Ua=0x6C;const int LS=0x6D;const int Va=0x6E;const int MS=0x6F;const int Wa=0xA0;String NS(int A){switch (A){case UL:return "BND_REQ";case VL:return "BND_RESP";case Pa:return "SRCH_REQ";case FS:return "SRCH_RES_ENTRY";case GS:return "SRCH_RES_DONE";case HS:return "SRCH_RES_REF";case Qa:return "MODIFY_REQUEST";case JS:return "ADD_REQUEST";case KS:return "ADD_RESPONSE";case Ua:return "MODIFY_DN_REQ";case LS:return "MODIFY_DN_RESP";case Va:return "COMPARE_REQ";case MS:return "COMPARE_RESP";default:return A.toRadixString(16);}}r cB=new r("ldap.connection");r XL=new r("ldap.send.ldap");r WI=new r("ldap.send.bytes");r iD=new r("ldap.recv.ldap");r OS=new r("ldap.recv.asn1");r RD=new r("ldap.recv.bytes");class DS extends hD{DS(vB A):super(A);}class ES extends hD{ES(vB A):super(A);}class IS extends hD{IS(vB A):super(A);}class WL extends hD{String SY;String response;WL(vB A):super(A){SY=Bo(A.i[2]);if(A.i.length==4){response=Bo(A.i[3]);}}String Bo(HB A){var B=new SB.Oi(A.MD);return B.bB;}}class CS{int yn;int get kh=>yn;CS(this.yn);GB tn(){var A=new GB(tag:yn);return A;}}abstract class sG extends CS{sG(int A):super(A);HB oE();}class hD{b Co;List<sE> zn=[] ;b get mX=>Co;hD.Zi();hD(vB A){iD.tB(()=>"Response op=${A}");Co=Do(A.jG);if(A.Hh)zn=sE.tZ(A.zn);}b Do(GB A){iD.tB("Parse LDAP result: ${A}");eD B=A.i[0];var C=B.VC;var D=A.i[1] as SB;var G=D.bB;var H=A.i[2] as SB;var I=H.bB;List<String> K=[] ;if(A.i.length>3){var L=A.i[3];iD.tB("Parse LDAP result: type=${L}");}return new b(C,G,I,K);}}abstract class Ma{static hD Na(vB A){iD.tB(()=>"LDAP response received: ${NS(A.jG.tag)}");switch (A.jG.tag){case VL:return new DS(A);case FS:return new VI(A);case HS:return new VI.Yi(A);case GS:return new ES(A);case Sa:return new WL(A);case KS:case Ta:case Ra:case LS:case MS:return new IS(A);default:throw "Not done";}}}class VI extends hD{rG Eo;rG get VY=>Eo;VI.Yi(vB A):super.Zi(){iD.UC(()=>"Search result is a referral");var B=A.jG.i;var C=B.map((D)=>(D as SB).bB).toList();Eo=new rG(null,referrals:C);}VI(vB H):super.Zi(){var A=H.jG;var I=A.i[0] as SB;var C=I.bB;iD.UC(()=>"Search Result Entry: dn=${C}");var K=A.i[1] as GB;Eo=new rG(C);K.i.forEach((L){var D=L as GB;var B=D.i[0] as SB;var O=D.i[1] as xF;var G=O.i.map((X)=>(X as SB).bB).toSet();VY.Zg[B.bB]=new cC(B.bB,G);iD.uB("attribute: ${B.bB}=${G}");});if(A.i.length>=3){var c=A.i[2];iD.uB("controls: ${c}");}}String toString(){return "SearchResultEntry(${VY}})";}}class sc extends fM{}class wE{}class jC implements Comparable<jC>{}abstract class qc implements jC{String get Ai{var A=AB==null?'unknown source':AB;return '${A}:${HC+1}:${LB+1}';}int zW(jC A){if(AB!=A.AB){throw new ArgumentError("Source URLs \"${AB}\" and " "\"${A.AB}\" don't match.");}return (offset-A.offset).abs();}eB JC()=>new eB(this,this,"");int compareTo(jC A){if(AB!=A.AB){throw new ArgumentError("Source URLs \"${AB}\" and " "\"${A.AB}\" don't match.");}return offset-A.offset;}bool operator==(A)=>A is jC&&AB==A.AB&&offset==A.offset;int get hashCode=>AB.hashCode+offset;String toString()=>'<${runtimeType}: ${offset} ${Ai}>';}bool FG=false;h Kc=h.IT;h FT=h.FM;class r{final String name;String get UX=>(parent==null||parent.name=='')?name:'${parent.UX}.${name}';final r parent;h Fo;final Map<String,r> Go;final Map<String,r> DF;StreamController<LE> Ho;factory r(String A){return Lc.putIfAbsent(A,()=>new r.bi(A));}factory r.bi(String A){if(A.startsWith('.')){throw new ArgumentError("name shouldn't start with a '.'");}int B=A.lastIndexOf('.');r C;String D;if(B==-1){if(A!='')C=new r('');D=A;}else{C=new r(A.substring(0,B));D=A.substring(B+1);}return new r.ci(D,C,new Map<String,r>());}r.ci(this.name,this.parent,Map<String,r> A):this.Go=A,this.DF=new UnmodifiableMapView(A){if(parent!=null)parent.Go[name]=this;}h get level{if(FG){if(Fo!=null)return Fo;if(parent!=null)return parent.level;}return FT;}set level(h A){if(FG&&parent!=null){Fo=A;}else{if(parent!=null){throw new UnsupportedError('Please set "hierarchicalLoggingEnabled" to true if you want to ' 'change the level on a non-root logger.');}FT=A;}}Stream<LE> get GY=>Io();bool iX(h A)=>(A>=level);void gG(h B,A,[Object I,StackTrace G,Zone H]){Object K;if(iX(B)){if(A is Function){A=A();}String C;if(A is String){C=A;}else{C=A.toString();K=A;}if(G==null&&B>=Kc){G=StackTrace.current;I??= 'autogenerated stack trace for ${B} ${C}';}if(H==null)H=Zone.current;var L=new LE(B,C,UX,I,G,H,K);if(FG){var D=this;while(D!=null){D.Jo(L);D=D.parent;}}else{GT.Jo(L);}}}void uB(A,[Object B,StackTrace C])=>gG(h.JT,A,B,C);void tB(A,[Object B,StackTrace C])=>gG(h.KT,A,B,C);void UC(A,[Object B,StackTrace C])=>gG(h.EM,A,B,C);void FF(A,[Object B,StackTrace C])=>gG(h.FM,A,B,C);void GE(A,[Object B,StackTrace C])=>gG(h.LT,A,B,C);void DE(A,[Object B,StackTrace C])=>gG(h.MT,A,B,C);Stream<LE> Io(){if(FG||parent==null){if(Ho==null){Ho=new StreamController<LE>.broadcast(sync:true);}return Ho.stream;}else{return GT.Io();}}void Jo(LE A){if(Ho!=null){Ho.add(A);}}static final r GT=new r('');static final Map<String,r> Lc=<String,r>{};}class h implements Comparable<h>{final String name;final int value;const h(this.name,this.value);static const h Mc=const h('ALL',0);static const h IT=const h('OFF',2000);static const h JT=const h('FINEST',300);static const h KT=const h('FINER',400);static const h EM=const h('FINE',500);static const h Nc=const h('CONFIG',700);static const h FM=const h('INFO',800);static const h LT=const h('WARNING',900);static const h MT=const h('SEVERE',1000);static const h Oc=const h('SHOUT',1200);static const List<h> Pc=const[Mc,JT,KT,EM,Nc,FM,LT,MT,Oc,IT];bool operator==(Object A)=>A is h&&value==A.value;bool operator<(h A)=>value<A.value;bool operator<=(h A)=>value<=A.value;bool operator>(h A)=>value>A.value;bool operator>=(h A)=>value>=A.value;int compareTo(h A)=>value-A.value;int get hashCode=>value;String toString()=>name;}class LE{final h level;final String message;final Object dh;final String nO;final DateTime gY;final int XY;static int Qc=0;final Object error;final StackTrace stackTrace;final Zone zone;LE(this.level,this.message,this.nO,[this.error,this.stackTrace,this.zone,this.dh]):gY=new DateTime.now(),XY=LE.Qc++ ;String toString()=>'[${level.name}] ${nO}: ${message}';}final jZ=new EQ.Ti();class EQ extends QD{final int blockSize=16*OF;EQ.Ti();ByteConversionSink startChunkedConversion(Sink<TB> A)=>new ByteConversionSink.from(new FQ(A));}const kZ=const[0xd76aa478,0xe8c7b756,0x242070db,0xc1bdceee,0xf57c0faf,0x4787c62a,0xa8304613,0xfd469501,0x698098d8,0x8b44f7af,0xffff5bb1,0x895cd7be,0x6b901122,0xfd987193,0xa679438e,0x49b40821,0xf61e2562,0xc040b340,0x265e5a51,0xe9b6c7aa,0xd62f105d,0x02441453,0xd8a1e681,0xe7d3fbc8,0x21e1cde6,0xc33707d6,0xf4d50d87,0x455a14ed,0xa9e3e905,0xfcefa3f8,0x676f02d9,0x8d2a4c8a,0xfffa3942,0x8771f681,0x6d9d6122,0xfde5380c,0xa4beea44,0x4bdecfa9,0xf6bb4b60,0xbebfbc70,0x289b7ec6,0xeaa127fa,0xd4ef3085,0x04881d05,0xd9d4d039,0xe6db99e5,0x1fa27cf8,0xc4ac5665,0xf4292244,0x432aff97,0xab9423a7,0xfc93a039,0x655b59c3,0x8f0ccc92,0xffeff47d,0x85845dd1,0x6fa87e4f,0xfe2ce6e0,0xa3014314,0x4e0811a1,0xf7537e82,0xbd3af235,0x2ad7d2bb,0xeb86d391];const lZ=const[07,12,17,22,07,12,17,22,07,12,17,22,07,12,17,22,05,09,14,20,05,09,14,20,05,09,14,20,05,09,14,20,04,11,16,23,04,11,16,23,04,11,16,23,04,11,16,23,06,10,15,21,06,10,15,21,06,10,15,21,06,10,15,21];class FQ extends MI{final W=new Uint32List(4);FQ(Sink<TB> A):super(A,16,endian:Endianness.LITTLE_ENDIAN){W[0]=0x67452301;W[1]=0xefcdab89;W[2]=0x98badcfe;W[3]=0x10325476;}void tK(Uint32List K){assert(K.length==16);var I=W[0];var B=W[1];var D=W[2];var C=W[3];int G;int H;for(var A=0;A<64;A++ ){if(A<16){G=(B&D)|((~B&gD)&C);H=A;}else if(A<32){G=(C&B)|((~C&gD)&D);H=((5*A)+1)%16;}else if(A<48){G=B^D^C;H=((3*A)+5)%16;}else{G=D^(B|(~C&gD));H=(7*A)%16;}var L=C;C=D;D=B;B=l(B,NI(l(l(I,G),l(kZ[A],K[H])),lZ[A]));I=L;}W[0]=l(I,W[0]);W[1]=l(B,W[1]);W[2]=l(D,W[2]);W[3]=l(C,W[3]);}}class LU extends qM implements MG{LU(String A):super(A,()=>new MU(A));}class MU implements MG,rM{final String path;Stream<dC> get TK=>Ko.stream;final Ko=new StreamController<dC>.broadcast();Future get wO=>Lo.future;final Lo=new Completer();StreamSubscription Mo;MU(this.path){No();Lo.complete();}void No(){Mo=new File(path).watch().transform(new Fd<FileSystemEvent>()).listen(Oo,onError:Ko.addError,onDone:Po);}void Oo(List<FileSystemEvent> A){if(A.any((B)=>B.type==FileSystemEvent.DELETE)){return;}Ko.add(new dC(mD.wI,path));}Po()async{var A=await new File(path).exists();if(Ko.isClosed)return;if(A){Ko.add(new dC(mD.wI,path));No();}else{Ko.add(new dC(mD.QU,path));close();}}void close(){if(Mo!=null)Mo.cancel();Mo=null;Ko.close();}}class RF{NE S;String FB;bool DC;List<String> s;List<String> zB;String get eO=>Qo()[1];bool get isAbsolute=>FB!=null;factory RF.fi(String A,NE D){var H=D.XX(A);var K=D.DC(A);if(H!=null)A=A.substring(H.length);var I=<String>[] ;var G=<String>[] ;var B=0;if(A.isNotEmpty&&D.p(A.codeUnitAt(0))){G.add(A[0]);B=1;}else{G.add('');}for(var C=B;C<A.length;C++ ){if(D.p(A.codeUnitAt(C))){I.add(A.substring(B,C));G.add(A[C]);B=C+1;}}if(B<A.length){I.add(A.substring(B));G.add('');}return new RF.gi(D,H,K,I,G);}RF.gi(this.S,this.FB,this.DC,this.s,this.zB);String get MO{var A=this.jF();A.CI();if(A.s.isEmpty)return FB==null?'':FB;return A.s.last;}String get NO=>Qo()[0];void CI(){while(!s.isEmpty&&s.last==''){s.removeLast();zB.removeLast();}if(zB.length>0)zB[zB.length-1]='';}void kE({bool canonicalize: false}){var C=0;var A=<String>[] ;for(var B in s){if(B=='.'||B==''){}else if(B=='..'){if(A.length>0){A.removeLast();}else{C++ ;}}else{A.add(canonicalize?S.pW(B):B);}}if(!isAbsolute){A.insertAll(0,new List.filled(C,'..'));}if(A.length==0&&!isAbsolute){A.add('.');}var D=new List<String>.generate(A.length,(G)=>S.OD,growable:true);D.insert(0,isAbsolute&&A.length>0&&S.hG(FB)?S.OD:'');s=A;zB=D;if(FB!=null&&S==gB.qI){if(canonicalize)FB=FB.toLowerCase();FB=FB.replaceAll('/','\\');}CI();}String toString(){var A=new StringBuffer();if(FB!=null)A.write(FB);for(var B=0;B<s.length;B++ ){A.write(zB[B]);A.write(s[B]);}A.write(zB.last);return A.toString();}List<String> Qo(){var A=s.lastWhere((C)=>C!='',orElse:()=>null);if(A==null)return ['',''];if(A=='..')return ['..',''];var B=A.lastIndexOf('.');if(B<=0)return [A,''];return [A.substring(0,B),A.substring(B)];}RF jF()=>new RF.gi(S,FB,DC,new List.from(s),new List.from(zB));}abstract class GM{}class Rc implements GM{Random mh=new Random.secure();List<int> Bh(int C){var A=new List<int>();for(var B=0;B<C;B++ ){A.add(mh.nextInt(256));}return A;}}class CH{GM UY;QD hash;int Ro;int So;CH({GM saltGenerator,QD hash,int iterations: 1000,int keyLength: 32}){this.UY=saltGenerator==null?new Rc():saltGenerator;this.hash=hash==null?mZ:hash;this.Ro=iterations;this.So=keyLength;}String Jh(String A,{List<int> salt}){if(salt==null){salt=UY.Bh(32);}var B=NT.Sc(salt,A,hash,Ro,So);return NT.Tc(salt,B);}}class NT{static List<int> Sc(List<int> A,String B,QD C,int D,int G){var H=new fT(hash:C);return H.Ah(B,new String.fromCharCodes(A),D,G);}static String Tc(List<int> C,List<int> D){var B=BASE64.encode(C);var G=BASE64.encode(D);var H=B.length;var A="${H}";while(A.length<3){A="0${A}";}return "${A}${B}${G}";}}final TD CD=ac();String get OT{var B=Uri.base;if(B==PT)return DH;PT=B;if(gB.LM==gB.HG){DH=B.resolve('.').toString();return DH;}else{var A=B.toFilePath();var C=A.length-1;assert(A[C]=='/'||A[C]=='\\');DH=C==0?A:A.substring(0,C);return DH;}}Uri PT;String DH;String get Uc=>CD.OD;String QT(String A)=>CD.MO(A);String Vc(String A)=>CD.NO(A);String mI(String A)=>CD.ig(A);String RT(String A)=>CD.eO(A);String Wc(String A)=>CD.nh(A);bool ST(String A)=>CD.isAbsolute(A);bool Xc(String A)=>CD.dG(A);String QB(String A,[String B,String C,String D,String G,String H,String I,String K])=>CD.join(A,B,C,D,G,H,I,K);List<String> nI(String A)=>CD.split(A);String Yc(String A)=>CD.kE(A);String Zc(A)=>CD.ih(A);class pI implements Exception{String message;pI(this.message);String toString()=>"PathException: ${message}";}class fT{QD hash;List<int> To=new List<int>(4);int Uo=null;fT({this.hash});List<int> Ah(String H,String I,int K,int B){if(B>(2<<31-1)*uO){throw "derived key too long";}var C=(B/uO).ceil();var L=B-(C-1)*uO;var D=<int>[] ;for(var A=1;A<=C; ++A){var G=Vo(H,I,K,A);if(A<C){D.addAll(G);}else{D.addAll(G.sublist(0,L));}}return D;}int get uO{if(Uo!=null){return Uo;}var A=hash.convert([1,2,3]);var B=A.LD.length;return B;}List<int> Vo(String D,String O,int X,int c){var A=new LL(hash,D.codeUnits);var B=new ec();var C=A.startChunkedConversion(B);C.add(O.codeUnits);Wo(C,c);C.close();B.close();var G=B.Dh();var H=G;var I=new List.from(G);for(var K=1;K<X;K++ ){A=new LL(hash,D.codeUnits);var L=A.convert(H);Xo(I,L.LD);H=L.LD;}return I;}void Wo(ByteConversionSink B,int A){To[0]=A>>24;To[1]=A>>16;To[2]=A>>8;To[3]=A;B.add(To);}void Xo(List<int> B,List<int> C){for(var A=0;A<B.length;A++ ){B[A]=B[A]^C[A];}}}class ec extends ChunkedConversionSink<TB>{final List<TB> bW=<TB>[] ;void add(TB A){bW.add(A);}void close(){}List<int> Dh()=>bW.fold([] ,(A,B)=>A..addAll(B.LD));}class NM extends UD{final Function Yo;NM(A,this.Yo):super(A);UB DB(pB B){var A=Zo.DB(B);if(A.iE){return A.qC(Yo(A.value));}else{return A;}}bool GC(P A){return A is NM&&super.GC(A)&&Yo==A.Yo;}}class gT extends UD{P ao;P bo;gT(A,this.ao,this.bo):super(A);UB DB(pB C){var A=C;do{A=ao.DB(A);}while((A as UB).iE);var B=Zo.DB(A);if(B.nF){return B;}A=B;do{A=bo.DB(A);}while((A as UB).iE);return A.qC(B.value);}List<P> get DF=>[Zo,ao,bo];void replace(P A,P B){super.replace(A,B);if(ao==A){ao=B;}if(bo==A){bo=B;}}}class lT extends UD{lT(A):super(A);UB DB(pB A){var B=Zo.DB(A);if(B.iE){var C=A.buffer is String?A.buffer.substring(A.position,B.position):A.buffer.sublist(A.position,B.position);return B.qC(C);}else{return B;}}}class qT extends UD{qT(A):super(A);UB DB(pB B){var A=Zo.DB(B);if(A.iE){var C=new SF(A.value,B.buffer,B.position,A.position);return A.qC(C);}else{return A;}}}class IG extends P{final OE co;final String eo;IG(this.co,this.eo);UB DB(pB A){var C=A.buffer;var B=A.position;if(B<C.length&&co.test(C.codeUnitAt(B))){return A.qC(C[B],B+1);}return A.gE(eo);}String toString()=>'${super.toString()}[${eo}]';bool GC(P A){return A is IG&&super.GC(A)&&co==A.co&&eo==A.eo;}}abstract class OE{}class iT implements OE{final OE MY;iT(this.MY);bool test(int A)=>!MY.test(A);}OE hc(Iterable<JG> K){var H=new List.from(K,growable:false);H.sort((C,D){return C.start!=D.start?C.start-D.start:C.stop-D.stop;});var A=new List();for(var B in H){if(A.isEmpty){A.add(B);}else{var I=A.last;if(I.stop+1>=B.start){var L=new JG(I.start,B.stop);A[A.length-1]=L;}else{A.add(B);}}}if(A.length==1){return A[0].start==A[0].stop?new ZM(A[0].start):A[0];}else{return new uT(A.length,A.map((G)=>G.start).toList(growable:false) as List<int>,A.map((G)=>G.stop).toList(growable:false) as List<int>);}}P o(A,[String B]){return new IG(new ZM(HH(A)),B!=null?B:'"${A}" expected');}class ZM implements OE{final int value;const ZM(this.value);bool test(int A)=>identical(this.value,A);}P rI([String A]){return new IG(ic,A!=null?A:'digit expected');}class rT implements OE{const rT();bool test(int A)=>48<=A&&A<=57;}const ic=const rT();P tT(String A,[String B]){return new IG(kc.IC(A).value,B!=null?B:'[${A}] expected');}P jc(){var B=uE().map((A)=>new JG(HH(A),HH(A)));var C=uE().sF(o('-')).sF(uE()).map((A)=>new JG(HH(A[0]),HH(A[2])));var D=C.lE(B).fK().map((A)=>hc(A as Iterable<JG>));return o('^').BE().sF(D).map((A)=>A[0]==null?A[1]:new iT(A[1]));}final kc=jc();class uT implements OE{final int length;final List<int> bY;final List<int> cY;uT(this.length,this.bY,this.cY);bool test(int D){var A=0;var B=length;while(A<B){var C=A+((B-A)>>1);var G=bY[C]-D;if(G==0){return true;}else if(G<0){A=C+1;}else{B=C;}}return 0<A&&D<=cY[A-1];}}class JG implements OE{final int start;final int stop;JG(this.start,this.stop);bool test(int A)=>start<=A&&A<=stop;}P lc([String A]){return new IG(mc,A!=null?A:'whitespace expected');}class vT implements OE{const vT();bool test(int A){if(A<256){return A==0x09||A==0x0A||A==0x0B||A==0x0C||A==0x0D||A==0x20||A==0x85||A==0xA0;}else{return A==0x1680||A==0x180E||A==0x2000||A==0x2001||A==0x2002||A==0x2003||A==0x2004||A==0x2005||A==0x2006||A==0x2007||A==0x2008||A==0x2009||A==0x200A||A==0x2028||A==0x2029||A==0x202F||A==0x205F||A==0x3000||A==0xFEFF;}}}const mc=const vT();int HH(A){if(A is num){return A.round();}var B=A.toString();if(B.length!=1){throw new ArgumentError('${B} is not a character');}return B.codeUnitAt(0);}class UD extends P{P Zo;UD(this.Zo);UB DB(pB A){return Zo.DB(A);}List<P> get DF=>[Zo];void replace(P A,P B){super.replace(A,B);if(Zo==A){Zo=B;}}}class QM extends UD{final String eo;QM(A,this.eo):super(A);UB DB(pB B){var A=Zo.DB(B);if(A.nF||A.position==A.buffer.length){return A;}return A.gE(eo,A.position);}String toString()=>'${super.toString()}[${eo}]';bool GC(P A){return A is QM&&super.GC(A)&&eo==A.eo;}}class kT extends UD{kT(A):super(A);UB DB(pB B){var A=Zo.DB(B);if(A.iE){return B.qC(A.value);}else{return A;}}}class VM extends UD{final String eo;VM(A,this.eo):super(A);UB DB(pB A){var B=Zo.DB(A);if(B.nF){return A.qC(null);}else{return A.gE(eo);}}String toString()=>'${super.toString()}[${eo}]';bool GC(P A){return A is VM&&super.GC(A)&&eo==A.eo;}}class XM extends UD{final fo;XM(A,this.fo):super(A);UB DB(pB A){var B=Zo.DB(A);if(B.iE){return B;}else{return A.qC(fo);}}bool GC(P A){return A is XM&&super.GC(A)&&fo==A.fo;}}abstract class YM extends P{final List<P> go;YM(this.go);List<P> get DF=>go;void replace(P B,P C){super.replace(B,C);for(var A=0;A<go.length;A++ ){if(go[A]==B){go[A]=C;}}}}class GH extends YM{factory GH(Iterable<P> A){return new GH.hi(new List.from(A,growable:false));}GH.hi(List<P> A):super(A);UB DB(pB C){var A;for(var B=0;B<go.length;B++ ){A=go[B].DB(C);if(A.iE){return A;}}return A;}P lE(P A){return new GH(new List()..addAll(go)..add(A));}}class TF extends YM{factory TF(Iterable<P> A){return new TF.ii(new List.from(A,growable:false));}TF.ii(List<P> A):super(A);UB DB(pB G){var C=G;var D=new List(go.length);for(var A=0;A<go.length;A++ ){var B=go[A].DB(C);if(B.nF){return B;}D[A]=B.value;C=B;}return C.qC(D);}P sF(P A){return new TF(new List()..addAll(go)..add(A));}}class pB{const pB(this.buffer,this.position);final buffer;final int position;UB qC(B,[int A]){return new jT(buffer,A==null?this.position:A,B);}UB gE(String B,[int A]){return new SM(buffer,A==null?this.position:A,B);}String toString()=>'Context[${qK()}]';String qK()=>SF.oT(buffer,position);}abstract class UB extends pB{const UB(A,B):super(A,B);bool get iE=>false;bool get nF=>false;get value;String get message;}class jT extends UB{const jT(A,B,this.value):super(A,B);bool get iE=>true;final value;String get message=>null;String toString()=>'Success[${qK()}]: ${value}';}class SM extends UB{const SM(A,B,this.message):super(A,B);bool get nF=>true;get value=>throw new mT(this);final String message;String toString()=>'Failure[${qK()}]: ${message}';}class mT extends Error{final SM gE;mT(this.gE);String toString()=>'${gE.message} at ${gE.qK()}';}abstract class UM{const UM();P start();P R(Function A,[B,C,D,G,H,I]){var K=[B,C,D,G,H,I].takeWhile((L)=>L!=null).toList(growable:false);return new kD(A,K);}P bg({Function start: null,List arguments: const[] }){return ho(new kD(start!=null?start:this.start,arguments));}P ho(kD C){var H=new Map();P I(kD C){var A=H[C];if(A==null){var D=[C];A=C.resolve();while(A is kD){if(D.contains(A)){throw new StateError('Recursive references detected: ${D}');}D.add(A);A=A.resolve();}for(var X in D){H[X]=A;}}return A;}var G=[I(C)];var K=new Set.from(G);while(G.isNotEmpty){var L=G.removeLast();for(var B in L.DF){if(B is kD){var O=I(B);L.replace(B,O);B=O;}if(!K.contains(B)){K.add(B);G.add(B);}}}return H[C];}}class sT extends UD{sT(UM A):super(A.bg());}class kD extends P{final Function function;final List arguments;kD(this.function,this.arguments);P resolve()=>Function.apply(function,arguments);bool operator==(A){if(A is!kD||A.function!=function||A.arguments.length!=arguments.length){return false;}for(var B=0;B<arguments.length;B++ ){var C=arguments[B],D=A.arguments[B];if(C is P&&C is!kD&&D is P&&D is!kD){if(!C.gX(D)){return false;}}else{if(C!=D){return false;}}}return true;}int get hashCode=>function.hashCode;UB DB(pB A)=>throw new UnsupportedError('References cannot be parsed.');}abstract class P{UB DB(pB A);UB IC(A){return DB(new pB(A,0));}Iterable GF(B){var A=new List();oH().map((C)=>A.add(C)).sF(uE()).lE(uE()).FE().IC(B);return A;}Iterable Yh(B){var A=new List();map((C)=>A.add(C)).lE(uE()).FE().IC(B);return A;}P BE([A])=>new XM(this,A);P FE()=>gK(0,EH);P fK()=>gK(1,EH);P gK(int A,int B){return new hT(this,A,B);}P pK(int A)=>gK(A,A);P sF(P A)=>new TF([this,A]);P operator&(P A)=>this.sF(A);P lE(P A)=>new GH([this,A]);P operator|(P A)=>this.lE(A);P oH()=>new kT(this);P xH([String A])=>new VM(this,A);P DY([String A])=>xH(A).sF(uE()).mE(1);P gO()=>new lT(this);P LC()=>new qT(this);P trim([P A,P B]){if(A==null)A=lc();if(B==null)B=A;return new gT(this,A,B);}P end([String A='end of input expected']){return new QM(this,A);}P map(Function A)=>new NM(this,A);P mE(int A){return this.map((List B){return B[A<0?B.length+A:A];});}P hh(List<int> C){return this.map((List B){return C.map((A){return B[A<0?B.length+A:A];}).toList();});}P DI(P B,{bool includeSeparators: true,bool optionalSeparatorAtEnd: false}){var D=new TF([B,this]).FE();var H=new TF(optionalSeparatorAtEnd?[this,D,B.BE(B)]:[this,D]);return H.map((List C){var A=new List();A.add(C[0]);for(var G in C[1]){if(includeSeparators){A.add(G[0]);}A.add(G[1]);}if(includeSeparators&&optionalSeparatorAtEnd&&!identical(C[2],B)){A.add(C[2]);}return A;});}bool gX(P B,[Set<P> A]){if(A==null){A=new Set();}if(this==B||A.contains(this)){return true;}A.add(this);return runtimeType==B.runtimeType&&GC(B)&&Ih(B,A);}bool GC(P A)=>true;bool Ih(P D,Set<P> G){var B=DF,C=D.DF;if(B.length!=C.length){return false;}for(var A=0;A<B.length;A++ ){if(!B[A].gX(C[A],G)){return false;}}return true;}List<P> get DF=>const[] ;void replace(P A,P B){}}P uE([String A='input expected']){return new PM(A);}class PM extends P{final String eo;PM(this.eo);UB DB(pB A){var B=A.position;var C=A.buffer;return B<C.length?A.qC(C[B],B+1):A.gE(eo);}bool GC(P A){return A is PM&&super.GC(A)&&eo==A.eo;}}P RM(A,[String B]){return pT(1,(C)=>A.indexOf(C)>=0,B!=null?B:'any of ${A} expected');}P FH(String A,[String B]){return pT(A.length,(String C)=>A==C,B!=null?B:'${A} expected');}typedef bool nT(_0);P pT(int A,nT B,String C){return new WM(A,B,C);}class WM extends P{final int io;final nT co;final String eo;WM(this.io,this.co,this.eo);UB DB(pB A){final C=A.position;final B=C+io;if(B<=A.buffer.length){var D=A.buffer is String?A.buffer.substring(C,B):A.buffer.sublist(C,B);if(co(D)){return A.qC(D,B);}}return A.gE(eo);}String toString()=>'${super.toString()}[${eo}]';bool GC(P A){return A is WM&&super.GC(A)&&io==A.io&&co==A.co&&eo==A.eo;}}const int EH=-1;abstract class OM extends UD{final int jo;final int ko;OM(P A,this.jo,this.ko):super(A){assert(0<=jo);assert(ko==EH||jo<=ko);}String toString(){var A=ko==EH?'*':ko;return '${super.toString()}[${jo}..${A}]';}bool GC(P A){return A is OM&&super.GC(A)&&jo==A.jo&&ko==A.ko;}}class hT extends OM{hT(P A,int B,int C):super(A,B,C);UB DB(pB D){var B=D;var C=new List();while(C.length<jo){var A=Zo.DB(B);if(A.nF){return A;}C.add(A.value);B=A;}while(ko==EH||C.length<ko){var A=Zo.DB(B);if(A.nF){return B.qC(C);}C.add(A.value);B=A;}return B.qC(C);}}class SF{final value;final buffer;final int start;final int stop;const SF(this.value,this.buffer,this.start,this.stop);get input=>buffer is String?buffer.substring(start,stop):buffer.sublist(start,stop);int get length=>stop-start;int get HC=>SF.TM(buffer,start)[0];int get LB=>SF.TM(buffer,start)[1];String toString()=>'Token[${oT(buffer,start)}]: ${value}';bool operator==(A){return A is SF&&value==A.value&&start==A.start&&stop==A.stop;}int get hashCode=>value.hashCode+start.hashCode+stop.hashCode;static P fc()=>gc;static final P gc=o('\n')|(o('\r')&o('\n').BE());static List<int> TM(String G,int A){var B=1,C=0;for(var D in fc().LC().Yh(G)){if(A<D.stop){return [B,A-C+1];}B++ ;C=D.stop;}return [B,A-C+1];}static String oT(A,int B){if(A is String){var C=SF.TM(A,B);return '${C[0]}:${C[1]}';}else{return '${B}';}}}class NU extends qM implements MG{NU(String A,{Duration pollingDelay}):super(A,(){return new OU(A,pollingDelay!=null?pollingDelay:new Duration(seconds:1));});}class OU implements MG,rM{final String path;Stream<dC> get TK=>lo.stream;final lo=new StreamController<dC>.broadcast();Future get wO=>mo.future;final mo=new Completer();Timer no;DateTime oo;OU(this.path,Duration A){no=new Timer.periodic(A,(B)=>po());po();}Future po()async{var B=await new File(path).exists();if(lo.isClosed)return;if(oo!=null&&!B){lo.add(new dC(mD.QU,path));close();return;}var A;try {try {A=await Ed(path);}finally {if(lo.isClosed)return;}}on FileSystemException catch (C,D){lo.addError(C,D);close();return;}if(oo==A)return;if(oo==null){oo=A;mo.complete();}else{oo=A;lo.add(new dC(mD.wI,path));}}void close(){no.cancel();lo.close();}}class aT extends NE{aT();final name='posix';final OD='/';final zB=const['/'];final WY=new RegExp(r'/');final CY=new RegExp(r'[^/]$');final TY=new RegExp(r'^/');final RY=null;bool PK(String A)=>A.contains('/');bool p(int A)=>A==DD;bool hG(String A)=>A.isNotEmpty&&!p(A.codeUnitAt(A.length-1));int ND(String A,{bool withDrive: false}){if(A.isNotEmpty&&p(A.codeUnitAt(0)))return 1;return 0;}bool DC(String A)=>false;String AI(Uri A){if(A.scheme==''||A.scheme=='file'){return Uri.decodeComponent(A.path);}throw new ArgumentError("Uri ${A} must have scheme 'file:'.");}}class uP<V> extends Object with ListMixin<V> implements Queue<V>{static const int vP=8;List<V> qo;int ro;int so;uP([int A]):ro=0,so=0{if(A==null||A<vP){A=vP;}else if(!wP(A)){A=xP(A);}assert(wP(A));qo=new List<V>(A);}void add(V A){to(A);}void addAll(Iterable<V> G){if(G is List){var B=G;int A=B.length;int C=this.length;if(C+A>=qo.length){uo(C+A);qo.setRange(C,C+A,B,0);so+= A;}else{int D=qo.length-so;if(A<D){qo.setRange(so,so+A,B,0);so+= A;}else{int H=A-D;qo.setRange(so,so+D,B,0);qo.setRange(0,H,B,D);so=H;}}}else{for(V I in G)to(I);}}String toString()=>IterableBase.iterableToFullString(this,"{","}");void addLast(V A){to(A);}void addFirst(V A){ro=(ro-1)&(qo.length-1);qo[ro]=A;if(ro==so)vo();}V removeFirst(){if(ro==so)throw new StateError("No element");V A=qo[ro];qo[ro]=null;ro=(ro+1)&(qo.length-1);return A;}V removeLast(){if(ro==so)throw new StateError("No element");so=(so-1)&(qo.length-1);V A=qo[so];qo[so]=null;return A;}int get length=>(so-ro)&(qo.length-1);void set length(int A){if(A<0)throw new RangeError("Length ${A} may not be negative.");int C=A-length;if(C>=0){if(qo.length<=A){uo(A);}so=(so+C)&(qo.length-1);return;}int B=so+C;if(B>=0){qo.fillRange(B,so,null);}else{B+= qo.length;qo.fillRange(0,so,null);qo.fillRange(B,qo.length,null);}so=B;}V operator[](int A){if(A<0||A>=length){throw new RangeError("Index ${A} must be in the range [0..${length}).");}return qo[(ro+A)&(qo.length-1)];}void operator[]=(int A,V B){if(A<0||A>=length){throw new RangeError("Index ${A} must be in the range [0..${length}).");}qo[(ro+A)&(qo.length-1)]=B;}static bool wP(int A)=>(A&(A-1))==0;static int xP(int A){assert(A>0);A=(A<<1)-1;for(;;){int B=A&(A-1);if(B==0)return A;A=B;}}void to(V A){qo[so]=A;so=(so+1)&(qo.length-1);if(ro==so)vo();}void vo(){List<V> A=new List<V>(qo.length*2);int B=qo.length-ro;A.setRange(0,B,qo,ro);A.setRange(B,B+ro,qo,0);ro=0;so=qo.length;qo=A;}int wo(List<V> A){assert(A.length>=length);if(ro<=so){int C=so-ro;A.setRange(0,C,qo,ro);return C;}else{int B=qo.length-ro;A.setRange(0,B,qo,ro);A.setRange(B,B+so,qo,0);return so+B;}}void uo(int A){assert(A>=length);A+= A>>1;int C=xP(A);List<V> B=new List<V>(C);so=wo(B);qo=B;ro=0;}}abstract class KG<xB,OB> implements Map<xB,OB>{factory KG()=>new sI();}class sI<xB,OB> implements KG<xB,OB>{final Map<xB,OB> xo;final Map<OB,xB> yo;KG<OB,xB> zo;sI():this.ji(new HashMap(),new HashMap());sI.ji(this.xo,this.yo);OB operator[](Object A)=>xo[A];void operator[]=(xB A,OB B){Ap(A,B,false);}void replace(xB A,OB B){Ap(A,B,true);}void addAll(Map<xB,OB> A)=>A.forEach((B,C)=>Ap(B,C,false));bool containsKey(Object A)=>xo.containsKey(A);bool containsValue(Object A)=>yo.containsKey(A);void forEach(void A(xB key,OB value))=>xo.forEach(A);bool get isEmpty=>xo.isEmpty;bool get isNotEmpty=>xo.isNotEmpty;Iterable<xB> get keys=>xo.keys;int get length=>xo.length;Iterable<OB> get values=>yo.keys;KG<OB,xB> get Qh{if(zo==null){zo=new sI.ji(yo,xo);}return zo;}OB putIfAbsent(xB A,OB C()){var B=xo[A];if(B!=null)return B;if(!xo.containsKey(A))return Ap(A,C(),false);return null;}OB remove(Object A){yo.remove(xo[A]);return xo.remove(A);}void clear(){xo.clear();yo.clear();}OB Ap(xB B,OB A,bool D){if(B==null)throw new ArgumentError("null key");if(A==null)throw new ArgumentError("null value");var C=xo[B];if(C==A)return A;if(yo.containsKey(A)){if(!D)throw new ArgumentError("Mapping for ${A} exists");xo.remove(yo[A]);}yo.remove(C);xo[B]=A;yo[A]=B;return A;}}Iterable nc(Iterable<Iterable> A)=>A.expand((B)=>B);typedef rM Cd();abstract class qM implements sM{final Cd Bp;final String path;Stream<dC> get TK=>Cp.stream;StreamController<dC> Cp;Future get wO=>Dp.future;var Dp=new Completer();qM(this.path,this.Bp){var A;var B;Cp=new StreamController<dC>.broadcast(onListen:(){A=Bp();B=A.TK.listen(Cp.add,onError:Cp.addError,onDone:Cp.close);A.wO.then(Dp.complete);},onCancel:(){B.cancel();A.close();Dp=new Completer();},sync:true);}}abstract class rM implements sM{}final GQ=new HQ.Ui();class HQ extends QD{final int blockSize=16*OF;HQ.Ui();ByteConversionSink startChunkedConversion(Sink<TB> A)=>new ByteConversionSink.from(new IQ(A));}class IQ extends MI{final W=new Uint32List(5);final Uint32List Ep;IQ(Sink<TB> A):Ep=new Uint32List(80),super(A,16){W[0]=0x67452301;W[1]=0xEFCDAB89;W[2]=0x98BADCFE;W[3]=0x10325476;W[4]=0xC3D2E1F0;}void tK(Uint32List K){assert(K.length==16);var H=W[0];var B=W[1];var D=W[2];var G=W[3];var I=W[4];for(var A=0;A<80;A++ ){if(A<16){Ep[A]=K[A];}else{Ep[A]=NI(Ep[A-3]^Ep[A-8]^Ep[A-14]^Ep[A-16],1);}var C=l(l(NI(H,5),I),Ep[A]);if(A<20){C=l(l(C,(B&D)|(~B&G)),0x5A827999);}else if(A<40){C=l(l(C,(B^D^G)),0x6ED9EBA1);}else if(A<60){C=l(l(C,(B&D)|(B&G)|(D&G)),0x8F1BBCDC);}else{C=l(l(C,B^D^G),0xCA62C1D6);}I=G;G=D;D=NI(B,30);B=H;H=C&gD;}W[0]=l(H,W[0]);W[1]=l(B,W[1]);W[2]=l(D,W[2]);W[3]=l(G,W[3]);W[4]=l(I,W[4]);}}final mZ=new JQ.Vi();class JQ extends QD{final int blockSize=16*OF;JQ.Vi();ByteConversionSink startChunkedConversion(Sink<TB> A)=>new ByteConversionSink.from(new KQ(A));}const List<int> nZ=const[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];class KQ extends MI{final W=new Uint32List(8);final Uint32List Fp;KQ(Sink<TB> A):Fp=new Uint32List(64),super(A,16){W[0]=0x6a09e667;W[1]=0xbb67ae85;W[2]=0x3c6ef372;W[3]=0xa54ff53a;W[4]=0x510e527f;W[5]=0x9b05688c;W[6]=0x1f83d9ab;W[7]=0x5be0cd19;}int Gp(int A,int B)=>(B>>A)|((B<<(32-A))&gD);int Hp(int A,int B,int C)=>(A&B)^((~A&gD)&C);int Ip(int A,int B,int C)=>(A&B)^(A&C)^(B&C);int Jp(int A)=>Gp(2,A)^Gp(13,A)^Gp(22,A);int Kp(int A)=>Gp(6,A)^Gp(11,A)^Gp(25,A);int Lp(int A)=>Gp(7,A)^Gp(18,A)^(A>>3);int Mp(int A)=>Gp(17,A)^Gp(19,A)^(A>>10);void tK(Uint32List O){assert(O.length==16);for(var A=0;A<16;A++ ){Fp[A]=O[A];}for(var A=16;A<64;A++ ){Fp[A]=l(l(Mp(Fp[A-2]),Fp[A-7]),l(Lp(Fp[A-15]),Fp[A-16]));}var B=W[0];var D=W[1];var G=W[2];var K=W[3];var C=W[4];var H=W[5];var I=W[6];var L=W[7];for(var A=0;A<64;A++ ){var X=l(l(L,Kp(C)),l(Hp(C,H,I),l(nZ[A],Fp[A])));var c=l(Jp(B),Ip(B,D,G));L=I;I=H;H=C;C=l(K,X);K=G;G=D;D=B;B=l(X,c);}W[0]=l(B,W[0]);W[1]=l(D,W[1]);W[2]=l(G,W[2]);W[3]=l(K,W[3]);W[4]=l(C,W[4]);W[5]=l(H,W[5]);W[6]=l(I,W[6]);W[7]=l(L,W[7]);}}abstract class eB implements Comparable<eB>{factory eB(jC A,jC B,String C)=>new bM(A,B,C);}class bM extends yT{final jC start;final jC end;final String tF;bM(this.start,this.end,this.tF){if(end.AB!=start.AB){throw new ArgumentError("Source URLs \"${start.AB}\" and " " \"${end.AB}\" don't match.");}else if(end.offset<start.offset){throw new ArgumentError('End ${end} must come after start ${start}.');}else if(tF.length!=start.zW(end)){throw new ArgumentError('Text "${tF}" must be ${start.zW(end)} ' 'characters long.');}}}class xT implements Exception{String get message=>Np;final String Np;eB get N=>Op;final eB Op;xT(this.Np,this.Op);String toString({color}){if(N==null)return message;return "Error on "+N.message(message,color:color);}}class cM extends xT implements FormatException{dynamic get source=>Pp;final Pp;int get offset=>N==null?null:N.start.offset;cM(String A,eB B,[this.Pp]):super(A,B);}abstract class yT implements eB{Uri get AB=>start.AB;int get length=>end.offset-start.offset;int compareTo(eB A){var B=start.compareTo(A.start);return B==0?end.compareTo(A.end):B;}String message(String C,{color}){var A=new StringBuffer();A.write('line ${start.HC+1}, column ${start.LB+1}');if(AB!=null)A.write(' of ${Zc(AB)}');A.write(': ${C}');var B=this.Kh(color:color);if(!B.isEmpty){A.writeln();A.write(B);}return A.toString();}String Kh({color}){if(color==true)color=oc;if(color==false)color=null;var C=start.LB;var A=new StringBuffer();String B;if(this is dM){var D=(this as dM).context;var G=rc(D,tF,C);if(G!=null&&G>0){A.write(D.substring(0,G));D=D.substring(G);}var K=D.indexOf('\n');B=K==-1?D:D.substring(0,K+1);C=wF.min(C,B.length);}else if(length==0){return "";}else{B=tF.split("\n").first;C=0;}var H=wF.min(C+end.offset-start.offset,B.length);if(color!=null){A.write(B.substring(0,C));A.write(color);A.write(B.substring(C,H));A.write(wT);A.write(B.substring(H));}else{A.write(B);}if(!B.endsWith('\n'))A.write('\n');for(var I=0;I<C;I++ ){if(B.codeUnitAt(I)==oP){A.writeCharCode(oP);}else{A.writeCharCode(VZ);}}if(color!=null)A.write(color);A.write('^'*wF.max(H-C,1));if(color!=null)A.write(wT);return A.toString();}bool operator==(A)=>A is eB&&start==A.start&&end==A.end;int get hashCode=>start.hashCode+(31*end.hashCode);String toString()=>'<${runtimeType}: from ${start} to ${end} "${tF}">';}class LG extends fM implements sc{final UF Qp;int get HC=>Qp.XK(position);int get LB=>Qp.hO(position);wE get state=>new BU(this,position);RB Rp;vE get location=>Qp.location(position);RB get SC=>location.JC();LG(String A,{sourceUrl,int position}):Qp=new UF(A,url:sourceUrl),super(A,sourceUrl:sourceUrl,position:position);factory LG.Gj(String string,{sourceUrl,int position})=eM;RB KC(wE B,[wE A]){var C=A==null?position:A.position;return Qp.N(B.position,C);}bool GF(Pattern A){if(!super.GF(A)){Rp=null;return false;}Rp=Qp.N(position,eG.end);return true;}void error(String A,{Match match,int position,int length}){CU(string,match,position,length);if(match==null&&position==null&&length==null)match=eG;if(position==null){position=match==null?this.position:match.start;}if(length==null)length=match==null?1:match.end-match.start;var B=Qp.N(position,position+length);throw new tI(A,B,string);}}class BU implements wE{final LG Sp;final int position;int get HC=>Sp.Qp.XK(position);int get LB=>Sp.Qp.hO(position);BU(this.Sp,this.position);}class dM extends bM{}typedef DateTime Dd(String _0);Dd PU;Future<DateTime> Ed(String A){if(PU!=null){return new Future.value(PU(A));}return FileStat.stat(A).then((B)=>B.modified);}final tc=new RegExp("/").pattern=="\\/";class fM{final Uri AB;final String string;int get position=>Tp;set position(int A){if(A<0||A>string.length){throw new ArgumentError("Invalid position ${A}");}Tp=A;}int Tp=0;Match get eG=>Up;Match Up;bool get hE=>position==string.length;fM(this.string,{sourceUrl,int position}):AB=sourceUrl is String?Uri.parse(sourceUrl):sourceUrl{if(position!=null)this.position=position;}int f(){if(hE)Vp("more input");return string.codeUnitAt(Tp++ );}int k([int A]){if(A==null)A=0;var B=position+A;if(B<0||B>=string.length)return null;return string.codeUnitAt(B);}bool kB(Pattern B){var A=GF(B);if(A)Tp=Up.end;return A;}void UK(Pattern A,{String name}){if(kB(A))return;if(name==null){if(A is RegExp){var B=A.pattern;if(!tc)B=B.replaceAll("/","\\/");name="/${B}/";}else{name=A.toString().replaceAll("\\","\\\\").replaceAll('"','\\"');name='"${name}"';}}Vp(name);}bool GF(Pattern A){Up=A.matchAsPrefix(string,position);return Up!=null;}String substring(int B,[int A]){if(A==null)A=position;return string.substring(B,A);}void error(String A,{Match match,int position,int length}){CU(string,match,position,length);if(match==null&&position==null&&length==null)match=eG;if(position==null){position=match==null?this.position:match.start;}if(length==null)length=match==null?1:match.end-match.start;var B=new UF(string,url:AB);var C=B.N(position,position+length);throw new tI(A,C,string);}void Vp(String A){error("expected ${A}.",position:this.position,length:0);}}abstract class gB{static final gB cc=new aT();static final gB qI=new cT();static final gB HG=new bT();static final gB LM=dc();static gB dc(){if(Uri.base.scheme!='file')return gB.HG;if(!Uri.base.path.endsWith('/'))return gB.HG;if(new Uri(path:'a/b').toFilePath()=='a\\b')return gB.qI;return gB.cc;}String get name;TD get context=>new TD(style:this);String get OD;String XX(String A);String AI(Uri A);String toString()=>name;}lD IH(dynamic A)=>new lD(A);class lD{dynamic value;lD(this.value);int get VC{if(value is int){return value;}return 0;}String get bB{if(value is String){return value;}return "";}lD operator[](dynamic A){try {value=value[A];}catch (B){value=null;}return this;}lD elementAt(int B,[dynamic A]){try {value=value[B];}catch (C){value=null;}if(value==null&&A!=null){value=A;}return this;}lD last(){if(value is Iterable){value=value.last;}else{value=null;}return this;}lD fh([int A=0]){if(value==null){value=A;}else{value=int.parse(value.toString(),onError:(B)=>A);}return this;}lD replaceAll(String A,String B){value=value.toString().replaceAll(A,B);return this;}lD split(String A){value=value.toString().split(A);return this;}lD trim(){value=value.toString().trim();return this;}}abstract class EU{static final int iM=vc();static final int uc=wc();static final Map<String,String> uI=Platform.environment;static final String FU=Platform.operatingSystem;static dynamic GU(){throw new UnsupportedError("Unsupported operating system.");}static int vc(){switch (FU){case "android":case "linux":if(uc==64){return 64;}var A=<String>[] ;var B=hM("/etc/ld.so.conf");if(B!=null){DU(B,A,new Set<String>());}A.add("/lib");A.add("/lib64");for(var B in A){var G=gI.yS(QB(B,"libc.so.*"));for(var C in G){C=hM(C);if(C==null){continue;}var D=new File(C);if(D.existsSync()){var H=IH(gM("file",["-b",D.path])).trim().bB;if(H.startsWith("ELF 64-bit")){return 64;}}}}return 32;case "macos":if(IH(gM("uname",["-m"])).trim().bB=="x86_64"){return 64;}return 32;case "windows":var I=IH(uI["PROCESSOR_ARCHITEW6432"]).bB;if(!I.isEmpty){return 64;}switch (uI["PROCESSOR_ARCHITECTURE"]){case "AMD64":case "IA64":return 64;}return 32;default:GU();}return null;}static int wc(){switch (FU){case "android":case "linux":return IH(gM("getconf",["LONG_BIT"])).trim().fh().VC;case "macos":if(Platform.version.contains("macos_ia32")){return 32;}else if(Platform.version.contains("macos_x64")){return 64;}else{return iM;}break;case "windows":var A=IH(uI["PROCESSOR_ARCHITEW6432"]).bB;if(!A.isEmpty){return 32;}switch (uI["PROCESSOR_ARCHITECTURE"]){case "AMD64":case "IA64":return 64;}return 32;default:GU();}return null;}}String gM(String B,List<String> C,{bool runInShell: false}){try {var A=Process.runSync(B,C,runInShell:runInShell);if(A.exitCode==0){return A.stdout.toString();}}catch (D){}return null;}String hM(String A){while(true){if(!gI.Ac(A,"link")){break;}try {A=new Link(A).resolveSymbolicLinksSync();}catch (B){return null;}}return A;}void DU(String B,List<String> D,Set<String> C){B=hM(B);if(B==null){return;}var G=new File(B);if(!G.existsSync()){return;}var K=gI.yb(B);for(var A in G.readAsLinesSync()){A=A.trim();var H=A.indexOf("#");if(H!=-1){A=A.substring(0,H);}if(A.isEmpty){continue;}var I=false;if(A.startsWith("include ")){A=A.substring(8);I=true;}if(Xc(A)){A=QB(K,A);}if(I){for(var B in gI.yS(A)){if(!C.contains(B)){C.add(B);DU(B,D,C);}}}else{D.add(A);}}}class HU extends sT{HU():super(new Bd());}class xc{String encode(Map<String,dynamic> B){var A=new zc();A.dO(B,name:[] );return A.toString();}}abstract class yc{}typedef void jM<OB>(OB _0);class zc{static final RegExp Ad=new RegExp(r'^[A-Za-z0-9_-]+$');final StringBuffer Wp=new StringBuffer();void kO(){if(Wp.isNotEmpty)Wp.writeln();}void Oh(List<String> B,{bool array: false}){if(B.isNotEmpty){kO();kO();Wp.write(array?'[[':'[');for(int A=0;A<B.length;A++ ){if(A!=0)Wp.write('.');MX(B[A]);}Wp.write(array?']]':']');}}NP(A){while(A is yc)A=A.Fj();return A;}void dO(Map<String,dynamic> H,{List<String> name,bool array: false}){var C={};var D={};H.forEach((B,A){A=NP(A);if(A is Map){D[B]=A;return;}if(A is Iterable&&A.length>0){A=A.map(NP);if(A.every((G)=>G is Map)){D[B]=A;return;}}C[B]=A;});if(array||C.isNotEmpty){Oh(name,array:array);C.forEach(Ph);}D.forEach((B,A){name.add(B);if(A is Map){dO(A,name:name);}else if(A is Iterable){A.forEach((G){dO(G,name:name,array:true);});}name.removeLast();});}void Ph(String A,B){kO();MX(A);Wp.write(' = ');NX(B);}void MX(String A){if(Ad.hasMatch(A)){Wp.write(A);}else{LX(A);}}void NX(A){A=NP(A);jM B=Gh(A);if(B==null)throw new mM(A);B(A);}jM Gh(A){if(A is num)return qg;if(A is bool)return lg;if(A is DateTime)return mg;if(A is String)return rg;if(A is Iterable)return kg;return null;}void qg(num A){Wp.write('${A}');}void lg(bool A){Wp.write(A?'true':'false');}void mg(DateTime A){Wp.write(A.toIso8601String());}Type Ci(Iterable B){if(B.isEmpty)return null;if(identical(1,1.0)&&B.every((A)=>A is num)&&B.any((A)=>A is int)&&B.any((A)=>A is!int)){return num;}return B.map((A)=>A.runtimeType).reduce((C,D){if(C!=D)throw new nM(B);return C;});}void kg(Iterable B){var D=Ci(B);Wp.write('[');for(var A=0;A<B.length;A++ ){var C=B.elementAt(A);if(A!=0)Wp.write(', ');NX(C);if(D==num&&C is int)Wp.write('.0');}Wp.write(']');}jM<String> Fh(String A){var C=[ED.VD['"'],ED.VD['\\']];bool B(String D)=>ED.VD.values.where((G)=>!C.contains(G)).any(D.codeUnits.contains);if(A.contains('\n')||A.contains('\r')){if(A.split(new RegExp('\n|\r')).any(B)){return og;}return pg;}if(A.contains("'")||B(A)){return LX;}return ng;}void rg(String A){var B=Fh(A);B(A);}void Xp(String A,{String quotes,Iterable<int> esc: const[] ,bool multiline: false}){if(esc.isNotEmpty){A=A.codeUnits.map((int B){if(esc.contains(B)){return '\\${ED.VD.Qh[B]}';}return new String.fromCharCode(B);}).join();}if(multiline){if(quotes=='"""')A=A.replaceAll('"""',r'\"\"\"');}else if(A.contains('\n')||A.contains('\r')){throw new vI('Newlines are only allowed in multi-line strings!');}if(!esc.contains(quotes.codeUnitAt(0))&&A.contains(quotes)){throw new vI('"${quotes}" are prohibited in non-basic strings.');}Wp.write(quotes);if(multiline)Wp.writeln();Wp.write(A);Wp.write(quotes);}void LX(String A)=>Xp(A,quotes:'"',esc:ED.VD.values);void og(String B)=>Xp(B,quotes:'"""',esc:ED.VD.values.where((A)=>A!=ED.VD['"']&&A!=ED.VD['n']&&A!=ED.VD['r']),multiline:true);void ng(String A)=>Xp(A,quotes:"'");void pg(String A)=>Xp(A,quotes:"'''",multiline:true);String toString()=>Wp.toString();}class kM{final String tH;kM(this.tH);bool operator==(A)=>A is kM&&A.tH==tH;int get hashCode=>tH.hashCode;String toString()=>'The escape sequence "${tH}" is invalid!';}class vI{final String vH;vI(this.vH);bool operator==(A)=>A is vI&&A.vH==vH;int get hashCode=>vH.hashCode;String toString()=>vH;}class JH{final String name;JH(this.name);bool operator==(A)=>A is JH&&A.name==name;int get hashCode=>name.hashCode;String toString()=>'Cannot redefine "${name}"!';}class lM{final String name;lM(this.name);bool operator==(A)=>A is lM&&A.name==name;int get hashCode=>name.hashCode;String toString()=>'Cannot define table "${name}"! Parent must be a table!';}class mM{final value;mM(this.value);bool operator==(A)=>A is mM&&A.value==value;int get hashCode=>value.hashCode;String toString()=>'"${value}" cannot be encoded as a TOMl value!';}class nM{final Iterable d;nM(this.d);bool operator==(A)=>A is nM&&A.d==d;int get hashCode=>d.hashCode;String toString()=>'The items of "${d}" must all be of the same type!';}class ED extends UM{static final KG<String,int> VD=new KG()..addAll({'b':0x08,'t':0x09,'n':0x0A,'f':0x0C,'r':0x0D,'"':0x22,r'\':0x5C});start()=>R(bO).end();LC(A,[bool C=false,bool B]){if(B==null)B=C;if(A is Function)A=R(A);var D=R(EF,C);var G=R(EF,B);return A.gO().trim(D,G);}EF([bool A=false])=>A?R(EF)|R(wH):R(PP)|R(fg);PP()=>o(' ')|o('\t');wH()=>o('\n')|o('\r')&o('\n');fg()=>o('#')&R(wH).DY().FE();value()=>R(QK)|R(VK)|R(ZK)|R(KK)|R(eY)|R(d)|R(YK);P Yp({P quotes,P esc,bool multiline: false}){var A=quotes;if(multiline)A=(A&R(CX).BE()).mE(0);var C=quotes;if(!multiline)C|= R(wH);var B=C.DY();if(esc!=null)B=esc|B;return (A&B.FE()&quotes).trim(R(EF)).mE(1).map((List D)=>D.join());}eY()=>R(ah)|R(kW)|R(ch)|R(Vh);kW()=>Yp(quotes:o('"'),esc:R(SK));SK()=>o('\\')&(R(MP)|R(DP));MP()=>o('u')&R(aX).pK(4).gO()|o('U')&R(aX).pK(8).gO();DP()=>uE();aX()=>tT('0-9a-fA-F');ah()=>Yp(quotes:FH('"""'),esc:R(bh),multiline:true);bh()=>R(QP)|R(SK);QP()=>o('\\')&R(CX).fK()&R(PP).FE();CX()=>R(PP).FE()&R(wH);Vh()=>Yp(quotes:FH("'"));ch()=>Yp(quotes:FH("'''"),multiline:true);ZK()=>R(LC,Zp);Zp()=>RM('+-').BE()&(o('0')|R(wW));wW()=>rI().fK().DI(o('_'));VK()=>R(LC,ap);ap()=>R(Zp)&(R(ug)&R(OX).BE()|R(OX));ug()=>o('.')&R(wW);OX()=>RM('eE')&R(Zp);KK()=>R(LC,bp);bp()=>FH('true')|FH('false');QK()=>R(LC,cp);cp()=>R(xg)&o('T')&R(yg);xg()=>R(hg)&o('-')&R(kF)&o('-')&R(kF);yg()=>R(gh)&R(xh);gh()=>R(kF)&o(':')&R(kF)&o(':')&R(kF)&(o('.')&rI().gK(1,6)).BE();xh()=>o('Z')|R(wh);wh()=>RM('+-')&R(kF)&o(':')&R(kF);kF()=>rI().pK(2);hg()=>rI().pK(4);d()=>fE(QK)|fE(VK)|fE(ZK)|fE(KK)|fE(eY)|fE(d)|fE(YK);fE(A)=>R(LC,o('['),false,true)&R(A).DI(R(LC,o(','),true),optionalSeparatorAtEnd:true,includeSeparators:false).BE([] )&R(LC,o(']'),true,false);IP()=>R(nK).trim(R(EF,true))&R(mO);nK()=>o('[')&R(vh)&o(']');JP()=>R(KP).trim(R(EF,true))&R(mO);KP()=>o('[')&R(nK)&o(']');YK()=>R(LC,o('{'))&R(bK).DI(LC(o(',')),optionalSeparatorAtEnd:false,includeSeparators:false).BE([] )&R(LC,o('}'));key()=>R(LC,ag)|R(lh);ag()=>tT('A-Za-z0-9_-').fK();lh()=>R(kW);vh()=>R(key).DI(o('.'),includeSeparators:false);bK()=>R(key)&o('=')&R(value);mO()=>R(bK).DI(R(wH)&R(EF,true).FE(),includeSeparators:false,optionalSeparatorAtEnd:true).BE([] );bO()=>R(EF,true).FE()&R(mO)&(R(IP)|R(JP)).FE();}class Bd extends ED{SK()=>super.SK().mE(1);DP()=>super.DP().map((String A){if(ED.VD.containsKey(A)){return new String.fromCharCode(ED.VD[A]);}throw new kM('\\${A}');});MP()=>super.MP().mE(1).map((A)=>new String.fromCharCode(int.parse(A,radix:16)));QP()=>super.QP().map((A)=>'');ZK()=>super.ZK().map((A)=>int.parse(A.replaceAll('_','')));VK()=>super.VK().map((A)=>double.parse(A.replaceAll('_','')));KK()=>super.KK().map((A)=>A=='true');QK()=>super.QK().map(DateTime.parse);fE(A)=>super.fE(A).mE(1);IP()=>super.IP().map((List A)=>{'type':'table','parent':A[0].sublist(0,A[0].length-1),'name':A[0].last,'pairs':A[1]});nK()=>super.nK().mE(1);JP()=>super.JP().map((List A)=>{'type':'table-array','parent':A[0].sublist(0,A[0].length-1),'name':A[0].last,'pairs':A[1]});KP()=>super.KP().mE(1);YK()=>super.YK().mE(1).map((List C){var A={};C.forEach((Map B){A[B['key']]=B['value'];});return A;});bK()=>super.bK().hh([0,2]).map((List A)=>{'key':A[0],'value':A[1]});bO()=>super.bO().map((List c){var I={};var q=new Set();void K(String A){if(q.contains(A))throw new JH(A);q.add(A);}Function KB(Map AC,[String WC])=>(Map G){var A=WC==null?G['key']:'${WC}.${G['key']}';K(A);if(AC.containsKey(G['key']))throw new JH(A);AC[G['key']]=G['value'];};c[1].forEach(KB(I));c[2].forEach((Map C){var B=I;var A=[] ;C['parent'].forEach((String H){B=B.putIfAbsent(H,()=>{});if(B is List){H='${H}[${B.length-1}]';B=B.last;}A.add(H);if(B is!Map)throw new lM(A.join('.'));});A.add(C['name']);A=A.join('.');var L;if(C['type']=='table-array'){var O=B.putIfAbsent(C['name'],(){K(A);return [] ;});if(O is Map)throw new JH(A);var aC=O.length;O.add(L={});A='${A}[${aC}]';}else{L=B.putIfAbsent(C['name'],()=>{});}K(A);C['pairs'].forEach(KB(L,A));});X(D){if(D is Map){return new UnmodifiableMapView(new Map.fromIterables(D.keys,D.values.map(X)));}if(D is List){return new UnmodifiableListView(D.map(X));}return D;}return X(I);});}abstract class oM<V> extends ListBase<V>{static const int IU=8;List<V> dp;TypedData get ep=>dp as TypedData;int fp;oM(List<V> A):this.dp=A,this.fp=A.length;int get length=>fp;V operator[](int A){if(A>=length)throw new RangeError.index(A,this);return dp[A];}void operator[]=(int A,V B){if(A>=length)throw new RangeError.index(A,this);dp[A]=B;}void set length(int A){if(A<fp){V D=gp;for(int C=A;C<fp;C++ ){dp[C]=D;}}else if(A>dp.length){List<V> B;if(dp.length==0){B=hp(A);}else{B=ip(A);}B.setRange(0,fp,dp);dp=B;}fp=A;}void jp(V A){if(fp==dp.length)kp(fp);dp[fp++ ]=A;}void add(V A){jp(A);}void addAll(Iterable<V> C,[int A=0,int B]){RangeError.checkNotNegative(A,"start");if(B!=null&&A>B){throw new RangeError.range(B,A,null,"end");}lp(C,A,B);}void insertAll(int D,Iterable<V> G,[int B=0,int A]){RangeError.checkValidIndex(D,this,"index",fp+1);RangeError.checkNotNegative(B,"start");if(A!=null){if(B>A){throw new RangeError.range(A,B,null,"end");}if(B==A)return;}if(D==fp){lp(G,B,A);return;}if(A==null&&G is List){A=G.length;}if(A!=null){mp(D,G,B,A);return;}var C=fp;var H=B;for(var I in G){if(H>0){H-- ;continue;}if(C==dp.length){kp(C);}dp[C++ ]=I;}if(H>0){throw new StateError("Too few elements");}if(A!=null&&C<A){throw new RangeError.range(A,B,C,"end");}pM(dp,D,fp);pM(dp,fp,C);pM(dp,D,C);fp=C;return;}static void pM(List B,int C,int A){A-- ;while(C<A){var D=B[C];var G=B[A];B[A]=D;B[C]=G;C++ ;A-- ;}}void lp(Iterable<V> A,[int B=0,int C]){if(A is List)C??= A.length;if(C!=null){mp(fp,A,B,C);return;}var D=0;for(var G in A){if(D>=B)add(G);D++ ;}if(D<B)throw new StateError("Too few elements");}void mp(int B,Iterable<V> A,int G,int C){if(A is List){C??= A.length;if(G>A.length||C>A.length){throw new StateError("Too few elements");}}else{assert(C!=null);}var D=C-G;var H=fp+D;np(H);dp.setRange(B+D,fp+D,dp,B);dp.setRange(B,B+D,A,G);fp=H;}void insert(int A,V C){if(A<0||A>fp){throw new RangeError.range(A,0,fp);}if(fp<dp.length){dp.setRange(A+1,fp+1,dp,A);dp[A]=C;fp++ ;return;}List<V> B=ip(null);B.setRange(0,A,dp);B.setRange(A+1,fp+1,dp,A);B[A]=C;fp++ ;dp=B;}void np(int A){if(A<=dp.length)return;var B=ip(A);B.setRange(0,fp,dp);dp=B;}List<V> ip(int B){int A=dp.length*2;if(B!=null&&A<B){A=B;}else if(A<IU){A=IU;}return hp(A);}void kp(int A){dp=ip(null)..setRange(0,A,dp);}void setRange(int B,int A,Iterable<V> C,[int D=0]){if(A>fp)throw new RangeError.range(A,0,fp);op(B,A,C,D);}void op(int B,int C,Iterable<V> A,int D){if(A is oM<V>){dp.setRange(B,C,A.dp,D);}else{dp.setRange(B,C,A,D);}}int get elementSizeInBytes=>ep.elementSizeInBytes;int get lengthInBytes=>fp*ep.elementSizeInBytes;int get offsetInBytes=>ep.offsetInBytes;ByteBuffer get buffer=>ep.buffer;V get gp;List<V> hp(int A);}abstract class JU extends oM<int>{JU(List<int> A):super(A);int get gp=>0;}class KU extends JU{KU([int A=0]):super(new Uint8List(A));Uint8List hp(int A)=>new Uint8List(A);}abstract class eZ<xB,OB> implements Map<xB,OB>{static oG(){throw new UnsupportedError("Cannot modify an unmodifiable Map");}void operator[]=(xB A,OB B)=>oG();OB putIfAbsent(xB A,OB B())=>oG();void addAll(Map<xB,OB> A)=>oG();OB remove(Object A)=>oG();void clear()=>oG();}class bT extends NE{bT();final name='url';final OD='/';final zB=const['/'];final WY=new RegExp(r'/');final CY=new RegExp(r"(^[a-zA-Z][-+.a-zA-Z\d]*://|[^/])$");final TY=new RegExp(r"[a-zA-Z][-+.a-zA-Z\d]*://[^/]*");final RY=new RegExp(r"^/");bool PK(String A)=>A.contains('/');bool p(int A)=>A==DD;bool hG(String A){if(A.isEmpty)return false;if(!p(A.codeUnitAt(A.length-1)))return true;return A.endsWith("://")&&ND(A)==A.length;}int ND(String A,{bool withDrive: false}){if(A.isEmpty)return 0;if(p(A.codeUnitAt(0)))return 1;for(var C=0;C<A.length;C++ ){var D=A.codeUnitAt(C);if(p(D))return 0;if(D==HM){if(C==0)return 0;if(A.startsWith('//',C+1))C+= 3;var B=A.indexOf('/',C);if(B<=0)return A.length;if(!withDrive||A.length<B+3)return B;if(!A.startsWith('file://'))return B;if(!eT(A,B+1))return B;return A.length==B+3?B+3:B+4;}}return 0;}bool DC(String A)=>A.isNotEmpty&&p(A.codeUnitAt(0));String AI(Uri A)=>A.toString();}const gD=0xFFFFFFFF;const oZ=8;const OF=4;int l(int A,int B)=>(A+B)&gD;int NI(int A,int C){var B=C&31;return ((A<<B)&gD)|((A&gD)>>(32-B));}bool dT(int A)=>(A>=TT&&A<=UT)||(A>=VT&&A<=WT);bool eT(String A,int B){if(A.length<B+2)return false;if(!dT(A.codeUnitAt(B)))return false;if(A.codeUnitAt(B+1)!=HM)return false;if(A.length==B+2)return true;return A.codeUnitAt(B+2)==DD;}int rc(String B,String C,int D){var I=C=='';var A=B.indexOf(C);while(A!=-1){var G=B.lastIndexOf('\n',A)+1;var H=A-G;if(D==H||(I&&D==H+1)){return G;}A=B.indexOf(C,A+1);}return null;}void CU(String C,Match D,int A,int B){if(D!=null&&(A!=null||B!=null)){throw new ArgumentError("Can't pass both match and position/length.");}if(A!=null){if(A<0){throw new RangeError("position must be greater than or equal to 0.");}else if(A>C.length){throw new RangeError("position must be less than or equal to the " "string length.");}}if(B!=null&&B<0){throw new RangeError("length must be greater than or equal to 0.");}if(A!=null&&B!=null&&A+B>C.length){throw new RangeError("position plus length must not go beyond the end of " "the string.");}}class Fd<BC> implements StreamTransformer<BC,List<BC>>{Stream<List<BC>> bind(Stream<BC> C){var A=new Queue<BC>();return new StreamTransformer<BC,List<BC>>.fromHandlers(handleData:(D,B){A.add(D);Timer.run((){if(A.isEmpty)return;B.add(A.toList());A.clear();});},handleDone:(B){if(A.isNotEmpty){B.add(A.toList());A.clear();}B.close();}).bind(C);}}class dC{final mD type;final String path;dC(this.type,this.path);String toString()=>"${type} ${path}";}class mD{static const QU=const mD("remove");static const wI=const mD("modify");final String pp;const mD(this.pp);String toString()=>pp;}abstract class sM{}const MM=0x20;class cT extends NE{cT();final name='windows';final OD='\\';final zB=const['/','\\'];final WY=new RegExp(r'[/\\]');final CY=new RegExp(r'[^/\\]$');final TY=new RegExp(r'^(\\\\[^\\]+\\[^\\/]+|[a-zA-Z]:[/\\])');final RY=new RegExp(r"^[/\\](?![/\\])");bool PK(String A)=>A.contains('/');bool p(int A)=>A==DD||A==GG;bool hG(String A){if(A.isEmpty)return false;return !p(A.codeUnitAt(A.length-1));}int ND(String A,{bool withDrive: false}){if(A.isEmpty)return 0;if(A.codeUnitAt(0)==DD)return 1;if(A.codeUnitAt(0)==GG){if(A.length<2||A.codeUnitAt(1)!=GG)return 1;var B=A.indexOf('\\',2);if(B>0){B=A.indexOf('\\',B+1);if(B>0)return B;}return A.length;}if(A.length<3)return 0;if(!dT(A.codeUnitAt(0)))return 0;if(A.codeUnitAt(1)!=HM)return 0;if(!p(A.codeUnitAt(2)))return 0;return 3;}bool DC(String A)=>ND(A)==1;String AI(Uri B){if(B.scheme!=''&&B.scheme!='file'){throw new ArgumentError("Uri ${B} must have scheme 'file:'.");}var A=B.path;if(B.host==''){if(A.length>=3&&A.startsWith('/')&&eT(A,1)){A=A.replaceFirst("/","");}}else{A='\\\\${B.host}${A}';}return Uri.decodeComponent(A.replaceAll("/","\\"));}bool NK(int A,int B){if(A==B)return true;if(A==DD)return B==GG;if(A==GG)return B==DD;if(A^B!=MM)return false;var C=A|MM;return C>=VT&&C<=WT;}bool tO(String A,String C){if(identical(A,C))return true;if(A.length!=C.length)return false;for(var B=0;B<A.length;B++ ){if(!NK(A.codeUnitAt(B),C.codeUnitAt(B))){return false;}}return true;}int oW(int A){if(A==DD)return GG;if(A<TT)return A;if(A>UT)return A;return A|MM;}String pW(String A)=>A.toLowerCase();}Ee(String A,{sourceUrl})=>Fe(A,sourceUrl:sourceUrl).value;hB Fe(String A,{sourceUrl})=>Ge(A,sourceUrl:sourceUrl).SO;RG Ge(String D,{sourceUrl}){var A=new ZU(D,sourceUrl:sourceUrl);var B=A.load();if(B==null){return new RG.qi(new qB.ui(null,A.N),A.N,null,const[] );}var C=A.load();if(C!=null){throw new m("Only expected one document.",C.N);}return B;}Map Gd()=>new HashMap(equals:Hd,hashCode:RU);bool Hd(A,B)=>new Id().TC(A,B);class Id{final qp=[] ;final rp=[] ;bool TC(A,B){if(A is qB)A=A.value;if(B is qB)B=B.value;for(var C=0;C<qp.length;C++ ){var D=identical(A,qp[C]);var G=identical(B,rp[C]);if(D&&G)return true;if(D||G)return false;}qp.add(A);rp.add(B);try {if(A is List&&B is List){return sp(A,B);}else if(A is Map&&B is Map){return tp(A,B);}else if(A is num&&B is num){return up(A,B);}else{return A==B;}}finally {qp.removeLast();rp.removeLast();}}bool sp(List B,List C){if(B.length!=C.length)return false;for(var A=0;A<B.length;A++ ){if(!TC(B[A],C[A]))return false;}return true;}bool tp(Map A,Map B){if(A.length!=B.length)return false;for(var C in A.keys){if(!B.containsKey(C))return false;if(!TC(A[C],B[C]))return false;}return true;}bool up(num A,num B){if(A.isNaN&&B.isNaN)return true;return A==B;}}int RU(G){var B=[] ;C(A){if(B.any((H)=>identical(H,A)))return -1;B.add(A);try {if(A is Map){var D=const tP();return D.hash(A.keys.map(C))^D.hash(A.values.map(C));}else if(A is Iterable){return const rP().hash(A.map(RU));}else if(A is qB){return A.value.hashCode;}else{return A.hashCode;}}finally {B.removeLast();}}return C(G);}class CB{final t type;final RB N;CB(this.type,this.N);String toString()=>type.toString();}class xI implements CB{get type=>t.Jd;final RB N;final RH versionDirective;final List<GD> oK;final bool isImplicit;xI(this.N,{this.versionDirective,List<GD> tagDirectives,this.isImplicit: true}):oK=tagDirectives==null?[] :tagDirectives;String toString()=>"DOCUMENT_START";}class yI implements CB{get type=>t.UU;final RB N;final bool isImplicit;yI(this.N,{this.isImplicit: true});String toString()=>"DOCUMENT_END";}class tM implements CB{get type=>t.VU;final RB N;final String name;tM(this.N,this.name);String toString()=>"ALIAS ${name}";}abstract class uM implements CB{String get anchor;String get tag;String toString(){var A=new StringBuffer('${type}');if(anchor!=null)A.write(" &${anchor}");if(tag!=null)A.write(" ${tag}");return A.toString();}}class FD extends uM{get type=>t.WU;final RB N;final String anchor;final String tag;final String value;final wB S;FD(this.N,this.value,this.S,{this.anchor,this.tag});String toString()=>"${super.toString()} \"${value}\"";}class KH extends uM{get type=>t.XU;final RB N;final String anchor;final String tag;final kC S;KH(this.N,this.S,{this.anchor,this.tag});}class LH extends uM{get type=>t.YU;final RB N;final String anchor;final String tag;final kC S;LH(this.N,this.S,{this.anchor,this.tag});}class t{static const SU=const t.mi("STREAM_START");static const TU=const t.mi("STREAM_END");static const Jd=const t.mi("DOCUMENT_START");static const UU=const t.mi("DOCUMENT_END");static const VU=const t.mi("ALIAS");static const WU=const t.mi("SCALAR");static const XU=const t.mi("SEQUENCE_START");static const zI=const t.mi("SEQUENCE_END");static const YU=const t.mi("MAPPING_START");static const AJ=const t.mi("MAPPING_END");final String name;const t.mi(this.name);String toString()=>name;}class m extends cM{m(String A,eB B):super(A,B);}class ZU{final vM vp;final wp=new Map<String,hB>();RB get N=>xp;RB xp;ZU(String B,{sourceUrl}):vp=new vM(B,sourceUrl:sourceUrl){var A=vp.IC();xp=A.N;assert(A.type==t.SU);}RG load(){if(vp.hE)return null;var A=vp.IC();if(A.type==t.TU){xp=xp.expand(A.N);return null;}var B=yp(A);xp=xp.expand(B.N);wp.clear();return B;}RG yp(xI A){var C=zp(vp.IC());var B=vp.IC() as yI;assert(B.type==t.UU);return new RG.qi(C,A.N.expand(B.N),A.versionDirective,A.oK,startImplicit:A.isImplicit,endImplicit:B.isImplicit);}hB zp(CB A){switch (A.type){case t.VU:return Aq(A);case t.WU:return Bq(A);case t.XU:return Cq(A);case t.YU:return Dq(A);default:throw "Unreachable";}}void Eq(String A,hB B){if(A==null)return;wp[A]=B;}hB Aq(tM A){var B=wp[A.name];if(B!=null)return B;throw new m("Undefined alias.",A.N);}hB Bq(FD A){var B;if(A.tag=="!"){B=new qB.ti(A.value,A);}else if(A.tag!=null){B=Fq(A);}else{B=Gq(A);}Eq(A.anchor,B);return B;}hB Cq(KH A){if(A.tag!="!"&&A.tag!=null&&A.tag!="tag:yaml.org,2002:seq"){throw new m("Invalid tag for sequence.",A.N);}var D=<hB>[] ;var C=new AV.si(D,A.N,A.S);Eq(A.anchor,C);var B=vp.IC();while(B.type!=t.zI){D.add(zp(B));B=vp.IC();}BV(C,A.N.expand(B.N));return C;}hB Dq(LH A){if(A.tag!="!"&&A.tag!=null&&A.tag!="tag:yaml.org,2002:map"){throw new m("Invalid tag for mapping.",A.N);}var D=Gd();var C=new zU.ri(D,A.N,A.S);Eq(A.anchor,C);var B=vp.IC();while(B.type!=t.AJ){var G=zp(B);var H=zp(vp.IC());D[G]=H;B=vp.IC();}BV(C,A.N.expand(B.N));return C;}qB Fq(FD A){switch (A.tag){case "tag:yaml.org,2002:null":var B=Hq(A);if(B!=null)return B;throw new m("Invalid null scalar.",A.N);case "tag:yaml.org,2002:bool":var B=Iq(A);if(B!=null)return B;throw new m("Invalid bool scalar.",A.N);case "tag:yaml.org,2002:int":var B=Jq(A,allowFloat:false);if(B!=null)return B;throw new m("Invalid int scalar.",A.N);case "tag:yaml.org,2002:float":var B=Jq(A,allowInt:false);if(B!=null)return B;throw new m("Invalid float scalar.",A.N);case "tag:yaml.org,2002:str":return new qB.ti(A.value,A);default:throw new m('Undefined tag: ${A.tag}.',A.N);}}qB Gq(FD A)=>Kq(A)??new qB.ti(A.value,A);qB Kq(FD A){var B=A.value.length;if(B==0)return new qB.ti(null,A);var C=A.value.codeUnitAt(0);switch (C){case JI:case CL:case DL:return Jq(A);case ZZ:case XZ:return B==4?Hq(A):null;case bZ:case YZ:return B==4?Iq(A):null;case qP:case WZ:return B==5?Iq(A):null;case dZ:return B==1?new qB.ti(null,A):null;default:if(C>=rE&&C<=KI)return Jq(A);return null;}}qB Hq(FD A){switch (A.value){case "":case "null":case "Null":case "NULL":case "~":return new qB.ti(null,A);default:return null;}}qB Iq(FD A){switch (A.value){case "true":case "True":case "TRUE":return new qB.ti(true,A);case "false":case "False":case "FALSE":return new qB.ti(false,A);default:return null;}}hB Jq(FD A,{bool allowInt: true,bool allowFloat: true}){var B=Lq(A.value,allowInt:allowInt,allowFloat:allowFloat);return B==null?null:new qB.ti(B,A);}num Lq(String A,{bool allowInt: true,bool allowFloat: true}){assert(allowInt||allowFloat);var B=A.codeUnitAt(0);var G=A.length;if(allowInt&&G==1){var H=B-rE;return H>=0&&H<=9?H:null;}var C=A.codeUnitAt(1);if(allowInt&&B==rE){if(C==cZ)return int.parse(A,onError:(D)=>null);if(C==aZ){var K=A.substring(2);return int.parse(K,radix:8,onError:(D)=>null);}}if((B>=rE&&B<=KI)||((B==CL||B==DL)&&C>=rE&&C<=KI)){var I=null;if(allowInt){I=int.parse(A,radix:10,onError:(D)=>null);}if(allowFloat)I??= double.parse(A,(D)=>null);return I;}if(!allowFloat)return null;if((B==JI&&C>=rE&&C<=KI)||(B==DL||B==CL)&&C==JI){if(G==5){switch (A){case "+.inf":case "+.Inf":case "+.INF":return double.INFINITY;case "-.inf":case "-.Inf":case "-.INF":return -double.INFINITY;}}return double.parse(A,(D)=>null);}if(G==4&&B==JI){switch (A){case ".inf":case ".Inf":case ".INF":return double.INFINITY;case ".nan":case ".NaN":case ".NAN":return double.NAN;}}return null;}}class vM{final DN Mq;final Nq=new List<U>();var Oq=U.aU;final Pq=new Map<String,GD>();bool get hE=>Oq==U.jU;vM(String A,{sourceUrl}):Mq=new DN(A,sourceUrl:sourceUrl);CB IC(){try {if(hE)throw new StateError("No more events.");var B=Qq();return B;}on tI catch (A){throw new m(A.message,A.N);}}CB Qq(){switch (Oq){case U.aU:return Rq();case U.wM:return Sq();case U.bU:return Tq();case U.xM:return Uq();case U.cU:return Vq(block:true);case U.Kd:return Vq(block:true,indentlessSequence:true);case U.Ld:return Vq();case U.dU:Mq.kB();return Wq();case U.yM:return Wq();case U.BJ:return Xq();case U.eU:Mq.kB();return Yq();case U.CJ:return Yq();case U.DJ:return Zq();case U.fU:return aq(first:true);case U.zM:return aq();case U.gU:return bq();case U.AN:return cq();case U.BN:return dq();case U.hU:return eq(first:true);case U.EJ:return eq();case U.CN:return fq();case U.iU:return fq(empty:true);default:throw "Unreachable";}}CB Rq(){var A=Mq.kB();assert(A.type==M.tU);Oq=U.wM;return new CB(t.SU,A.N);}CB Sq(){var A=Mq.aB();while(A.type==M.UJ){A=Mq.oC();}if(A.type!=M.RJ&&A.type!=M.SJ&&A.type!=M.TJ&&A.type!=M.PH){gq();Nq.add(U.xM);Oq=U.cU;return new xI(A.N.start.JC());}if(A.type==M.PH){Oq=U.jU;Mq.kB();return new CB(t.TU,A.N);}var C=A.N;var B=gq();var D=B.first;var G=B.last;A=Mq.aB();if(A.type!=M.TJ){throw new m("Expected document start.",A.N);}Nq.add(U.xM);Oq=U.bU;Mq.kB();return new xI(C.expand(A.N),versionDirective:D,tagDirectives:G,isImplicit:false);}CB Tq(){var A=Mq.aB();switch (A.type){case M.RJ:case M.SJ:case M.TJ:case M.UJ:case M.PH:Oq=Nq.removeLast();return hq(A.N.start);default:return Vq(block:true);}}CB Uq(){Pq.clear();Oq=U.wM;var A=Mq.aB();if(A.type==M.UJ){Mq.kB();return new yI(A.N,isImplicit:false);}else{return new yI(A.N.start.JC(),isImplicit:true);}}CB Vq({bool block: false,bool indentlessSequence: false}){var A=Mq.aB();if(A is SN){Mq.kB();Oq=Nq.removeLast();return new tM(A.N,A.name);}var D;var G;var B=A.N.start.JC();H(A){D=A.name;B=B.expand(A.N);return Mq.oC();}I(A){G=A;B=B.expand(A.N);return Mq.oC();}if(A is PJ){A=H(A);if(A is QJ)A=I(A);}else if(A is QJ){A=I(A);if(A is PJ)A=H(A);}var C;if(G!=null){if(G.pC==null){C=G.mK;}else{var K=Pq[G.pC];if(K==null){throw new m("Undefined tag handle.",G.N);}C=K.rF+G.mK;}}if(indentlessSequence&&A.type==M.QG){Oq=U.BJ;return new KH(B.expand(A.N),kC.ON,anchor:D,tag:C);}if(A is NG){if(C==null&&A.S!=wB.OJ)C="!";Oq=Nq.removeLast();Mq.kB();return new FD(B.expand(A.N),A.value,A.S,anchor:D,tag:C);}if(A.type==M.vU){Oq=U.fU;return new KH(B.expand(A.N),kC.PN,anchor:D,tag:C);}if(A.type==M.wU){Oq=U.hU;return new LH(B.expand(A.N),kC.PN,anchor:D,tag:C);}if(block&&A.type==M.uU){Oq=U.dU;return new KH(B.expand(A.N),kC.ON,anchor:D,tag:C);}if(block&&A.type==M.VJ){Oq=U.eU;return new LH(B.expand(A.N),kC.ON,anchor:D,tag:C);}if(D!=null||C!=null){Oq=Nq.removeLast();return new FD(B,'',wB.OJ,anchor:D,tag:C);}throw new m("Expected node content.",B);}CB Wq(){var A=Mq.aB();if(A.type==M.QG){A=Mq.oC();if(A.type==M.QG||A.type==M.WF){Oq=U.yM;return hq(A.N.end);}else{Nq.add(U.yM);return Vq(block:true);}}if(A.type==M.WF){Mq.kB();Oq=Nq.removeLast();return new CB(t.zI,A.N);}throw new m("While parsing a block collection, expected '-'.",A.N.start.JC());}CB Xq(){var A=Mq.aB();if(A.type!=M.QG){Oq=Nq.removeLast();return new CB(t.zI,A.N.start.JC());}var B=A.N.start;A=Mq.oC();if(A.type==M.QG||A.type==M.RE||A.type==M.qD||A.type==M.WF){Oq=U.BJ;return hq(B);}else{Nq.add(U.BJ);return Vq(block:true);}}CB Yq(){var A=Mq.aB();if(A.type==M.RE){var B=A.N.start;A=Mq.oC();if(A.type==M.RE||A.type==M.qD||A.type==M.WF){Oq=U.DJ;return hq(B);}else{Nq.add(U.DJ);return Vq(block:true,indentlessSequence:true);}}if(A.type==M.qD){Oq=U.DJ;return hq(A.N.start);}if(A.type==M.WF){Mq.kB();Oq=Nq.removeLast();return new CB(t.AJ,A.N);}throw new m("Expected a key while parsing a block mapping.",A.N.start.JC());}CB Zq(){var A=Mq.aB();if(A.type!=M.qD){Oq=U.CJ;return hq(A.N.start);}var B=A.N.start;A=Mq.oC();if(A.type==M.RE||A.type==M.qD||A.type==M.WF){Oq=U.CJ;return hq(B);}else{Nq.add(U.CJ);return Vq(block:true,indentlessSequence:true);}}CB aq({bool first: false}){if(first)Mq.kB();var A=Mq.aB();if(A.type!=M.OG){if(!first){if(A.type!=M.XF){throw new m("While parsing a flow sequence, expected ',' or ']'.",A.N.start.JC());}A=Mq.oC();}if(A.type==M.RE){Oq=U.gU;Mq.kB();return new LH(A.N,kC.PN);}else if(A.type!=M.OG){Nq.add(U.zM);return Vq();}}Mq.kB();Oq=Nq.removeLast();return new CB(t.zI,A.N);}CB bq(){var A=Mq.aB();if(A.type==M.qD||A.type==M.XF||A.type==M.OG){var B=A.N.start;Oq=U.AN;return hq(B);}else{Nq.add(U.AN);return Vq();}}CB cq(){var A=Mq.aB();if(A.type==M.qD){A=Mq.oC();if(A.type!=M.XF&&A.type!=M.OG){Nq.add(U.BN);return Vq();}}Oq=U.BN;return hq(A.N.start);}CB dq(){Oq=U.zM;return new CB(t.AJ,Mq.aB().N.start.JC());}CB eq({bool first: false}){if(first)Mq.kB();var A=Mq.aB();if(A.type!=M.PG){if(!first){if(A.type!=M.XF){throw new m("While parsing a flow mapping, expected ',' or '}'.",A.N.start.JC());}A=Mq.oC();}if(A.type==M.RE){A=Mq.oC();if(A.type!=M.qD&&A.type!=M.XF&&A.type!=M.PG){Nq.add(U.CN);return Vq();}else{Oq=U.CN;return hq(A.N.start);}}else if(A.type!=M.PG){Nq.add(U.iU);return Vq();}}Mq.kB();Oq=Nq.removeLast();return new CB(t.AJ,A.N);}CB fq({bool empty: false}){var A=Mq.aB();if(empty){Oq=U.EJ;return hq(A.N.start);}if(A.type==M.qD){A=Mq.oC();if(A.type!=M.XF&&A.type!=M.PG){Nq.add(U.EJ);return Vq();}}Oq=U.EJ;return hq(A.N.start);}CB hq(jC A)=>new FD(A.JC(),'',wB.OJ);QH<RH,List<GD>> gq(){var A=Mq.aB();var B;var C=<GD>[] ;while(A.type==M.RJ||A.type==M.SJ){if(A is QN){if(B!=null){throw new m("Duplicate %YAML directive.",A.N);}if(A.pF!=1||A.HF==0){throw new m("Incompatible YAML document. This parser only supports YAML 1.1 " "and 1.2.",A.N);}else if(A.HF>2){yU("Warning: this parser only supports YAML 1.1 and 1.2.",A.N);}B=new RH(A.pF,A.HF);}else if(A is RN){var D=new GD(A.pC,A.rF);iq(D,A.N);C.add(D);}A=Mq.oC();}iq(new GD("!","!"),A.N.start.JC(),allowDuplicates:true);iq(new GD("!!","tag:yaml.org,2002:"),A.N.start.JC(),allowDuplicates:true);return new QH(B,C);}void iq(GD A,RB B,{bool allowDuplicates: false}){if(Pq.containsKey(A.pC)){if(allowDuplicates)return;throw new m("Duplicate %TAG directive.",B);}Pq[A.pC]=A;}}class U{static const aU=const U("STREAM_START");static const wM=const U("DOCUMENT_START");static const bU=const U("DOCUMENT_CONTENT");static const xM=const U("DOCUMENT_END");static const cU=const U("BLOCK_NODE");static const Kd=const U("BLOCK_NODE_OR_INDENTLESS_SEQUENCE");static const Ld=const U("FLOW_NODE");static const dU=const U("BLOCK_SEQUENCE_FIRST_ENTRY");static const yM=const U("BLOCK_SEQUENCE_ENTRY");static const BJ=const U("INDENTLESS_SEQUENCE_ENTRY");static const eU=const U("BLOCK_MAPPING_FIRST_KEY");static const CJ=const U("BLOCK_MAPPING_KEY");static const DJ=const U("BLOCK_MAPPING_VALUE");static const fU=const U("FLOW_SEQUENCE_FIRST_ENTRY");static const zM=const U("FLOW_SEQUENCE_ENTRY");static const gU=const U("FLOW_SEQUENCE_ENTRY_MAPPING_KEY");static const AN=const U("FLOW_SEQUENCE_ENTRY_MAPPING_VALUE");static const BN=const U("FLOW_SEQUENCE_ENTRY_MAPPING_END");static const hU=const U("FLOW_MAPPING_FIRST_KEY");static const EJ=const U("FLOW_MAPPING_KEY");static const CN=const U("FLOW_MAPPING_VALUE");static const iU=const U("FLOW_MAPPING_EMPTY_VALUE");static const jU=const U("END");final String name;const U(this.name);String toString()=>name;}class DN{static const nD=0x9;static const oD=0xA;static const pD=0xD;static const WD=0x20;static const Md=0x24;static const Nd=0x28;static const Od=0x29;static const MH=0x2B;static const NH=0x2C;static const FJ=0x2D;static const Pd=0x2E;static const EN=0x3F;static const GJ=0x3A;static const Qd=0x3B;static const Rd=0x3D;static const HJ=0x5B;static const OH=0x5D;static const FN=0x7B;static const IJ=0x7D;static const GN=0x23;static const kU=0x26;static const lU=0x2A;static const mU=0x21;static const Sd=0x7C;static const Td=0x3C;static const Ud=0x3E;static const VF=0x27;static const JJ=0x22;static const KJ=0x25;static const HN=0x40;static const nU=0x60;static const Vd=0x7E;static const Wd=0x0;static const Xd=0x7;static const Yd=0x8;static const Zd=0xB;static const ad=0xC;static const bd=0x1B;static const oU=0x2F;static const IN=0x5C;static const cd=0x5F;static const LJ=0x85;static const dd=0xA0;static const ed=0x2028;static const fd=0x2029;static const JN=0xFEFF;static const QE=0x30;static const MJ=0x39;static const NJ=0x61;static const gd=0x62;static const hd=0x65;static const pU=0x66;static const jd=0x6E;static const kd=0x72;static const ld=0x74;static const md=0x75;static const nd=0x76;static const od=0x78;static const pd=0x7A;static const KN=0x41;static const qU=0x46;static const qd=0x4C;static const rd=0x4E;static const sd=0x50;static const td=0x55;static const ud=0x5A;final LG jq;var kq=false;var lq=false;final mq=new uP<NB>();var nq=0;var oq=false;final pq=<int>[-1];var qq=true;final rq=<LN>[null];int get sq=>pq.last;bool get tq=>rq.length==1;bool get uq=>jq.hE||vq;bool get vq=>wq(0);bool get xq=>yq(0);bool get zq=>Ar(0);bool get Br{var A=jq.k();if(A==null)return false;switch (A){case FJ:case Qd:case oU:case GJ:case HN:case kU:case Rd:case MH:case Md:case Pd:case Vd:case EN:case lU:case VF:case Nd:case Od:case KJ:return true;default:return (A>=QE&&A<=MJ)||(A>=NJ&&A<=pd)||(A>=KN&&A<=ud);}}bool get Cr{if(!Dr)return false;switch (jq.k()){case NH:case HJ:case OH:case FN:case IJ:return false;default:return true;}}bool get Er{var A=jq.k();return A!=null&&(A>=QE&&A<=MJ);}bool get Fr{var A=jq.k();if(A==null)return false;return (A>=QE&&A<=MJ)||(A>=NJ&&A<=pU)||(A>=KN&&A<=qU);}bool get Gr=>Hr(0);bool get Ir{var A=jq.k();if(A==null)return false;switch (A){case oD:case pD:case JN:return false;case nD:case LJ:return true;default:return (A>=0x00020&&A<=0x00007E)||(A>=0x000A0&&A<=0x00D7FF)||(A>=0x0E000&&A<=0x00FFFD)||(A>=0x10000&&A<=0x10FFFF);}}bool get Dr{var A=jq.k();if(A==null)return false;switch (A){case oD:case pD:case JN:case WD:return false;case LJ:return true;default:return (A>=0x00020&&A<=0x00007E)||(A>=0x000A0&&A<=0x00D7FF)||(A>=0x0E000&&A<=0x00FFFD)||(A>=0x10000&&A<=0x10FFFF);}}bool get Jr{return jq.LB==0&&yq(3)&&(jq.GF('---')||jq.GF('...'));}DN(String A,{sourceUrl}):jq=new LG.Gj(A,sourceUrl:sourceUrl);NB kB(){if(lq)throw new StateError("Out of tokens.");if(!oq)Kr();var A=mq.removeFirst();oq=false;nq++ ;lq=A is NB&&A.type==M.PH;return A;}NB oC(){kB();return aB();}NB aB(){if(lq)return null;if(!oq)Kr();return mq.first;}void Kr(){while(true){if(mq.isNotEmpty){Lr();if(!rq.any((A)=>A!=null&&A.rK==nq)){break;}}Mr();}oq=true;}void Mr(){if(!kq){Nr();return;}Or();Lr();Pr(jq.LB);if(jq.hE){Qr();return;}if(jq.LB==0){if(jq.k()==KJ){Rr();return;}if(yq(3)){if(jq.GF('---')){Sr(M.TJ);return;}if(jq.GF('...')){Sr(M.UJ);return;}}}switch (jq.k()){case HJ:Tr(M.vU);return;case FN:Tr(M.wU);return;case OH:Ur(M.OG);return;case IJ:Ur(M.PG);return;case NH:Vr();return;case lU:Wr(anchor:false);return;case kU:Wr(anchor:true);return;case mU:Xr();return;case VF:Yr(singleQuote:true);return;case JJ:Yr(singleQuote:false);return;case Sd:if(!tq)Zr();ar(literal:true);return;case Ud:if(!tq)Zr();ar(literal:false);return;case KJ:case HN:case nU:Zr();return;case FJ:if(Hr(1)){br();}else{cr();}return;case EN:if(Hr(1)){br();}else{dr();}return;case GJ:if(!tq&&mq.isNotEmpty){var A=mq.last;if(A.type==M.OG||A.type==M.PG||(A.type==M.xU&&(A as NG).S.Sh)){er();return;}}if(Hr(1)){br();}else{er();}return;default:if(!Ir)Zr();br();return;}throw 'Inaccessible';}void Zr()=>jq.error("Unexpected character.",length:1);void Lr(){for(var A=0;A<rq.length;A++ ){var B=rq[A];if(B==null)continue;if(!tq)continue;if(B.HC==jq.HC)continue;if(B.xO){throw new m("Expected ':'.",jq.SC);}rq[A]=null;}}void fr(){var A=tq&&sq==jq.LB;assert(qq||!A);if(!qq)return;gr();rq[rq.length-1]=new LN(nq+mq.length,jq.HC,jq.LB,jq.location,required:A);}void gr(){var A=rq.last;if(A!=null&&A.xO){throw new m("Could not find expected ':' for simple key.",A.location.JC());}rq[rq.length-1]=null;}void hr(){rq.add(null);}void ir(){if(tq)return;rq.removeLast();}void jr(int A,M C,jC D,{int tokenNumber}){if(!tq)return;if(sq!=-1&&sq>=A)return;pq.add(A);var B=new NB(C,D.JC());if(tokenNumber==null){mq.add(B);}else{mq.insert(tokenNumber-nq,B);}}void Pr(int A){if(!tq)return;while(sq>A){mq.add(new NB(M.WF,jq.SC));pq.removeLast();}}void kr()=>Pr(-1);void Nr(){kq=true;mq.add(new NB(M.tU,jq.SC));}void Qr(){kr();gr();qq=false;mq.add(new NB(M.PH,jq.SC));}void Rr(){kr();gr();qq=false;var A=lr();if(A!=null)mq.add(A);}void Sr(M A){kr();gr();qq=false;var B=jq.state;jq.f();jq.f();jq.f();mq.add(new NB(A,jq.KC(B)));}void Tr(M A){fr();hr();qq=true;mr(A);}void Ur(M A){gr();ir();qq=false;mr(A);}void Vr(){gr();qq=true;mr(M.XF);}void cr(){if(tq){if(!qq){throw new m("Block sequence entries are not allowed here.",jq.SC);}jr(jq.LB,M.uU,jq.location);}else{}gr();qq=true;mr(M.QG);}void dr(){if(tq){if(!qq){throw new m("Mapping keys are not allowed here.",jq.SC);}jr(jq.LB,M.VJ,jq.location);}qq=tq;mr(M.RE);}void er(){var A=rq.last;if(A!=null){mq.insert(A.rK-nq,new NB(M.RE,A.location.JC()));jr(A.LB,M.VJ,A.location,tokenNumber:A.rK);rq[rq.length-1]=null;qq=false;}else if(tq){if(!qq){throw new m("Mapping values are not allowed here. Did you miss a colon " "earlier?",jq.SC);}jr(jq.LB,M.VJ,jq.location);qq=true;}else if(qq){qq=false;mr(M.RE);}mr(M.qD);}void mr(M A){var B=jq.state;jq.f();mq.add(new NB(A,jq.KC(B)));}void Wr({bool anchor: true}){fr();qq=false;mq.add(nr(anchor:anchor));}void Xr(){fr();qq=false;mq.add(or());}void ar({bool literal: false}){gr();qq=true;mq.add(pr(literal:literal));}void Yr({bool singleQuote: false}){fr();qq=false;mq.add(qr(singleQuote:singleQuote));}void br(){fr();qq=false;mq.add(rr());}void Or(){var A=false;while(true){if(jq.LB==0)jq.kB("\uFEFF");while(jq.k()==WD||((!tq||!A)&&jq.k()==nD)){jq.f();}if(jq.k()==nD){jq.error("Tab characters are not allowed as indentation.",length:1);}sr();if(vq){tr();if(tq)qq=true;A=true;}else{break;}}}NB lr(){var A=jq.state;jq.f();var B;var C=ur();if(C=="YAML"){B=vr(A);}else if(C=="TAG"){B=wr(A);}else{yU("Warning: unknown directive.",jq.KC(A));while(!uq){jq.f();}return null;}xr();sr();if(!uq){throw new m("Expected comment or line break after directive.",jq.KC(A));}tr();return B;}String ur(){var B=jq.position;while(Dr){jq.f();}var A=jq.substring(B);if(A.isEmpty){throw new m("Expected directive name.",jq.SC);}else if(!xq){throw new m("Unexpected character in directive name.",jq.SC);}return A;}NB vr(wE A){xr();var B=yr();jq.UK('.');var C=yr();return new QN(jq.KC(A),B,C);}int yr(){var B=jq.position;while(Er){jq.f();}var A=jq.substring(B);if(A.isEmpty){throw new m("Expected version number.",jq.SC);}return int.parse(A);}NB wr(wE A){xr();var B=zr(directive:true);if(!zq){throw new m("Expected whitespace.",jq.SC);}xr();var C=As();if(!xq){throw new m("Expected whitespace.",jq.SC);}return new RN(jq.KC(A),B,C);}NB nr({bool anchor: true}){var C=jq.state;jq.f();var D=jq.position;while(Cr){jq.f();}var B=jq.substring(D);var A=jq.k();if(B.isEmpty||(!xq&&A!=EN&&A!=GJ&&A!=NH&&A!=OH&&A!=IJ&&A!=KJ&&A!=HN&&A!=nU)){throw new m("Expected alphanumeric character.",jq.SC);}if(anchor){return new PJ(jq.KC(C),B);}else{return new SN(jq.KC(C),B);}}NB or(){var A;var B;var C=jq.state;if(jq.k(1)==Td){jq.f();jq.f();A='';B=As();jq.UK('>');}else{A=zr();if(A.length>1&&A.startsWith('!')&&A.endsWith('!')){B=As(flowSeparators:false);}else{B=As(head:A,flowSeparators:false);if(B.isEmpty){A=null;B='!';}else{A='!';}}}return new QJ(jq.KC(C),A,B);}String zr({bool directive: false}){jq.UK('!');var A=new StringBuffer('!');var B=jq.position;while(Br){jq.f();}A.write(jq.substring(B));if(jq.k()==mU){A.writeCharCode(jq.f());}else{if(directive&&A.toString()!='!')jq.UK('!');}return A.toString();}String As({String head,bool flowSeparators: true}){var B=head==null?0:head.length;var C=new StringBuffer();if(B>1)C.write(head.substring(1));var D=jq.position;var A=jq.k();while(Br||(flowSeparators&&(A==NH||A==HJ||A==OH))){jq.f();A=jq.k();}return Uri.decodeFull(jq.substring(D));}NB pr({bool literal: false}){var L=jq.state;jq.f();var I=XD.vd;var D=0;var A=jq.k();if(A==MH||A==FJ){I=A==MH?XD.NN:XD.MN;jq.f();if(Er){if(jq.k()==QE){throw new m("0 may not be used as an indentation indicator.",jq.KC(L));}D=jq.f()-QE;}}else if(Er){if(jq.k()==QE){throw new m("0 may not be used as an indentation indicator.",jq.KC(L));}D=jq.f()-QE;A=jq.k();if(A==MH||A==FJ){I=A==MH?XD.NN:XD.MN;jq.f();}}xr();sr();if(!uq){throw new m("Expected comment or line break.",jq.SC);}tr();var C=0;if(D!=0){C=sq>=0?sq+D:D;}var G=Bs(C);C=G.first;var K=G.last;var B=new StringBuffer();var H='';var O=false;var X=false;var c=jq.state;while(jq.LB==C&&!jq.hE){if(Jr)break;X=zq;if(!literal&&H.isNotEmpty&&!O&&!X){if(K.isEmpty)B.writeCharCode(WD);}else{B.write(H);}H='';B.write(K);O=zq;var q=jq.position;while(!uq){jq.f();}B.write(jq.substring(q));c=jq.state;if(!jq.hE)H=Cs();var G=Bs(C);C=G.first;K=G.last;}if(I!=XD.MN)B.write(H);if(I==XD.NN)B.write(K);return new NG(jq.KC(L,c),B.toString(),literal?wB.xd:wB.yd);}QH<int,String> Bs(int A){var B=0;var C=new StringBuffer();while(true){while((A==0||jq.LB<A)&&jq.k()==WD){jq.f();}if(jq.LB>B)B=jq.LB;if(!vq)break;C.write(Cs());}if(A==0){A=B;if(A<sq+1)A=sq+1;}return new QH(A,C.toString());}NB qr({bool singleQuote: false}){var X=jq.state;var A=new StringBuffer();jq.f();while(true){if(Jr){jq.error("Unexpected document indicator.");}if(jq.hE){throw new m("Unexpected end of file.",jq.SC);}var D=false;while(!xq){var G=jq.k();if(singleQuote&&G==VF&&jq.k(1)==VF){jq.f();jq.f();A.writeCharCode(VF);}else if(G==(singleQuote?VF:JJ)){break;}else if(!singleQuote&&G==IN&&wq(1)){jq.f();tr();D=true;break;}else if(!singleQuote&&G==IN){var I=jq.state;var B=null;switch (jq.k(1)){case QE:A.writeCharCode(Wd);break;case NJ:A.writeCharCode(Xd);break;case gd:A.writeCharCode(Yd);break;case ld:case nD:A.writeCharCode(nD);break;case jd:A.writeCharCode(oD);break;case nd:A.writeCharCode(Zd);break;case pU:A.writeCharCode(ad);break;case kd:A.writeCharCode(pD);break;case hd:A.writeCharCode(bd);break;case WD:case JJ:case oU:case IN:A.writeCharCode(jq.k(1));break;case rd:A.writeCharCode(LJ);break;case cd:A.writeCharCode(dd);break;case qd:A.writeCharCode(ed);break;case sd:A.writeCharCode(fd);break;case od:B=2;break;case md:B=4;break;case td:B=8;break;default:throw new m("Unknown escape character.",jq.KC(I));}jq.f();jq.f();if(B!=null){var C=0;for(var L=0;L<B;L++ ){if(!Fr){jq.f();throw new m("Expected ${B}-digit hexidecimal number.",jq.KC(I));}C=(C<<4)+Ds(jq.f());}if((C>=0xD800&&C<=0xDFFF)||C>0x10FFFF){throw new m("Invalid Unicode character escape code.",jq.KC(I));}A.writeCharCode(C);}}else{A.writeCharCode(jq.f());}}if(jq.k()==(singleQuote?VF:JJ)){break;}var H=new StringBuffer();var O='';var K=new StringBuffer();while(zq||vq){if(zq){if(!D){H.writeCharCode(jq.f());}else{jq.f();}}else{if(!D){H.clear();O=Cs();D=true;}else{K.write(Cs());}}}if(D){if(O.isNotEmpty&&K.isEmpty){A.writeCharCode(WD);}else{A.write(K);}}else{A.write(H);H.clear();}}jq.f();return new NG(jq.KC(X),A.toString(),singleQuote?wB.rU:wB.sU);}NB rr(){var I=jq.state;var G=jq.state;var B=new StringBuffer();var A='';var C='';var D=new StringBuffer();var H=sq+1;while(true){if(Jr)break;if(jq.k()==GN)break;if(Gr){if(A.isNotEmpty){if(C.isEmpty){B.writeCharCode(WD);}else{B.write(C);}A='';C='';}else{B.write(D);D.clear();}}var K=jq.position;while(Gr){jq.f();}B.write(jq.substring(K));G=jq.state;if(!zq&&!vq)break;while(zq||vq){if(zq){if(A.isNotEmpty&&jq.LB<H&&jq.k()==nD){jq.error("Expected a space but found a tab.",length:1);}if(A.isEmpty){D.writeCharCode(jq.f());}else{jq.f();}}else{if(A.isEmpty){A=Cs();D.clear();}else{C=Cs();}}}if(tq&&jq.LB<H)break;}if(A.isNotEmpty)qq=true;return new NG(jq.KC(I,G),B.toString(),wB.OJ);}void tr(){var A=jq.k();if(A!=pD&&A!=oD)return;jq.f();if(A==pD&&jq.k()==oD)jq.f();}String Cs(){var A=jq.k();if(A!=pD&&A!=oD){throw new m("Expected newline.",jq.SC);}jq.f();if(A==pD&&jq.k()==oD)jq.f();return "\n";}bool Ar(int B){var A=jq.k(B);return A==WD||A==nD;}bool wq(int B){var A=jq.k(B);return A==pD||A==oD;}bool yq(int B){var A=jq.k(B);return A==null||A==WD||A==nD||A==pD||A==oD;}bool Hr(int A){switch (jq.k(A)){case GJ:return Es(A+1);case GN:var B=jq.k(A-1);return B!=WD&&B!=nD;default:return Es(A);}}bool Es(int B){var A=jq.k(B);switch (A){case NH:case HJ:case OH:case FN:case IJ:return tq;case WD:case nD:case oD:case pD:case JN:return false;case LJ:return true;default:return A!=null&&((A>=0x00020&&A<=0x00007E)||(A>=0x000A0&&A<=0x00D7FF)||(A>=0x0E000&&A<=0x00FFFD)||(A>=0x10000&&A<=0x10FFFF));}}int Ds(int A){if(A<=MJ)return A-QE;if(A<=qU)return 10+A-KN;return 10+A-NJ;}void xr(){while(zq){jq.f();}}void sr(){if(jq.k()!=GN)return;while(!uq){jq.f();}}}class LN{final int rK;final jC location;final int HC;final int LB;final bool xO;LN(this.rK,this.HC,this.LB,this.location,{bool required}):xO=required;}class XD{static const MN=const XD("STRIP");static const vd=const XD("CLIP");static const NN=const XD("KEEP");final String name;const XD(this.name);String toString()=>name;}class wB{static const wd=const wB.ni("ANY");static const OJ=const wB.ni("PLAIN");static const xd=const wB.ni("LITERAL");static const yd=const wB.ni("FOLDED");static const rU=const wB.ni("SINGLE_QUOTED");static const sU=const wB.ni("DOUBLE_QUOTED");final String name;bool get Sh=>this==rU||this==sU;const wB.ni(this.name);String toString()=>name;}class kC{static const ON=const kC.oi("BLOCK");static const PN=const kC.oi("FLOW");final String name;const kC.oi(this.name);String toString()=>name;}class NB{final M type;final RB N;NB(this.type,this.N);String toString()=>type.toString();}class QN implements NB{get type=>M.RJ;final RB N;final int pF;final int HF;QN(this.N,this.pF,this.HF);String toString()=>"VERSION_DIRECTIVE ${pF}.${HF}";}class RN implements NB{get type=>M.SJ;final RB N;final String pC;final String rF;RN(this.N,this.pC,this.rF);String toString()=>"TAG_DIRECTIVE ${pC} ${rF}";}class PJ implements NB{get type=>M.Ae;final RB N;final String name;PJ(this.N,this.name);String toString()=>"ANCHOR ${name}";}class SN implements NB{get type=>M.zd;final RB N;final String name;SN(this.N,this.name);String toString()=>"ALIAS ${name}";}class QJ implements NB{get type=>M.Be;final RB N;final String pC;final String mK;QJ(this.N,this.pC,this.mK);String toString()=>"TAG ${pC} ${mK}";}class NG implements NB{get type=>M.xU;final RB N;final String value;final wB S;NG(this.N,this.value,this.S);String toString()=>"SCALAR ${S} \"${value}\"";}class M{static const tU=const M.pi("STREAM_START");static const PH=const M.pi("STREAM_END");static const RJ=const M.pi("VERSION_DIRECTIVE");static const SJ=const M.pi("TAG_DIRECTIVE");static const TJ=const M.pi("DOCUMENT_START");static const UJ=const M.pi("DOCUMENT_END");static const uU=const M.pi("BLOCK_SEQUENCE_START");static const VJ=const M.pi("BLOCK_MAPPING_START");static const WF=const M.pi("BLOCK_END");static const vU=const M.pi("FLOW_SEQUENCE_START");static const OG=const M.pi("FLOW_SEQUENCE_END");static const wU=const M.pi("FLOW_MAPPING_START");static const PG=const M.pi("FLOW_MAPPING_END");static const QG=const M.pi("BLOCK_ENTRY");static const XF=const M.pi("FLOW_ENTRY");static const RE=const M.pi("KEY");static const qD=const M.pi("VALUE");static const zd=const M.pi("ALIAS");static const Ae=const M.pi("ANCHOR");static const Be=const M.pi("TAG");static const xU=const M.pi("SCALAR");final String name;const M.pi(this.name);String toString()=>name;}class QH<V,Ne>{final V first;final Ne last;QH(this.first,this.last);String toString()=>'(${first}, ${last})';}void yU(String A,[eB B])=>De(A,B);typedef dynamic Ce(String _0,[eB _1]);Ce De=(A,[B]){if(B!=null)A=B.message(A);print(A);};String He(B){var A=new StringBuffer();Ie(B,A);return A.toString();}void Ie(A,StringSink B){TN(A,0,B,true);}void TN(A,int C,StringSink B,bool D){if(A is Map){Ke(A,C,B,D);}else if(A is Iterable){Me(A,C,B,D);}else if(A is String){B..writeln('"${Je(A)}"');}else if(A is double){B.writeln("!!float ${A}");}else{B.writeln(A);}}String Je(String A)=>A.replaceAll('"',r'\"').replaceAll("\n",r"\n");void Ke(Map C,int B,StringSink A,bool G){if(!G){A.writeln();B+= 2;}final H=Le(C);H.forEach((D){final I=C[D];CV(B,A);A..write(D)..write(': ');TN(I,B,A,false);});}Iterable<String> Le(Map H){final B=[] ;final C=[] ;final D=[] ;H.forEach((A,G){if(G is String){B.add(A);}else if(G is Map){C.add(A);}else{D.add(A);}});return nc([B..sort(),C..sort(),D..sort()]) as Iterable<String>;}void Me(Iterable C,int B,StringSink A,bool D){if(!D){A.writeln();B+= 2;}C.forEach((G){CV(B,A);A.write('- ');TN(G,B,A,false);});}void CV(int A,StringSink B)=>B.write(' '*A);class RG{final hB SO;final eB N;final RH versionDirective;final List<GD> oK;final bool startImplicit;final bool endImplicit;RG.qi(this.SO,this.N,this.versionDirective,List<GD> A,{this.startImplicit: false,this.endImplicit: false}):oK=new UnmodifiableListView(A);String toString()=>SO.toString();}class RH{final int pF;final int HF;RH(this.pF,this.HF);String toString()=>"%YAML ${pF}.${HF}";}class GD{final String pC;final String rF;GD(this.pC,this.rF);String toString()=>"%TAG ${pC} ${rF}";}abstract class hB{eB get N=>Fs;eB Fs;get value;}class zU extends hB with MapMixin,eZ{final Map<dynamic,hB> hC;final kC S;Map get value=>this;Iterable get keys=>hC.keys.map((A)=>A.value);zU.ri(Map<dynamic,hB> A,eB B,this.S):hC=new UnmodifiableMapView<dynamic,hB>(A){Fs=B;}operator[](B){var A=hC[B];return A==null?null:A.value;}}class AV extends hB with ListMixin{final List<hB> hC;final kC S;List get value=>this;int get length=>hC.length;set length(int A){throw new UnsupportedError("Cannot modify an unmodifiable List");}AV.si(List<hB> A,eB B,this.S):hC=new UnmodifiableListView<hB>(A){Fs=B;}operator[](int A)=>hC[A].value;operator[]=(int A,B){throw new UnsupportedError("Cannot modify an unmodifiable List");}}class qB extends hB{final value;final wB S;qB.ti(this.value,FD A):S=A.S{Fs=A.N;}qB.ui(this.value,eB A):S=wB.wd{Fs=A;}String toString()=>value.toString();}void BV(hB A,eB B){A.Fs=B;}
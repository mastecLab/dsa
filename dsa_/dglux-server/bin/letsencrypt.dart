import "dart:typed_data";import "dart:async";import "dart:io";import "dart:io" as jZ;import "dart:convert";import "dart:collection";import "dart:math";import "dart:math" as JG;class VD{final Map<String,wC> Kk;final Map<String,VD> Lk;final Map<String,wC> uE;final Map<String,VD> FI;final Mk=[] ;final bool KX;factory VD({bool allowTrailingOptions: false})=>new VD.Ej(<String,wC>{},<String,VD>{},allowTrailingOptions:allowTrailingOptions);VD.Ej(Map<String,wC> A,Map<String,VD> B,{bool allowTrailingOptions: false}):this.Kk=A,this.uE=new UnmodifiableMapView(A),this.Lk=B,this.FI=new UnmodifiableMapView(B),this.KX=allowTrailingOptions!=null?allowTrailingOptions:false;void hO(String A,{String abbr,String help,bool defaultsTo: false,bool negatable: true,void callback(bool value),bool hide: false}){Nk(A,abbr,help,null,null,null,defaultsTo,callback,dC.DQ,negatable:negatable,hide:hide);}void jO(String A,{String abbr,String help,String valueHelp,List<String> allowed,Map<String,String> allowedHelp,String defaultsTo,void callback(value),bool allowMultiple: false,bool splitCommas,bool hide: false}){if(!allowMultiple&&splitCommas!=null){throw new ArgumentError('splitCommas may not be set if allowMultiple is false.');}Nk(A,abbr,help,valueHelp,allowed,allowedHelp,defaultsTo,callback,allowMultiple?dC.TL:dC.rZ,splitCommas:splitCommas,hide:hide);}void Nk(String A,String B,String G,String H,List<String> I,Map<String,String> K,L,void O(value),dC V,{bool negatable: false,bool splitCommas,bool hide: false}){if(Kk.containsKey(A)){throw new ArgumentError('Duplicate option "${A}".');}if(B!=null){var C=oK(B);if(C!=null){throw new ArgumentError('Abbreviation "${B}" is already used by "${C.name}".');}}var D=qZ(A,B,G,H,I,K,L,O,V,negatable:negatable,splitCommas:splitCommas,hide:hide);Kk[A]=D;Mk.add(D);}VF fB(List<String> A)=>new BH(null,this,A.toList()).fB();wC oK(String A){return uE.values.firstWhere((B)=>B.pG==A,orElse:()=>null);}}class aI extends FormatException{final List<String> FI;aI(String B,[Iterable<String> A]):FI=A==null?const[] :new List.unmodifiable(A),super(B);}VF pZ(VD A,Map<String,dynamic> B,String C,VF D,List<String> G,List<String> H){return new VF.Fj(A,B,C,D,G,H);}class VF{final VD Ok;final Map<String,dynamic> Pk;final String name;final VF eh;final List<String> NE;final List<String> arguments;VF.Fj(this.Ok,this.Pk,this.name,this.eh,List<String> A,List<String> B):this.NE=new UnmodifiableListView(A),this.arguments=new UnmodifiableListView(B);operator[](String A){if(!Ok.uE.containsKey(A)){throw new ArgumentError('Could not find an option named "${A}".');}return Ok.uE[A].DY(Pk[A]);}Iterable<String> get uE{var A=new Set<String>.from(Pk.keys);Ok.uE.forEach((B,C){if(C.II!=null)A.add(B);});return A;}}class HQ extends IB{List<int> bB;int aZ;HQ.Oj(Uint8List A):super.Sj(A){aZ=A[0];bB=HG().sublist(1);}Uint8List Qk(){var A=[aZ];A.addAll(bB);Rk=A.length;Sk();Tk(A);return Uk;}String toString()=>"BitString(${bB})";}class GQ extends IB{bool Vk;GQ.Mj(Uint8List A):super.Sj(A){var B=A[Wk];Vk=(B==OQ);}Uint8List Qk(){super.Sk();super.Tk([Vk==true?OQ:Ea]);return Uk;}}const int xZ=0x01;const int IQ=0x02;const int zZ=0x03;const int JQ=0x04;const int KQ=0x05;const int Aa=0x0A;const int Ba=0x13;const int Ca=0x17;const int bI=0x30;const int NQ=0x31;const int Da=0x06;const int OQ=0xff;const int Ea=0x00;class CH{String message;CH(this.message);}class oD extends IB{var ZC;oD(this.ZC,{tag: IQ}):super(tag:tag);oD.Kj(Uint8List A):super.Sj(A){ZC=Ia(this.HG());}Uint8List Qk(){var A=Ga(this.ZC);Rk=A.length;super.Sk();Tk(A);return Uk;}static Uint8List Ga(var A){var B;if(A is WF){B=new Uint8List.fromList(A.qP());}else{var C=new WF(A);B=new Uint8List.fromList(C.qP());}return B;}static dynamic Ia(Uint8List A,{int offset: 0}){if(A.length-offset>8){return new WF(A.sublist(offset));}else{return new WF(A.sublist(offset)).ZC();}}String toString()=>"ASNInteger(${ZC})";}class LG{int Xk;int get length=>Xk;int Wk;int get Dj=>Wk;LG(this.Xk,this.Wk);static Uint8List Fa(int C){Uint8List A;if(C<=127){A=new Uint8List(1);A[0]=C;}else{var G=new Uint32List(1);G[0]=C;var H=new Uint8List.view(G.buffer);int B=3;while(H[B]==0) --B;A=new Uint8List(B+2);A[0]=0x80+B+1;for(int D=1;D<A.length; ++D)A[D]=H[B-- ];}return A;}static LG Ha(Uint8List B){int C=2;int A=(B[1]&0x7F);if(A!=B[1]){int G=A;A=0;for(int D=0;D<G;D++ ){A<<= 8;A|= (B[C++ ]&0xFF);}}return new LG(A,C);}}class EQ extends IB{static final wZ=new Uint8List.fromList([KQ,0x00]);Uint8List get RD=>wZ;EQ.Jj(Uint8List A):super.Sj(A);}class IB{final int Yk;int get tag=>Yk;Uint8List Uk;Uint8List get RD{if(Uk==null)Qk();return Uk;}IB({int tag: 0}):Yk=tag;IB.Sj(A):Yk=A[0]{Uk=A;Zk();}void Zk(){LG A=LG.Ha(Uk);Rk=A.length;Wk=A.Dj;}int get YZ=>Wk+Rk;int Rk;int Wk=2;Uint8List Sk(){if(Uk==null){Uint8List A=LG.Fa(Rk);Uk=new Uint8List(1+A.length+Rk);Uk[0]=tag;Uk.setRange(1,1+A.length,A,0);Wk=1+A.length;}return Uk;}Uint8List Qk()=>Sk();Uint8List HG(){return new Uint8List.view(Uk.buffer,Wk+Uk.offsetInBytes,Rk);}void Tk(List<int> A){this.RD.setRange(Wk,Wk+A.length,A);}xi()=>vZ.yZ(RD);String toString()=>"ASN1Object(tag=${tag.toRadixString(16)} valueByteLength=${Rk}) startpos=${Wk} bytes=${xi()}";}class FQ extends IB{List<int> oY;FQ.Ij(Uint8List A):super.Sj(A);Uint8List Qk(){Rk=oY.length;super.Sk();Tk(oY);return Uk;}}class SB extends IB{Uint8List DG;SB(dynamic A,{int tag: JQ}):super(tag:tag){if(A is String)this.DG=new Uint8List.fromList(A.codeUnits);else if(A is Uint8List)this.DG=A;else if(A is List<int>)this.DG=new Uint8List.fromList(A);else throw new ArgumentError("Parameters octets should be either of type String or List<int>.");}SB.Rj(Uint8List A):super.Sj(A){DG=HG();}String get bB=>new String.fromCharCodes(DG);Uint8List Qk(){Rk=DG.length;Sk();Tk(DG);return Uk;}String toString()=>"OctetString(${bB})";}class UL{Uint8List ak;UL(this.ak);int bk=0;bool hasNext(){return bk<ak.length;}IB nY(){int A=ak[bk];bool D=(0xC0&A)==0;bool G=(0x40&A)!=0;int H=ak.length-bk;var C=new Uint8List.view(ak.buffer,bk+ak.offsetInBytes,H);IB B=null;if(D)B=ck(A,C);else if(G){if((A&bI)!=0)B=new HB.Nj(C);else throw new CH("Parser for tag ${A} not implemented yet");}else{B=new IB.Sj(C);}bk=bk+B.YZ;return B;}IB ck(int B,Uint8List A){switch (B){case bI:return new HB.Nj(A);case JQ:return new SB.Rj(A);case IQ:case Aa:return new oD.Kj(A);case NQ:return new KG.Lj(A);case xZ:return new GQ.Mj(A);case Da:return new FQ.Ij(A);case zZ:return new HQ.Oj(A);case KQ:return new EQ.Jj(A);case Ba:return new LQ.Pj(A);case Ca:return new MQ.Qj(A);default:throw new CH("Parser for tag ${B} not implemented yet");}}}class LQ extends IB{String bB;LQ.Pj(Uint8List A):super.Sj(A){var B=HG();bB=mO.decode(B);}Uint8List Qk(){var A=mO.encode(bB);Rk=A.length;Sk();Tk(A);return Uk;}String toString()=>"PrintableString(${bB})";}class HB extends IB{List<IB> i=new List();HB.Nj(Uint8List A):super.Sj(A){if((tag&0x30)==0)throw new CH("The tag ${tag} does not look like a sequence type");dk();}HB({int tag: bI}):super(tag:tag);add(IB A){i.add(A);}Uint8List Qk(){Rk=ek();super.Sk();var A=Wk;i.forEach((C){var B=C.RD;RD.setRange(A,A+B.length,B);A+= B.length;});return Uk;}int ek(){int A=0;i.forEach((B){A+= B.Qk().length;});return A;}dk(){var A=new UL(HG());while(A.hasNext()){i.add(A.nY());}}String toString(){var A=new StringBuffer("Seq[");i.forEach((B){A.write(B.toString());A.write(" ");});A.write("]");return A.toString();}}class KG extends IB{Set<IB> i=new Set<IB>();KG.Lj(Uint8List A):super.Sj(A){if((tag&0x30)==0)throw new CH("The tag ${tag} does not look like a set type");fk();}KG({int tag: NQ}):super(tag:tag);add(IB A){i.add(A);}Uint8List Qk(){Rk=ek();super.Sk();var A=Wk;i.forEach((C){var B=C.RD;RD.setRange(A,A+B.length,B);A+= B.length;});return Uk;}int ek(){int A=0;i.forEach((B){B.Qk();A+= B.RD.length;});return A;}fk(){var A=new UL(HG());while(A.hasNext()){i.add(A.nY());}}String toString(){var A=new StringBuffer("Set[");i.forEach((B){A.write(B.toString());A.write(" ");});A.write("]");return A.toString();}}class MQ extends IB{DateTime yO;MQ.Qj(Uint8List B):super.Sj(B){var C=HG();var A=mO.decode(C);var D=int.parse(A.substring(0,2));if(D>75)A="19"+A;else A="20"+A;A=A.substring(0,8)+"T"+A.substring(8);yO=DateTime.parse(A);}Uint8List Qk(){var A=yO.toUtc();var C=A.year.toString().substring(2).padLeft(2,"0");var D=A.month.toString().padLeft(2,"0");var G=A.day.toString().padLeft(2,"0");var H=A.hour.toString().padLeft(2,"0");var I=A.minute.toString().padLeft(2,"0");var K=A.second.toString().padLeft(2,"0");var L="${C}${D}${G}${H}${I}${K}Z";var B=new List<int>();B.addAll(mO.encode(L));Rk=B.length;Sk();Tk(B);return Uk;}String toString()=>"UtcTime(${yO})";}class vZ{static String yZ(List<int> C){StringBuffer A=new StringBuffer("[");bool B=false;C.forEach((D){B?A.write(", "):B=true;A.write("0x${D.toRadixString(16)}");});A.write("]");return A.toString();}}abstract class WF{static bool Ja=(){if(0.0 is int){return true;}try {return 3.modInverse(7)==-1;}catch (A){return true;}return false;}();factory WF([A,B,C]){if(Ja){return new Y(A,B,C);}else{return new a(A,B,C);}}}class a implements WF{int data;a([A,B,C]){if(A!=null){if(A is int){data=A;}else if(A is num){data=A.toInt();}else if(A is List){this.vh(A);}else{this.rG(A,B);}}}void HI(a A){A.data=data;}void qK(int A){data=A;}void rG(String A,int B){data=int.parse(A,radix:B,onError:(C)=>0);}void vh(List B,[bool G=false]){if(B==null||B.length==0){data=0;return;}bool D=false;if(!G&&B[0]&0xFF>0x7F){D=true;}if(D){int A=0;for(int C in B){A=(A<<8)|(~((C&0xFF)-256));}data=~A;}else{int A=0;for(int C in B){A=(A<<8)|(C&0xFF);}data=A;}}String toString([int A=10]){return data.toRadixString(A);}xG(){return new a(-data);}a abs(){return (data<0)?this.xG():this.vF();}int compareTo(A){if(A is num){return data.compareTo(A);}if(A is a){return data.compareTo(A.data);}return 0;}int kY(A){var C=1,B;if(A is num)A=A.toInt();if((B=A>>16)!=0){A=B;C+= 16;}if((B=A>>8)!=0){A=B;C+= 8;}if((B=A>>4)!=0){A=B;C+= 4;}if((B=A>>2)!=0){A=B;C+= 2;}if((B=A>>1)!=0){A=B;C+= 1;}return C;}void MI(int A,B){B.data=data<<A;}void ME(int A,B){B.data=data>>A;}void dB(A,B){B.data=data-A.data;}void jY(A,B){B.data=data*A.data;}qG(a A,a B,a C){B.data=data~/A.data;C.data=data%A.data;}iY(A){return new a(data%A.data);}isEven(){return data.isEven;}isOdd(){return data.isOdd;}vF(){return new a(this.data);}int ZC(){return data;}int lD(){return data.sign;}String XZ([int A=10]){return data.toRadixString(A);}void zX(A,B){data=int.parse(A,radix:B,onError:(C)=>0);}List<int> qP(){String G;bool O=false;if(data<0){G=(~data).toRadixString(16);O=true;}else{G=data.toRadixString(16);}int D=0;int L=G.length;int I=(L+1)~/2;int K=0;List A;if(O){if(L&1==1){D=-1;}int B=~int.parse(G.substring(0,D+2),radix:16);if(B<-128)B+= 256;if(B>=0){K=1;A=new List<int>(I+1);A[0]=-1;A[1]=B;}else{A=new List<int>(I);A[0]=B;}for(int C=1;C<I; ++C){int H=~int.parse(G.substring(D+(C<<1),D+(C<<1)+2),radix:16);if(H<-128)H+= 256;A[C+K]=H;}}else{if(L&1==1){D=-1;}int B=int.parse(G.substring(0,D+2),radix:16);if(B>127)B-= 256;if(B<0){K=1;A=new List<int>(I+1);A[0]=0;A[1]=B;}else{A=new List<int>(I);A[0]=B;}for(int C=1;C<I; ++C){int H=int.parse(G.substring(D+(C<<1),D+(C<<1)+2),radix:16);if(H>127)H-= 256;A[C+K]=H;}}return A;}bool XC(a A){return this.compareTo(A)==0?true:false;}void eK(a A,Function B,a C){C.data=B(data,A.data);}qY(A,B){return A&B;}DI(A){return new a(data&A.data);}rY(A,B){return A|B;}vE(A){return new a(data|A.data);}sY(A,B){return A^B;}wP(A){return new a(data^A.data);}QI(){return new a(~data);}gP(int A){return new a(data<<A);}hP(int A){return new a(data>>A);}CI(A,B){B.data=data+A.data;}a add(A){return new a(data+A.data);}a subtract(A){return new a(data-A.data);}a UP(A){return new a(data*A.data);}a JI(A){return new a(data~/A.data);}a remainder(a A){return new a(data.remainder(A.data));}xO(A){data*= A;}wO(A,B){if(B==0){data+= A;}else{throw 'dAddOffset(${A},${B}) not implemented';}}a modInverse(a A){return new a(data.modInverse(A.data));}a operator+(a A)=>add(A);a operator-(a A)=>subtract(A);a operator*(a A)=>UP(A);a operator%(a A)=>iY(A);a operator/(a A)=>JI(A);a operator~/(a A)=>JI(A);a operator-()=>this.xG();bool operator<(a A)=>compareTo(A)<0?true:false;bool operator<=(a A)=>compareTo(A)<=0?true:false;bool operator>(a A)=>compareTo(A)>0?true:false;bool operator>=(a A)=>compareTo(A)>=0?true:false;bool operator==(A)=>compareTo(A)==0?true:false;a operator&(a A)=>DI(A);a operator|(a A)=>vE(A);a operator^(a A)=>wP(A);a operator~()=>QI();a operator<<(int A)=>gP(A);a operator>>(int A)=>hP(A);}class cI<DC>{operator[](var A){return data[A];}operator[]=(var A,var B){if(A>data.length-1){data.length=A+1;}return data[A]=B;}List<DC> data=new List<DC>();}class Y implements WF{static int MG;static int BB;static int eC;static int XF;static int dI;static int PQ;static int VL;static int WL;static Y nB(){return new Y(null,null,null);}static Y YF(int B){var A=nB();A.qK(B);return A;}static Y get SE=>YF(0);static Y get QQ=>YF(1);static final List<int> RQ=const[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];static int Ka;static int La=0xdeadbeefcafe;static bool Ma;cI<int> d;Function cK;static var SQ="0123456789abcdefghijklmnopqrstuvwxyz";static Map ZF;int Q;var e;Y([A,B,C]){Oa(28);cK=gk;this.d=new cI<int>();if(A!=null){if(A is int){this.rG(A.toString(),10);}else if(A is num){this.rG(A.toInt().toString(),10);}else if(B==null&&A is!String){this.rG(A,256);}else{this.rG(A,B);}}}gk(C,D,b,G,B,n){var H=this.d;var I=b.d;var K=D.toInt()&0x3fff,L=D.toInt()>>14;while( --n>=0){var A=H[C]&0x3fff;var O=H[C++ ]>>14;var V=L*A+O*K;A=K*A+((V&0x3fff)<<14)+I[G]+B;B=(A>>28)+(V>>14)+L*O;I[G++ ]=A&0xfffffff;}return B;}static Na(int A){MG=A;BB=MG;eC=((1<<MG)-1);XF=(1<<MG);dI=52;PQ=pow(2,dI);VL=dI-MG;WL=2*MG-dI;}static Oa(int A){if(ZF!=null)return;ZF=new Map();Ma=((La&0xffffff)==0xefcafe);Pa();Ka=(1<<26)~/RQ[RQ.length-1];Na(A);}static Pa(){SQ="0123456789abcdefghijklmnopqrstuvwxyz";ZF=new Map();int B,A;B="0".codeUnitAt(0);for(A=0;A<=9; ++A)ZF[B++ ]=A;B="a".codeUnitAt(0);for(A=10;A<36; ++A)ZF[B++ ]=A;B="A".codeUnitAt(0);for(A=10;A<36; ++A)ZF[B++ ]=A;}hk(A){return SQ[A];}ik(B,C){var A=ZF[B.codeUnitAt(C)];return (A==null)?-1:A;}void HI(Y B){var C=this.d;var D=B.d;for(var A=this.Q-1;A>=0; --A)D[A]=C[A];B.Q=this.Q;B.e=this.e;}void qK(int A){var B=this.d;this.Q=1;this.e=(A<0)?-1:0;if(A>0){B[0]=A;}else if(A<-1){B[0]=A+XF;}else{this.Q=0;}}void rG(D,int C){var G=this.d;var B;if(C==16){B=4;}else if(C==8){B=3;}else if(C==256){B=8;}else if(C==2){B=1;}else if(C==32){B=5;}else if(C==4){B=2;}else{this.zX(D,C);return;}this.Q=0;this.e=0;var I=D.length,K=false,A=0;while( --I>=0){var H=(B==8)?D[I]&0xff:ik(D,I);if(H<0){if(D[I]=="-")K=true;continue;}K=false;if(A==0){G[this.Q++ ]=H;}else if(A+B>BB){G[this.Q-1]|=(H&((1<<(BB-A))-1))<<A;G[this.Q++ ]=(H>>(BB-A));}else{G[this.Q-1]|=H<<A;}A+= B;if(A>=BB)A-= BB;}if(B==8&&(D[0]&0x80)!=0){this.e=-1;if(A>0)G[this.Q-1]|=((1<<(BB-A))-1)<<A;}this.clamp();if(K)Y.SE.dB(this,this);}String toString([int D]){var H=this.d;if(this.e<0){return "-${this.xG().toString(D)}";}var A;if(D==16){A=4;}else if(D==8){A=3;}else if(D==2){A=1;}else if(D==32){A=5;}else if(D==4){A=2;}else{return this.XZ(D);}var L=(1<<A)-1,G,I=false,K="",C=this.Q;var B=BB-(C*BB)%A;if(C-- >0){if(B<BB&&(G=H[C]>>B)>0){I=true;K=hk(G);}while(C>=0){if(B<A){G=(H[C]&((1<<B)-1))<<(A-B);G|= H[ --C]>>(B+= BB-A);}else{G=(H[C].toInt()>>(B-= A.toInt()).toInt())&L.toInt();if(B<=0){B+= BB; --C;}}if(G>0)I=true;if(I)K="${K}${hk(G)}";}}return I?K:"0";}xG(){var A=nB();Y.SE.dB(this,A);return A;}Y abs(){return (this.e<0)?this.xG():this;}int compareTo(B){if(B is num){B=new Y(B);}var D=this.d;var G=B.d;var A=this.e-B.e;if(A!=0)return A;var C=this.Q;A=C-B.Q;if(A!=0)return A;while( --C>=0)if((A=D[C]-G[C])!=0)return A;return 0;}int kY(A){var C=1,B;if(A is num)A=A.toInt();if((B=A>>16)!=0){A=B;C+= 16;}if((B=A>>8)!=0){A=B;C+= 8;}if((B=A>>4)!=0){A=B;C+= 4;}if((B=A>>2)!=0){A=B;C+= 2;}if((B=A>>1)!=0){A=B;C+= 1;}return C;}void DP(B,C){var G=this.d;var D=C.d;var A;for(A=this.Q-1;A>=0; --A)D[A+B]=G[A];for(A=B-1;A>=0; --A)D[A]=0;C.Q=this.Q+B;C.e=this.e;}void jh(B,C){var D=this.d;var G=C.d;for(var A=B;A<this.Q; ++A)G[A-B]=D[A];C.Q=JG.max(this.Q-B,0);C.e=this.e;}void MI(I,B){var K=this.d;var D=B.d;var G=I%BB;var L=BB-G;var O=(1<<L)-1;int C=I~/BB;var H=(this.e<<G)&eC;var A;for(A=this.Q-1;A>=0; --A){D[A+C+1]=(K[A]>>L)|H;H=(K[A]&O)<<G;}for(A=C-1;A>=0; --A)D[A]=0;D[C]=H;B.Q=this.Q+C+1;B.e=this.e;B.clamp();}void ME(I,C){var H=this.d;var G=C.d;C.e=this.e;var A=I~/BB;if(A>=this.Q){C.Q=0;return;}var D=I%BB;var K=BB-D;var L=(1<<D)-1;G[0]=H[A]>>D;for(var B=A+1;B<this.Q; ++B){G[B-A-1]|=(H[B]&L)<<K;G[B-A]=H[B]>>D;}if(D>0)G[this.Q-A-1]|=(this.e&L)<<K;C.Q=this.Q-A;C.clamp();}void clamp(){var A=this.d;var B=this.e&eC;while(this.Q>0&&A[this.Q-1]==B){ --this.Q;}}void dB(C,G){var H=this.d;var D=G.d;var I=C.d;int B=0;int A=0;int K=JG.min(C.Q,this.Q);while(B<K){A+= (H[B].toInt()-I[B].toInt()).toInt();D[B++ ]=A&eC;A>>= BB;if(A==4294967295){A=-1;}}if(C.Q<this.Q){A-= C.e;while(B<this.Q){A+= H[B];D[B++ ]=A&eC;A>>= BB;if(A==4294967295){A=-1;}}A+= this.e;}else{A+= this.e;while(B<C.Q){A-= I[B];D[B++ ]=A&eC;A>>= BB;if(A==4294967295){A=-1;}}A-= C.e;}G.e=(A<0)?-1:0;if(A<-1){D[B++ ]=XF+A;}else if(A>0){D[B++ ]=A;}G.Q=B;G.clamp();}bool jk=true;void jY(G,B){var K=this.d;var H=B.d;Y C=this.abs();Y D=G.abs();var I=D.d;var A=C.Q;B.Q=A+D.Q;while( --A>=0)H[A]=0;for(A=0;A<D.Q; ++A)H[A+C.Q]=C.cK(0,I[A],B,A,0,C.Q);B.e=0;B.clamp();if(this.e!=G.e){Y.SE.dB(B,B);}}qG(Y gB,D,Y A){var H=gB.abs();if(H.Q<=0)return;var V=this.abs();if(V.Q<H.Q){if(D!=null)D.qK(0);if(A!=null)this.HI(A);return;}if(A==null)A=nB();var B=nB(),CC=this.e,UD=gB.e;var mD=H.d;var L=BB-kY(mD[H.Q-1]);if(L>0){H.MI(L,B);V.MI(L,A);}else{H.HI(B);V.HI(A);}var C=B.Q;var b=B.d;var n=b[C-1];if(n==0)return;var NC=n*(1<<VL)+((C>1)?b[C-2]>>WL:0);var nD=PQ/NC,SF=(1<<VL)/NC,AH=1<<WL;var I=A.Q,O=I-C;Y G=(D==null)?nB():D;B.DP(O,G);var K=A.d;if(A.compareTo(G)>=0){K[A.Q++ ]=1;A.dB(G,A);}Y.QQ.DP(C,G);G.dB(B,B);while(B.Q<C)b[B.Q++ ]=0;while( --O>=0){var EB=(K[ --I]==n)?eC:(K[I]*nD+(K[I-1]+AH)*SF).floor();if((K[I]+=B.cK(0,EB,A,O,0,C))<EB){B.DP(O,G);A.dB(G,A);while(K[I]< --EB)A.dB(G,A);}}if(D!=null){A.jh(C,D);if(CC!=UD)Y.SE.dB(D,D);}A.Q=C;A.clamp();if(L>0)A.ME(L,A);if(CC<0)Y.SE.dB(A,A);}iY(B){var A=nB();this.abs().qG(B,null,A);if(this.e<0&&A.compareTo(Y.SE)>0)B.dB(A,A);return A;}isEven(){var A=this.d;return ((this.Q>0)?(A[0]&1):this.e)==0;}isOdd()=>!isEven();vF(){var A=nB();this.HI(A);return A;}int ZC(){var A=this.d;if(this.e<0){if(this.Q==1){return A[0]-XF;}else if(this.Q==0)return -1;}else if(this.Q==1){return A[0];}else if(this.Q==0)return 0;return ((A[1]&((1<<(32-BB))-1))<<BB)|A[0];}int WX(A){return (LN2*BB/log(A)).floor().toInt();}int lD(){var A=this.d;if(this.e<0){return -1;}else if(this.Q<=0||(this.Q==1&&A[0]<=0)){return 0;}else{return 1;}}String XZ([int A=10]){if(A==null)A=10;if(this.lD()==0||A<2||A>36)return "0";var I=this.WX(A);int G=pow(A,I);var H=YF(G),B=nB(),C=nB(),D="";this.qG(H,B,C);while(B.lD()>0){D="${(G+C.ZC()).toInt().toRadixString(A).substring(1)}${D}";B.qG(H,B,C);}return "${C.ZC().toRadixString(A)}${D}";}void zX(C,A){this.qK(0);if(A==null)A=10;var H=this.WX(A);num L=pow(A,H);bool I=false;int D=0,B=0;for(var G=0;G<C.length; ++G){var K=ik(C,G);if(K<0){if(C is String){if(C[0]=="-"&&this.lD()==0){I=true;}}continue;}B=A*B+K;if( ++D>=H){this.xO(L);this.wO(B,0);D=0;B=0;}}if(D>0){this.xO(pow(A,D));if(B!=0){this.wO(B,0);}}if(I){Y.SE.dB(this,this);}}List<int> qP(){var G=this.d;var C=this.Q;cI<int> H=new cI<int>();H[0]=this.e;var A=BB-(C*BB)%8,B,D=0;if(C-- >0){if(A<BB&&(B=G[C]>>A)!=(this.e&eC)>>A){H[D++ ]=B|(this.e<<(BB-A));}while(C>=0){if(A<8){B=(G[C]&((1<<A)-1))<<(8-A);B|= G[ --C]>>(A+= BB-8);}else{B=(G[C]>>(A-= 8))&0xff;if(A<=0){A+= BB; --C;}}if((B&0x80)!=0)B|= -256;if(D==0&&(this.e&0x80)!=(B&0x80)) ++D;if(D>0||B!=this.e)H[D++ ]=B;}}return H.data;}bool XC(Y A){return this.compareTo(A)==0?true:false;}void eK(Y B,Function D,Y C){var K=this.d;var L=B.d;var H=C.d;var A,G,I=JG.min(B.Q,this.Q);for(A=0;A<I; ++A)H[A]=D(K[A],L[A]);if(B.Q<this.Q){G=B.e&eC;for(A=I;A<this.Q; ++A)H[A]=D(K[A],G);C.Q=this.Q;}else{G=this.e&eC;for(A=I;A<B.Q; ++A)H[A]=D(G,L[A]);C.Q=B.Q;}C.e=D(this.e,B.e);C.clamp();}qY(A,B){return A&B;}DI(B){var A=nB();this.eK(B,qY,A);return A;}rY(A,B){return A|B;}vE(B){var A=nB();this.eK(B,rY,A);return A;}sY(A,B){return A^B;}wP(B){var A=nB();this.eK(B,sY,A);return A;}QI(){var C=this.d;var A=nB();var D=A.d;for(var B=0;B<this.Q; ++B){D[B]=eC&~C[B];}A.Q=this.Q;A.e=~this.e;return A;}gP(A){var B=nB();if(A<0){this.ME(-A,B);}else{this.MI(A,B);}return B;}hP(A){var B=nB();if(A<0){this.MI(-A,B);}else{this.ME(A,B);}return B;}CI(C,G){var H=this.d;var I=C.d;var D=G.d;var B=0,A=0,K=JG.min(C.Q,this.Q);while(B<K){A+= H[B]+I[B];D[B++ ]=A&eC;A>>= BB;}if(C.Q<this.Q){A+= C.e;while(B<this.Q){A+= H[B];D[B++ ]=A&eC;A>>= BB;}A+= this.e;}else{A+= this.e;while(B<C.Q){A+= I[B];D[B++ ]=A&eC;A>>= BB;}A+= C.e;}G.e=(A<0)?-1:0;if(A>0){D[B++ ]=A;}else if(A<-1)D[B++ ]=XF+A;G.Q=B;G.clamp();}Y add(B){var A=nB();this.CI(B,A);return A;}Y subtract(B){var A=nB();this.dB(B,A);return A;}Y UP(B){var A=nB();this.jY(B,A);return A;}Y JI(B){var A=nB();this.qG(B,A,null);return A;}Y remainder(Y B){Y A=nB();this.qG(B,null,A);return (A.lD()>=0)?A:(A+B);}xO(A){var B=this.d;B[this.Q]=this.cK(0,A-1,this,0,0,this.Q); ++this.Q;this.clamp();}wO(C,A){var B=this.d;while(this.Q<=A)B[this.Q++ ]=0;B[A]+=C;while(B[A]>=XF){B[A]-=XF;if( ++A>=this.Q)B[this.Q++ ]=0; ++B[A];}}Y modInverse(Y B){var K=B.isEven();if((this.isEven()&&K)||B.lD()==0)return Y.SE;var G=B.vF(),C=this.vF();if(C.lD()<0)C=-C;var H=YF(1),D=YF(0),I=YF(0),A=YF(1);while(G.lD()!=0){while(G.isEven()){G.ME(1,G);if(K){if(!H.isEven()||!D.isEven()){H.CI(this,H);D.dB(B,D);}H.ME(1,H);}else if(!D.isEven())D.dB(B,D);D.ME(1,D);}while(C.isEven()){C.ME(1,C);if(K){if(!I.isEven()||!A.isEven()){I.CI(this,I);A.dB(B,A);}I.ME(1,I);}else if(!A.isEven())A.dB(B,A);A.ME(1,A);}if(G.compareTo(C)>=0){G.dB(C,G);if(K)H.dB(I,H);D.dB(A,D);}else{C.dB(G,C);if(K)I.dB(H,I);A.dB(D,A);}}if(C.compareTo(Y.QQ)!=0)return Y.SE;if(A.compareTo(B)>=0)return kk(A.subtract(B),B);if(A.lD()<0)A.CI(B,A);else return kk(A,B);if(A.lD()<0)return kk(A.add(B),B);else return kk(A,B);}kk(A,B)=>(lD()<0)?(B-A):A;Y operator+(Y A)=>add(A);Y operator-(Y A)=>subtract(A);Y operator*(Y A)=>UP(A);Y operator%(Y A)=>remainder(A);Y operator/(Y A)=>JI(A);Y operator~/(Y A)=>JI(A);Y operator-()=>this.xG();bool operator<(Y A)=>compareTo(A)<0?true:false;bool operator<=(Y A)=>compareTo(A)<=0?true:false;bool operator>(Y A)=>compareTo(A)>0?true:false;bool operator>=(Y A)=>compareTo(A)>=0?true:false;bool operator==(A)=>compareTo(A)==0?true:false;Y operator&(Y A)=>DI(A);Y operator|(Y A)=>vE(A);Y operator^(Y A)=>wP(A);Y operator~()=>QI();Y operator<<(int A)=>gP(A);Y operator>>(int A)=>hP(A);}const lC=0x2e;const ID=0x2f;const dM=0x3a;const xT=0x41;const yT=0x5a;const zT=0x61;const AU=0x7a;const UG=0x5c;const int TQ=0x09;const int XL=0x0A;const int UQ=0x0D;const int Qa=0x20;const int YL=0x2B;const int ZL=0x2D;const int eI=0x2E;const int AF=0x30;const int fI=0x39;const int Ra=0x46;const int Sa=0x4E;const int Ta=0x54;const int aL=0x61;const int VQ=0x66;const int Ua=0x6E;const int Va=0x6F;const int Wa=0x74;const int Xa=0x78;const int Ya=0x7E;abstract class UT{}abstract class Uc{}class xI extends ac{static const VT=16;bool lk;List<List<int>> mk;int nk;int ok;int pk;int qk;int rk;int get blockSize=>VT;void reset(){nk=0;ok=pk=qk=rk=0;lk=false;mk=null;}void init(bool K,UT L){var H=(L as MH).key;int B=(H.lengthInBytes/4).floor();if(((B!=4)&&(B!=6)&&(B!=8))||((B*4)!=H.lengthInBytes)){throw new ArgumentError("Key length must be 128/192/256 bits");}this.lk=K;nk=B+6;mk=new List.generate(nk+1,(int A)=>new List<int>(4));var O=new ByteData.view((L as MH).key.buffer);for(var A=0,I=0;A<H.lengthInBytes;A+= 4,I++ ){var C=OH(O,A,Endianness.LITTLE_ENDIAN);mk[I>>2][I&3]=C;}int V=(nk+1)<<2;for(int A=B;A<V;A++ ){int D=mk[(A-1)>>2][(A-1)&3].toInt();if((A%B)==0){D=WT(yI(D,8))^Zc[((A/B)-1).floor()];}else if((B>6)&&((A%B)==4)){D=WT(D);}var C=mk[(A-B)>>2][(A-B)&3]^D;mk[A>>2][A&3]=C;}if(!K){for(var G=1;G<nk;G++ ){for(var A=0;A<4;A++ ){var C=Yc(mk[G][A].toInt());mk[G][A]=C;}}}}int zY(Uint8List C,int A,Uint8List D,int B){if(mk==null){throw new StateError("AES engine not initialised");}if((A+(32/2))>C.lengthInBytes){throw new ArgumentError("Input buffer too short");}if((B+(32/2))>D.lengthInBytes){throw new ArgumentError("Output buffer too short");}var G=new ByteData.view(C.buffer);var H=new ByteData.view(D.buffer);if(lk){sk(G,A);tk(mk);uk(H,B);}else{sk(G,A);vk(mk);uk(H,B);}return VT;}void tk(List<List<int>> B){int A,C,D,G,H;ok^= B[0][0].toInt();pk^= B[0][1].toInt();qk^= B[0][2].toInt();rk^= B[0][3].toInt();A=1;while(A<nk-1){C=xC[ok&255]^yC[(pk>>8)&255]^zC[(qk>>16)&255]^AD[(rk>>24)&255]^B[A][0].toInt();D=xC[pk&255]^yC[(qk>>8)&255]^zC[(rk>>16)&255]^AD[(ok>>24)&255]^B[A][1].toInt();G=xC[qk&255]^yC[(rk>>8)&255]^zC[(ok>>16)&255]^AD[(pk>>24)&255]^B[A][2].toInt();H=xC[rk&255]^yC[(ok>>8)&255]^zC[(pk>>16)&255]^AD[(qk>>24)&255]^B[A][3].toInt();A++ ;ok=xC[C&255]^yC[(D>>8)&255]^zC[(G>>16)&255]^AD[(H>>24)&255]^B[A][0].toInt();pk=xC[D&255]^yC[(G>>8)&255]^zC[(H>>16)&255]^AD[(C>>24)&255]^B[A][1].toInt();qk=xC[G&255]^yC[(H>>8)&255]^zC[(C>>16)&255]^AD[(D>>24)&255]^B[A][2].toInt();rk=xC[H&255]^yC[(C>>8)&255]^zC[(D>>16)&255]^AD[(G>>24)&255]^B[A][3].toInt();A++ ;}C=xC[ok&255]^yC[(pk>>8)&255]^zC[(qk>>16)&255]^AD[(rk>>24)&255]^B[A][0].toInt();D=xC[pk&255]^yC[(qk>>8)&255]^zC[(rk>>16)&255]^AD[(ok>>24)&255]^B[A][1].toInt();G=xC[qk&255]^yC[(rk>>8)&255]^zC[(ok>>16)&255]^AD[(pk>>24)&255]^B[A][2].toInt();H=xC[rk&255]^yC[(ok>>8)&255]^zC[(pk>>16)&255]^AD[(qk>>24)&255]^B[A][3].toInt();A++ ;ok=(qB[C&255]&255)^((qB[(D>>8)&255]&255)<<8)^((qB[(G>>16)&255]&255)<<16)^(qB[(H>>24)&255]<<24)^B[A][0].toInt();pk=(qB[D&255]&255)^((qB[(G>>8)&255]&255)<<8)^((qB[(H>>16)&255]&255)<<16)^(qB[(C>>24)&255]<<24)^B[A][1].toInt();qk=(qB[G&255]&255)^((qB[(H>>8)&255]&255)<<8)^((qB[(C>>16)&255]&255)<<16)^(qB[(D>>24)&255]<<24)^B[A][2].toInt();rk=(qB[H&255]&255)^((qB[(C>>8)&255]&255)<<8)^((qB[(D>>16)&255]&255)<<16)^(qB[(G>>24)&255]<<24)^B[A][3].toInt();}void vk(List<List<int>> A){int B,C,D,G,H;ok^= A[nk][0].toInt();pk^= A[nk][1].toInt();qk^= A[nk][2].toInt();rk^= A[nk][3].toInt();B=nk-1;while(B>1){C=BD[ok&255]^CD[(rk>>8)&255]^DD[(qk>>16)&255]^ED[(pk>>24)&255]^A[B][0].toInt();D=BD[pk&255]^CD[(ok>>8)&255]^DD[(rk>>16)&255]^ED[(qk>>24)&255]^A[B][1].toInt();G=BD[qk&255]^CD[(pk>>8)&255]^DD[(ok>>16)&255]^ED[(rk>>24)&255]^A[B][2].toInt();H=BD[rk&255]^CD[(qk>>8)&255]^DD[(pk>>16)&255]^ED[(ok>>24)&255]^A[B][3].toInt();B-- ;ok=BD[C&255]^CD[(H>>8)&255]^DD[(G>>16)&255]^ED[(D>>24)&255]^A[B][0].toInt();pk=BD[D&255]^CD[(C>>8)&255]^DD[(H>>16)&255]^ED[(G>>24)&255]^A[B][1].toInt();qk=BD[G&255]^CD[(D>>8)&255]^DD[(C>>16)&255]^ED[(H>>24)&255]^A[B][2].toInt();rk=BD[H&255]^CD[(G>>8)&255]^DD[(D>>16)&255]^ED[(C>>24)&255]^A[B][3].toInt();B-- ;}C=BD[ok&255]^CD[(rk>>8)&255]^DD[(qk>>16)&255]^ED[(pk>>24)&255]^A[B][0].toInt();D=BD[pk&255]^CD[(ok>>8)&255]^DD[(rk>>16)&255]^ED[(qk>>24)&255]^A[B][1].toInt();G=BD[qk&255]^CD[(pk>>8)&255]^DD[(ok>>16)&255]^ED[(rk>>24)&255]^A[B][2].toInt();H=BD[rk&255]^CD[(qk>>8)&255]^DD[(pk>>16)&255]^ED[(ok>>24)&255]^A[B][3].toInt();ok=(PC[C&255]&255)^((PC[(H>>8)&255]&255)<<8)^((PC[(G>>16)&255]&255)<<16)^(PC[(D>>24)&255]<<24)^A[0][0].toInt();pk=(PC[D&255]&255)^((PC[(C>>8)&255]&255)<<8)^((PC[(H>>16)&255]&255)<<16)^(PC[(G>>24)&255]<<24)^A[0][1].toInt();qk=(PC[G&255]&255)^((PC[(D>>8)&255]&255)<<8)^((PC[(C>>16)&255]&255)<<16)^(PC[(H>>24)&255]<<24)^A[0][2].toInt();rk=(PC[H&255]&255)^((PC[(G>>8)&255]&255)<<8)^((PC[(D>>16)&255]&255)<<16)^(PC[(C>>24)&255]<<24)^A[0][3].toInt();}void sk(ByteData A,int B){ok=OH(A,B,Endianness.LITTLE_ENDIAN);pk=OH(A,B+4,Endianness.LITTLE_ENDIAN);qk=OH(A,B+8,Endianness.LITTLE_ENDIAN);rk=OH(A,B+12,Endianness.LITTLE_ENDIAN);}void uk(ByteData A,int B){zI(ok,A,B,Endianness.LITTLE_ENDIAN);zI(pk,A,B+4,Endianness.LITTLE_ENDIAN);zI(qk,A,B+8,Endianness.LITTLE_ENDIAN);zI(rk,A,B+12,Endianness.LITTLE_ENDIAN);}}int yI(int A,int B)=>ec(A,B);const int Vc=0x80808080;const int Wc=0x7f7f7f7f;const int Xc=0x0000001b;int HM(int A){var B=dc((A&Vc),7);return (((A&Wc)<<1)^B*Xc);}int Yc(int D){int A=HM(D);int B=HM(A);int G=HM(B);int C=D^G;return A^B^G^yI(A^C,8)^yI(B^C,16)^yI(C,24);}int WT(int A){return (qB[A&255]&255|((qB[(A>>8)&255]&255)<<8)|((qB[(A>>16)&255]&255)<<16)|qB[(A>>24)&255]<<24);}final qB=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];final PC=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];final Zc=[0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91];final xC=[0xa56363c6,0x847c7cf8,0x997777ee,0x8d7b7bf6,0x0df2f2ff,0xbd6b6bd6,0xb16f6fde,0x54c5c591,0x50303060,0x03010102,0xa96767ce,0x7d2b2b56,0x19fefee7,0x62d7d7b5,0xe6abab4d,0x9a7676ec,0x45caca8f,0x9d82821f,0x40c9c989,0x877d7dfa,0x15fafaef,0xeb5959b2,0xc947478e,0x0bf0f0fb,0xecadad41,0x67d4d4b3,0xfda2a25f,0xeaafaf45,0xbf9c9c23,0xf7a4a453,0x967272e4,0x5bc0c09b,0xc2b7b775,0x1cfdfde1,0xae93933d,0x6a26264c,0x5a36366c,0x413f3f7e,0x02f7f7f5,0x4fcccc83,0x5c343468,0xf4a5a551,0x34e5e5d1,0x08f1f1f9,0x937171e2,0x73d8d8ab,0x53313162,0x3f15152a,0x0c040408,0x52c7c795,0x65232346,0x5ec3c39d,0x28181830,0xa1969637,0x0f05050a,0xb59a9a2f,0x0907070e,0x36121224,0x9b80801b,0x3de2e2df,0x26ebebcd,0x6927274e,0xcdb2b27f,0x9f7575ea,0x1b090912,0x9e83831d,0x742c2c58,0x2e1a1a34,0x2d1b1b36,0xb26e6edc,0xee5a5ab4,0xfba0a05b,0xf65252a4,0x4d3b3b76,0x61d6d6b7,0xceb3b37d,0x7b292952,0x3ee3e3dd,0x712f2f5e,0x97848413,0xf55353a6,0x68d1d1b9,0x00000000,0x2cededc1,0x60202040,0x1ffcfce3,0xc8b1b179,0xed5b5bb6,0xbe6a6ad4,0x46cbcb8d,0xd9bebe67,0x4b393972,0xde4a4a94,0xd44c4c98,0xe85858b0,0x4acfcf85,0x6bd0d0bb,0x2aefefc5,0xe5aaaa4f,0x16fbfbed,0xc5434386,0xd74d4d9a,0x55333366,0x94858511,0xcf45458a,0x10f9f9e9,0x06020204,0x817f7ffe,0xf05050a0,0x443c3c78,0xba9f9f25,0xe3a8a84b,0xf35151a2,0xfea3a35d,0xc0404080,0x8a8f8f05,0xad92923f,0xbc9d9d21,0x48383870,0x04f5f5f1,0xdfbcbc63,0xc1b6b677,0x75dadaaf,0x63212142,0x30101020,0x1affffe5,0x0ef3f3fd,0x6dd2d2bf,0x4ccdcd81,0x140c0c18,0x35131326,0x2fececc3,0xe15f5fbe,0xa2979735,0xcc444488,0x3917172e,0x57c4c493,0xf2a7a755,0x827e7efc,0x473d3d7a,0xac6464c8,0xe75d5dba,0x2b191932,0x957373e6,0xa06060c0,0x98818119,0xd14f4f9e,0x7fdcdca3,0x66222244,0x7e2a2a54,0xab90903b,0x8388880b,0xca46468c,0x29eeeec7,0xd3b8b86b,0x3c141428,0x79dedea7,0xe25e5ebc,0x1d0b0b16,0x76dbdbad,0x3be0e0db,0x56323264,0x4e3a3a74,0x1e0a0a14,0xdb494992,0x0a06060c,0x6c242448,0xe45c5cb8,0x5dc2c29f,0x6ed3d3bd,0xefacac43,0xa66262c4,0xa8919139,0xa4959531,0x37e4e4d3,0x8b7979f2,0x32e7e7d5,0x43c8c88b,0x5937376e,0xb76d6dda,0x8c8d8d01,0x64d5d5b1,0xd24e4e9c,0xe0a9a949,0xb46c6cd8,0xfa5656ac,0x07f4f4f3,0x25eaeacf,0xaf6565ca,0x8e7a7af4,0xe9aeae47,0x18080810,0xd5baba6f,0x887878f0,0x6f25254a,0x722e2e5c,0x241c1c38,0xf1a6a657,0xc7b4b473,0x51c6c697,0x23e8e8cb,0x7cdddda1,0x9c7474e8,0x211f1f3e,0xdd4b4b96,0xdcbdbd61,0x868b8b0d,0x858a8a0f,0x907070e0,0x423e3e7c,0xc4b5b571,0xaa6666cc,0xd8484890,0x05030306,0x01f6f6f7,0x120e0e1c,0xa36161c2,0x5f35356a,0xf95757ae,0xd0b9b969,0x91868617,0x58c1c199,0x271d1d3a,0xb99e9e27,0x38e1e1d9,0x13f8f8eb,0xb398982b,0x33111122,0xbb6969d2,0x70d9d9a9,0x898e8e07,0xa7949433,0xb69b9b2d,0x221e1e3c,0x92878715,0x20e9e9c9,0x49cece87,0xff5555aa,0x78282850,0x7adfdfa5,0x8f8c8c03,0xf8a1a159,0x80898909,0x170d0d1a,0xdabfbf65,0x31e6e6d7,0xc6424284,0xb86868d0,0xc3414182,0xb0999929,0x772d2d5a,0x110f0f1e,0xcbb0b07b,0xfc5454a8,0xd6bbbb6d,0x3a16162c];final yC=[0x6363c6a5,0x7c7cf884,0x7777ee99,0x7b7bf68d,0xf2f2ff0d,0x6b6bd6bd,0x6f6fdeb1,0xc5c59154,0x30306050,0x01010203,0x6767cea9,0x2b2b567d,0xfefee719,0xd7d7b562,0xabab4de6,0x7676ec9a,0xcaca8f45,0x82821f9d,0xc9c98940,0x7d7dfa87,0xfafaef15,0x5959b2eb,0x47478ec9,0xf0f0fb0b,0xadad41ec,0xd4d4b367,0xa2a25ffd,0xafaf45ea,0x9c9c23bf,0xa4a453f7,0x7272e496,0xc0c09b5b,0xb7b775c2,0xfdfde11c,0x93933dae,0x26264c6a,0x36366c5a,0x3f3f7e41,0xf7f7f502,0xcccc834f,0x3434685c,0xa5a551f4,0xe5e5d134,0xf1f1f908,0x7171e293,0xd8d8ab73,0x31316253,0x15152a3f,0x0404080c,0xc7c79552,0x23234665,0xc3c39d5e,0x18183028,0x969637a1,0x05050a0f,0x9a9a2fb5,0x07070e09,0x12122436,0x80801b9b,0xe2e2df3d,0xebebcd26,0x27274e69,0xb2b27fcd,0x7575ea9f,0x0909121b,0x83831d9e,0x2c2c5874,0x1a1a342e,0x1b1b362d,0x6e6edcb2,0x5a5ab4ee,0xa0a05bfb,0x5252a4f6,0x3b3b764d,0xd6d6b761,0xb3b37dce,0x2929527b,0xe3e3dd3e,0x2f2f5e71,0x84841397,0x5353a6f5,0xd1d1b968,0x00000000,0xededc12c,0x20204060,0xfcfce31f,0xb1b179c8,0x5b5bb6ed,0x6a6ad4be,0xcbcb8d46,0xbebe67d9,0x3939724b,0x4a4a94de,0x4c4c98d4,0x5858b0e8,0xcfcf854a,0xd0d0bb6b,0xefefc52a,0xaaaa4fe5,0xfbfbed16,0x434386c5,0x4d4d9ad7,0x33336655,0x85851194,0x45458acf,0xf9f9e910,0x02020406,0x7f7ffe81,0x5050a0f0,0x3c3c7844,0x9f9f25ba,0xa8a84be3,0x5151a2f3,0xa3a35dfe,0x404080c0,0x8f8f058a,0x92923fad,0x9d9d21bc,0x38387048,0xf5f5f104,0xbcbc63df,0xb6b677c1,0xdadaaf75,0x21214263,0x10102030,0xffffe51a,0xf3f3fd0e,0xd2d2bf6d,0xcdcd814c,0x0c0c1814,0x13132635,0xececc32f,0x5f5fbee1,0x979735a2,0x444488cc,0x17172e39,0xc4c49357,0xa7a755f2,0x7e7efc82,0x3d3d7a47,0x6464c8ac,0x5d5dbae7,0x1919322b,0x7373e695,0x6060c0a0,0x81811998,0x4f4f9ed1,0xdcdca37f,0x22224466,0x2a2a547e,0x90903bab,0x88880b83,0x46468cca,0xeeeec729,0xb8b86bd3,0x1414283c,0xdedea779,0x5e5ebce2,0x0b0b161d,0xdbdbad76,0xe0e0db3b,0x32326456,0x3a3a744e,0x0a0a141e,0x494992db,0x06060c0a,0x2424486c,0x5c5cb8e4,0xc2c29f5d,0xd3d3bd6e,0xacac43ef,0x6262c4a6,0x919139a8,0x959531a4,0xe4e4d337,0x7979f28b,0xe7e7d532,0xc8c88b43,0x37376e59,0x6d6ddab7,0x8d8d018c,0xd5d5b164,0x4e4e9cd2,0xa9a949e0,0x6c6cd8b4,0x5656acfa,0xf4f4f307,0xeaeacf25,0x6565caaf,0x7a7af48e,0xaeae47e9,0x08081018,0xbaba6fd5,0x7878f088,0x25254a6f,0x2e2e5c72,0x1c1c3824,0xa6a657f1,0xb4b473c7,0xc6c69751,0xe8e8cb23,0xdddda17c,0x7474e89c,0x1f1f3e21,0x4b4b96dd,0xbdbd61dc,0x8b8b0d86,0x8a8a0f85,0x7070e090,0x3e3e7c42,0xb5b571c4,0x6666ccaa,0x484890d8,0x03030605,0xf6f6f701,0x0e0e1c12,0x6161c2a3,0x35356a5f,0x5757aef9,0xb9b969d0,0x86861791,0xc1c19958,0x1d1d3a27,0x9e9e27b9,0xe1e1d938,0xf8f8eb13,0x98982bb3,0x11112233,0x6969d2bb,0xd9d9a970,0x8e8e0789,0x949433a7,0x9b9b2db6,0x1e1e3c22,0x87871592,0xe9e9c920,0xcece8749,0x5555aaff,0x28285078,0xdfdfa57a,0x8c8c038f,0xa1a159f8,0x89890980,0x0d0d1a17,0xbfbf65da,0xe6e6d731,0x424284c6,0x6868d0b8,0x414182c3,0x999929b0,0x2d2d5a77,0x0f0f1e11,0xb0b07bcb,0x5454a8fc,0xbbbb6dd6,0x16162c3a];final zC=[0x63c6a563,0x7cf8847c,0x77ee9977,0x7bf68d7b,0xf2ff0df2,0x6bd6bd6b,0x6fdeb16f,0xc59154c5,0x30605030,0x01020301,0x67cea967,0x2b567d2b,0xfee719fe,0xd7b562d7,0xab4de6ab,0x76ec9a76,0xca8f45ca,0x821f9d82,0xc98940c9,0x7dfa877d,0xfaef15fa,0x59b2eb59,0x478ec947,0xf0fb0bf0,0xad41ecad,0xd4b367d4,0xa25ffda2,0xaf45eaaf,0x9c23bf9c,0xa453f7a4,0x72e49672,0xc09b5bc0,0xb775c2b7,0xfde11cfd,0x933dae93,0x264c6a26,0x366c5a36,0x3f7e413f,0xf7f502f7,0xcc834fcc,0x34685c34,0xa551f4a5,0xe5d134e5,0xf1f908f1,0x71e29371,0xd8ab73d8,0x31625331,0x152a3f15,0x04080c04,0xc79552c7,0x23466523,0xc39d5ec3,0x18302818,0x9637a196,0x050a0f05,0x9a2fb59a,0x070e0907,0x12243612,0x801b9b80,0xe2df3de2,0xebcd26eb,0x274e6927,0xb27fcdb2,0x75ea9f75,0x09121b09,0x831d9e83,0x2c58742c,0x1a342e1a,0x1b362d1b,0x6edcb26e,0x5ab4ee5a,0xa05bfba0,0x52a4f652,0x3b764d3b,0xd6b761d6,0xb37dceb3,0x29527b29,0xe3dd3ee3,0x2f5e712f,0x84139784,0x53a6f553,0xd1b968d1,0x00000000,0xedc12ced,0x20406020,0xfce31ffc,0xb179c8b1,0x5bb6ed5b,0x6ad4be6a,0xcb8d46cb,0xbe67d9be,0x39724b39,0x4a94de4a,0x4c98d44c,0x58b0e858,0xcf854acf,0xd0bb6bd0,0xefc52aef,0xaa4fe5aa,0xfbed16fb,0x4386c543,0x4d9ad74d,0x33665533,0x85119485,0x458acf45,0xf9e910f9,0x02040602,0x7ffe817f,0x50a0f050,0x3c78443c,0x9f25ba9f,0xa84be3a8,0x51a2f351,0xa35dfea3,0x4080c040,0x8f058a8f,0x923fad92,0x9d21bc9d,0x38704838,0xf5f104f5,0xbc63dfbc,0xb677c1b6,0xdaaf75da,0x21426321,0x10203010,0xffe51aff,0xf3fd0ef3,0xd2bf6dd2,0xcd814ccd,0x0c18140c,0x13263513,0xecc32fec,0x5fbee15f,0x9735a297,0x4488cc44,0x172e3917,0xc49357c4,0xa755f2a7,0x7efc827e,0x3d7a473d,0x64c8ac64,0x5dbae75d,0x19322b19,0x73e69573,0x60c0a060,0x81199881,0x4f9ed14f,0xdca37fdc,0x22446622,0x2a547e2a,0x903bab90,0x880b8388,0x468cca46,0xeec729ee,0xb86bd3b8,0x14283c14,0xdea779de,0x5ebce25e,0x0b161d0b,0xdbad76db,0xe0db3be0,0x32645632,0x3a744e3a,0x0a141e0a,0x4992db49,0x060c0a06,0x24486c24,0x5cb8e45c,0xc29f5dc2,0xd3bd6ed3,0xac43efac,0x62c4a662,0x9139a891,0x9531a495,0xe4d337e4,0x79f28b79,0xe7d532e7,0xc88b43c8,0x376e5937,0x6ddab76d,0x8d018c8d,0xd5b164d5,0x4e9cd24e,0xa949e0a9,0x6cd8b46c,0x56acfa56,0xf4f307f4,0xeacf25ea,0x65caaf65,0x7af48e7a,0xae47e9ae,0x08101808,0xba6fd5ba,0x78f08878,0x254a6f25,0x2e5c722e,0x1c38241c,0xa657f1a6,0xb473c7b4,0xc69751c6,0xe8cb23e8,0xdda17cdd,0x74e89c74,0x1f3e211f,0x4b96dd4b,0xbd61dcbd,0x8b0d868b,0x8a0f858a,0x70e09070,0x3e7c423e,0xb571c4b5,0x66ccaa66,0x4890d848,0x03060503,0xf6f701f6,0x0e1c120e,0x61c2a361,0x356a5f35,0x57aef957,0xb969d0b9,0x86179186,0xc19958c1,0x1d3a271d,0x9e27b99e,0xe1d938e1,0xf8eb13f8,0x982bb398,0x11223311,0x69d2bb69,0xd9a970d9,0x8e07898e,0x9433a794,0x9b2db69b,0x1e3c221e,0x87159287,0xe9c920e9,0xce8749ce,0x55aaff55,0x28507828,0xdfa57adf,0x8c038f8c,0xa159f8a1,0x89098089,0x0d1a170d,0xbf65dabf,0xe6d731e6,0x4284c642,0x68d0b868,0x4182c341,0x9929b099,0x2d5a772d,0x0f1e110f,0xb07bcbb0,0x54a8fc54,0xbb6dd6bb,0x162c3a16];final AD=[0xc6a56363,0xf8847c7c,0xee997777,0xf68d7b7b,0xff0df2f2,0xd6bd6b6b,0xdeb16f6f,0x9154c5c5,0x60503030,0x02030101,0xcea96767,0x567d2b2b,0xe719fefe,0xb562d7d7,0x4de6abab,0xec9a7676,0x8f45caca,0x1f9d8282,0x8940c9c9,0xfa877d7d,0xef15fafa,0xb2eb5959,0x8ec94747,0xfb0bf0f0,0x41ecadad,0xb367d4d4,0x5ffda2a2,0x45eaafaf,0x23bf9c9c,0x53f7a4a4,0xe4967272,0x9b5bc0c0,0x75c2b7b7,0xe11cfdfd,0x3dae9393,0x4c6a2626,0x6c5a3636,0x7e413f3f,0xf502f7f7,0x834fcccc,0x685c3434,0x51f4a5a5,0xd134e5e5,0xf908f1f1,0xe2937171,0xab73d8d8,0x62533131,0x2a3f1515,0x080c0404,0x9552c7c7,0x46652323,0x9d5ec3c3,0x30281818,0x37a19696,0x0a0f0505,0x2fb59a9a,0x0e090707,0x24361212,0x1b9b8080,0xdf3de2e2,0xcd26ebeb,0x4e692727,0x7fcdb2b2,0xea9f7575,0x121b0909,0x1d9e8383,0x58742c2c,0x342e1a1a,0x362d1b1b,0xdcb26e6e,0xb4ee5a5a,0x5bfba0a0,0xa4f65252,0x764d3b3b,0xb761d6d6,0x7dceb3b3,0x527b2929,0xdd3ee3e3,0x5e712f2f,0x13978484,0xa6f55353,0xb968d1d1,0x00000000,0xc12ceded,0x40602020,0xe31ffcfc,0x79c8b1b1,0xb6ed5b5b,0xd4be6a6a,0x8d46cbcb,0x67d9bebe,0x724b3939,0x94de4a4a,0x98d44c4c,0xb0e85858,0x854acfcf,0xbb6bd0d0,0xc52aefef,0x4fe5aaaa,0xed16fbfb,0x86c54343,0x9ad74d4d,0x66553333,0x11948585,0x8acf4545,0xe910f9f9,0x04060202,0xfe817f7f,0xa0f05050,0x78443c3c,0x25ba9f9f,0x4be3a8a8,0xa2f35151,0x5dfea3a3,0x80c04040,0x058a8f8f,0x3fad9292,0x21bc9d9d,0x70483838,0xf104f5f5,0x63dfbcbc,0x77c1b6b6,0xaf75dada,0x42632121,0x20301010,0xe51affff,0xfd0ef3f3,0xbf6dd2d2,0x814ccdcd,0x18140c0c,0x26351313,0xc32fecec,0xbee15f5f,0x35a29797,0x88cc4444,0x2e391717,0x9357c4c4,0x55f2a7a7,0xfc827e7e,0x7a473d3d,0xc8ac6464,0xbae75d5d,0x322b1919,0xe6957373,0xc0a06060,0x19988181,0x9ed14f4f,0xa37fdcdc,0x44662222,0x547e2a2a,0x3bab9090,0x0b838888,0x8cca4646,0xc729eeee,0x6bd3b8b8,0x283c1414,0xa779dede,0xbce25e5e,0x161d0b0b,0xad76dbdb,0xdb3be0e0,0x64563232,0x744e3a3a,0x141e0a0a,0x92db4949,0x0c0a0606,0x486c2424,0xb8e45c5c,0x9f5dc2c2,0xbd6ed3d3,0x43efacac,0xc4a66262,0x39a89191,0x31a49595,0xd337e4e4,0xf28b7979,0xd532e7e7,0x8b43c8c8,0x6e593737,0xdab76d6d,0x018c8d8d,0xb164d5d5,0x9cd24e4e,0x49e0a9a9,0xd8b46c6c,0xacfa5656,0xf307f4f4,0xcf25eaea,0xcaaf6565,0xf48e7a7a,0x47e9aeae,0x10180808,0x6fd5baba,0xf0887878,0x4a6f2525,0x5c722e2e,0x38241c1c,0x57f1a6a6,0x73c7b4b4,0x9751c6c6,0xcb23e8e8,0xa17cdddd,0xe89c7474,0x3e211f1f,0x96dd4b4b,0x61dcbdbd,0x0d868b8b,0x0f858a8a,0xe0907070,0x7c423e3e,0x71c4b5b5,0xccaa6666,0x90d84848,0x06050303,0xf701f6f6,0x1c120e0e,0xc2a36161,0x6a5f3535,0xaef95757,0x69d0b9b9,0x17918686,0x9958c1c1,0x3a271d1d,0x27b99e9e,0xd938e1e1,0xeb13f8f8,0x2bb39898,0x22331111,0xd2bb6969,0xa970d9d9,0x07898e8e,0x33a79494,0x2db69b9b,0x3c221e1e,0x15928787,0xc920e9e9,0x8749cece,0xaaff5555,0x50782828,0xa57adfdf,0x038f8c8c,0x59f8a1a1,0x09808989,0x1a170d0d,0x65dabfbf,0xd731e6e6,0x84c64242,0xd0b86868,0x82c34141,0x29b09999,0x5a772d2d,0x1e110f0f,0x7bcbb0b0,0xa8fc5454,0x6dd6bbbb,0x2c3a1616];final BD=[0x50a7f451,0x5365417e,0xc3a4171a,0x965e273a,0xcb6bab3b,0xf1459d1f,0xab58faac,0x9303e34b,0x55fa3020,0xf66d76ad,0x9176cc88,0x254c02f5,0xfcd7e54f,0xd7cb2ac5,0x80443526,0x8fa362b5,0x495ab1de,0x671bba25,0x980eea45,0xe1c0fe5d,0x02752fc3,0x12f04c81,0xa397468d,0xc6f9d36b,0xe75f8f03,0x959c9215,0xeb7a6dbf,0xda595295,0x2d83bed4,0xd3217458,0x2969e049,0x44c8c98e,0x6a89c275,0x78798ef4,0x6b3e5899,0xdd71b927,0xb64fe1be,0x17ad88f0,0x66ac20c9,0xb43ace7d,0x184adf63,0x82311ae5,0x60335197,0x457f5362,0xe07764b1,0x84ae6bbb,0x1ca081fe,0x942b08f9,0x58684870,0x19fd458f,0x876cde94,0xb7f87b52,0x23d373ab,0xe2024b72,0x578f1fe3,0x2aab5566,0x0728ebb2,0x03c2b52f,0x9a7bc586,0xa50837d3,0xf2872830,0xb2a5bf23,0xba6a0302,0x5c8216ed,0x2b1ccf8a,0x92b479a7,0xf0f207f3,0xa1e2694e,0xcdf4da65,0xd5be0506,0x1f6234d1,0x8afea6c4,0x9d532e34,0xa055f3a2,0x32e18a05,0x75ebf6a4,0x39ec830b,0xaaef6040,0x069f715e,0x51106ebd,0xf98a213e,0x3d06dd96,0xae053edd,0x46bde64d,0xb58d5491,0x055dc471,0x6fd40604,0xff155060,0x24fb9819,0x97e9bdd6,0xcc434089,0x779ed967,0xbd42e8b0,0x888b8907,0x385b19e7,0xdbeec879,0x470a7ca1,0xe90f427c,0xc91e84f8,0x00000000,0x83868009,0x48ed2b32,0xac70111e,0x4e725a6c,0xfbff0efd,0x5638850f,0x1ed5ae3d,0x27392d36,0x64d90f0a,0x21a65c68,0xd1545b9b,0x3a2e3624,0xb1670a0c,0x0fe75793,0xd296eeb4,0x9e919b1b,0x4fc5c080,0xa220dc61,0x694b775a,0x161a121c,0x0aba93e2,0xe52aa0c0,0x43e0223c,0x1d171b12,0x0b0d090e,0xadc78bf2,0xb9a8b62d,0xc8a91e14,0x8519f157,0x4c0775af,0xbbdd99ee,0xfd607fa3,0x9f2601f7,0xbcf5725c,0xc53b6644,0x347efb5b,0x7629438b,0xdcc623cb,0x68fcedb6,0x63f1e4b8,0xcadc31d7,0x10856342,0x40229713,0x2011c684,0x7d244a85,0xf83dbbd2,0x1132f9ae,0x6da129c7,0x4b2f9e1d,0xf330b2dc,0xec52860d,0xd0e3c177,0x6c16b32b,0x99b970a9,0xfa489411,0x2264e947,0xc48cfca8,0x1a3ff0a0,0xd82c7d56,0xef903322,0xc74e4987,0xc1d138d9,0xfea2ca8c,0x360bd498,0xcf81f5a6,0x28de7aa5,0x268eb7da,0xa4bfad3f,0xe49d3a2c,0x0d927850,0x9bcc5f6a,0x62467e54,0xc2138df6,0xe8b8d890,0x5ef7392e,0xf5afc382,0xbe805d9f,0x7c93d069,0xa92dd56f,0xb31225cf,0x3b99acc8,0xa77d1810,0x6e639ce8,0x7bbb3bdb,0x097826cd,0xf418596e,0x01b79aec,0xa89a4f83,0x656e95e6,0x7ee6ffaa,0x08cfbc21,0xe6e815ef,0xd99be7ba,0xce366f4a,0xd4099fea,0xd67cb029,0xafb2a431,0x31233f2a,0x3094a5c6,0xc066a235,0x37bc4e74,0xa6ca82fc,0xb0d090e0,0x15d8a733,0x4a9804f1,0xf7daec41,0x0e50cd7f,0x2ff69117,0x8dd64d76,0x4db0ef43,0x544daacc,0xdf0496e4,0xe3b5d19e,0x1b886a4c,0xb81f2cc1,0x7f516546,0x04ea5e9d,0x5d358c01,0x737487fa,0x2e410bfb,0x5a1d67b3,0x52d2db92,0x335610e9,0x1347d66d,0x8c61d79a,0x7a0ca137,0x8e14f859,0x893c13eb,0xee27a9ce,0x35c961b7,0xede51ce1,0x3cb1477a,0x59dfd29c,0x3f73f255,0x79ce1418,0xbf37c773,0xeacdf753,0x5baafd5f,0x146f3ddf,0x86db4478,0x81f3afca,0x3ec468b9,0x2c342438,0x5f40a3c2,0x72c31d16,0x0c25e2bc,0x8b493c28,0x41950dff,0x7101a839,0xdeb30c08,0x9ce4b4d8,0x90c15664,0x6184cb7b,0x70b632d5,0x745c6c48,0x4257b8d0];final CD=[0xa7f45150,0x65417e53,0xa4171ac3,0x5e273a96,0x6bab3bcb,0x459d1ff1,0x58faacab,0x03e34b93,0xfa302055,0x6d76adf6,0x76cc8891,0x4c02f525,0xd7e54ffc,0xcb2ac5d7,0x44352680,0xa362b58f,0x5ab1de49,0x1bba2567,0x0eea4598,0xc0fe5de1,0x752fc302,0xf04c8112,0x97468da3,0xf9d36bc6,0x5f8f03e7,0x9c921595,0x7a6dbfeb,0x595295da,0x83bed42d,0x217458d3,0x69e04929,0xc8c98e44,0x89c2756a,0x798ef478,0x3e58996b,0x71b927dd,0x4fe1beb6,0xad88f017,0xac20c966,0x3ace7db4,0x4adf6318,0x311ae582,0x33519760,0x7f536245,0x7764b1e0,0xae6bbb84,0xa081fe1c,0x2b08f994,0x68487058,0xfd458f19,0x6cde9487,0xf87b52b7,0xd373ab23,0x024b72e2,0x8f1fe357,0xab55662a,0x28ebb207,0xc2b52f03,0x7bc5869a,0x0837d3a5,0x872830f2,0xa5bf23b2,0x6a0302ba,0x8216ed5c,0x1ccf8a2b,0xb479a792,0xf207f3f0,0xe2694ea1,0xf4da65cd,0xbe0506d5,0x6234d11f,0xfea6c48a,0x532e349d,0x55f3a2a0,0xe18a0532,0xebf6a475,0xec830b39,0xef6040aa,0x9f715e06,0x106ebd51,0x8a213ef9,0x06dd963d,0x053eddae,0xbde64d46,0x8d5491b5,0x5dc47105,0xd406046f,0x155060ff,0xfb981924,0xe9bdd697,0x434089cc,0x9ed96777,0x42e8b0bd,0x8b890788,0x5b19e738,0xeec879db,0x0a7ca147,0x0f427ce9,0x1e84f8c9,0x00000000,0x86800983,0xed2b3248,0x70111eac,0x725a6c4e,0xff0efdfb,0x38850f56,0xd5ae3d1e,0x392d3627,0xd90f0a64,0xa65c6821,0x545b9bd1,0x2e36243a,0x670a0cb1,0xe757930f,0x96eeb4d2,0x919b1b9e,0xc5c0804f,0x20dc61a2,0x4b775a69,0x1a121c16,0xba93e20a,0x2aa0c0e5,0xe0223c43,0x171b121d,0x0d090e0b,0xc78bf2ad,0xa8b62db9,0xa91e14c8,0x19f15785,0x0775af4c,0xdd99eebb,0x607fa3fd,0x2601f79f,0xf5725cbc,0x3b6644c5,0x7efb5b34,0x29438b76,0xc623cbdc,0xfcedb668,0xf1e4b863,0xdc31d7ca,0x85634210,0x22971340,0x11c68420,0x244a857d,0x3dbbd2f8,0x32f9ae11,0xa129c76d,0x2f9e1d4b,0x30b2dcf3,0x52860dec,0xe3c177d0,0x16b32b6c,0xb970a999,0x489411fa,0x64e94722,0x8cfca8c4,0x3ff0a01a,0x2c7d56d8,0x903322ef,0x4e4987c7,0xd138d9c1,0xa2ca8cfe,0x0bd49836,0x81f5a6cf,0xde7aa528,0x8eb7da26,0xbfad3fa4,0x9d3a2ce4,0x9278500d,0xcc5f6a9b,0x467e5462,0x138df6c2,0xb8d890e8,0xf7392e5e,0xafc382f5,0x805d9fbe,0x93d0697c,0x2dd56fa9,0x1225cfb3,0x99acc83b,0x7d1810a7,0x639ce86e,0xbb3bdb7b,0x7826cd09,0x18596ef4,0xb79aec01,0x9a4f83a8,0x6e95e665,0xe6ffaa7e,0xcfbc2108,0xe815efe6,0x9be7bad9,0x366f4ace,0x099fead4,0x7cb029d6,0xb2a431af,0x233f2a31,0x94a5c630,0x66a235c0,0xbc4e7437,0xca82fca6,0xd090e0b0,0xd8a73315,0x9804f14a,0xdaec41f7,0x50cd7f0e,0xf691172f,0xd64d768d,0xb0ef434d,0x4daacc54,0x0496e4df,0xb5d19ee3,0x886a4c1b,0x1f2cc1b8,0x5165467f,0xea5e9d04,0x358c015d,0x7487fa73,0x410bfb2e,0x1d67b35a,0xd2db9252,0x5610e933,0x47d66d13,0x61d79a8c,0x0ca1377a,0x14f8598e,0x3c13eb89,0x27a9ceee,0xc961b735,0xe51ce1ed,0xb1477a3c,0xdfd29c59,0x73f2553f,0xce141879,0x37c773bf,0xcdf753ea,0xaafd5f5b,0x6f3ddf14,0xdb447886,0xf3afca81,0xc468b93e,0x3424382c,0x40a3c25f,0xc31d1672,0x25e2bc0c,0x493c288b,0x950dff41,0x01a83971,0xb30c08de,0xe4b4d89c,0xc1566490,0x84cb7b61,0xb632d570,0x5c6c4874,0x57b8d042];final DD=[0xf45150a7,0x417e5365,0x171ac3a4,0x273a965e,0xab3bcb6b,0x9d1ff145,0xfaacab58,0xe34b9303,0x302055fa,0x76adf66d,0xcc889176,0x02f5254c,0xe54ffcd7,0x2ac5d7cb,0x35268044,0x62b58fa3,0xb1de495a,0xba25671b,0xea45980e,0xfe5de1c0,0x2fc30275,0x4c8112f0,0x468da397,0xd36bc6f9,0x8f03e75f,0x9215959c,0x6dbfeb7a,0x5295da59,0xbed42d83,0x7458d321,0xe0492969,0xc98e44c8,0xc2756a89,0x8ef47879,0x58996b3e,0xb927dd71,0xe1beb64f,0x88f017ad,0x20c966ac,0xce7db43a,0xdf63184a,0x1ae58231,0x51976033,0x5362457f,0x64b1e077,0x6bbb84ae,0x81fe1ca0,0x08f9942b,0x48705868,0x458f19fd,0xde94876c,0x7b52b7f8,0x73ab23d3,0x4b72e202,0x1fe3578f,0x55662aab,0xebb20728,0xb52f03c2,0xc5869a7b,0x37d3a508,0x2830f287,0xbf23b2a5,0x0302ba6a,0x16ed5c82,0xcf8a2b1c,0x79a792b4,0x07f3f0f2,0x694ea1e2,0xda65cdf4,0x0506d5be,0x34d11f62,0xa6c48afe,0x2e349d53,0xf3a2a055,0x8a0532e1,0xf6a475eb,0x830b39ec,0x6040aaef,0x715e069f,0x6ebd5110,0x213ef98a,0xdd963d06,0x3eddae05,0xe64d46bd,0x5491b58d,0xc471055d,0x06046fd4,0x5060ff15,0x981924fb,0xbdd697e9,0x4089cc43,0xd967779e,0xe8b0bd42,0x8907888b,0x19e7385b,0xc879dbee,0x7ca1470a,0x427ce90f,0x84f8c91e,0x00000000,0x80098386,0x2b3248ed,0x111eac70,0x5a6c4e72,0x0efdfbff,0x850f5638,0xae3d1ed5,0x2d362739,0x0f0a64d9,0x5c6821a6,0x5b9bd154,0x36243a2e,0x0a0cb167,0x57930fe7,0xeeb4d296,0x9b1b9e91,0xc0804fc5,0xdc61a220,0x775a694b,0x121c161a,0x93e20aba,0xa0c0e52a,0x223c43e0,0x1b121d17,0x090e0b0d,0x8bf2adc7,0xb62db9a8,0x1e14c8a9,0xf1578519,0x75af4c07,0x99eebbdd,0x7fa3fd60,0x01f79f26,0x725cbcf5,0x6644c53b,0xfb5b347e,0x438b7629,0x23cbdcc6,0xedb668fc,0xe4b863f1,0x31d7cadc,0x63421085,0x97134022,0xc6842011,0x4a857d24,0xbbd2f83d,0xf9ae1132,0x29c76da1,0x9e1d4b2f,0xb2dcf330,0x860dec52,0xc177d0e3,0xb32b6c16,0x70a999b9,0x9411fa48,0xe9472264,0xfca8c48c,0xf0a01a3f,0x7d56d82c,0x3322ef90,0x4987c74e,0x38d9c1d1,0xca8cfea2,0xd498360b,0xf5a6cf81,0x7aa528de,0xb7da268e,0xad3fa4bf,0x3a2ce49d,0x78500d92,0x5f6a9bcc,0x7e546246,0x8df6c213,0xd890e8b8,0x392e5ef7,0xc382f5af,0x5d9fbe80,0xd0697c93,0xd56fa92d,0x25cfb312,0xacc83b99,0x1810a77d,0x9ce86e63,0x3bdb7bbb,0x26cd0978,0x596ef418,0x9aec01b7,0x4f83a89a,0x95e6656e,0xffaa7ee6,0xbc2108cf,0x15efe6e8,0xe7bad99b,0x6f4ace36,0x9fead409,0xb029d67c,0xa431afb2,0x3f2a3123,0xa5c63094,0xa235c066,0x4e7437bc,0x82fca6ca,0x90e0b0d0,0xa73315d8,0x04f14a98,0xec41f7da,0xcd7f0e50,0x91172ff6,0x4d768dd6,0xef434db0,0xaacc544d,0x96e4df04,0xd19ee3b5,0x6a4c1b88,0x2cc1b81f,0x65467f51,0x5e9d04ea,0x8c015d35,0x87fa7374,0x0bfb2e41,0x67b35a1d,0xdb9252d2,0x10e93356,0xd66d1347,0xd79a8c61,0xa1377a0c,0xf8598e14,0x13eb893c,0xa9ceee27,0x61b735c9,0x1ce1ede5,0x477a3cb1,0xd29c59df,0xf2553f73,0x141879ce,0xc773bf37,0xf753eacd,0xfd5f5baa,0x3ddf146f,0x447886db,0xafca81f3,0x68b93ec4,0x24382c34,0xa3c25f40,0x1d1672c3,0xe2bc0c25,0x3c288b49,0x0dff4195,0xa8397101,0x0c08deb3,0xb4d89ce4,0x566490c1,0xcb7b6184,0x32d570b6,0x6c48745c,0xb8d04257];final ED=[0x5150a7f4,0x7e536541,0x1ac3a417,0x3a965e27,0x3bcb6bab,0x1ff1459d,0xacab58fa,0x4b9303e3,0x2055fa30,0xadf66d76,0x889176cc,0xf5254c02,0x4ffcd7e5,0xc5d7cb2a,0x26804435,0xb58fa362,0xde495ab1,0x25671bba,0x45980eea,0x5de1c0fe,0xc302752f,0x8112f04c,0x8da39746,0x6bc6f9d3,0x03e75f8f,0x15959c92,0xbfeb7a6d,0x95da5952,0xd42d83be,0x58d32174,0x492969e0,0x8e44c8c9,0x756a89c2,0xf478798e,0x996b3e58,0x27dd71b9,0xbeb64fe1,0xf017ad88,0xc966ac20,0x7db43ace,0x63184adf,0xe582311a,0x97603351,0x62457f53,0xb1e07764,0xbb84ae6b,0xfe1ca081,0xf9942b08,0x70586848,0x8f19fd45,0x94876cde,0x52b7f87b,0xab23d373,0x72e2024b,0xe3578f1f,0x662aab55,0xb20728eb,0x2f03c2b5,0x869a7bc5,0xd3a50837,0x30f28728,0x23b2a5bf,0x02ba6a03,0xed5c8216,0x8a2b1ccf,0xa792b479,0xf3f0f207,0x4ea1e269,0x65cdf4da,0x06d5be05,0xd11f6234,0xc48afea6,0x349d532e,0xa2a055f3,0x0532e18a,0xa475ebf6,0x0b39ec83,0x40aaef60,0x5e069f71,0xbd51106e,0x3ef98a21,0x963d06dd,0xddae053e,0x4d46bde6,0x91b58d54,0x71055dc4,0x046fd406,0x60ff1550,0x1924fb98,0xd697e9bd,0x89cc4340,0x67779ed9,0xb0bd42e8,0x07888b89,0xe7385b19,0x79dbeec8,0xa1470a7c,0x7ce90f42,0xf8c91e84,0x00000000,0x09838680,0x3248ed2b,0x1eac7011,0x6c4e725a,0xfdfbff0e,0x0f563885,0x3d1ed5ae,0x3627392d,0x0a64d90f,0x6821a65c,0x9bd1545b,0x243a2e36,0x0cb1670a,0x930fe757,0xb4d296ee,0x1b9e919b,0x804fc5c0,0x61a220dc,0x5a694b77,0x1c161a12,0xe20aba93,0xc0e52aa0,0x3c43e022,0x121d171b,0x0e0b0d09,0xf2adc78b,0x2db9a8b6,0x14c8a91e,0x578519f1,0xaf4c0775,0xeebbdd99,0xa3fd607f,0xf79f2601,0x5cbcf572,0x44c53b66,0x5b347efb,0x8b762943,0xcbdcc623,0xb668fced,0xb863f1e4,0xd7cadc31,0x42108563,0x13402297,0x842011c6,0x857d244a,0xd2f83dbb,0xae1132f9,0xc76da129,0x1d4b2f9e,0xdcf330b2,0x0dec5286,0x77d0e3c1,0x2b6c16b3,0xa999b970,0x11fa4894,0x472264e9,0xa8c48cfc,0xa01a3ff0,0x56d82c7d,0x22ef9033,0x87c74e49,0xd9c1d138,0x8cfea2ca,0x98360bd4,0xa6cf81f5,0xa528de7a,0xda268eb7,0x3fa4bfad,0x2ce49d3a,0x500d9278,0x6a9bcc5f,0x5462467e,0xf6c2138d,0x90e8b8d8,0x2e5ef739,0x82f5afc3,0x9fbe805d,0x697c93d0,0x6fa92dd5,0xcfb31225,0xc83b99ac,0x10a77d18,0xe86e639c,0xdb7bbb3b,0xcd097826,0x6ef41859,0xec01b79a,0x83a89a4f,0xe6656e95,0xaa7ee6ff,0x2108cfbc,0xefe6e815,0xbad99be7,0x4ace366f,0xead4099f,0x29d67cb0,0x31afb2a4,0x2a31233f,0xc63094a5,0x35c066a2,0x7437bc4e,0xfca6ca82,0xe0b0d090,0x3315d8a7,0xf14a9804,0x41f7daec,0x7f0e50cd,0x172ff691,0x768dd64d,0x434db0ef,0xcc544daa,0xe4df0496,0x9ee3b5d1,0x4c1b886a,0xc1b81f2c,0x467f5165,0x9d04ea5e,0x015d358c,0xfa737487,0xfb2e410b,0xb35a1d67,0x9252d2db,0xe9335610,0x6d1347d6,0x9a8c61d7,0x377a0ca1,0x598e14f8,0xeb893c13,0xceee27a9,0xb735c961,0xe1ede51c,0x7a3cb147,0x9c59dfd2,0x553f73f2,0x1879ce14,0x73bf37c7,0x53eacdf7,0x5f5baafd,0xdf146f3d,0x7886db44,0xca81f3af,0xb93ec468,0x382c3424,0xc25f40a3,0x1672c31d,0xbc0c25e2,0x288b493c,0xff41950d,0x397101a8,0x08deb30c,0xd89ce4b4,0x6490c156,0x7b6184cb,0xd570b632,0x48745c6c,0xd04257b8];abstract class ac implements Uc{Uint8List process(Uint8List B){var A=new Uint8List(blockSize);var C=zY(B,0,A,0);return A.sublist(0,C);}}class MH extends UT{final Uint8List key;MH(this.key);}const IM=0x1F;const NH=0xFFFFFFFF;final bc=[0xFFFFFFFF,0x7FFFFFFF,0x3FFFFFFF,0x1FFFFFFF,0x0FFFFFFF,0x07FFFFFF,0x03FFFFFF,0x01FFFFFF,0x00FFFFFF,0x007FFFFF,0x003FFFFF,0x001FFFFF,0x000FFFFF,0x0007FFFF,0x0003FFFF,0x0001FFFF,0x0000FFFF,0x00007FFF,0x00003FFF,0x00001FFF,0x00000FFF,0x000007FF,0x000003FF,0x000001FF,0x000000FF,0x0000007F,0x0000003F,0x0000001F,0x0000000F,0x00000007,0x00000003,0x00000001,0x00000000];int cc(int A,int B){assert((A>=0)&&(A<=NH));B&= IM;A&= bc[B];return ((A<<B)&NH);}int dc(int A,int B){assert((A>=0)&&(A<=NH));B&= IM;return (A>>B);}int ec(int A,int B){assert(B>=0);assert((A>=0)&&(A<=NH));B&= IM;return (A>>B)|cc(A,(32-B));}void zI(int B,dynamic A,int C,Endianness D){assert((B>=0)&&(B<=NH));if(A is!ByteData){A=new ByteData.view(A.buffer);}(A as ByteData).setUint32(C,B,D);}int OH(dynamic A,int B,Endianness C){if(A is!ByteData){A=new ByteData.view(A.buffer);}return (A as ByteData).getUint32(B,C);}const String ld='\u001b[31m';const String aU='\u001b[0m';cD Wd()=>new cD.gj();class cD{factory cD({iB style,String current}){if(current==null){if(style==null){current=sT;}else{current=".";}}if(style==null){style=iB.hM;}else if(style is!XE){throw new ArgumentError("Only styles defined by the path package are " "allowed.");}return new cD.hj(style as XE,current);}cD.gj():S=iB.hM as XE,wk=null;cD.hj(this.S,this.wk);final XE S;final String wk;String get current=>wk!=null?wk:sT;String get TD=>S.TD;String absolute(String A,[String B,String C,String D,String G,String H,String I]){CU("absolute",[A,B,C,D,G,H,I]);if(B==null&&isAbsolute(A)&&!FC(A)){return A;}return join(current,A,B,C,D,G,H,I);}String oO(String A)=>xk(A).oO;String pO(String A)=>xk(A).pO;String ih(String B){var A=xk(B);A.VI();if(A.s.isEmpty)return A.GB==null?'.':A.GB;if(A.s.length==1){return A.GB==null?'.':A.GB;}A.s.removeLast();A.BC.removeLast();A.VI();return A.toString();}String HP(String A)=>xk(A).HP;String mi(String A)=>A.substring(0,S.SD(A));bool isAbsolute(String A)=>S.SD(A)>0;bool sG(String A)=>!this.isAbsolute(A);bool FC(String A)=>S.FC(A);String join(String B,[String C,String D,String G,String H,String I,String K,String L]){var A=<String>[B,C,D,G,H,I,K,L];CU("join",A);return Vi(A.where((O)=>O!=null));}String Vi(Iterable<String> I){var B=new StringBuffer();var D=false;var G=false;for(var A in I.where((A)=>A!='')){if(this.FC(A)&&G){var C=xk(A);var H=B.toString();C.GB=H.substring(0,S.SD(H,withDrive:true));if(S.wG(C.GB)){C.BC[0]=S.TD;}B.clear();B.write(C.toString());}else if(this.isAbsolute(A)){G=!this.FC(A);B.clear();B.write(A);}else{if(A.length>0&&S.iK(A[0])){}else if(D){B.write(TD);}B.write(A);}D=S.wG(A);}return B.toString();}List<String> split(String B){var A=xk(B);A.s=A.s.where((C)=>!C.isEmpty).toList();if(A.GB!=null)A.s.insert(0,A.GB);return A.s;}String tE(String A){if(!yk(A))return A;var B=xk(A);B.tE();return B.toString();}bool yk(String I){var K=0;var D=I.codeUnits;int B;int A;var G=S.SD(I);if(G!=0){K=G;A=ID;if(S==iB.KJ){for(var C=0;C<G;C++ ){if(D[C]==ID)return true;}}}for(var C=K;C<D.length;C++ ){var H=D[C];if(S.q(H)){if(S==iB.KJ&&H==ID)return true;if(A!=null&&S.q(A))return true;if(A==lC&&(B==null||B==lC||S.q(B))){return true;}}B=A;A=H;}if(A==null)return true;if(S.q(A))return true;if(A==lC&&(B==null||S.q(B)||B==lC)){return true;}return false;}String DZ(String C,{String from}){if(from==null&&this.sG(C))return this.tE(C);from=from==null?current:absolute(from);if(this.sG(from)&&this.isAbsolute(C)){return this.tE(C);}if(this.sG(C)||this.FC(C)){C=this.absolute(C);}if(this.sG(C)&&this.isAbsolute(from)){throw new JJ('Unable to find a path to "${C}" from "${from}".');}var B=xk(from)..tE();var A=xk(C)..tE();if(B.s.length>0&&B.s[0]=='.'){return A.toString();}if(B.GB!=A.GB&&((B.GB==null||A.GB==null)||!S.YP(B.GB,A.GB))){return A.toString();}while(B.s.length>0&&A.s.length>0&&S.YP(B.s[0],A.s[0])){B.s.removeAt(0);B.BC.removeAt(1);A.s.removeAt(0);A.BC.removeAt(1);}if(B.s.length>0&&B.s[0]=='..'){throw new JJ('Unable to find a path to "${C}" from "${from}".');}A.s.insertAll(0,new List.filled(B.s.length,'..'));A.BC[0]='';A.BC.insertAll(1,new List.filled(B.s.length,S.TD));if(A.s.length==0)return '.';if(A.s.length>1&&A.s.last=='.'){A.s.removeLast();A.BC..removeLast()..removeLast()..add('');}A.GB='';A.VI();return A.toString();}bool XC(String A,String B)=>zk(A,B)==JB.IJ;JB zk(String A,String B){var D=isAbsolute(A);var G=isAbsolute(B);if(D&&!G){B=absolute(B);if(S.FC(A))A=absolute(A);}else if(G&&!D){A=absolute(A);if(S.FC(B))B=absolute(B);}else if(G&&D){var H=S.FC(B);var I=S.FC(A);if(H&&!I){B=absolute(B);}else if(I&&!H){A=absolute(A);}}var K=Al(A,B);if(K!=JB.cF)return K;String C;try {C=this.DZ(B,from:A);}on JJ catch (L){return JB.WE;}if(!this.sG(C))return JB.WE;if(C=='.')return JB.IJ;if(C=='..')return JB.WE;return (C.length>=3&&C.startsWith('..')&&S.q(C.codeUnitAt(2)))?JB.WE:JB.DU;}JB Al(String C,String D){if(C=='.')C='';var L=S.SD(C);var b=S.SD(D);if(L!=b)return JB.WE;for(var V=0;V<L;V++ ){var G=C.codeUnitAt(V);var H=D.codeUnitAt(V);if(!S.hK(G,H)){return JB.WE;}}var I=ID;int K;var A=L;var B=b;while(A<C.length&&B<D.length){var G=C.codeUnitAt(A);var H=D.codeUnitAt(B);if(S.hK(G,H)){if(S.q(G)){K=A;}I=G;A++ ;B++ ;continue;}if(S.q(G)&&S.q(I)){K=A;A++ ;continue;}else if(S.q(H)&&S.q(I)){B++ ;continue;}if(G==lC&&S.q(I)){A++ ;if(A==C.length)break;G=C.codeUnitAt(A);if(S.q(G)){K=A;A++ ;continue;}if(G==lC){A++ ;if(A==C.length||S.q(C.codeUnitAt(A))){return JB.cF;}}}if(H==lC&&S.q(I)){B++ ;if(B==D.length)break;H=D.codeUnitAt(B);if(S.q(H)){B++ ;continue;}if(H==lC){B++ ;if(B==D.length||S.q(D.codeUnitAt(B))){return JB.cF;}}}var n=Bl(D,B);if(n!=RC.gM){return JB.cF;}var EB=Bl(C,A);if(EB!=RC.gM){return JB.cF;}return JB.WE;}if(B==D.length){if(A==C.length||S.q(C.codeUnitAt(A))){K=A;}else{K??= JG.max(0,L-1);}var O=Bl(C,K??L-1);if(O==RC.fM)return JB.IJ;return O==RC.eM?JB.cF:JB.WE;}var O=Bl(D,B);if(O==RC.fM)return JB.IJ;if(O==RC.eM){return JB.cF;}return (S.q(D.codeUnitAt(B))||S.q(I))?JB.DU:JB.WE;}RC Bl(String B,int H){var C=0;var G=false;var A=H;while(A<B.length){while(A<B.length&&S.q(B.codeUnitAt(A))){A++ ;}if(A==B.length)break;var D=A;while(A<B.length&&!S.q(B.codeUnitAt(A))){A++ ;}if(A-D==1&&B.codeUnitAt(D)==lC){}else if(A-D==2&&B.codeUnitAt(D)==lC&&B.codeUnitAt(D+1)==lC){C-- ;if(C<0)break;if(C==0)G=true;}else{C++ ;}if(A==B.length)break;A++ ;}if(C<0)return RC.eM;if(C==0)return RC.fM;if(G)return RC.Xd;return RC.gM;}int hash(String A){A=absolute(A);var B=Cl(A);if(B!=null)return B;var C=xk(A);C.tE();return Cl(C.toString());}int Cl(String B){var C=4603;var H=true;var D=true;for(var A=0;A<B.length;A++ ){var G=S.UX(B.codeUnitAt(A));if(S.q(G)){D=true;continue;}if(G==lC&&D){if(A+1==B.length)break;var I=B.codeUnitAt(A+1);if(S.q(I))continue;if(!H&&I==lC&&(A+2==B.length||S.q(B.codeUnitAt(A+2)))){return null;}}C&= 0x3FFFFFF;C*= 33;C^= G;D=false;H=false;}return C;}String wh(A)=>S.TI(BU(A));String hi(D){var A=BU(D);if(A.scheme=='file'&&S==iB.VG){return A.toString();}else if(A.scheme!='file'&&A.scheme!=''&&S!=iB.VG){return A.toString();}var B=tE(wh(A));var C=DZ(B);return split(C).length>split(B).length?B:C;}dF xk(String A)=>new dF.ij(A,S);}Uri BU(A){if(A is String)return Uri.parse(A);if(A is Uri)return A;throw new ArgumentError.value(A,'uri','Value must be a String or a Uri');}void CU(String H,List<String> A){for(var B=1;B<A.length;B++ ){if(A[B]==null||A[B-1]!=null)continue;int C;for(C=A.length;C>=1;C-- ){if(A[C-1]!=null)break;}var D=new StringBuffer();D.write("${H}(");D.write(A.take(C).map((G)=>G==null?"null":'"${G}"').join(", "));D.write("): part ${B-1} was null, but part ${B} was not.");throw new ArgumentError(D.toString());}}class RC{static const eM=const RC("above root");static const fM=const RC("at root");static const Xd=const RC("reaches root");static const gM=const RC("below root");final String name;const RC(this.name);String toString()=>name;}class JB{static const DU=const JB("within");static const IJ=const JB("equal");static const WE=const JB("different");static const cF=const JB("inconclusive");final String name;const JB(this.name);String toString()=>name;}const aa=const dQ.Tj();class dQ extends Codec<List<int>,String>{eL get encoder=>ca;cL get decoder=>ba;const dQ.Tj();}const ba=const cL.Uj();class cL extends Converter<String,List<int>>{const cL.Uj();List<int> convert(String A){if(!A.length.isEven){throw new FormatException("Invalid input length, must be even.",A,A.length);}var B=new Uint8List(A.length~/2);dL(A.codeUnits,0,A.length,B,0);return B;}StringConversionSink startChunkedConversion(Sink<List<int>> A)=>new eQ(A);}class eQ extends StringConversionSinkBase{final Sink<List<int>> Dl;int El;eQ(this.Dl);void addSlice(String D,int A,int B,bool H){RangeError.checkValidRange(A,B,D.length);if(A==B){if(H)Fl(D,B);return;}var I=D.codeUnits;Uint8List C;int G;if(El==null){C=new Uint8List((B-A)~/2);G=0;}else{var K=(B-A-1)~/2;C=new Uint8List(1+K);C[0]=El+EH(I,A);A++ ;G=1;}El=dL(I,A,B,C,G);Dl.add(C);if(H)Fl(D,B);}ByteConversionSink asUtf8Sink(bool A)=>new fQ(Dl);void close()=>Fl();void Fl([String A,int B]){if(El!=null){throw new FormatException("Input ended with incomplete encoded byte.",A,B);}Dl.close();}}class fQ extends ByteConversionSinkBase{final Sink<List<int>> Dl;int El;fQ(this.Dl);void add(List<int> A)=>addSlice(A,0,A.length,false);void addSlice(List<int> C,int A,int B,bool H){RangeError.checkValidRange(A,B,C.length);if(A==B){if(H)Fl(C,B);return;}Uint8List D;int G;if(El==null){D=new Uint8List((B-A)~/2);G=0;}else{var I=(B-A-1)~/2;D=new Uint8List(1+I);D[0]=El+EH(C,A);A++ ;G=1;}El=dL(C,A,B,D,G);Dl.add(D);if(H)Fl(C,B);}void close()=>Fl();void Fl([List<int> A,int B]){if(El!=null){throw new FormatException("Input ended with incomplete encoded byte.",A,B);}Dl.close();}}int dL(List<int> B,int D,int C,List<int> G,int H){var I=H;for(var A=D;A<C-1;A+= 2){var K=EH(B,A);var L=EH(B,A+1);G[I++ ]=16*K+L;}if((C-D).isEven)return null;return 16*EH(B,C-1);}const ca=const eL.Vj();class eL extends Converter<List<int>,String>{const eL.Vj();String convert(List<int> A)=>fL(A,0,A.length);ByteConversionSink startChunkedConversion(Sink<String> A)=>new gQ(A);}class gQ extends ByteConversionSinkBase{final Sink<String> Gl;gQ(this.Gl);void add(List<int> A){Gl.add(fL(A,0,A.length));}void addSlice(List<int> A,int B,int C,bool D){RangeError.checkValidRange(B,C,A.length);Gl.add(fL(A,B,C));if(D)Gl.close();}void close(){Gl.close();}}String fL(List<int> C,int D,int G){var H=new Uint8List((G-D)*2);var K=0;var I=0;for(var A=D;A<G;A++ ){var B=C[A];I|= B;H[K++ ]=hQ((B&0xF0)>>4);H[K++ ]=hQ(B&0x0F);}if(I>=0&&I<=255)return new String.fromCharCodes(H);for(var A=D;A<G;A++ ){var B=C[A];if(B>=0&&B<=0xff)continue;throw new FormatException("Invalid byte ${B<0?"-":""}0x${B.abs().toRadixString(16)}.",C,A);}throw 'unreachable';}int hQ(int A)=>A<10?A+AF:A+aL-10;int EH(List<int> D,int G){var A=D[G];var B=AF^A;if(B<=9){if(B>=0)return B;}else{var C=0x20|A;if(aL<=C&&C<=VQ)return C-aL+10;}throw new FormatException("Invalid hexadecimal code unit " "U+${A.toRadixString(16).padLeft(4,'0')}.",D,G);}const String kZ="""
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>com.dglogik.dglux-server</string>
  <key>ProgramArguments</key>
  <array>
    <string>/bin/bash</string>
    <string>-c</string>
    <string>{{dart.path}} {{watcher.file}} --log-file=logs/dglux_server.log</string>
  </array>
  <key>RunAtLoad</key>
  <true/>
  <key>KeepAlive</key>
  <false/>
  <key>WorkingDirectory</key>
  <string>{{dir.path}}</string>
  <key>HardResourceLimits</key>
  <dict>
    <key>NumberOfFiles</key>
    <integer>4096</integer>
  </dict>
  <key>SoftResourceLimits</key>
  <dict>
    <key>NumberOfFiles</key>
    <integer>4096</integer>
  </dict>
  <key>EnvironmentVariables</key>
  <dict>
	  <key>HOME</key>
	  <string>{{home.path}}</string>
  </dict>
</dict>
</plist>
""";String PL;TF(String B,{bool doExit: true})async{var CC=Platform.script;var NC=CC.toFilePath(windows:Platform.isWindows);PL=GJ(NC);if(B=="start"){await yP();if(doExit){exit(0);}}else if(B=="stop"){if(!(await SL())){print("Server is not running.");try {await UF.delete(recursive:true);}catch (gB){}if(doExit){exit(1);}return;}var A=await AQ("stop");if(!A){print("Failed to stop server.");if(doExit){exit(1);}return;}else{print("Server Stopped.");}try {await UF.delete(recursive:true);}catch (gB){}if(doExit){exit(0);}}else if(B=="restart"){await TF("stop",doExit:false);await TF("start");}else if(B=="verify"){await zP();}else if(B=="install-service"){await TF("verify");if(Platform.isWindows){var G=iU.EN==32?"nssm-x32.exe":"nssm-x64.exe";var L=new File(QB("bin","server_watcher.bat")).absolute;if(!(await L.exists())){L=new File(QB("bin","dglux_server.bat")).absolute;}if(!(await L.exists())){print("Failed to find the server script.");exit(1);}var O=await Process.run("sc.exe",["query","dglux_server"]);var H=Directory.current.absolute.path;var A=lQ.convert(UTF8.encode(H)).toString();var I=new File("C:\\services\\${A}_dgserver.bat");if(!(await I.exists())){await I.create(recursive:true);}H=HJ(H).map((V){return V.contains(" ")?'"${V}"':V;}).join("\\");await I.writeAsString("""
      @echo off
      cd /d ${H}
      bin\\server_watcher.bat --log-file=logs\\dglux_server.log
      """);if(O.exitCode!=0){var K=await Process.run("cmd",["/C",QB("bin","tools",G),"install","dglux_server",I.path]);var UD=await Process.run(QB("bin","tools",G),["set","dglux_server","DisplayName","DGLux Server"]);var mD=await Process.run(QB("bin","tools",G),["set","dglux_server","Description","DGLux Server"]);if(K.exitCode!=0||UD.exitCode!=0||mD.exitCode!=0){print("Failed to Install Windows Service!");print("STDOUT:");print(K.stdout);if(K.stderr.isNotEmpty){print("STDERR:");print(K.stderr);}exit(1);}else{print("Windows Service Installed.");var nD=await Process.run("net",["start","dglux_server"]);if(nD.exitCode!=0){print("Failed to start Windows Service.");exit(1);}print("Windows Service Started.");}exit(0);}else{print("Windows Service is already installed.");exit(1);}}else if(Platform.isMacOS){var D=new File(QB(Platform.environment["HOME"],"Library","LaunchAgents","com.dglogik.dglux-server.plist"));if(await D.exists()){print("Service is already installed.");exit(1);}var b=new File("bin/server_watcher.dart");if(!(await b.exists())){b=new File("bin/watcher.dart");}String C=kZ;C=C.replaceAll("{{dart.path}}",QT());C=C.replaceAll("{{dir.path}}",Directory.current.absolute.path);C=C.replaceAll("{{watcher.file}}",b.absolute.path);C=C.replaceAll("{{home.path}}",Platform.environment["HOME"] is String?Platform.environment["HOME"]:Directory.current.absolute.path);await D.writeAsString(C);var A=await Process.run("launchctl",["load",D.absolute.path]);if(A.exitCode!=0){print("Failed to Install Service:");if(A.stdout.isNotEmpty){print("STDOUT:");print(A.stdout);}if(A.stderr.isNotEmpty){print("STDERR:");print(A.stderr);}exit(A.exitCode);}print("Service Installed.");exit(0);}else{print("Services are not supported on your Operating System.");exit(1);}}else if(B=="uninstall-service"){if(Platform.isWindows){var G=iU.EN==32?"nssm-x32.exe":"nssm-x64.exe";var O=await Process.run("sc.exe",["query","dglux_server"]);if(O.exitCode==0){var n=await Process.run(QB("bin","tools",G),["remove","dglux_server","confirm"]);if(n.exitCode!=0){print("Failed to Uninstall Windows Service!");print("STDOUT:");print(n.stdout);print("STDERR:");print(n.stderr);exit(1);}else{print("Windows Service Uninstalled.");}}else{print("Windows Service is Not Installed");exit(1);}}else if(Platform.isMacOS){var D=new File(QB(Platform.environment["HOME"],"Library","LaunchAgents","com.dglogik.dglux-server.plist"));if(!(await D.exists())){print("Service is not installed.");exit(1);}await Process.run("launchctl",["unload",D.absolute.path]);await D.delete();print("Service Uninstalled.");exit(0);}else{print("Services are not supported on your Operating System.");exit(1);}}else if(B=="rebind"){var A=await AQ("rebind");if(A){print("Server Rebound.");if(doExit){exit(0);return;}}else{print("Rebind Failed.");if(doExit){exit(1);return;}}}else if(B=="run"){await yP(true);}else if(B=="configure"){String EB;try {EB=Platform.resolvedExecutable;}catch (gB){EB=Platform.executable.isNotEmpty?Platform.executable:"dart";}var A=await RG(EB,args:["bin/configure.dart"],inherit:true);exit(A.exitCode);}else{print("Unknown Command: ${B}");exit(1);}}yP([bool H=false])async{if(await SL()){print("Server is already started.");exit(1);}var B=QB(PL,"server_watcher.dart");var A=new File(B);File C;if(!(await A.exists())){B=QB(PL,"watcher.dart");A=new File(B);}await zP();{var I=await Hc(A.path);var O=QB(A.parent.path,Rd(A.path)+".snapshot");C=new File(O);if(!(await C.exists())){I=ChecksumState.MODIFIED;}if(I!=ChecksumState.SAME){try {await Jc(C.path,A.path);}catch (V){}}A=C;}String G;try {G=Platform.resolvedExecutable;}catch (V){G=Platform.executable.isNotEmpty?Platform.executable:"dart";}var K=await lZ();String L=await Cc();Process D=await Process.start(G,[B,"--log-file=logs/dglux_server.log","--manager-port=${K}","--manager-token=${L}"],mode:H?ProcessStartMode.NORMAL:ProcessStartMode.DETACHED);if(!(await UF.exists())){await UF.create(recursive:true);}await UF.writeAsString("ws://${InternetAddress.LOOPBACK_IP_V4.address}:${K}" "/ws?${L}");if(!H){print("Server Started. (pid: ${D.pid})");}else{D.stdout.pipe(jZ.stdout);D.stderr.pipe(jZ.stderr);QL=ProcessSignal.SIGINT.watch().listen((n)async{await TF("stop");QL.cancel();});var b=await D.exitCode;QL.cancel();await new Future.delayed(const Duration(milliseconds:50));exit(b);}}StreamSubscription QL;const int RL=65536;zP()async{print("DSA Version: ${oc}");var L=await nZ();if(L!="unknown"){print("Atrius Solution Builder Build: r${L}");}var O=await mZ();if(O!="unknown"){print("Atrius Server Build: ${O}");}var V=new File("install.json");var B=true;print("Verifying Environment...");if(await V.exists()){print("Detected a Get DSA installation.");var CC=await V.readAsString();var I=const JsonDecoder().convert(CC);if(I["links"].any((C)=>C["language"]=="Java")){var NC=await bD("java");if(NC==null){print("Warning: Please install Java." " See https://www.java.com/ for more information.");}}if(I["links"].any((C)=>C["language"]=="JavaScript")){var UD=await bD("node");if(UD==null){print("Warning: Please install NodeJS." " See https://nodejs.org/ for more information.");}}if(I["links"].any((C)=>C["language"]=="Ruby")){var mD=await bD("ruby");if(mD==null){print("Warning: Please install Ruby." "See https://www.ruby-lang.org/en/documentation/installation/ " "for more information.");}}if(I["links"].any((C)=>C["language"]=="Python")){var nD=await bD("python");if(nD==null){print("Warning: Please install Python." " See https://www.python.org/downloads/" " for more information.");}}}print("Verifying Configuration...");var A=new aD();await A.YY();try {var SF=await InternetAddress.lookup(A.host);if(SF.isEmpty){print('Error: Unable to find host name: ${A.host}');B=false;}}catch (G){print('Error: Unable to look up host name: ${A.host}.');B=false;}if(A.eP){var b=false;var n=false;if(A.port!=null&&A.port>0){b=true;if(A.port>RL||(A.port is num&&A.port is!int)){print('Error: The configured HTTP Port is invalid: ${A.port}');B=false;}else if(!(await DM(A.port))){print("Error: The configured HTTP Port" " (${A.port}) is currently in use.");B=false;}}if(A.IE!=null&&A.IE>0&&A.EI!=null&&A.EI.isNotEmpty){n=true;if(A.IE>RL||(A.IE is num&&A.IE is!int)){print("Error: The configured HTTPS Port is invalid: " "${A.IE}");B=false;}else if(!(await DM(A.IE))){print("Error: The configured HTTPS Port (${A.IE}) " "is currently in use.");B=false;}}if(!b&&!n){print("Error: HTTP and HTTPS Ports are both disabled. " "At least one active port is required.");B=false;}var H=A.get('authServer');if(H is Map&&H['enabled']==true){var EB=H["host"];var K=H["port"];var AH=H["token"];try {var xP=Uri.parse(EB);}catch (G){print('Error parsing authServer host (${EB}). Error: ${G}');B=false;}int D;if(K is!num){try {D=int.parse(K);}catch (G){print('Error parsing authServer port (${K}). Error: ${G}');B=false;}}else{D=K.toInt();}if(D<=0||D>=RL){print('Invalid authServer port number (${D})');B=false;}else if(!(await DM(D))){print('Error: The configured authServer port (${D}) is currently ' 'in use.');B=false;}if(AH==null){print("Authentication Server token not set.");B=false;}}}ZD gB=zS(A.dK);if(gB==null){B=false;}else{try {await gB.init(A);}catch (G){print("Failed to initialize Authentication System: ${G}");B=false;}}if(A.zO==true){print("!!WARNING!! You have debug mode set to on. Performance and resources WILL suffer.");print("To fix this issue, edit the server.json and set the 'debug' setting to false.");}if(A.IG>128||A.IG<0||(A.IG is num&&A.IG is!int)){print('Error: Invalid number of workers: ${A.IG}');B=false;}if(!B){print("Verification Failed. Please fix the above problems and then try again.");exit(1);}}File UF=new File("dglux_server.run");Future<bool> AQ(String B)async{var A=await BQ();A.add(B);var C=await A.where((D)=>!D.startsWith("STD")).first.timeout(const Duration(seconds:8),onTimeout:(){return "ERROR";});if(C=="OK"){return true;}else{return false;}}Future<WebSocket> BQ()async{if(!(await UF.exists())){throw new Exception("No Server Run File Found");}var A=await UF.readAsString();return await WebSocket.connect(A.trim());}Future<int> lZ()async{var A=await ServerSocket.bind(InternetAddress.LOOPBACK_IP_V4.address,0);var B=A.port;await A.close();return B;}Future<String> mZ()async{var A=new File("BUILD_NUMBER");try {if(!(await A.exists())){return "unknown";}else{return (await A.readAsString()).trim();}}catch (B){return "unknown";}}Future<String> nZ()async{var A=Pc.Sc;try {if(!(await A.exists())){return "unknown";}else{return (await A.readAsString()).trim();}}catch (B){return "unknown";}}Future<bool> SL()async{try {var A=await BQ().timeout(const Duration(seconds:6));try {await A.close();}catch (B){}return true;}catch (B){return false;}}abstract class bF{Stopwatch Hl=new Stopwatch()..start();xB message;bF(this.message);String toString()=>"PendingOp m=${message}";bool AZ(rD A);done(){var A=Hl.elapsedMilliseconds;tL.YC("LDAP request serviced: ${message} (${A} ms)");}}class zQ extends bF{var uO=new Completer<c>();zQ(xB A):super(A);bool AZ(rD B){var A=B.UY;if(A.xE==j.oI||A.xE==j.oL||A.xE==j.pL){uO.complete(A);}else{uO.completeError(A.th());}done();return true;}}typedef bool jL(X509Certificate _0);class kI{Queue<bF> Il=new Queue<bF>();Map<int,bF> Jl=new Map();static const za=const Duration(seconds:3);bool Kl=false;Socket Ll;bool isClosed()=>Ll==null;int Ml=1;int Nl;String Ol;bool Pl;SecurityContext Ql;jL Rl=null;Completer Sl;kI(this.Ol,this.Nl,this.Pl,this.Rl,[this.Ql]);Future<kI> connect()async{try {if(isClosed()){var B=(Pl)?SecureSocket.connect(Ol,Nl,onBadCertificate:Rl,context:Ql):Socket.connect(Ol,Nl);Ll=await B;Sl=new Completer();Ll.transform(la()).listen((C)=>Tl(C),onError:Ul,onDone:Vl);}return this;}on SocketException catch (A){if(A.osError!=null){if(A.osError.errorCode==61){throw new mL(A,Ol,Nl);}else if(A.osError.errorCode==8){throw new lL(A,Ol);}}rethrow;}}void Tl(xB A){var B=Hb.Ib(A);if(B is sL){sD.YC("Got extended response ${B.FZ} code=${B.UY.xE}");}var C=Jl[A.KE];if(C==null)throw new nI("Server sent us an unknown message id = ${A.KE} opCode=${A.aP}");if(C.AZ(B)){Jl.remove(A.KE);}if(A.aP==rL)Kl=false;}void Ul(A,StackTrace B){cB.vB("listen: onError",A,B);if(A is SocketException){if(A.osError!=null){if(A.osError.errorCode==61){throw new mL(A,Ol,Nl);}else if(A.osError.errorCode==8){throw new lL(A,Ol);}}throw new lI(A);}else{throw A;}}void Vl(){cB.wB("message stream done");assert(Sl!=null);Sl.complete();Wl();}Future<c> process(HH B){if(isClosed()){throw new NG("not connected");}var C=new xB( ++Ml,B);var A=new zQ(C);Xl(A);return A.uO.future;}Xl(bF A){Il.add(A);Yl();}Yl(){while(Zl()){var A=Il.removeFirst();al(A);}}bool Zl()=>(!Il.isEmpty)&&(Kl==false);al(bF A){tL.YC("[${A.message.KE}] Sending LDAP message: ${A.message}");var C=A.message.toBytes();qI.wB("[${A.message.KE}] Bytes sending: ${C}");Ll.add(C);Jl[A.message.KE]=A;if(A.message.aP==qL){Kl=true;}try {Ll.flush().then((D){qI.vB("[${A.message.KE}] Sent ${C.length} bytes");}).catchError((B){qI.OE("[${A.message.KE}] ${B}");throw B;});}catch (B){qI.OE("[${A.message.KE}] caught: ${B}");throw B;}}Future close(bool B)async{if(B||bl()){await Wl();}else{cB.vB("wait for queue to drain pendingResponse=${Jl}");var A=new Completer();new Timer.periodic(za,(Timer C){if(bl()){C.cancel();Wl().then((D)=>A.complete());}});await A.future;}if(Sl!=null){cB.wB("wait for message stream to be done");await Sl.future;}}bool bl(){if(Jl.isEmpty&&Il.isEmpty){return true;}Yl();return false;}Future Wl()async{if(!isClosed()){await Ll.destroy();Ll=null;}}}class mI{static const int nL=389;static const int GR=636;kI cl;bool dl=true;static const String UR="localhost";String Ol=UR;String get host=>Ol;void ri(String A){var B=(A!=null&&A.isNotEmpty)?A:UR;if(B!=Ol){if(state==ConnectionState.ready||state==ConnectionState.bindRequired){throw new StateError("cannot change host while connection is open");}}Ol=B;}bool el=false;int Nl=nL;SecurityContext Ql=null;int get port=>Nl;void si(bool B,[int A=null,SecurityContext C=null]){if(A!=null){if(A<0||65535<A){throw new ArgumentError.value(A,"port","outside range of 0-65535");}}B=(B==null||!B)?false:true;if(A==null){A=(B)?GR:nL;}if(B!=el||A!=Nl||C!=Ql){if(state==ConnectionState.ready||state==ConnectionState.bindRequired){throw new StateError("cannot change protocol while connection is open");}el=B;Nl=A;Ql=C;}}jL PX;String fl="";String gl="";String hl="";String il="";bool get isAuthenticated{return (fl.isNotEmpty);}List<Completer> jl=new List<Completer>();List<Completer<c>> kl=new List<Completer<c>>();var ll;List<Completer> ml=new List<Completer>();ConnectionState get state{if(cl==null){return ConnectionState.closed;}else{if(cl.isClosed()){return ConnectionState.disconnected;}else{if(fl!=hl||gl!=il){return ConnectionState.bindRequired;}else{return ConnectionState.ready;}}}}mI({String host: null,bool ssl: false,int port: null,String bindDN: null,String password: null,jL badCertificateHandler: null,SecurityContext context: null}){ri(host);si(ssl,port,context);nl(bindDN,password);PX=badCertificateHandler;this.dl=true;}Future<c> open()async{cB.YC("open: ${this.uC}");await ol(true);if(dl){return await pl(mustSend:false);}else{return null;}}Future close([bool A=false])async{cB.YC("close${A?": immediate":""}");if(jl.isNotEmpty){var B=new Completer();jl.add(B);await B.future;}switch (state){case ConnectionState.ready:case ConnectionState.bindRequired:await Wl(A);cB.vB("close: done");break;case ConnectionState.closed:cB.vB("close: was closed");break;case ConnectionState.disconnected:await cl.close(A);cB.vB("close: was disconnected");break;}cl=null;}Future<Object> Wl(bool C)async{assert(jl.isEmpty);var B=new Completer();ml.add(B);if(ml.length==1){var A=null;try {cB.wB("close: started");await cl.close(C);cB.wB("close: done");}catch (D){A=D;rethrow;}finally {for(var G in ml){G.complete(A);}ml.removeRange(0,ml.length);}return null;}else{cB.wB("close in progress");var A=await B.future;if(A!=null){throw A;}return null;}}void nl(String A,String B){if(A!=null&&A is!String){throw new ArgumentError.value(A,"bindDN","not a String");}if(B!=null&&B is!String){throw new ArgumentError.value(A,"password","not a String");}if(A==null||A.isEmpty){fl="";gl="";}else{fl=A;gl=B??"";}}Future ol(bool A)async{if(ml.isNotEmpty){var B=new Completer();ml.add(B);await B.future;}switch (state){case ConnectionState.closed:case ConnectionState.disconnected:if(A||dl){if(A){cB.vB("explicit open");}else{cB.vB("automatic open: ${this.uC}");}await ql();}else{throw new StateError("connection is not open: ${this.uC}");}break;case ConnectionState.bindRequired:case ConnectionState.ready:if(A&&!dl){throw new StateError("cannot open: already open: ${this.uC}");}break;}}Future<Object> ql()async{assert(ml.isEmpty);assert(kl.isEmpty);var B=new Completer<Object>();jl.add(B);if(jl.length==1){var A=null;try {cB.wB("opening connection: started");var C=new kI(Ol,Nl,el,PX??Gb,Ql);await C.connect();assert(cl==null||cl.isClosed());cl=C;hl="";il="";cB.wB("opening connection: done");}catch (D){A=D;rethrow;}finally {for(var G in jl){G.complete(A);}jl.removeRange(0,jl.length);}return null;}else{cB.wB("open in progress");var A=await B.future;if(A!=null){throw A;}return null;}}Future rl()async{switch (state){case ConnectionState.closed:if(dl){await open();}else{assert(cl==null);throw new StateError("connection not open");}break;case ConnectionState.disconnected:if(dl){await open();}else{throw new DR();}break;case ConnectionState.bindRequired:if(dl){await pl(mustSend:false);}else{throw new StateError("connection requires BIND");}break;case ConnectionState.ready:break;}assert(state==ConnectionState.ready);}Future<c> pl({bool mustSend: true})async{assert(mustSend!=null);if(!mustSend){if(state==ConnectionState.closed||state==ConnectionState.disconnected){cB.vB("bind not required: connection not open");return null;}if(hl==fl&&il==gl){cB.vB("bind not required: no change in credentials");return null;}}assert(cl!=null&&!cl.isClosed());if(mustSend){return await sl();}else{return await tl();}}Future<c> tl()async{cB.vB("automatic bind: ${(fl.isNotEmpty)?fl:"anonymous"}");assert(jl.isEmpty);assert(ml.isEmpty);var B=new Completer<c>();kl.add(B);if(kl.length==1){ll=null;c A=null;try {cB.vB("explicit bind: ${(fl.isNotEmpty)?fl:"anonymous"}");A=await sl();ll=null;return A;}catch (C){A=null;ll=C;rethrow;}finally {for(var D in kl){D.complete(A);}kl.removeRange(0,kl.length);}}else{var A=await B.future;if(ll){assert(A==null);throw ll;}assert(A!=null);return A;}}Future<c> sl()async{var A=await cl.process(new fS(this.fl,this.gl));if(A.xE==j.oI){cB.vB("bind: success");hl=fl;il=gl;}else{assert(false);return null;}return A;}Future<c> add(String A,Map<String,dynamic> B)async{cB.YC("add: ${A}");await rl();return await cl.process(new gS(A,fC.sa(B)));}static bool Gb(X509Certificate A){throw new FR(A);}String get uC{if(el){return "ldaps://"+Ol+(Nl!=GR?":${Nl}":"");}else{return "ldap://"+Ol+(Nl!=nL?":${Nl}":"");}}}enum ConnectionState {closed,bindRequired,ready,disconnected}StreamTransformer<Uint8List,xB> la(){Uint8List B=null;return new StreamTransformer.fromHandlers(handleData:(Uint8List D,EventSink<xB> H){if(D==null||D.length==0){YD.YC("received: zero");return;}Uint8List A;if(B==null){YD.YC("received: ${D.length}");A=new Uint8List.view(D.buffer);}else{YD.YC("received: ${D.length} (+${B.length} leftover)");A=new Uint8List(B.length+D.length);A.setRange(0,B.length,B);A.setRange(B.length,A.length,D);B=null;}YD.wB(()=>"received: ${D}");assert(0<A.length);do{var C=null;var G;if(2<=A.length){int L=A[1];if(L&0x80==0){G=1;C=L&0x7F;}else{var O=(L&0x7F);if(2+O<=A.length){G=1+O;C=0;for(int V=2;V<O+2;V++ ){C<<= 8;C|= A[V]&0xFF;}}}}if(C!=null&&(1+G+C)<=A.length){var I=(1+G+C);YD.vB(()=>"parsed ASN.1 object: ${I} bytes");tS.YC(()=>"ASN.1 object received: tag=${A[0]}, length=${C}");tS.wB(()=>"ASN.1 value: ${new Uint8List.view(A.buffer,1+G,C)}");if(A[0]==10){YD.RE("LDAP stream transformer: got a tag 10 object");}var b=new xB.dj(A);assert(b.Zi==I);H.add(b);if(A.length==I){A=null;}else{A=new Uint8List.view(A.buffer,A.offsetInBytes+I);}}else{B=A;A=null;}}while(A!=null);if(B==null){YD.vB("processed: all");}else{YD.vB("processed: leftover ${B.length} bytes");}},handleError:(Object K,StackTrace EB,EventSink<xB> H){if(K is TlsException){TlsException n=K;if(n.osError==null&&n.message=="OSStatus = -9805: connection closed gracefully error -9805"){YD.wB("LDAP stream transformer: closed gracefully"+((B==null)?"":": ${B.length} bytes left over"));return;}}YD.OE("LDAP stream transformer: error=${K}");throw K;},handleDone:(EventSink<xB> H){YD.wB("LDAP stream transformer: byte stream done");H.close();});}r jI=new r("ldap.control");abstract class BF{String get VP;static const na=0xA0;bool Si=false;HB zE()=>throw new Exception("Not implemented. Subclass must implement");BF();static List<BF> oa(HB A){jI.wB("Create Controls from ${A}");var B=[] ;if(A!=null){A.i.forEach((C)=>B.add(qa(C)));}return B;}static qa(HB A){var B=(A.i.first as SB).bB;jI.wB("Got control ${B}");switch (B){case kL.ER:return new kL.aj(A.i[1]);case iL.rQ:return new iL.Zj(A.i[1]);default:throw new Exception("Control ${B} not implemented");}}String toString()=>"${VP} ${this.runtimeType}, isCritical=${Si}}";}class iL extends BF{static const rQ="1.2.840.113556.1.4.474";String get VP=>rQ;iL.Zj(SB A){}}class kL extends BF{static const ER="2.16.840.1.113730.3.4.10";get VP=>ER;int TZ;int YX;int wX=0;int Dk;kL.aj(SB B){var C=B.RD;C[0]=bI;var D=new HB.Nj(C);jI.wB("Create control from ${B}  seq=${D}");var A=(D.i.first as HB);A.i.forEach((G)=>jI.wB(" ${G.runtimeType}  ${G}"));TZ=(A.i[0] as oD).ZC;YX=(A.i[1] as oD).ZC;wX=(A.i[2] as oD).ZC;}String toString()=>"${super.toString()}(targetpos=${TZ}, contentCount=${YX},x=${wX})";}class fC{String ul;Set vl=new Set();String get name=>ul;Set get values=>vl;fC(String B,dynamic A){this.ul=B;if(A is Iterable){vl.addAll(A);}else{vl.add(A);}}String toString()=>"${vl}";bool operator==(Object A)=>(A is fC&&ul==A.ul)&&vl.containsAll(A.vl)&&A.vl.containsAll(vl);static Map<String,fC> sa(Map<String,dynamic> D){var B=new Map<String,fC>();D.forEach((C,A){B[C]=(A is fC?A:new fC(C,A));});return B;}}class Z{int wl;int get yF=>wl;String xl;String get Xh=>xl;String yl;String get nO=>yl;List<Z> zl=new List<Z>();List<Z> get kP=>zl;static const int qQ=0xA0;static const int sQ=0xA1;static const int tQ=0xA2;static const int uQ=0xA3;static const int pa=0xA4;static const int vQ=0xA5;static const int wQ=0xA6;static const int xQ=0x87;static const int yQ=0xA8;static const int ra=0xA9;Z(this.wl,[this.yl,this.xl,this.zl]);static Z ta(String A,String B)=>new Z(uQ,A,B);static Z AR(List<Z> A)=>new Z(qQ,null,null,A);static Z BR(List<Z> A)=>new Z(sQ,null,null,A);static Z ua(Z A)=>new Z(tQ,null,null,[A]);static Z va(String A)=>new Z(xQ,A);static Z wa(String A)=>new FH(A);static Z xa(String A,String B)=>new Z(vQ,A,B);static Z ya(String A,String B)=>new Z(wQ,A,B);static Z Ab(String A,String B)=>new Z(yQ,A,B);Z operator&(Z A)=>Z.AR([this,A]);Z operator|(Z A)=>Z.BR([this,A]);String toString()=>"Filter(type=${wl} attrName=${yl} val=${xl}, subFilters=${zl})";IB zE(){switch (yF){case Z.uQ:case Z.vQ:case Z.wQ:case Z.yQ:var A=new HB(tag:yF);A.add(new SB(nO));A.add(new SB(ka.ma(Xh)));return A;case Z.qQ:case Z.sQ:var B=new KG(tag:yF);kP.forEach((Z D){B.add(D.zE());});return B;case Z.xQ:return new SB(nO,tag:yF);case Z.tQ:assert(kP!=null);var C=new KG(tag:yF);C.add(kP[0].zE());return C;case Z.ra:throw "Not Done yet. Fix me!!";default:throw new NG("Unexpected filter type = ${yF}. This should never happen");}}}class FH extends Z{static const int Bb=0x80;static const int Cb=0x81;static const int Db=0x82;String Am;List<String> Bm=[] ;String Cm;String get LY=>Am;List<String> get any=>Bm;String get xX=>Cm;FH(String C):super(Z.pa){var B=C.split("=");if(B.length!=2||B[0]==""||B[1]==""){throw new NG("Invalid substring pattern: expecting attr=match: '${C}'");}yl=B[0];var G=B[1];var A=G.split("*");if(A.length==1){throw new NG("Invalid substring pattern: missing '*': '${C}'");}if(!A.any((H)=>H.isNotEmpty)){throw new NG("Invalid substring pattern: use \"present\" filter instead: '${C}'");}if(A[0]!=""){Am=A[0];}if(A.last!=""){Cm=A.last;}for(int D=1;D<A.length-1; ++D){Bm.add(A[D]);}}IB zE(){var B=new HB(tag:yF);B.add(new SB(nO));var A=new HB();if(LY!=null){A.add(new SB(LY,tag:FH.Bb));}any.forEach((String C)=>A.add(new SB(C,tag:FH.Cb)));if(xX!=null){A.add(new SB(xX,tag:FH.Db));}B.add(A);return B;}String toString()=>"SubstringFilter(_init=${Am}, any=${Bm}, fin=${Cm})";}abstract class CF implements Exception{String Dm;String get message=>Dm;CF(this.Dm);String toString()=>Dm;}class NG extends CF{NG(String A):super(A);}class DR extends CF{DR():super("connection disconnected");}class lI extends CF{SocketException PE;lI(this.PE,[String A="Socket exception"]):super(A){assert(PE!=null);}String toString()=>PE.toString();}class lL extends lI{String UI;lL(SocketException A,this.UI):super(A,"Server not found"){assert(PE!=null);assert(PE.osError!=null);assert(PE.osError.errorCode==8);}String toString()=>"Cannot connect to ${UI}";}class mL extends lI{int localPort;String UI;int remotePort;mL(SocketException A,this.UI,this.remotePort):super(A,"Cannot establish connection"){assert(PE!=null);assert(PE.osError!=null);assert(PE.osError.errorCode==61);this.localPort=PE.port;}String toString()=>"Cannot connect to ${UI}:${remotePort} from port ${localPort}";}class FR extends CF{X509Certificate certificate;FR(this.certificate):super("Bad X.509 certificate");String toString()=>"${message}: subject=${certificate.subject}; issuer=${certificate.issuer}";}class nI extends CF{nI(String A):super(A);}abstract class o extends CF{c Em;c get result=>Em;o(this.Em):super("LDAP Result"){assert(result!=null);}String toString()=>Em.toString();}class HR extends o{HR(c A):super(A);}class IR extends o{IR(c A):super(A);}class JR extends o{JR(c A):super(A);}class KR extends o{KR(c A):super(A);}class LR extends o{LR(c A):super(A);}class MR extends o{MR(c A):super(A);}class NR extends o{NR(c A):super(A);}class OR extends o{OR(c A):super(A);}class PR extends o{PR(c A):super(A);}class QR extends o{QR(c A):super(A);}class RR extends o{RR(c A):super(A);}class SR extends o{SR(c A):super(A);}class TR extends o{TR(c A):super(A);}class VR extends o{VR(c A):super(A);}class WR extends o{WR(c A):super(A);}class XR extends o{XR(c A):super(A);}class YR extends o{YR(c A):super(A);}class ZR extends o{ZR(c A):super(A);}class aR extends o{aR(c A):super(A);}class bR extends o{bR(c A):super(A);}class cR extends o{cR(c A):super(A);}class dR extends o{dR(c A):super(A);}class eR extends o{eR(c A):super(A);}class fR extends o{fR(c A):super(A);}class hR extends o{hR(c A):super(A);}class lR extends o{lR(c A):super(A);}class oR extends o{oR(c A):super(A);}class sR extends o{sR(c A):super(A);}class wR extends o{wR(c A):super(A);}class AS extends o{AS(c A):super(A);}class ES extends o{ES(c A):super(A);}class JS extends o{JS(c A):super(A);}class NS extends o{NS(c A):super(A);}class TS extends o{TS(c A):super(A);}class XS extends o{XS(c A):super(A);}class bS extends o{bS(c A):super(A);}class dS extends o{dS(c A):super(A);}class eS extends o{eS(c A):super(A);}class c{int Fm;String Gm;String Hm;List<String> Im;int get xE=>Fm;c(this.Fm,this.Hm,this.Gm,this.Im){}String toString()=>j.Fb(Fm)+((Gm!=null&&Gm.isNotEmpty)?": ${Gm}":"")+((Hm!=null&&Hm.isNotEmpty)?": ${Hm}":"");CF th(){switch (xE){case j.gR:return new HR(this);break;case j.iR:return new IR(this);break;case j.jR:return new JR(this);break;case j.kR:return new KR(this);break;case j.mR:return new LR(this);break;case j.nR:return new MR(this);break;case j.pR:return new NR(this);break;case j.qR:return new OR(this);break;case j.rR:return new PR(this);break;case j.tR:return new QR(this);break;case j.uR:return new RR(this);break;case j.vR:return new SR(this);break;case j.xR:return new TR(this);break;case j.yR:return new VR(this);break;case j.zR:return new WR(this);break;case j.BS:return new XR(this);break;case j.CS:return new YR(this);break;case j.DS:return new ZR(this);break;case j.FS:return new aR(this);break;case j.GS:return new bR(this);break;case j.HS:return new cR(this);break;case j.IS:return new dR(this);break;case j.KS:return new eR(this);break;case j.LS:return new fR(this);break;case j.MS:return new hR(this);break;case j.OS:return new lR(this);break;case j.PS:return new oR(this);break;case j.QS:return new sR(this);break;case j.RS:return new wR(this);break;case j.SS:return new AS(this);break;case j.US:return new ES(this);break;case j.VS:return new JS(this);break;case j.WS:return new NS(this);break;case j.YS:return new TS(this);break;case j.ZS:return new XS(this);break;case j.aS:return new bS(this);break;case j.cS:return new dS(this);break;default:assert(xE!=j.oI);assert(xE!=j.oL);assert(xE!=j.pL);return new eS(this);break;}}}class GH{String Jm;final List<String> Km;Map<String,fC> get Yh=>Lm;Map<String,fC> Lm=new Map<String,fC>();GH(this.Jm,{List<String> referrals: const[] }):Km=referrals;String toString()=>"Entry[${Jm},${Lm}]";}class j{static const oI=0;static const gR=1;static const iR=2;static const jR=3;static const kR=4;static const oL=5;static const pL=6;static const mR=7;static const nR=8;static const pR=9;static const qR=11;static const rR=12;static const tR=13;static const uR=14;static const vR=16;static const xR=17;static const yR=18;static const zR=19;static const BS=20;static const CS=21;static const DS=32;static const FS=33;static const GS=34;static const HS=35;static const IS=36;static const KS=48;static const LS=49;static const MS=50;static const OS=51;static const PS=52;static const QS=53;static const RS=54;static const SS=64;static const US=65;static const VS=66;static const WS=67;static const YS=68;static const ZS=69;static const aS=71;static const cS=80;static final Map<int,String> Eb={oI:"OK",gR:"Operations error",iR:"Protocol error",jR:"Time limit exceeded",kR:"Size limit exceeded",oL:"Compare false",pL:"Compare true",mR:"Auth method not supported",nR:"Strong auth required",pR:"Referral",qR:"Admin limit exceeded",rR:"Unavailable critical extension",tR:"Confidentiality required",uR:"SASL bind in progress",vR:"No such attribute",xR:"Undefined attribute type",yR:"Inappropriate matching",zR:"Constraint violation",BS:"Attribute or value exists",CS:"Invalid attribute syntax",DS:"No such object",FS:"Alias problem",GS:"Invalid DN syntax",HS:"Is leaf",IS:"Alias dereferencing problem",KS:"Inappropriate authentication",LS:"Invalid credentials",MS:"Insufficient access rights",OS:"Busy",PS:"Unavailable",QS:"Unwilling to perform",RS:"Loop detect",SS:"Naming violation",US:"Object class violation",VS:"Not allowed on nonleaf",WS:"Not allowed on RDN",YS:"Entry already exists",ZS:"Object class mods prohibited",aS:"Affects multiple DSAS",cS:"Other"};static String Fb(int A)=>Eb[A]??"LDAP result code ${A}";}class ka{static String ma(String C){StringBuffer A=new StringBuffer();C.codeUnits.forEach((B){switch (B){case 0x2a:case 0x28:case 0x29:case 0x00:case 0x5c:A.write('\\');A.write(B.toRadixString(16));break;default:A.writeCharCode(B);break;}});return A.toString();}}ZD zS(String A){ZD B;if(A=="file"||A=="json"){B=new uL();}else if(A=="proxy"){B=new uS();}else if(A=="openId"){B=new BT();}else if(A=="ldap"){B=new PG();}else if(A=="external"){B=new Sb();}else if(A=="ldap-with-fallback"){B=new OG([new PG(),new PG("ldap2")]);}else if(A=="ldap-with-fallback-and-file"){B=new OG([new PG(),new PG("ldap2"),new uL()]);}else if(A=="open"){B=new Tb();}else if(A.startsWith(OG.wS)&&A.endsWith("]")){String C=A.substring(OG.wS.length,A.length-1);List<String> D=C.split(",").map((G)=>G.trim()).toList();return new OG(D.map(zS).toList());}else{FB.RE("Invalid Authentication Method: ${A}");}return B;}abstract class ZD{Future init(aD A);Map<String,int> Fk=<String,int>{};}abstract class IH{}abstract class Xb{}abstract class JH{}class yS{final String message;yS(this.message);String toString()=>message;}class OC{final String username;final bool lP;final String KI;final Map RP;OC(this.username,this.lP,[this.KI,Map A]):RP=A is!Map?{}:A;static OC AT(Map A){var B=new OC(A["username"],A["superuser"] is bool?A["superuser"]:false,A["email"],A["metadata"]);for(String C in A.keys.where((D)=>!(const["username","superuser","email","metadata"]).contains(D))){B.OP[C]=A[C];}return B;}Map WZ([List<String> C]){var A={"username":username,"superuser":lP,"metadata":RP};if(KI!=null&&KI.isNotEmpty){A["email"]=KI;}if(C!=null){for(String B in C){if(OP.containsKey(B)){A[B]=OP[B];}}}return A;}OC vF(){return new OC(username,lP,KI,new Map.from(RP));}Map<String,dynamic> OP={};}class OG extends ZD implements IH{final List<ZD> hY;static const String wS='composite[';OG(this.hY);Future init(aD A)async{for(var B in hY){await B.init(A);}}}class Sb extends ZD implements IH,JH{WebSocket socket;String uC;String MC;Duration timeout=new Duration(seconds:10);bool ZI;Future init(aD C)async{var A=C.get("externalAuth");B(String D){FB.PF(D);exit(1);}if(A==null){B("External Authentication not configured.");}uC=A["url"];if(uC==null||uC.isEmpty){B("External Authentication URL not configured.");}MC=A["token"];if(A.containsKey('timeout')){timeout=new Duration(seconds:A['timeout']);}if(MC==null){B("External Authentication token not configured.");}ZI=A["verifyOnStart"];if(ZI==null){ZI=true;}await connect(true);}connect([bool A=false])async{if(Mm){return;}FB.YC("External Authentication connecting");try {socket=await gc.jc(uC);Mm=true;Nm=0;socket.done.then((K){FB.YC("External Authentication is closed");Mm=false;new Timer(const Duration(seconds:5),(){connect();});});socket.listen((String G){try {var B=const JsonDecoder().convert(G);if(B is!Map){return;}if(B["event"]=="changed"){for(var H in Om){H();}return;}Pm.add(B);}catch (C){FB.YC("External Authentication data error : ${C}");}});socket.add(const JsonEncoder().convert({"token":MC}));Map D=await Qm.first.timeout(const Duration(seconds:5));if(D["error"]!=null){if(A&&ZI){FB.OE("External Authentcation system says '${D["error"]}'");exit(1);}else{throw new yS(D["error"]);}}if(A){FB.PF("External Authentication System Connected.");}}catch (C,I){FB.OE("Failed to connect to the External Authentication system.",C,I);if(A&&ZI){exit(1);}new Timer(const Duration(seconds:5),(){connect();});}}StreamController<Map> Pm=new StreamController.broadcast();Stream<Map> get Qm=>Pm.stream;bool Mm=false;int Nm=0;List<Function> Om=[] ;}RH vS;RH Wb;class uL extends ZD implements JH,IH,Xb{File file=new File("users.json");List<OC> YI=[] ;uL();Future init(aD A)async{vS=new RH(keyLength:A.zK,iterations:A.yK);if(A.SI!=null||A.RI!=null){var B=A.RI??A.yK;var C=A.SI??A.zK;Wb=new RH(keyLength:C,iterations:B);}await load();if(!Platform.isAndroid){var D=new aG(file.path);D.mK.listen((gC G)async{if(G.type==vD.QJ){FB.PF("Reloading Users");await load();}});}}String zh(){var A={"username":"dgSuper"};var B=[A];A["password"]=vS.Ji('dg1234');A["superuser"]=true;A["metadata"]={"forcePasswordChange":true};return AM.convert(B);}Future load()async{if(Rm){return;}Rm=true;try {if(!(await file.exists())){await file.create(recursive:true);await file.writeAsString(zh()+"\n");}var B=await file.readAsString();var A=const JsonDecoder().convert(B);if(A is!List){A=[] ;}List C=A;YI=C.map(OC.AT).toList();Sm();}on FormatException catch (D){FB.RE("Failed to load Users File: ${D.toString().trim()}");}Rm=false;}bool Rm=false;CL()async{var A=const JsonEncoder.withIndent("  ");var B=A.convert(YI.map((OC C){return C.WZ(const["password"]);}).toList())+"\n";await file.writeAsString(B);}List<Function> Om=[] ;void Sm(){for(var A in Om){A();}}}class Ub<DC>{}class oB{static const String Yb='url';static const String Zb='dn';static const String ab='password';static const String wL='searchBase';static const String bb='groupAttribute';static const String cb='usernameAttribute';static const String db='emailAttribute';static const String eb='allowListUsers';static const String fb='superuserGroup';static const String gb='metadata';static const String hb='serverCertificate';static const String ib='clientCertificate';static const String jb='clientCertificateKey';static const String kb='clientKeyPassword';static const String lb='searchFilter';final String host;final bool ssl;final int port;String RX;String password;SecurityContext context;oB(this.host,{this.ssl: false,this.port: null});}class PG extends ZD implements IH,JH{static const String xL='certs';oB BG;List<String> fP;String MP;String tP;String FP;String DL;bool kO;Map<String,String> TP;Z ni;dynamic mP;String Tm;PG([this.Tm="ldap"]);Future init(aD n)async{void B(String mD){FB.OE("Error while initializing LDAP: ${mD}");exit(1);}if(n.get(Tm)==null){B("LDAP Authentication is not configured.");}var A=n.get(Tm);var gB=A[oB.Yb];if(gB==null){B("LDAP URL was not specified.");}Uri D;try {D=Uri.parse(gB);}catch (G){B("Failed to parse LDAP URL: ${G}");}var L=new oB(D.host,port:D.port!=0?D.port:null,ssl:D.scheme=="ldaps");SecurityContext C;String O,V,b,CC;var EB=A[oB.hb];if(EB is String&&EB.isNotEmpty){O=QB(xL,EB);var H=new File(O);if(!H.existsSync()){B('Specified server certificate does not exist at ${O}');}C=SecurityContext.defaultContext;C.setTrustedCertificates(O);}var I=A[oB.ib];var K=A[oB.jb];CC=A[oB.kb];if(I!=K&&(I==null||K==null)){B('Both Client Certificate and Client Certificate Key must be provided');}if(I is String&&I.isNotEmpty&&K is String&&K.isNotEmpty){V=QB(xL,I);var H=new File(V);if(!H.existsSync()){B('Specified Client certificate does not exist at ${V}');}b=QB(xL,K);H=new File(b);if(!H.existsSync()){B('Specified Client certificate key does not exist at ${b}');}if(C==null)C=SecurityContext.defaultContext;C.useCertificateChain(V);C.usePrivateKey(b,password:CC);}L.context=C;var NC=A[oB.Zb];if(NC==null){B("LDAP DN is not configured.");}L.RX=NC;var UD=A[oB.ab];if(UD!=null){L.password=UD;}if(A[oB.wL] is String){fP=[A[oB.wL]];}else{fP=A[oB.wL];}if(fP==null){B("LDAP Search Base is not configured.");}MP=A[oB.bb];if(MP==null){MP="gid";}tP=A[oB.cb];if(tP==null){tP="uid";}FP=A[oB.db];if(FP==null){FP='mail';}kO=A[oB.eb];if(kO==null){kO=false;}DL=A[oB.lb];if(DL!=null&&DL.isNotEmpty){var nD=new Oc();try {ni=nD.Kf(DL);}catch (G){B('Unable to parse search filter: ${G}');}}mP=A[oB.fb];if(mP==null){mP="superuser";}TP=A[oB.gb];if(TP==null){TP={};}BG=L;try {GI=await Ei();FB.PF("LDAP Authentication Configured.");}catch (G){if(n.dK=="ldap"){B("LDAP Connection failed: ${G}");}}new Timer.periodic(const Duration(seconds:10),(SF){Um.clear();});new Timer.periodic(const Duration(hours:1),(SF){Sm();});Vm();Wm();}mI GI;Future<mI> Ei()async{if(GI==null||GI.state==ConnectionState.closed){GI=new mI(host:BG.host,ssl:BG.ssl,port:BG.port,bindDN:BG.RX,password:BG.password,badCertificateHandler:(A){FB.RE('Received warning of bad server certificate');return true;},context:BG.context);}return GI;}Map<String,OC> Um=new Map<String,OC>();Map<String,Ub<OC>> Xm={};Vm(){var A=new File("${Tm}_meta.json");if(A.existsSync()){Ym=FT.convert(A.readAsStringSync());}}Wm(){var A=new File("${Tm}_meta.json");A.writeAsStringSync(AM.convert(Ym)+"\n");}Map<String,Map<String,dynamic>> Ym={};void Sm(){for(var A in Om){A();}}List<Function> Om=[] ;}class Tb extends ZD{Future init(aD A)async{}final OC Gk=new OC("dgUser",false,null,{"open":true});}cD Vb=new cD(style:iB.VG);class vL{final Uri issuer;final String dh;final String qi;final String Aj;final String ti;final List<String> pi=<String>["openid"];final String clientRoles;final String realmRoles;Uri OX;Uri yi;Uri KY;Uri sh;Uri bh;String Ui;static const String xS='.well-known/openid-configuration';vL(this.issuer,this.dh,this.qi,this.Aj,this.ti,A,{this.clientRoles: null,this.realmRoles: null}){this.pi.addAll(A);}Future init({bool strictTls: false})async{var C=new HttpClient();C.badCertificateCallback=mb(strictTls);Uri B;if(issuer.path.contains(xS)){B=issuer;}else{B=issuer.replace(path:Vb.join(issuer.path,xS));}try {var D=await C.getUrl(B);var G=await D.close();Map A=JSON.decode(await UTF8.decodeStream(G));var H=Uri.parse(A['issuer']);if(H.host!=issuer.host){throw new StateError('Configuration issuer does not match issuer host address');}Ui=A['issuer'];OX=Uri.parse(A['authorization_endpoint']);yi=Uri.parse(A['token_endpoint']);if(A['userinfo_endpoint']!=null){KY=Uri.parse(A['userinfo_endpoint']);}else{KY=OX.resolve('userinfo');}if(A['end_session_endpoint']!=null){sh=Uri.parse(A['end_session_endpoint']);}if(A['check_session_iframe']!=null){bh=Uri.parse(A['check_session_iframe']);}else{FB.PF('OpenID Provider does not support session management');}}catch (I,K){FB.OE('Error retreiving openId configuration.',I,K);FB.OE('Config Path: ${B}');throw new StateError('Unable to configure OpenID');}finally {C.close(force:true);}}static Function mb(bool A){return (X509Certificate D,String B,int C){FB.PF('OpenID configuration: Bad certificate for ${B}:${C}');return !A;};}}class BT extends ZD implements JH{vL tY;List<Function> Om=[] ;BT();Future init(aD L)async{var A=L.get('openId');String B=A['issuer'];if(B==null||B.isEmpty){throw new ArgumentError.value(B,'issuer');}var C=A['clientId'];if(C==null||C.isEmpty){throw new ArgumentError.value(C,'clientId');}var H=A['secret'];if(H==null||H.isEmpty){throw new ArgumentError.value(H,'secret');}var D=A['clientRoles'] as String;var b=A['realmRoles'] as String;if(D!=null&&D.isNotEmpty){D=D.replaceAll(r'${client_id}',C);}String I=A['usernameKey'];String n=A['superuserGroup'];List<String> G=A['scope'];Uri O;try {O=Uri.parse(B);}catch (EB){throw new ArgumentError.value(B,'issuer');}String V;if(I!=null&&I.isNotEmpty)V=I;List<String> K=[] ;if(G==null||G.isEmpty){K..add('profile')..add('email');}else if(G is List<String>){K.addAll(G);}else{throw new ArgumentError.value(G,'scope','must be a list of strings');}tY=new vL(O,C,H,V,n,K,clientRoles:D,realmRoles:b);await tY.init(strictTls:L.jP);FB.PF('OpenId configuration is complete.');}void Sm(){for(var A in Om){A();}}}class uS extends ZD implements IH,JH{File file=new File("users.json");List<OC> YI=[] ;bool Rm=false;List<Function> Om=<Function>[] ;String Zm;int am;uS();Future init(aD C)async{if(Rm)return;Oi(C);Rm=true;try {if(!(await file.exists())){await file.create(recursive:true);await file.writeAsString('[{"username": "dgSuper",\n  "superuser": true,\n  "metadata": {}\n}]');}}catch (A){FB.RE("Failed to create users file",A);Rm=false;return;}try {var D=await file.readAsString();var B=const JsonDecoder().convert(D);if(B is!List)B=[] ;YI=(B as List).map(OC.AT).toList();}catch (A){FB.RE("Failed to read users from file ${file.path}",A);}Rm=false;}void Oi(aD D){Map<String,String> B=D.get("proxy",{});if(B.isEmpty)return;var A=B['password'];if(A==null||A.isEmpty)return;String C=IT(A);if(C==null||C.isEmpty){C=A;var G=bm(A);if(G!=null){B['password']=G;D.map['proxy']=B;D.WI();}}Zm=C.toLowerCase();}String bm(String A){if(A==null||A.isEmpty)return null;var B=JT(A);if(B==null||B.isEmpty){return null;}return B;}Future CL()async{var A=const JsonEncoder.withIndent("  ");var B=A.convert(YI.map((OC C)=>C.WZ(null)).toList());try {await file.writeAsString(B+"\n");}catch (D){FB.RE('Error writing to users file ${file.path}',D);}}}String nb(List<int> A){return const CT().convert(A);}List<int> ob(String A){return const DT().convert(A);}class CT extends Converter<List<int>,String>{final bool eZ;final bool iO;const CT([bool this.eZ=false,bool this.iO=false]);static const int yL=61;static const int pb=13;static const int qb=10;static const int rb=76;static const String sb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";static const String tb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";String convert(List<int> G){int I=G.length;if(I==0){return "";}final String D=eZ?tb:sb;final int K=I.remainder(3);final int b=I-K;int L=((I~/3)*4)+((K>0)?4:0);if(iO){L+= ((L-1)~/rb)<<1;}List<int> A=new List<int>(L);int B=0,H=0,O=0;while(H<b){int C=((G[H++ ]<<16)&0xFFFFFF)|((G[H++ ]<<8)&0xFFFFFF)|G[H++ ];A[B++ ]=D.codeUnitAt(C>>18);A[B++ ]=D.codeUnitAt((C>>12)&0x3F);A[B++ ]=D.codeUnitAt((C>>6)&0x3F);A[B++ ]=D.codeUnitAt(C&0x3f);if(iO&& ++O==19&&B<L-2){A[B++ ]=pb;A[B++ ]=qb;O=0;}}if(K==1){int C=G[H];A[B++ ]=D.codeUnitAt(C>>2);A[B++ ]=D.codeUnitAt((C<<4)&0x3F);A[B++ ]=yL;A[B++ ]=yL;}else if(K==2){int C=G[H];int V=G[H+1];A[B++ ]=D.codeUnitAt(C>>2);A[B++ ]=D.codeUnitAt(((C<<4)|(V>>4))&0x3F);A[B++ ]=D.codeUnitAt((V<<2)&0x3F);A[B++ ]=yL;}return new String.fromCharCodes(A);}}class DT extends Converter<String,List<int>>{const DT();static const List<int> zL=const[-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,0,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2];static const int ub=61;List<int> convert(String B){int D=B.length;if(D==0){return new List<int>(0);}int L=0;for(int A=0;A<D;A++ ){int G=zL[B.codeUnitAt(A)];if(G<0){L++ ;if(G==-2){throw new FormatException('Invalid character: ${B[A]}');}}}if((D-L)%4!=0){throw new FormatException('''Size of Base 64 characters in Input
          must be a multiple of 4. Input: ${B}''');}int O=0;for(int A=D-1;A>=0;A-- ){int V=B.codeUnitAt(A);if(zL[V]>0)break;if(V==ub)O++ ;}int I=(((D-L)*6)>>3)-O;List<int> K=new Uint8List(I);for(int A=0,C=0;C<I;){int H=0;for(int b=4;b>0;){int G=zL[B.codeUnitAt(A++ )];if(G>=0){H=((H<<6)&0xFFFFFF)|G;b-- ;}}K[C++ ]=H>>16;if(C<I){K[C++ ]=(H>>8)&0xFF;if(C<I)K[C++ ]=H&0xFF;}}return K;}}class aD{bool zO;int port;int IE;String AP;String gK;String EI;String tO;bool mX;bool jX;bool dX;bool TX;int IG;String host;int bZ;String qO;String sO;Map<String,String> GL;Map<String,Map<String,dynamic>> VY;Map<String,Map<String,dynamic>> cZ;bool jP;String rO;bool dP;List<String> eX;String dZ;bool BZ;bool HX;void set BP(List A){if(A!=null){var B=(List D)=>D[0]=='default';var C=A.firstWhere(B,orElse:()=>null);if(C!=null){A.removeWhere(B);A.add(C);}}cm=A;}List get BP=>cm;List cm;bool hZ;int yK;int zK;int RI;int SI;String dY;String GY;String dK;String ZZ;String XY;String gX;bool fZ;bool gZ;String hX;bool eP;bool qX;String LZ;bool oX;int ZY;List<String> aY;Map<String,String> proxies;Map<String,List<String>> IY;List<String> MZ;List<String> bX;List<String> SY;int iZ;bool IX;bool nX;bool JX;int xY;bool TY;Map<String,String> WY;bool VZ;String BY;bool kX;String MX;Map<String,List<String>> JY;bool MY;String ZX;bool lX;bool pX;int gY;String LX;String cY;bool bY;int fY;int eY;bool SX;String aX;Map NX;RegExp dm=null;String RZ;dynamic wK;String OZ;bool yX;dynamic get(A,[B]){if(A is!List){A=[A];}for(var C in A){if(map[C]!=null){return map[C];}}if(B is Function){return B();}else{return B;}}dynamic map;void load(Map B){this.map=B;zO=get("debug",false);port=get("port",em);IE=get(["httpsPort","httpsport"],fm);EI=get("certName","");gK=get("certPassword");gm(gK);tO=get("certKeyName","");mX=get("enableHSTS",false);jX=get("enableCSRFProtection",false);dX=get("disableFileSecurity",false);TX=get("broadcast",false);qO=get("broadcastUrl");IG=get("workers",Platform.numberOfProcessors==1?1:2);bZ=get("updateInterval",200);var A=<String,String>{"/.well-known":"${Directory.current.absolute.path}/.well-known"};GL=get("static",A);if(!GL.containsKey("/.well-known")){GL.addAll(A);}VY=get("linkConfig",{});sO=get("brokerUrl");rO=get("brokerName","broker-");eX=get("disabledLinks",[] );dP=get("runBrokerInMain",Platform.numberOfProcessors==1?true:false);qX=get("enableUptimeChecker",true);dZ=get("uptimeCheckUrl");cZ=get("upstream",{});jP=get("strictTls",false);BZ=get("quarantine",false);HX=get("allowAllLinks",true);BP=get("defaultPermission",null);hZ=get("useRuntimeManager",false);fZ=get("useDartRuntimeManager",false);gZ=get("useJavaRuntimeManager",false);yK=get("passwordHasherIterations",1000);zK=get("passwordHasherKeyLength",32);RI=get('old_passwordHasherIterations',null);SI=get('old_passwordHasherKeyLength',null);dY=get("loginRedirectPath","/");dK=get("authType","file");ZZ=get("twoFactorAuth","none");hX=get("downstreamName","conns");eP=get("runPortChecks",true);RZ=get("storageDriver",'simple');wK=get("observe",false);host=get("host","0.0.0.0");aY=get("loggers",[] );proxies=get("proxies",{});IY=get("hooks",{});gX=get("distributionUrl",wb);XY=get("linkRepositoryUrl",vb);MZ=get("serverVmFlags",[] );bX=get("dartRuntimeManagerVmFlags",[] );SY=get("javaRuntimeManagerVmFlags",[] );iZ=get("userTimeout",525600);IX=get("allowBrowserCaching",false);LZ=get("serverLogLevel","INFO");oX=get("enableLogCompression",true);ZY=get("logRotationInterval",0);nX=get("enableIPv6",false);GY=get("guestLoginRedirectPath",null);JX=get("allowPasswordChanges",true);xY=get("passwordExpireAfterDays",0);TY=get("keepCustomAssets",false);WY=get("linkManagerEnvironment",{});VZ=get("timeHttpRequests",false);BY=get("generatedCertificateSubject","/C=US/ST=California/L=Oakland/O=Acuity Brands Inc./OU=Customers/CN=*");kX=get("enableCertificateGeneration",true);MX=get("alternativeBrokerUrl",null);JY=get("httpPathClassification",{});MY=get("isAlwaysOffline",false);ZX=get("corsProxyRules","");lX=get("enableGit",false);pX=get("enableSingleSignOnServer",false);gY=get("maxQueueSize",256);OZ=get("ssoProviderUrl",null);yX=get("formatDg5",false);LX=get("allowedCorsRegexString",null);cY=get("loginAuditFileName","audit.log");bY=get("loginAudit",false);fY=get("loginThrottleDuration",60);eY=get("loginThrottleAttempts",5);SX=get("blockOutsideGuests",false);aX=get("customLogo",null);NX=get("audit",null);}Future<bool> YY([String A="server"])async{if(await LH.GM.LP(".docker").exists()){em=80;fm=443;}var B=await ET(A);if(!(await B.exists())){load({"downstreamName":"downstream","corsProxyRules":""});await WI(A);return true;}var C=await zb(B);load(C);var D=CL();if(const JsonEncoder().convert(C)!=const JsonEncoder().convert(D)){await WI(A);}return false;}int fm=8443;int em=8080;Map CL(){var A={"debug":zO,"host":host,"port":port,"httpsPort":IE,"certName":EI,"certKeyName":tO,"certPassword":gK,"enableHSTS":mX,"enableCSRFProtection":jX,"strictFileUpload":{"enabled":false,"useClamAV":false,"extensions":const["dg5","dgi","crt","key","woff","ttf","gif","svg","png","jpg","xml","json","sql","csv"]},"disableFileSecurity":dX,"isAlwaysOffline":MY,"broadcast":TX,"workers":IG,"updateInterval":bZ,"static":GL,"linkConfig":VY,"disabledLinks":eX,"enableUptimeChecker":qX,"uptimeCheckUrl":dZ,"upstream":cZ,"strictTls":jP,"quarantine":BZ,"allowAllLinks":HX,"defaultPermission":BP,"useRuntimeManager":hZ,"useDartRuntimeManager":fZ,"useJavaRuntimeManager":gZ,"passwordHasherIterations":yK,"passwordHasherKeyLength":zK,"loginRedirectPath":dY,"guestLoginRedirectPath":GY,"authType":dK,"twoFactorAuth":ZZ,"runPortChecks":eP,"storageDriver":RZ,"downstreamName":hX,"loggers":aY,"proxies":proxies,"hooks":IY,"distributionUrl":gX,"linkRepositoryUrl":XY,"serverVmFlags":MZ,"userTimeout":iZ,"allowBrowserCaching":IX,"serverLogLevel":LZ,"enableLogCompression":oX,"logRotationInterval":ZY,"enableIPv6":nX,"dartRuntimeManagerVmFlags":bX,"javaRuntimeManagerVmFlags":SY,"allowPasswordChanges":JX,"passwordExpireAfterDays":xY,"keepCustomAssets":TY,"linkManagerEnvironment":WY,"timeHttpRequests":VZ,"generatedCertificateSubject":BY,"enableCertificateGeneration":kX,"alternativeBrokerUrl":MX,"httpPathClassification":JY,"corsProxyRules":ZX,"enableGit":lX,"enableSingleSignOnServer":pX,"maxQueueSize":gY,"ssoProviderUrl":OZ,"formatDg5":yX,"allowedCorsRegexString":LX,"loginAuditFileName":cY,"loginAudit":bY,"loginThrottleDuration":fY,"loginThrottleAttempts":eY,"blockOutsideGuests":SX,"customLogo":aX,"audit":NX};if(qO!=null){A["broadcastUrl"]=qO;}if(rO!=null){A["brokerName"]=rO;}if(sO!=null){A["brokerUrl"]=sO;}if(dP!=null){A["runBrokerInMain"]=dP;}if(map["ldap"]!=null){A["ldap"]=map["ldap"];}if(map["ldap2"]!=null){A["ldap2"]=map["ldap2"];}if(map["duo"]!=null){A["duo"]=map["duo"];}if(map["strictFileUpload"]!=null){A["strictFileUpload"]=map["strictFileUpload"];}if(map["externalAuth"]!=null){A["externalAuth"]=map["externalAuth"];}if(map["authServer"]!=null){A["authServer"]=map["authServer"];}if(map['openId']!=null){A['openId']=map['openId'];}if(map['proxy']!=null){A['proxy']=map['proxy'];}if(RI!=null){A['old_passwordHasherIterations']=RI;}if(SI!=null){A["old_passwordHasherKeyLength"]=SI;}if(wK==true||wK is String){A["observe"]=wK;}if(map['smtp']!=null){A['smtp']=map['smtp'];}return A;}bool hm=false;Future WI([String A="server"])async{if(hm){return;}hm=true;var B=await ET(A);await Ac(B,CL());hm=false;}void gm(String A){if(A==null||A.isEmpty){AP=A;return;}var B=IT(A);if(B==null||B.isEmpty){AP=A;im(A);return;}AP=B;}void im(String B){var A=JT(B);if(A==null||A.isEmpty){return;}gK=A;WI();}}const String vb="https://dsa.s3.amazonaws.com/links/links.json";const String wb="https://dsa.s3.amazonaws.com/dists/dists.json";Future xb(String A)async{var D=await bD("crontab");if(D==null){throw new Exception("Failed to add '${A}' to crontab:" " 'crontab' is not installed.");}A=A.trim();var B=await RG(D,args:["-l"],writeToBuffer:true);if(B.exitCode!=0&&!B.xK.toString().trim().contains("no crontab")){throw new Exception("Failed to add '${A}' to crontab." "\n${B.xK.toString().trim()}");}List<String> C=B.stdout.toString().split("\n").toSet().toList();if(C.contains(A)){return;}C.add(A);C.sort();var G=C.join("\n").trim();if(!G.endsWith("\n")){G+= "\n";}B=await RG(D,args:["-"],stdin:G,writeToBuffer:true);if(B.exitCode!=0){throw new Exception("Failed to add '${A}' to crontab:" "\n${B.xK.toString().trim()}");}}r FB;yb(){if(FB==null){TG=true;FB=new r("DGServer");FB.pY.listen((A){List<String> B=A.message.split("\n");for(String C in B){print("[${A.level.name}] ${C}");}if(A.error!=null){print(A.error);}if(A.stackTrace!=null&&FB.PY(h.aM)){print(A.stackTrace);}});}}Future<SG> ET(String A)async{var B=["${A}.json","${A}.toml","${A}.yaml"];for(var D in B){var C=LH.GM.LP(D);if(await C.exists()){return C;}}return LH.GM.LP(B.first);}Future<dynamic> zb(SG B)async{if(!(await B.exists())){return null;}var A=await B.readAsString();var C=vT(B.path);if(C==".toml"){var D=new lU();return QG(D.fB(A).value);}else if(C==".yaml"){return QG(Af(A));}else{if(A.trim().isEmpty||A==" "){A="{}";}return QG(FT.convert(A));}}Future Ac(SG B,dynamic D)async{if(!(await B.exists())){await B.create();}var A="";var C=vT(B.path);if(C==".toml"){var G=new ud();A=G.encode(D);}else if(C==".yaml"){A=Df(D);}else{A=AM.convert(D);}if(!A.endsWith("\n")){A=A+"\n";}final H=C!='.toml'&&C!='.yaml';await B.writeAsString(A,verifyJson:H);}JsonEncoder AM=const JsonEncoder.withIndent("  ");JsonDecoder FT=const JsonDecoder();dynamic QG(A){if(A is Map){var B={};for(var C in A.keys){B[QG(C)]=QG(A[C]);}return B;}else if(A is List){return A.map((D)=>QG(D)).toList();}else{return A;}}final Bc=new Uint8List.fromList([0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0x88,0x77,0x66,0x55,0x44,0xFF,0xFF,0x44,0x55,0x66,0x77,0x88,0x99,0x88,0x77,0x66,0x55,0x44,0x33,0x22,0x11,0xAA]);final MH GT=new MH(Bc);xI rI;xI get sI{if(rI!=null)return rI;rI=new xI();return rI;}String IT(String A){if(A==null||A.isEmpty)return null;sI..reset()..init(false,GT);String B;try {var D=ob(A);var G=KT(sI,D);var C=UTF8.decode(G);var H=int.parse(C.substring(0,2),radix:10);B=C.substring(2,2+H);}catch (I){return null;}return B;}String JT(String B){if(B==null||B.isEmpty)return null;String G;sI..reset()..init(true,GT);var I=B.length.toString().padLeft(2,'0');var A=I+B;var D=UTF8.encode(A);var H=16-(D.length%16);if(H!=16){var C=A.length+H;C=(C<16?16:C);A=A.padRight(C,'.');D=UTF8.encode(A);}try {var K=KT(sI,D);G=nb(K);}catch (L){FB.RE("Error encoding password",L);return null;}return G;}Uint8List KT(xI D,Uint8List B){var C=new Uint8List(B.length);for(var A=0;A<B.lengthInBytes;){var G=D.zY(B,A,C,A);A+= G;}return C;}Future<String> Cc({int length: 50})async{var B=new StringBuffer();for(int C=1;C<=length;C++ ){await new Future.value();var A=new Random.secure();if(A.nextBool()){String D=LT[A.nextInt(LT.length)];B.write(A.nextBool()?D.toLowerCase():D);}else{B.write(MT[A.nextInt(MT.length)]);}}return B.toString();}const List<String> LT=const["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];const List<int> MT=const[0,1,2,3,4,5,6,7,8,9];typedef dynamic Dc<DC>(DC _0);typedef void Ec(Process _0);typedef void BM(String _0);class CM extends ProcessResult{final xK;CM(int A,int B,C,D,this.xK):super(A,B,C,D);}class Fc{}Future<String> NT(File A,{bool useSmartHash: true})async{var B=await bD("md5sum");if(useSmartHash&&B!=null){try {var C=await Process.run(B,[A.absolute.path]);if(C.exitCode!=0){throw "Fail";}var D=C.stdout.split("\n").first;return D.split(" ").first;}catch (H){}}var G=await A.readAsBytes();return ea.convert(G).toString();}Future<bool> Gc(File A,String B)async{var C=await NT(A);return B==C;}Future OT(File A)async{var B=A.path+".md5";var C=new File(B);var D=await NT(A);await C.writeAsString(D);}enum ChecksumState {CREATED,SAME,MODIFIED}Future<ChecksumState> Hc(String C)async{var A=new File(C);var B=new File(A.path+".md5");if(!(await B.exists())){await OT(A);return ChecksumState.CREATED;}var D=(await B.readAsString()).trim();var G=await Gc(A,D);if(G){return ChecksumState.SAME;}else{await OT(A);return ChecksumState.MODIFIED;}}bool Ic=false;Future<CM> RG(String D,{List<String> args: const[] ,String workingDirectory,Map<String,String> environment,bool includeParentEnvironment: true,bool runInShell: true,stdin,Ec handler,BM stdoutHandler,BM stderrHandler,BM outputHandler,Fc controller,File outputFile,bool logCompression: true,Dc<int> exitHandler,bool inherit: false,bool writeToBuffer: false,bool binary: false,bool capture: true,bool inheritStdin: false,Duration timeout,bool sudo: false})async{if(sudo&&(Platform.isLinux||Platform.isMacOS)&&(await bD("sudo"))!=null){var gB=D;D=await bD("sudo");args=new List<String>.from(args);args.insert(0,gB);}EM B;if(outputFile!=null){B=new EM(outputFile,logCompression:logCompression);await B.start();}if(workingDirectory==null){workingDirectory=Directory.current.path;}var L=new Map.from(environment is Map?environment:{});if(includeParentEnvironment){L["PATH"]=PT();}try {if(Ic){FB.PF("Execute '${D} ${args.join(' ')}' in ${workingDirectory}");}Process A=await Process.start(D,args,workingDirectory:workingDirectory,environment:L,includeParentEnvironment:includeParentEnvironment,runInShell:runInShell);if(controller!=null){controller.jm=A;controller.km.complete();}if(B!=null){var CC="[${tI}] ==" " Executing ${D} with arguments" " ${args} (pid: ${A.pid}) ==";B.write(CC);}var H=new StringBuffer();var O=new StringBuffer();var V=new StringBuffer();var I=<int>[] ;var b=<int>[] ;var n=<int>[] ;if(capture){if(!binary){A.stdout.transform(const Utf8Decoder(allowMalformed:true)).transform(const LineSplitter()).listen((C)async{if(writeToBuffer){O.writeln(C);H.writeln(C);}if(stdoutHandler!=null){stdoutHandler(C);}if(outputHandler!=null){outputHandler(C);}if(inherit){jZ.stdout.writeln(C);}if(B!=null){B.write("[${tI}] ${C}");}});A.stderr.transform(const Utf8Decoder(allowMalformed:true)).transform(const LineSplitter()).listen((C)async{if(writeToBuffer){V.writeln(C);H.writeln(C);}if(stderrHandler!=null){stderrHandler(C);}if(outputHandler!=null){outputHandler(C);}if(inherit){jZ.stderr.writeln(C);}if(B!=null){B.write("[${tI}] ${C}");}});}else{A.stdout.listen((G){if(writeToBuffer){I.addAll(G);n.addAll(G);}});A.stderr.listen((G){if(writeToBuffer){I.addAll(G);b.addAll(G);}});}}if(handler!=null){handler(A);}if(stdin!=null){if(stdin is File){stdin=await stdin.openRead();}if(stdin is Stream){stdin.listen(A.stdin.add,onDone:A.stdin.close);}else if(stdin is List){A.stdin.add(stdin);}else{A.stdin.write(stdin);await A.stdin.close();}}else if(inherit&&inheritStdin){stdin.listen(A.stdin.add,onDone:A.stdin.close);}var EB=false;if(timeout!=null){new Future.delayed(timeout,(){if(!EB){A.kill(ProcessSignal.SIGKILL);}});}var K=await A.exitCode;EB=true;var NC=A.pid;await new Future.delayed(const Duration(milliseconds:5));if(B!=null){B.write("[${tI}] == Exited with status ${K} ==");}if(exitHandler!=null){exitHandler(K);}if(B!=null){await B.stop();}return new CM(NC,K,binary?n:O.toString(),binary?b:V.toString(),binary?I:H.toString());}finally {if(B!=null){await B.stop();}}}Map<String,String> KH={};String PT(){var A=Platform.environment["PATH"].split(Platform.isWindows?";":":");if(Platform.isMacOS&&!A.contains("/usr/local/bin")){A.add("/usr/local/bin");}return A.join(Platform.isWindows?";":":");}Future<String> bD(String B)async{if(KH.containsKey(B)){var A=new File(KH[B]);if(await A.exists()){return A.path;}}if(const["dart","pub"].contains(B)){try {var I=new File(Platform.resolvedExecutable);var K=I.parent;var A=new File(QB(K.path,B));if(await A.exists()){return KH[B]=A.absolute.path;}}catch (n){}}if(const["openssl"].contains(B)&&Platform.isWindows){var L=<String>[QB(Directory.current.path,"bin","tools","openssl","openssl.exe")];for(var O in L){var A=new File(O);if(await A.exists()){return KH[B]=A.absolute.path;}}}var V=PT().split(Platform.isWindows?";":":");var G=[B];if(Platform.isWindows){G.addAll(["${B}.exe","${B}.bat"]);}for(var C in V){if(C.startsWith('"')&&C.endsWith('"')){C=C.substring(1,C.length-1);}if(Platform.environment.containsKey("HOME")){var D=Platform.environment["HOME"];if(!D.endsWith("/")){D+= "/";}C=C.replaceAll("~/",D);}var H=new Directory(Ud(C)).absolute;if(!(await H.exists())){continue;}for(var b in G){var A=new File(QB(H.path,b)).absolute;if(await A.exists()){KH[B]=A.path;return A.path;}}}return null;}Future<bool> DM(int A,{String host: "0.0.0.0"})async{try {if((Platform.isLinux||Platform.isMacOS)&&await bD("lsof")!=null){var B=await Process.run("lsof",["-n","-i4TCP@${host}:${A}"]);if(B.exitCode==0&&B.stdout.contains("LISTEN")){return false;}else{return true;}}ServerSocket C=await ServerSocket.bind(host,A);await C.close();return true;}catch (D){return false;}}Future Jc(String B,String A)async{var C=await Process.run(QT(),["--snapshot=${B}",A]);if(C.exitCode!=0){throw new Exception("Failed to generate snapshot for ${A}.");}}String QT(){String A;try {A=Platform.resolvedExecutable;}catch (B){try {A=Platform.executable.isNotEmpty?Platform.executable:"dart";}catch (B){A="dart";}}return A;}String get tI{return new DateTime.now().toString();}GZipCodec Kc=new GZipCodec();Future Lc(File A,File B,{bool clearOld: false})async{var G=await bD("gzip");if(!(await B.parent.exists())){await B.parent.create(recursive:true);}if(G!=null){await B.create(recursive:true);var D=await B.openWrite();var C=await RG(G,stdin:A,handler:(Process H)async{H.stderr.drain();await D.addStream(H.stdout);},capture:false);if(C.exitCode!=0){await D.close();await B.delete();throw new Exception("Failed to GZIP Compress File ${A.path} to ${B.path}");}await new Future.delayed(const Duration(milliseconds:5));await D.close();if(clearOld){if(Platform.isWindows){await A.delete();await A.create(recursive:true);}else{await A.writeAsBytes([] ,flush:true);}}}else{var K=Kc.encoder;var I=await A.readAsBytes();var C=K.convert(I);await B.writeAsBytes(C,flush:true);I=null;C=null;if(clearOld){if(Platform.isWindows){await A.delete();await A.create(recursive:true);}else{await A.writeAsBytes([] ,flush:true);}}}}const int Mc=5242880;const int Nc=2;const Duration RT=const Duration(milliseconds:200);class EM{final File file;int Hk;bool logCompression;EM(this.file,{this.logCompression: true}){if(!file.existsSync()){file.createSync(recursive:true);}}KM lm;Future start([int B=0])async{if(lm!=null){lm.CP();lm=null;}void K(String D,File O,[int C=0]){var G=new File('${D}.${C}');if(G.existsSync()){if(C>=Nc){G.deleteSync();}else{K(D,G,C+1);}}O.renameSync('${D}.${C}');}var A=B==0?null:new Duration(seconds:B);lm=sc.tc(RT,()async{if(A!=null){A-= RT;}if(mm.isNotEmpty){if(A!=null&&A<=Duration.ZERO){try {K(file.path,file);file.createSync();A=new Duration(seconds:B);}catch (H,I){if(FB!=null){FB.RE("Failed to roll log: ${file.path}.",H,I);}}}var L=mm;mm=<String>[] ;await file.writeAsString(L.join("\n")+"\n",mode:FileMode.WRITE_ONLY_APPEND);L=null;if(!logCompression)return;try {var V=await file.stat();if(V.size>=Mc&&B<=0){var b=uT(file.path);var n=new DateTime.now().millisecondsSinceEpoch;var EB=new File(QB(file.parent.path,"${b}.${n}.gz"));await Lc(file,EB);await file.delete();await file.create();}}catch (H,I){if(FB!=null){FB.RE("Failed to compress log ${file.path}.",H,I);}}}});}Future stop()async{if(lm!=null){lm.CP();lm=null;}if(mm.isNotEmpty){await file.writeAsString(mm.join("\n")+"\n",mode:FileMode.WRITE_ONLY_APPEND);}}bool get isActive=>lm!=null;void write(String A){if(A.contains("\n")){mm.addAll(LineSplitter.split(A.trim()));}else{mm.add(A);}}List<String> mm=<String>[] ;}abstract class FM{}abstract class SG implements FM{}abstract class vI implements FM{}abstract class LH{static LH GM=new Tc();vI get GB;SG LP(String A){return GB.ch(A);}}class TT implements SG{final File file;TT(this.file);Future create()async{await file.create(recursive:true);}Future delete()async{await file.delete(recursive:true);}Future<bool> exists(){return file.exists();}FM get parent{return new wI(file.parent);}String get path=>file.path;Future<List<int>> readAsBytes(){return file.readAsBytes();}Future<String> readAsString(){return file.readAsString();}Future writeAsString(String A,{bool verifyJson: false})async{return mc(file,A,verifyJson:verifyJson);}}class wI implements vI{final Directory xF;wI(this.xF);SG ch(String A){var B=QB(xF.path,A);return new TT(new File(B));}Future create(){return xF.create(recursive:true);}Future delete(){return xF.delete(recursive:true);}Future<bool> exists(){return xF.exists();}vI get parent=>new wI(xF.parent);String get path=>xF.path;}class Tc extends LH{vI get GB=>new wI(Directory.current);}class TB{final List<int> QD;TB(this.QD);bool operator==(Object A)=>A is TB&&const bL().XC(QD,A.QD);int get hashCode=>const bL().hash(QD);String toString()=>aa.encode(QD);}class gL extends Sink<TB>{TB get value{assert(nm!=null);return nm;}TB nm;void add(TB A){assert(nm==null);nm=A;}void close(){assert(nm!=null);}}const bool fc=const bool.fromEnvironment("dsa.io.tcpNoDelay",defaultValue:true);class gc{static const String hc="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";static const bool ic=const bool.fromEnvironment("calzone.build",defaultValue:false)||const bool.fromEnvironment("websocket.standard",defaultValue:true);static Future<WebSocket> jc(String O,{Iterable<String> protocols,Map<String,dynamic> headers,HttpClient httpClient,bool useStandardWebSocket})async{Uri A=Uri.parse(O);if(useStandardWebSocket==null){useStandardWebSocket=ic;}if(useStandardWebSocket==true&&A.scheme!="wss"){return await nc(WebSocket.connect(O,protocols:protocols,headers:headers),60000,onSuccessAfterTimeout:(WebSocket D){D.close();});}if(A.scheme!="ws"&&A.scheme!="wss"){throw new WebSocketException("Unsupported URL scheme '${A.scheme}'");}Random CC=new Random();Uint8List V=new Uint8List(16);for(int C=0;C<16;C++ ){V[C]=CC.nextInt(256);}String b=BASE64.encode(V);int I=A.port;if(I==0){I=A.scheme=="wss"?443:80;}A=new Uri(scheme:A.scheme=="wss"?"https":"http",userInfo:A.userInfo,host:A.host,port:I,path:A.path,query:A.query);HttpClient n=httpClient==null?(new HttpClient()..badCertificateCallback=(SF,AH,xP)=>true):httpClient;return n.openUrl("GET",A).then((HttpClientRequest G)async{if(A.userInfo!=null&&!A.userInfo.isEmpty){String NC=BASE64.encode(UTF8.encode(A.userInfo));G.headers.set(HttpHeaders.AUTHORIZATION,"Basic ${NC}");}if(headers!=null){headers.forEach((UD,K)=>G.headers.add(UD,K));}G.headers..set(HttpHeaders.CONNECTION,"Upgrade")..set(HttpHeaders.UPGRADE,"websocket")..set("Sec-WebSocket-Key",b)..set("Cache-Control","no-cache")..set("Sec-WebSocket-Version","13");if(protocols!=null){G.headers.add("Sec-WebSocket-Protocol",protocols.toList());}return G.close();}).then((B){return B;}).then((HttpClientResponse B){void H(String mD){B.detachSocket().then((Socket D){D.destroy();});throw new WebSocketException(mD);}if(B.statusCode!=HttpStatus.SWITCHING_PROTOCOLS||B.headers[HttpHeaders.CONNECTION]==null||!B.headers[HttpHeaders.CONNECTION].any((K)=>K.toLowerCase()=="upgrade")||B.headers.value(HttpHeaders.UPGRADE).toLowerCase()!="websocket"){H("Connection to '${A}' was not upgraded to websocket");}String EB=B.headers.value("Sec-WebSocket-Accept");if(EB==null){H("Response did not contain a 'Sec-WebSocket-Accept' header");}List<int> L=lQ.convert("${b}${hc}".codeUnits).QD;List<int> gB=BASE64.decode(EB);if(L.length!=gB.length){H("Response header 'Sec-WebSocket-Accept' is the wrong length");}for(int C=0;C<L.length;C++ ){if(L[C]!=gB[C]){H("Bad response 'Sec-WebSocket-Accept' header");}}var nD=B.headers.value('Sec-WebSocket-Protocol');return B.detachSocket().then((D){D.setOption(SocketOption.TCP_NODELAY,fc);return new WebSocket.fromUpgradedSocket(D,protocol:nD,serverSide:false);});}).timeout(new Duration(minutes:1),onTimeout:(){n.close(force:true);throw new WebSocketException('timeout');});}}final kc=Qd;Future<File> lc(File B,dynamic G,Future<File> H(File file,dynamic content),{bool verifyJson: false})async{final C=await Directory.current.createTemp();final I=uT(B.path);var A=new File("${C.path}${kc}${I}");A=await H(A,G);var D=true;if(verifyJson){final K=await A.readAsString();try {JSON.decode(K);}on FormatException catch (L,O){D=false;JM.OE("Couldn't parse JSON after trying to write ${B.path}",L,O);}}if(D){A=await A.rename(B.absolute.path);C.delete();return A;}else{JM.OE("${B.path} wasn't saved, the original will be preserved");return B;}}Future<File> mc(File B,String A,{bool verifyJson: false})async{return lc(B,A,(File C,A)=>C.writeAsString(A,flush:true),verifyJson:verifyJson);}Future nc(Future G,int H,{Function onTimeout: null,Function onSuccessAfterTimeout: null,Function onErrorAfterTimeout: null}){Completer A=new Completer();Timer B=new Timer(new Duration(milliseconds:H),(){if(!A.isCompleted){if(onTimeout!=null){onTimeout();}A.completeError(new Exception('Future timeout before complete'));}});G.then((C){if(A.isCompleted){if(onSuccessAfterTimeout!=null){onSuccessAfterTimeout(C);}}else{B.cancel();A.complete(C);}}).catchError((D){if(A.isCompleted){if(onErrorAfterTimeout!=null){onErrorAfterTimeout(D);}}else{B.cancel();A.completeError(D);}});return A.future;}typedef dynamic XT();const String oc="1.1.2";r PH;const bool pc=identical(1,1.0);bool QH(VE B,String A,[bool D=false]){if(!pc){bool C=new bool.fromEnvironment(A,defaultValue:null);if(C!=null){return C;}}if(B.zone[A] is bool){return B.zone[A];}return D;}r get JM{if(PH!=null){return PH;}TG=true;PH=new r("DSA");PH.pY.listen((A){List<String> D=A.message.split("\n");bool G=QH(A,"dsa.logger.inline_errors",true);bool H=QH(A,"dsa.logger.sequence",false);if(G){if(A.error!=null){D.addAll(A.error.toString().split("\n"));}if(A.stackTrace!=null){D.addAll(A.stackTrace.toString().split("\n").where((I)=>I.isNotEmpty).toList());}}String C=A.QP;if(A.zone["dsa.logger.name"] is String){C=A.zone["dsa.logger.name"];}bool K=QH(A,"dsa.logger.show_timestamps",false);if(!QH(A,"dsa.logger.show_name",true)){C=null;}for(String L in D){String B="";if(H){B+= "[${A.KZ}]";}if(K){B+= "[${A.UZ}]";}B+= "[${A.level.name}]";if(C!=null){B+= "[${C}]";}B+= " ";B+= L;if(QH(A,"dsa.logger.print",true)){print(B);}}if(!G){if(A.error!=null){print(A.error);}if(A.stackTrace!=null){print(A.stackTrace);}}});qc(const String.fromEnvironment("dsa.logger.default_level",defaultValue:"INFO"));return PH;}void qc(String A){A=A.trim().toUpperCase();if(A=="DEBUG"){A="ALL";}Map<String,h> C={};for(var B in h.Ld){C[B.name]=B;}var B=C[A];if(B!=null){JM.level=B;}}class rc{}abstract class KM{void CP();}class YT extends KM{final XT function;YT(this.function);void CP(){if(function!=null){function();}}}class sc{static KM tc(A,H()){Duration B;if(A is Duration){B=A;}else if(A is int){B=new Duration(milliseconds:A);}else if(A is rc){B=A.duration;}else{throw new Exception("Invalid Interval: ${A}");}XT C;Timer D;bool G=false;C=()async{await H();if(!G){new Timer(B,C);}};D=new Timer(B,C);return new YT((){if(D!=null){D.cancel();}G=true;});}}final dU=new RegExp(r"\r\n?|\n");class AN extends ZG{int get JC=>om;int om=0;int get LB=>pm;int pm=0;FF get state=>new eU(this,position,JC,LB);bool get qm=>k(-1)==UQ&&k()==XL;set position(int A){var C=position;super.position=A;if(A>C){var B=rm(string.substring(C,A));om+= B.length;if(B.isEmpty){pm+= A-C;}else{pm=A-B.last.end;}}else{var B=rm(string.substring(A,C));if(qm)B.removeLast();om-= B.length;if(B.isEmpty){pm-= C-A;}else{pm=A-string.lastIndexOf(dU,A)-1;}}}AN(String A,{sourceUrl,int position}):super(A,sourceUrl:sourceUrl,position:position);int f(){var A=super.f();sm(A);return A;}void sm(int A){if(A==XL||(A==UQ&&k()!=XL)){om+= 1;pm=0;}else{pm+= 1;}}bool mB(Pattern B){if(!super.mB(B))return false;var A=rm(tG[0]);om+= A.length;if(A.isEmpty){pm+= tG[0].length;}else{pm=tG[0].length-A.last.end;}return true;}List<Match> rm(String B){var A=dU.allMatches(B).toList();if(qm)A.removeLast();return A;}}class eU implements FF{final AN tm;final int position;final int JC;final int LB;eU(this.tm,this.position,this.JC,this.LB);}const int WD=0x7fffffff;abstract class pD<W>{}class gI<W> implements pD<W>{const gI();bool XC(W A,W B)=>A==B;int hash(W A)=>A.hashCode;bool uK(Object A)=>true;}class WQ<W> implements pD<Iterable<W>>{final pD<W> um;const WQ([pD<W> A=const gI()]):um=A;bool XC(Iterable<W> A,Iterable<W> B){if(identical(A,B))return true;if(A==null||B==null)return false;var C=A.iterator;var D=B.iterator;while(true){bool G=C.moveNext();if(G!=D.moveNext())return false;if(!G)return true;if(!um.XC(C.current,D.current))return false;}}int hash(Iterable<W> B){int A=0;for(W C in B){int D=um.hash(C);A=(A+D)&WD;A=(A+(A<<10))&WD;A^= (A>>6);}A=(A+(A<<3))&WD;A^= (A>>11);A=(A+(A<<15))&WD;return A;}bool uK(Object A)=>A is Iterable<W>;}class bL<W> implements pD<List<W>>{final pD<W> um;const bL([pD<W> A=const gI()]):um=A;bool XC(List<W> A,List<W> B){if(identical(A,B))return true;if(A==null||B==null)return false;int D=A.length;if(D!=B.length)return false;for(int C=0;C<D;C++ ){if(!um.XC(A[C],B[C]))return false;}return true;}int hash(List<W> C){int A=0;for(int B=0;B<C.length;B++ ){int D=um.hash(C[B]);A=(A+D)&WD;A=(A+(A<<10))&WD;A^= (A>>6);}A=(A+(A<<3))&WD;A^= (A>>11);A=(A+(A<<15))&WD;return A;}bool uK(Object A)=>A is List<W>;}abstract class XQ<W,DC extends Iterable<W>> implements pD<DC>{final pD<W> um;const XQ(this.um);bool XC(DC D,DC G){if(identical(D,G))return true;if(D==null||G==null)return false;HashMap<W,int> C=new HashMap(equals:um.XC,hashCode:um.hash,isValidKey:um.uK);int H=0;for(var B in D){int A=C[B];if(A==null)A=0;C[B]=A+1;H++ ;}for(var B in G){int A=C[B];if(A==null||A==0)return false;C[B]=A-1;H-- ;}return H==0;}int hash(DC B){int A=0;for(W C in B){int D=um.hash(C);A=(A+D)&WD;}A=(A+(A<<3))&WD;A^= (A>>11);A=(A+(A<<15))&WD;return A;}}class YQ<W> extends XQ<W,Iterable<W>>{const YQ([pD<W> A=const gI()]):super(A);bool uK(Object A)=>A is Iterable<W>;}class NJ extends yM{String get source=>super.source;Uri get AB=>N.AB;NJ(String A,eB B,String C):super(A,B,C);}const int wM=10;const int md=13;class gF{final Uri uC;final vm=<int>[0];final Uint32List wm;int get length=>wm.length;int get uG=>vm.length;int xm;gF(String A,{url}):this.nj(A.runes,url:url);gF.nj(Iterable<int> D,{url}):uC=url is String?Uri.parse(url):url,wm=new Uint32List.fromList(D.toList()){for(var A=0;A<wm.length;A++ ){var B=wm[A];if(B==md){var C=A+1;if(C>=wm.length||wm[C]!=wM)B=wM;}if(B==wM)vm.add(A+1);}}RB N(int B,[int A]){if(A==null)A=length-1;return new ZE(this,B,A);}EF location(int A)=>new EF.oj(this,A);int rK(int A){if(A<0){throw new RangeError("Offset may not be negative, was ${A}.");}else if(A>length){throw new RangeError("Offset ${A} must not be greater than the number " "of characters in the file, ${length}.");}if(A<vm.first)return -1;if(A>=vm.last)return vm.length-1;if(ym(A))return xm;xm=zm(A)-1;return xm;}bool ym(int A){if(xm==null)return false;if(A<vm[xm])return false;if(xm>=vm.length-1||A<vm[xm+1]){return true;}if(xm>=vm.length-2||A<vm[xm+2]){xm++ ;return true;}return false;}int zm(int D){int A=0;int B=vm.length-1;while(A<B){var C=A+((B-A)~/2);if(vm[C]>D){B=C;}else{A=C+1;}}return B;}int KP(int A,{int line}){if(A<0){throw new RangeError("Offset may not be negative, was ${A}.");}else if(A>length){throw new RangeError("Offset ${A} must be not be greater than the " "number of characters in the file, ${length}.");}if(line==null){line=rK(A);}else if(line<0){throw new RangeError("Line may not be negative, was ${line}.");}else if(line>=uG){throw new RangeError("Line ${line} must be less than the number of " "lines in the file, ${uG}.");}var B=vm[line];if(B>A){throw new RangeError("Line ${line} comes after offset ${A}.");}return A-B;}int CY(int A,[int B]){if(B==null)B=0;if(A<0){throw new RangeError("Line may not be negative, was ${A}.");}else if(A>=uG){throw new RangeError("Line ${A} must be less than the number of " "lines in the file, ${uG}.");}else if(B<0){throw new RangeError("Column may not be negative, was ${B}.");}var C=vm[A]+B;if(C>length||(A+1<uG&&C>=vm[A+1])){throw new RangeError("Line ${A} doesn't have ${B} columns.");}return C;}String FY(int A,[int B])=>new String.fromCharCodes(wm.sublist(A,B));}class EF extends nd implements mC{final gF file;final int offset;Uri get AB=>file.uC;int get JC=>file.rK(offset);int get LB=>file.KP(offset);EF.oj(this.file,this.offset){if(offset<0){throw new RangeError("Offset may not be negative, was ${offset}.");}else if(offset>file.length){throw new RangeError("Offset ${offset} must not be greater than the number " "of characters in the file, ${file.length}.");}}RB KC()=>new ZE(file,offset,offset);}abstract class RB implements zM{}class ZE extends cU implements RB{final gF file;final int An;final int Bn;Uri get AB=>file.uC;int get length=>Bn-An;EF get start=>new EF.oj(file,An);EF get end=>new EF.oj(file,Bn);String get GG=>file.FY(An,Bn);String get context=>file.FY(file.CY(start.JC),end.JC==file.uG-1?null:file.CY(end.JC+1));ZE(this.file,this.An,this.Bn){if(Bn<An){throw new ArgumentError('End ${Bn} must come after start ${An}.');}else if(Bn>file.length){throw new RangeError("End ${Bn} must not be greater than the number " "of characters in the file, ${file.length}.");}else if(An<0){throw new RangeError("Start may not be negative, was ${An}.");}}int compareTo(eB A){if(A is!ZE)return super.compareTo(A);ZE B=A;var C=An.compareTo(B.An);return C==0?Bn.compareTo(B.Bn):C;}bool operator==(A){if(A is!RB)return super==A;if(A is!ZE){return super==A&&AB==A.AB;}return An==A.An&&Bn==A.Bn&&AB==A.AB;}int get hashCode=>super.hashCode;RB expand(RB A){if(AB!=A.AB){throw new ArgumentError("Source URLs \"${AB}\" and " " \"${A.AB}\" don't match.");}if(A is ZE){var B=JG.min(this.An,A.An);var C=JG.max(this.Bn,A.Bn);return new ZE(file,B,C);}else{var B=JG.min(this.An,A.start.offset);var C=JG.max(this.Bn,A.end.offset);return new ZE(file,B,C);}}}abstract class Pc{static const String Qc='www';static final String Rc=QB(Qc,'dgsb');static final File Sc=new File(QB(Rc,"REVISION"));}class ZT extends Object with ListMixin<String>{static final bool cT=Platform.isWindows;final Directory kK;bool Cn;List<String> Dn;Function En;String Fn;ZT(this.kK,String A,{bool caseSensitive,void notify(String path)}){if(kK==null){throw new ArgumentError("directory: ${kK}");}if(A==null){throw new ArgumentError("pattern: ${A}");}if(caseSensitive==null){if(cT){caseSensitive=false;}else{caseSensitive=true;}}Cn=caseSensitive;En=notify;Fn=LM.MM(A);Dn=Gn();}int get length{return Dn.length;}void set length(int A){throw new UnsupportedError("length=");}String operator[](int A){return Dn[A];}void operator[]=(int A,String B){throw new UnsupportedError("[]=");}bool Hn(String A){if(!new Directory(A).existsSync()){if(!new File(A).existsSync()){if(!new Link(A).existsSync()){return false;}}}return true;}List<String> Gn(){var A=new eT(Fn,caseSensitive:Cn,exists:Hn,isDirectory:In,isWindows:cT,list:Jn);return A.list(kK.path,notify:En);}bool In(String A){return new Directory(A).existsSync();}List<String> Jn(String C,bool D){List<String> A;try {A=new Directory(C).listSync(followLinks:D).map((B)=>B.path).toList();}catch (B){A=new List<String>();}return A;}}class LM{static final bool aT=Platform.isWindows;static String MM(String A){if(A==null||A.isEmpty){return A;}A=vc(A);if(A[0]!="~"){return A;}String B;if(aT){var C=Platform.environment["HOMEDRIVE"];var A=Platform.environment["HOMEPATH"];if(C!=null&&!C.isEmpty&&A!=null&&!A.isEmpty){B=C+A;}else{B=Platform.environment["USERPROFILE"];}B=B.replaceAll("\\","/");}else{B=Platform.environment["HOME"];}if(B==null||B.isEmpty){return A;}if(B.endsWith("/")||B.endsWith("\\")){B=B.substring(0,B.length-1);}if(A=="~"||A=="~/"){return B;}if(A.startsWith("~/")){return B+"/"+A.substring(2);}return A;}static String vc(String G){var D=new StringBuffer();var I=G.length;for(var A=0;A<I;A++ ){var B=G[A];switch (B){case "\$":if(A+1<I){var H=A+1;var C=G.codeUnitAt(H);if((C>=65&&C<=90)||C==95){while(true){if(H==I){break;}var C=G.codeUnitAt(H);if((C>=65&&C<=90)||(C>=48&&C<=57)||C==95){H++ ;continue;}break;}}if(H>A+1){var L=G.substring(A+1,H);var K=Platform.environment[L];if(K==null){K="";}else if(aT){K=K.replaceAll("\\","/");}D.write(K);A=H-1;}else{D.write(B);}}else{D.write(B);}break;case "[":D.write(B);if(A+1<I){B=G[ ++A];D.write(B);while(true){if(A==I){break;}B=G[ ++A];D.write(B);if(B=="]"){break;}}}break;default:D.write(B);break;}}return D.toString();}}class AJ{static final bool bT=Platform.isWindows;static String uc(String A){if(A==null){return null;}if(A.isEmpty){return ".";}var D=HJ(A);if(D.length==1){if(wT(A)){var B=Sd(A);if(bT){B=B.replaceAll("\\","/");}return B;}else{return ".";}}var C=GJ(A);if(bT){C=C.replaceAll("\\","/");}return C;}static List<String> dT(String A,{bool caseSensitive,void notify(String path)}){if(A==null){return null;}A=LM.MM(A);Directory B;if(wT(A)){var K=new gT();var D=K.fB(A);var G=[] ;var H=D.kC;var L=H.length;for(var C=1;C<L;C++ ){var I=D.kC[C];if(I.strict){G.add(I);}else{break;}}var O=H.first.source+G.join("/");B=new Directory(O);}else{B=Directory.current;}return new ZT(B,A,caseSensitive:caseSensitive,notify:notify);}static bool wc(String A,String B){if(A==null){return false;}A=LM.MM(A);switch (B){case "directory":return new Directory(A).existsSync();case "exists":return FileStat.statSync(A).type!=FileSystemEntityType.NOT_FOUND;case "file":return new File(A).existsSync();case "link":return new Link(A).existsSync();default:return null;}}}abstract class aG implements ON{factory aG(String A,{Duration pollingDelay}){if(FileSystemEntity.isWatchSupported&&!Platform.isWindows){return new pU(A);}return new rU(A,pollingDelay:pollingDelay);}}class XM implements Pattern{final bool caseSensitive;final String pattern;bool Kn;Pattern Ln;bool Mn;List<UE> Nn;XM(this.pattern,{this.caseSensitive: true}){if(pattern==null){throw new ArgumentError("pattern: ${pattern}");}if(caseSensitive==null){throw new ArgumentError("caseSensitive: ${caseSensitive}");}On(caseSensitive);}bool get crossesDirectory=>Kn;bool get isAbsolute=>Mn;List<UE> get EL=>Nn;Iterable<Match> allMatches(String A,[int B=0]){return Ln.allMatches(A,B);}bool kD(String A){return !allMatches(A).isEmpty;}Match matchAsPrefix(String A,[int B=0]){return Ln.matchAsPrefix(A,B);}String toString(){return pattern;}void On(bool B){var C=new Dd();var A=C.gh(pattern,caseSensitive:B);Kn=A.crossesDirectory;Ln=A.vX;Mn=A.isAbsolute;Nn=A.EL;}}class UE implements Pattern{Pattern Ln;final bool crossesDirectory;final bool onlyDirectory;final String pattern;final bool strict;UE(this.pattern,Pattern A,{this.crossesDirectory,this.onlyDirectory,this.strict}){if(pattern==null){throw new ArgumentError("pattern: ${pattern}");}if(A==null){throw new ArgumentError("expression: ${A}");}if(crossesDirectory==null){throw new ArgumentError("crossing: ${crossesDirectory}");}if(strict==null){throw new ArgumentError("strict: ${strict}");}if(onlyDirectory==null){throw new ArgumentError("trailingSlash: ${onlyDirectory}");}Ln=A;}Iterable<Match> allMatches(String A,[int B=0]){return Ln.allMatches(A,B);}bool kD(String A){return !allMatches(A).isEmpty;}Match matchAsPrefix(String A,[int B=0]){return Ln.matchAsPrefix(A,B);}String toString(){return pattern;}}class Dd{static const String Ed="Cannot escape slash '/' character";static const String Fd="Range out of order in character class";static const String YM="Explicit slash '/' not allowed in character class";static const String iT="Unterminated backslash '\\' escape sequence";static const String ZM="Unexpected end of character class";bool Pn;StringBuffer Qn;String Rn;StringBuffer Sn;jT gh(String A,{bool caseSensitive: true}){if(A==null){throw new ArgumentError("input: ${A}");}if(caseSensitive==null){throw new ArgumentError("caseSensitive: ${caseSensitive}");}Pn=caseSensitive;Rn=A;return On();}On(){Tn();var C=new gT();var B=C.fB(Rn);var D=Un(B.kC);var A=new jT();A.crossesDirectory=B.crossesDirectory;A.vX=new RegExp(Qn.toString(),caseSensitive:Pn);A.isAbsolute=B.isAbsolute;A.EL=D;return A;}void Vn(NM B,bool A){if(A){Wn("(?![.])");}Wn("[^/]*");}void Xn(OM B,bool A){if(A){Wn("(?![.])");}Wn(".*");}void Yn(BJ D,bool B){Wn("(?:");var G=D.kC;var H=G.length;for(var C=0;C<H;C++ ){var A=G[C];switch (A.type){case g.PM:Vn(A,B);break;case g.QM:Xn(A,B);break;case g.RM:Yn(A,B);break;case g.SM:Zn(A);break;case g.TM:an(A);break;case g.UM:bn(A);break;default:cn(D,A);}B=false;if(C<H-1){Wn("|");}}Wn(")");}void Zn(CJ D){var B="";var G=D.source;var H=G.length;var A=0;var I=(){switch (B){case "/":var C=YM;dn(C,D.position+A);break;case "\\":if(A>=H){var C=iT;dn(C,D.position+A);}B=G[A++ ];switch (B){case "/":var C=YM;dn(C,D.position+A);break;default:Wn("\\");Wn(B);break;}break;case "^":Wn(B);break;default:Wn(B);break;}var V=B.codeUnitAt(0);if(A<H){B=G[A++ ];}else{B="";}return V;};if(A<H){B=G[A++ ];}if(B!="["){en(D.type,"starts","[",0);}Wn("[");B=G[A++ ];if(B=="!"){Wn("^");if(A<H){B=G[A++ ];}else{var C=ZM;dn(C,D.position+A);}}if(B=="]"){Wn("\\]-\\]'");if(A<H){B=G[A++ ];}else{var C=ZM;dn(C,D.position+A);}}var K=false;while(true){if(B==""){en(D.type,"ends","]",0);}switch (B){case "/":var C=YM;dn(C,D.position+1+A);break;case "]":if(A!=H){en(D.type,"ends","]",0);}K=true;break;default:if(B=="-"){if(A<H){if(G[A]=="]"){B="]";A++ ;Wn("-");break;}}}int L=I();var O=L;switch (B){case "-":if(A>=H){var C=ZM;dn(C,D.position+A);}B=G[A++ ];if(B=="]"){A-= 2;B=G[A];}else{Wn("-");O=I();if(L>O){var C=Fd;dn(C,A);}}break;}}if(K){break;}}Wn("]");}void an(FD C){var D=C.source;var H=D.length;var B=0;while(true){if(B==H){break;}var A=D[B++ ];switch (A){case "\\":if(B==H){var G=iT;dn(G,C.position+B);}A=D[B++ ];switch (A){case "/":var G=Ed;dn(G,C.position+B);break;case "*":case "{":case "[":case "?":case "}":Wn("\\");Wn(A);break;case "\\":Wn("\\");Wn(A);break;default:Wn(A);}break;case "\$":case "(":case ")":case "*":case "+":case ".":case "?":case "[":case "]":case "^":case "{":case "|":case "}":Wn("\\");Wn(A);break;default:Wn(A);break;}}}void bn(EJ A){Wn(".");}UE fn(GD B){gn();var C=true;for(var A in B.kC){switch (A.type){case g.PM:Vn(A,C);break;case g.QM:Xn(A,C);break;case g.RM:Yn(A,C);break;case g.SM:Zn(A);break;case g.TM:an(A);break;case g.UM:bn(A);break;default:cn(B,A);}C=false;}Sn.write("\$");var D=Sn.toString();var G=new RegExp(D,caseSensitive:Pn);var H=B.crossesDirectory;var I=B.onlyDirectory;var K=B.source;var L=B.strict;var O=new UE(K,G,crossesDirectory:H,onlyDirectory:I,strict:L);return O;}List<UE> Un(List<GD> C){Qn.write("^");var D=new List<UE>();var G=C.length;for(var A=0;A<G;A++ ){var B=C[A];switch (B.type){case g.fT:var H=fn(B);D.add(H);break;default:throw new StateError("Illegal node: '${B}'.");break;}if(A<G-1){if(!B.RY){Qn.write("/");}}}Qn.write("\$");return D;}void dn(String A,int B){throw new FormatException("(column: ${B+1}), ${A} in '${Rn}'.");}void cn(hB A,hB B){var C=A.position;var D="<null>";if(B!=null){D=B.type.toString();C=B.position;}var G=A.type;var H="Illegal element '${D}' in ${G} node '${A}'";dn(H,C);}void en(g A,String B,String C,int D){var G="'${A}' should ${B} with '${C}'";dn(G,D);}void Tn(){Qn=new StringBuffer();}void gn(){Sn=new StringBuffer();Sn.write("^");}void Wn(String A){Qn.write(A);Sn.write(A);}}class jT{bool isAbsolute;bool crossesDirectory;Pattern vX;List<UE> EL;}class eT{final String pattern;bool hn;Function jn;List<String> kn;bool ln;XM mn;Function nn;bool pn;Function qn;Function rn;int sn;bool tn;List<UE> un;bool vn;eT(this.pattern,{bool caseSensitive,bool exists(String path),bool followLinks: true,bool isDirectory(String path),bool isWindows,List<String> list(String path,bool followLinks)}){if(pattern==null){throw new ArgumentError("pattern: ${pattern}");}if(exists==null){throw new ArgumentError("exists: ${exists}");}if(followLinks==null){throw new ArgumentError("followLinks: ${followLinks}");}if(isDirectory==null){throw new ArgumentError("isDirectory: ${isDirectory}");}if(isWindows==null){throw new ArgumentError("isWindows: ${isWindows}");}if(list==null){throw new ArgumentError("list: ${list}");}if(caseSensitive==null){if(isWindows){caseSensitive=false;}else{caseSensitive=true;}}hn=caseSensitive;jn=exists;ln=followLinks;nn=isDirectory;pn=isWindows;qn=list;mn=new XM(pattern,caseSensitive:caseSensitive);un=mn.EL;if(!un.isEmpty){tn=un.last.onlyDirectory;}else{tn=false;}}List<String> list(String A,{void notify(String path)}){kn=<String>[] ;if(!nn(A)){return kn;}rn=notify;if(hn){if(pn){vn=false;}else{vn=true;}}else{if(pn){vn=true;}else{vn=false;}}var B=mn.isAbsolute;if(B){sn=0;}else{sn=A.length;}if(B){if(mn.crossesDirectory){wn(A);}else{xn(A);}}else{if(un[0].crossesDirectory){yn(A);}else{zn(A,0);}}return kn;}void Ao(String A){kn.add(A);if(rn!=null){rn(A);}}void wn(String A){if(pn){A=A.replaceAll("\\","/");}var D=HJ(A);var C=D.length;if(C>un.length){C=un.length;}for(var B=0;B<C;B++ ){var G=un[B];if(G.crossesDirectory){break;}if(!un[B].kD(D[B])){return;}}if(jn(A)&&nn(A)){yn(A);}}void xn(String A){if(pn){A=A.replaceAll("\\","/");}var H=HJ(A);var D=H.length;if(D>un.length){return;}var B=0;for(;B<D;B++ ){var I=H[B];var C=un[B];if(C.onlyDirectory){I+= "/";}if(!C.kD(I)){return;}}if(B==un.length){var C=un[B-1];var G=false;if(C.onlyDirectory){G=nn(A);}else{G=jn(A);}if(G){Ao(A);}return;}if(nn(A)){Bo(A,D);}}void Bo(String A,int D){var C=un[D];if(C.strict&&vn){A=QB(A,C.pattern);var G=nn(A);var L=false;if(!G){L=jn(A);}if(!(G||L)){return;}if(D==un.length-1){if(pn){A=A.replaceAll("\\","/");}if(C.onlyDirectory){if(G){Ao(A);}}else{Ao(A);}return;}if(G){Bo(A,D+1);}return;}List<String> V=qn(A,ln);for(var I in V){var B=I;if(pn){B=B.replaceAll("\\","/");}var O=B.lastIndexOf("/");String H;if(O!=-1){H=B.substring(O+1);}else{H=B;}bool K=nn(I);if(C.onlyDirectory){if(K){H+= "/";}}if(!C.kD(H)){continue;}if(D==un.length-1){if(C.onlyDirectory){if(K){Ao(B);}}else{Ao(B);}continue;}if(K){Bo(I,D+1);}}}void yn(String G){List<String> H=qn(G,ln);for(var C in H){var A=C;if(pn){A=A.replaceAll("\\","/");}var B=A;if(sn>0){B=A.substring(sn+1);}bool D=nn(C);if(tn){if(D){B+= "/";if(mn.kD(B)){Ao(A);}}}else{if(mn.kD(B)){Ao(A);}}if(D){yn(C);}}}void zn(String A,int G){var D=un[G];if(D.strict&&vn){A=QB(A,D.pattern);bool H=nn(A);var V=false;if(!H){V=jn(A);}if(!(H||V)){return;}if(G==un.length-1){if(pn){A=A.replaceAll("\\","/");}if(D.onlyDirectory){if(H){Ao(A);}}else{Ao(A);}return;}if(H){var B=G+1;var L=un[B];if(!L.crossesDirectory){zn(A,B);}else{yn(A);}}return;}List<String> b=qn(A,ln);for(var I in b){var C=I;if(pn){C=C.replaceAll("\\","/");}var B=C.lastIndexOf("/");String K;if(B!=-1){K=C.substring(B+1);}else{K=C;}bool O=nn(I);if(D.onlyDirectory){if(O){K+= "/";}}if(!D.kD(K)){continue;}if(G==un.length-1){if(D.onlyDirectory){if(O){Ao(C);}}else{Ao(C);}continue;}if(O){var B=G+1;var L=un[B];if(!L.crossesDirectory){zn(I,B);}else{yn(I);}}}}}abstract class hB{final String source;final int position;hB(this.source,this.position){if(source==null){throw new ArgumentError("source: ${source}");}if(position==null){throw new ArgumentError("position: ${position}");}}bool get crossesDirectory;bool get strict;g get type;String toString(){return source;}}class NM extends hB{NM(String A,int B):super(A,B);bool get crossesDirectory=>false;bool get strict=>false;g get type=>g.PM;}class OM extends hB{OM(String A,int B):super(A,B);bool get crossesDirectory=>true;bool get strict=>false;g get type=>g.QM;}class BJ extends DJ{BJ(String A,int B,List<hB> C):super(A,B,C){if(Co.length<2){throw new ArgumentError("The number of elements in the list of nodes must be at least 2");}}bool get strict=>false;g get type=>g.RM;}class CJ extends hB{CJ(String A,int B):super(A,B){if(A==null||A.length<3){throw new ArgumentError("source: ${A}");}if(A[0]!="["||A[A.length-1]!="]"){throw new ArgumentError("source: ${A}");}}bool get crossesDirectory=>false;bool get strict=>false;g get type=>g.SM;}abstract class DJ extends hB{bool Do;List<hB> Co;bool Eo;DJ(String B,int C,List<hB> A):super(B,C){if(A==null||A.isEmpty){throw new ArgumentError("nodes: ${A}");}for(var D in A){if(D is!hB){throw new ArgumentError("List of nodes contains invalid elements.");}}Co=A.toList();}bool get crossesDirectory{if(Do==null){Do=false;for(var A in Co){if(A.crossesDirectory){Do=true;break;}}}return Do;}List<hB> get kC=>new UnmodifiableListView<hB>(Co);bool get strict{if(Eo==null){Eo=true;for(var A in Co){if(!A.strict){Eo=false;break;}}}return Eo;}}class FD extends hB{FD(String A,int B):super(A,B);bool get crossesDirectory=>false;bool get strict=>true;g get type=>g.TM;}class EJ extends hB{EJ(String A,int B):super(A,B);bool get crossesDirectory=>false;bool get strict=>false;g get type=>g.UM;}class GD extends DJ{bool Fo;bool Go;GD(String B,int C,bool A,List<hB> D):super(B,C,D){if(A==null){throw new ArgumentError("isRoot: ${A}");}Fo=A;}bool get RY=>Fo;bool get onlyDirectory{if(Go==null){Go=false;if(!Fo){var A=Co.last;if(A is FD){Go=A.source.endsWith("/");}}}return Go;}g get type=>g.fT;}class FJ extends DJ{bool Ho;List<GD> Co;FJ(String A,int B,List<GD> C):super(A,B,C);bool get isAbsolute{if(Ho==null){Ho=Co.first.RY;}return Ho;}List<GD> get kC=>new UnmodifiableListView<GD>(Co);g get type=>g.xc;}class g{static const g PM=const g("ASTERISK");static const g QM=const g("ASTERISKS");static const g RM=const g("BRACE");static const g SM=const g("CHARACTER_CLASS");static const g TM=const g("LITERAL");static const g UM=const g("QUESTION");static const g fT=const g("SEGMENT");static const g xc=const g("SEGMENTS");final String name;const g(this.name);}class gT{static const String QC="";static const String yc="Cannot escape slash '/' character";static const String zc="Choice should contains at least two elements";static const String Ad="Range out of order in character class";static const String VM="Explicit slash '/' not allowed in character class";static const String Bd="Explicit slash '/' not allowed in brace";static const String hT="Unterminated backslash '\\' escape sequence";static const String WM="Unexpected end of character class";static const String Cd="Unexpected end of brace";String Io;String Jo;bool Ko;bool Fo;int Lo;int Mo;List<hB> No;List<GD> Oo;int Po;FJ fB(String A){if(A==null){throw new ArgumentError("input: ${A}");}if(A.isEmpty){var B=new FD("",0);var C=new GD("",0,false,[B]);return new FJ("",0,[C]);}this.Jo=A;Qo();Ro();return new FJ(Jo,0,Oo);}bool So(String B){if(B.isEmpty){return false;}var A=B.codeUnitAt(0);if(A>=65&&A<=90||A>=97&&A<=122){return true;}return false;}GD To(){var G=Mo;var C=Jo.substring(Po,Mo);var D=false;if(Io=="/"){while(true){Uo();if(Io!="/"){break;}}if(Io==QC&&!Fo){D=true;}}if(D){C+= "/";if(!No.isEmpty){var A=No.last;if(A is FD){var B=new FD(A.source+"/",A.position);No[No.length-1]=B;}else{var B=new FD("/",G);No.add(B);}}}var H=new GD(C,Po,Fo,No);Vo();return H;}void Wo(String A,int B){throw new FormatException("(column: ${B+1}), ${A} in '${Jo}'.");}int Xo(){int B;switch (Io){case QC:var A=WM;Wo(A,Mo);break;case "/":var A=VM;Wo(A,Mo);break;case "\\":Uo();switch (Io){case QC:var A=hT;Wo(A,Mo);break;case "/":var A=VM;Wo(A,Mo);break;default:B=Io.codeUnitAt(0);Uo();break;}break;case "^":B=Io.codeUnitAt(0);Uo();break;default:B=Io.codeUnitAt(0);Uo();break;}return B;}String Yo(int B){var A=Mo+B;if(A<Lo){return Jo[A];}return QC;}String Uo(){if(Mo+1>=Lo){Io=QC;Mo=Lo;return QC;}Io=Jo[ ++Mo];return Io;}void Ro(){switch (Io){case QC:break;case "/":Uo();Fo=true;var A=new FD("/",0);No.add(A);var B=To();Oo.add(B);break;default:if(So(Io)&&Yo(1)==":"&&Yo(2)=="/"){Fo=true;Mo+= 2;Uo();var C=Jo.substring(0,3);var A=new FD(C,0);No.add(A);var B=To();Oo.add(B);}break;}if(Io!=QC){Zo();}}BJ ao(){var D=Mo;var B=No.length;Uo();var G=true;var H=Ko;var C=false;Ko=true;while(true){switch (Io){case QC:var A=Cd;Wo(A,Mo);break;case "/":var A=Bd;Wo(A,Mo);break;case ",":Uo();if(Io=="}"){Uo();var I=new FD("",Mo);No.add(I);C=true;}G=false;break;case "}":Uo();C=true;break;default:bo();break;}if(C){break;}}if(G){var A=zc;Wo(A,Mo);}Ko=H;No.sublist(B,No.length);var K=No.sublist(B,No.length);No.length=B;var L=Jo.substring(D,Mo);return new BJ(L,D,K);}void bo(){hB A;switch (Io){case "*":A=co();break;case "?":A=eo();break;case "[":A=fo();break;case "{":A=ao();break;default:A=go();break;}No.add(A);}CJ fo(){var B=Mo;Uo();var G=Mo;if(Io=="!"){Uo();}if(Io=="]"){Uo();}var C=false;while(true){switch (Io){case "/":var A=VM;Wo(A,Mo);break;case QC:var A=WM;Wo(A,Mo);break;case "]":Uo();C=true;break;default:ho();break;}if(C){break;}}var D=Jo.substring(B,Mo);return new CJ(D,B);}FD go(){var C=Mo;var A=false;while(true){switch (Io){case QC:case "*":case "{":case "[":case "}":case "?":case "/":A=true;break;case ",":if(Ko){A=true;}else{Uo();}break;case "\\":Uo();if(Io==QC){var B=hT;Wo(B,Mo);}switch (Io){case "/":var B=yc;Wo(B,Mo);break;case "*":case "{":case "[":case "?":case "}":Uo();break;case "\\":Uo();break;default:break;}break;case "^":case "\$":case "(":case ".":case "+":case ")":case "|":Uo();break;default:Uo();break;}if(A){break;}}var D=Jo.substring(C,Mo);return new FD(D,C);}EJ eo(){Uo();return new EJ("?",Mo-1);}void ho(){if(Io=="-"){if(Yo(1)=="]"){Uo();return;}}var B=Xo();var C=B;switch (Io){case "-":Uo();if(Io==QC){var A=WM;Wo(A,Mo);return;}else if(Io=="]"){Mo-= 2;Uo();}else{var D=Mo;C=Xo();if(B>C){var A=Ad;Wo(A,D);}}break;}}void io(){while(true){hB A;switch (Io){case QC:case "/":break;case "*":A=co();break;case "?":A=eo();break;case "[":A=fo();break;case "{":A=ao();break;default:A=go();break;}if(A!=null){No.add(A);}else{break;}}}void Zo(){var A=false;while(true){io();var B=To();Oo.add(B);switch (Io){case QC:A=true;break;}if(A){break;}}}hB co(){var A=Mo;Uo();var B=false;switch (Io){case "*":B=true;while(true){Uo();if(Io!="*"){break;}}B=true;break;}var C=Jo.substring(A,Mo);if(B){return new OM(C,A);}else{return new NM(C,A);}}void Qo(){Ko=false;Lo=Jo.length;Mo=0;Oo=<GD>[] ;if(Mo<Lo){Io=Jo[Mo];}else{Mo=Lo;Io=QC;}Vo();}void Vo(){Fo=false;No=new List<hB>();Po=Mo;}}abstract class XD extends Converter<List<int>,TB>{int get blockSize;const XD();TB convert(List<int> C){var A=new gL();var B=startChunkedConversion(A);B.add(C);B.close();return A.value;}ByteConversionSink startChunkedConversion(Sink<TB> A);}abstract class hI implements Sink<List<int>>{final Sink<TB> jo;final Endianness ko;final Uint32List lo;static const da=0x1fffffffffffffff;int mo=0;final no=new oU();bool oo=false;Uint32List get X;hI(this.jo,int A,{Endianness endian: Endianness.BIG_ENDIAN}):ko=endian,lo=new Uint32List(A);void OL(Uint32List A);void add(List<int> A){if(oo)throw new StateError('Hash.add() called after close().');mo+= A.length;no.addAll(A);po();}void close(){if(oo)return;oo=true;qo();po();assert(no.isEmpty);jo.add(new TB(ro()));jo.close();}Uint8List ro(){if(ko==Endianness.HOST_ENDIAN)return X.buffer.asUint8List();var B=new Uint8List(X.lengthInBytes);var C=B.buffer.asByteData();for(var A=0;A<X.length;A++ ){C.setUint32(A*aF,X[A]);}return B;}void po(){var D=no.buffer.asByteData();var C=no.length~/lo.lengthInBytes;for(var B=0;B<C;B++ ){for(var A=0;A<lo.length;A++ ){lo[A]=D.getUint32(B*lo.lengthInBytes+A*aF,ko);}OL(lo);}no.removeRange(0,C*lo.lengthInBytes);}void qo(){no.add(0x80);var C=mo+9;var K=so(C,lo.lengthInBytes);for(var D=0;D<K-C;D++ ){no.add(0);}if(mo>da){throw new UnsupportedError('Hashing is unsupported for messages with more than 2^64 bits.');}var G=mo*ja;var A=no.length;no.addAll(new Uint8List(8));var B=no.buffer.asByteData();var H=G>>32;var I=G&qD;if(ko==Endianness.BIG_ENDIAN){B.setUint32(A,H,ko);B.setUint32(A+aF,I,ko);}else{B.setUint32(A,I,ko);B.setUint32(A+aF,H,ko);}}int so(int B,int A)=>(B+A-1)&-A;}class hL extends Converter<List<int>,TB>{final XD to;final Uint8List uo;hL(XD B,List<int> A):to=B,uo=new Uint8List(B.blockSize){if(A.length>to.blockSize)A=to.convert(A).QD;uo.setRange(0,A.length,A);}TB convert(List<int> C){var A=new gL();var B=startChunkedConversion(A);B.add(C);B.close();return A.value;}ByteConversionSink startChunkedConversion(Sink<TB> A)=>new iQ(A,to,uo);}class iQ extends ByteConversionSink{final ByteConversionSink vo;final wo=new gL();ByteConversionSink xo;bool yo=false;iQ(Sink<TB> G,XD D,List<int> C):vo=D.startChunkedConversion(G){xo=D.startChunkedConversion(wo);var B=new Uint8List(C.length);for(var A=0;A<B.length;A++ ){B[A]=0x5c^C[A];}vo.add(B);for(var A=0;A<B.length;A++ ){B[A]=0x36^C[A];}xo.add(B);}void add(List<int> A){if(yo)throw new StateError('HMAC is closed');xo.add(A);}void addSlice(List<int> A,int B,int C,bool D){if(yo)throw new StateError('HMAC is closed');xo.addSlice(A,B,C,D);}void close(){if(yo)return;yo=true;xo.close();vo.add(wo.value.QD);vo.close();}}abstract class XE extends iB{String get TD;bool iK(String A);bool q(int A);bool wG(String A);int SD(String A,{bool withDrive: false});String EY(String A){var B=SD(A);if(B>0)return A.substring(0,B);return FC(A)?A[0]:null;}bool FC(String A);String TI(Uri A);bool hK(int A,int B)=>A==B;bool YP(String A,String B)=>A==B;int UX(int A)=>A;String VX(String A)=>A;}enum _type {and,or,not,equal,approx,greater,less,present,ident,substring,lParen,rParen,END}class pB{_type type;String JE;pB(this.type,this.JE);}class ST{final String input;int zG=0;int cC=0;ST(this.input);String f(){var A=input[cC];cC+= 1;return A;}String aB(){if(cC>=input.length){return null;}return input[cC];}bool kD(String A){if(cC>=input.length||input[cC]!=A){return false;}cC+= 1;return true;}List<pB> Ci(){var A=<pB>[] ;while(cC<input.length){zG=cC;A.add(oi());}A.add(new pB(_type.END,""));return A;}pB oi(){var A=f();switch (A){case '(':return new pB(_type.lParen,A);case ')':return new pB(_type.rParen,A);case '&':return new pB(_type.and,A);case '|':return new pB(_type.or,A);case '!':return new pB(_type.not,A);case '=':if(aB()=='*'){f();return new pB(_type.present,input.substring(zG,cC));}return new pB(_type.equal,A);case '~':if(kD('=')){return new pB(_type.approx,input.substring(zG,cC));}throw 'Unexpected character after "~" expected "=" got: "${aB}()"';case '>':if(kD('=')){return new pB(_type.greater,input.substring(zG,cC));}throw 'Unexpected character after ">" expected "=" got: "${aB}()"';case '<':if(kD('=')){return new pB(_type.less,input.substring(zG,cC));}throw 'Unexpected character after "<" expected "=" got: "${aB}()"';default:if(OY(A)){return Ni();}throw "Unknown token: '${A}'";}}final Mi=new RegExp(r'\w+|\s');bool OY(String A){return Mi.hasMatch(A);}pB Ni(){var A=aB();bool B=false;while(cC<input.length&&(A=='.'||A=='*'||A==' '||OY(A))){if(A=='*')B=true;f();A=aB();}var C=B?_type.substring:_type.ident;return new pB(C,input.substring(zG,cC));}}class uI{_type type;String uF;String value;List<Z> IP;Z Ek;}class Oc{int index=0;pB MB;pB ii;List<pB> NL;void sE(){if(MB.type==_type.END||index>=NL.length)return;index+= 1;ii=MB;MB=NL[index];}Z Kf(String A){var B=new ST(A);NL=B.Ci();MB=NL[index];return WP();}Z WP(){var A=new uI();if(MB.type!=_type.lParen){throw 'Unexpected token "${MB.JE}". expected "("';}sE();if(MB.type==_type.and){sE();return Z.AR(IP());}if(MB.type==_type.or){sE();return Z.BR(IP());}if(MB.type==_type.not){sE();return Z.ua(WP());}if(MB.type!=_type.ident){throw 'Unexpected token "${MB.JE}". Expected attribute name.';}A.uF=MB.JE;sE();if(MB.type==_type.present){zo(isPresent:true);return Z.va(A.uF);}A.type=MB.type;sE();switch (A.type){case _type.equal:return XC(A);case _type.approx:return Wh(A);case _type.less:case _type.greater:return Xi(A);}throw 'Unexpected token: "${MB.JE}". '+"Expected filterType after attribute.";}List<Z> IP(){var A=<Z>[] ;while(MB.type!=_type.END&&MB.type!=_type.rParen){A.add(WP());}if(MB.type!=_type.rParen){throw 'Unexpected token: "${MB.JE}". '+'Expected ")" after filter list.';}sE();return A;}Z XC(uI A){A.value=Ap('=',acceptSubstring:true);if(MB.type==_type.substring)A.type=MB.type;zo();if(A.type==_type.substring){return Z.wa('${A.uF}=${A.value}');}return Z.ta(A.uF,A.value);}Z Wh(uI A){A.value=Ap('~=');zo();return Z.Ab(A.uF,A.value);}Z Xi(uI A){var B=A.type==_type.less?'<=':'>=';A.value=Ap(B);zo();if(A.type==_type.less){return Z.ya(A.uF,A.value);}return Z.xa(A.uF,A.value);}String Ap(String A,{bool acceptSubstring: false}){if(MB.type==_type.ident||(MB.type==_type.substring&&acceptSubstring)){return MB.JE;}throw 'Unexpected token: "${MB.JE}". '+'Expected value after "${A}".';}String zo({bool isPresent: false}){sE();if(MB.type!=_type.rParen){if(isPresent){throw 'Unexpected token: "${MB.JE}". '+'Expected ")" after present filter.';}throw 'Unexpected token: "${MB.JE}". '+'Expected ")" after filter value.';}sE();}}class gS extends HH{String Bp;Map<String,fC> Cp;gS(this.Bp,Map<String,fC> this.Cp):super(oS);IB zE(){var A=Dp();A.add(new SB(Bp));var C=new HB();Cp.forEach((I,fC D){var B=new HB();B.add(new SB(D.name));var G=new HB();D.values.forEach((dynamic H){G.add(new SB(H));});B.add(G);C.add(B);});A.add(C);return A;}}class fS extends HH{String Ep;String Fp;static const int Jb=0x80;fS(this.Ep,this.Fp):super(qL);IB zE(){var A=Dp();var B=new oD(3);A.add(B);var C=new SB(Ep);var D=new SB(Fp,tag:Jb);A.add(C);A.add(D);return A;}}class xB{int Gp;int Hp;int get aP=>Hp;HB Ip;HB Jp;IB Kp;List<IB> get i=>(Kp as HB).i;int get KE=>Gp;bool get Hi=>Jp!=null;HB get yG=>Ip;int get Zi=>Kp.YZ;xB(this.Gp,HH B,[List<BF> A=null]){Hp=B.ji;Kp=B.zE();if(A!=null&&A.length>0){Jp=new HB(tag:Rb);A.forEach((C){Jp.add(C.zE());tL.wB("Adding control ${C}");});}}xB.dj(Uint8List A){Kp=new HB.Nj(A);if(Kp==null){throw new nI("Parsing error on ${A}");}if(i.length!=2&&i.length!=3){throw new nI("Expecting 2 or 3 elements: got ${i.length} obj=${Kp}");}var C=i[0] as oD;Gp=C.ZC;Ip=i[1] as HB;Hp=Ip.tag;if(i.length==3){var B=i[2].RD;if(B[0]==BF.na)Jp=new HB.Nj(B);}sD.YC(()=>"LDAP message received: Id=${KE} protocolOp=${yG}");}List<int> toBytes(){HB A=new HB();A.add(new oD(Gp));A.add(Kp);if(Jp!=null)A.add(Jp);var B=A.RD;return B;}String toString(){var A=sS(Hp);return "Msg(id=${Gp}, op=${A},controls=${Jp})";}}const int qL=0x60;const int rL=0x61;const int Kb=0x63;const int kS=0x64;const int lS=0x65;const int mS=0x73;const int Lb=0x66;const int Mb=0x67;const int oS=0x68;const int pS=0x69;const int Nb=0x78;const int Ob=0x6B;const int Pb=0x6C;const int qS=0x6D;const int Qb=0x6E;const int rS=0x6F;const int Rb=0xA0;String sS(int A){switch (A){case qL:return "BND_REQ";case rL:return "BND_RESP";case Kb:return "SRCH_REQ";case kS:return "SRCH_RES_ENTRY";case lS:return "SRCH_RES_DONE";case mS:return "SRCH_RES_REF";case Lb:return "MODIFY_REQUEST";case oS:return "ADD_REQUEST";case pS:return "ADD_RESPONSE";case Pb:return "MODIFY_DN_REQ";case qS:return "MODIFY_DN_RESP";case Qb:return "COMPARE_REQ";case rS:return "COMPARE_RESP";default:return A.toRadixString(16);}}r cB=new r("ldap.connection");r tL=new r("ldap.send.ldap");r qI=new r("ldap.send.bytes");r sD=new r("ldap.recv.ldap");r tS=new r("ldap.recv.asn1");r YD=new r("ldap.recv.bytes");class iS extends rD{iS(xB A):super(A);}class jS extends rD{jS(xB A):super(A);}class nS extends rD{nS(xB A):super(A);}class sL extends rD{String FZ;String response;sL(xB A):super(A){FZ=Lp(A.i[2]);if(A.i.length==4){response=Lp(A.i[3]);}}String Lp(IB A){var B=new SB.Rj(A.RD);return B.bB;}}class hS{int Ip;int get ji=>Ip;hS(this.Ip);HB Dp(){var A=new HB(tag:Ip);return A;}}abstract class HH extends hS{HH(int A):super(A);IB zE();}class rD{c Mp;List<BF> Jp=[] ;c get UY=>Mp;rD.cj();rD(xB A){sD.vB(()=>"Response op=${A}");Mp=Np(A.yG);if(A.Hi)Jp=BF.oa(A.Jp);}c Np(HB A){sD.vB("Parse LDAP result: ${A}");oD B=A.i[0];var C=B.ZC;var D=A.i[1] as SB;var G=D.bB;var H=A.i[2] as SB;var I=H.bB;List<String> K=[] ;if(A.i.length>3){var L=A.i[3];sD.vB("Parse LDAP result: type=${L}");}return new c(C,G,I,K);}}abstract class Hb{static rD Ib(xB A){sD.vB(()=>"LDAP response received: ${sS(A.yG.tag)}");switch (A.yG.tag){case rL:return new iS(A);case kS:return new pI(A);case mS:return new pI.bj(A);case lS:return new jS(A);case Nb:return new sL(A);case pS:case Ob:case Mb:case qS:case rS:return new nS(A);default:throw "Not done";}}}class pI extends rD{GH Op;GH get IZ=>Op;pI.bj(xB A):super.cj(){sD.YC(()=>"Search result is a referral");var B=A.yG.i;var C=B.map((D)=>(D as SB).bB).toList();Op=new GH(null,referrals:C);}pI(xB H):super.cj(){var A=H.yG;var I=A.i[0] as SB;var C=I.bB;sD.YC(()=>"Search Result Entry: dn=${C}");var K=A.i[1] as HB;Op=new GH(C);K.i.forEach((L){var D=L as HB;var B=D.i[0] as SB;var O=D.i[1] as KG;var G=O.i.map((V)=>(V as SB).bB).toSet();IZ.Yh[B.bB]=new fC(B.bB,G);sD.wB("attribute: ${B.bB}=${G}");});if(A.i.length>=3){var b=A.i[2];sD.wB("controls: ${b}");}}String toString(){return "SearchResultEntry(${IZ}})";}}main(List<String> O)async{await oZ();yb();var B=new VD();B.jO("domain",abbr:"d",help:"Domain Name");B.jO("email",abbr:"e",help:"Email");B.jO("standalone-challenge",help:"Standalone Challenge Type");B.hO("test",abbr:"t",help:"Generate Test Certificate");B.hO("standalone",abbr:"s",help:"Standlone Server");B.hO("debug",abbr:"D",help:"Enable Debugging");var A=B.fB(O);if(A["domain"]==null||A["email"]==null){print("Usage: letsencrypt --domain <domain> --email <email>");exit(1);}String V=A["domain"];bool NC=A["test"]==true;bool UD=A["debug"]==true;bool G=A["standalone"]==true;String b=A["standalone-challenge"];var C=<String>["certonly","--non-interactive","--agree-tos","--email",A["email"]];if(NC){C.add("--test-cert");}if(UD){C.add("--debug");}if(G){C.add("--standalone");if(b!=null){C.addAll(["--standalone-supported-challenges",b]);}}else{C.addAll(["--webroot","-w",Directory.current.absolute.path]);}C.addAll(["--domain",V]);if(Platform.isWindows){print("Sorry, Automated Lets Encrypt does not support Windows.");exit(1);}var H=new aD();await H.YY();bool n=false;if(!G){if(!(await SL())){print("Starting DSA Server...");await TF("start",doExit:false);await new Future.delayed(const Duration(seconds:5));n=true;}}await RG("chmod",args:["a+x","bin/tools/certbot-auto"]);var I=<String>[] ;var D=<String>["bin/tools/certbot-auto"]..addAll(C);if(Platform.isMacOS){I=["-q","/dev/null","bash"]..addAll(D);}else{String K="bash";if(O.isNotEmpty){K+= " ";K+= D.join(" ");}I=["-qfc",K,"/dev/null"];}var L=await bD("script");if(L==null){L="bash";}else{D=I;}var EB=await RG(L,args:D,inherit:true,inheritStdin:true);if(EB.exitCode!=0){exit(EB.exitCode);}var gB="/etc/letsencrypt/live/${V}";var mD="${gB}/fullchain.pem";var nD="${gB}/privkey.pem";H..EI=mD..tO=nD;await H.WI();var CC=Platform.script.resolve("../tools/certbot-auto").toFilePath();var SF="@daily";var AH=<String>["chmod a+x ${CC}","bash ${CC} renew"];var xP="${SF} ${AH.join('; ')}";await xb(xP);if(n){await TF("stop",doExit:false);}if(!G){await TF("rebind",doExit:false);}exit(0);}oZ()async{var B=Platform.script.toFilePath(windows:Platform.isWindows);var C=GJ(B);var A=GJ(C);var D=new File(QB(A,"bin","daemon.dart"));if(await D.exists()){Directory.current=new Directory(A);}}class pd extends BN{}class FF{}class mC implements Comparable<mC>{}abstract class nd implements mC{String get zi{var A=AB==null?'unknown source':AB;return '${A}:${JC+1}:${LB+1}';}int fX(mC A){if(AB!=A.AB){throw new ArgumentError("Source URLs \"${AB}\" and " "\"${A.AB}\" don't match.");}return (offset-A.offset).abs();}eB KC()=>new eB(this,this,"");int compareTo(mC A){if(AB!=A.AB){throw new ArgumentError("Source URLs \"${AB}\" and " "\"${A.AB}\" don't match.");}return offset-A.offset;}bool operator==(A)=>A is mC&&AB==A.AB&&offset==A.offset;int get hashCode=>AB.hashCode+offset;String toString()=>'<${runtimeType}: ${offset} ${zi}>';}bool TG=false;h Gd=h.mT;h kT=h.bM;class r{final String name;String get AY=>(parent==null||parent.name=='')?name:'${parent.AY}.${name}';final r parent;h Pp;final Map<String,r> Qp;final Map<String,r> NF;StreamController<VE> Rp;factory r(String A){return Hd.putIfAbsent(A,()=>new r.ej(A));}factory r.ej(String A){if(A.startsWith('.')){throw new ArgumentError("name shouldn't start with a '.'");}int B=A.lastIndexOf('.');r C;String D;if(B==-1){if(A!='')C=new r('');D=A;}else{C=new r(A.substring(0,B));D=A.substring(B+1);}return new r.fj(D,C,new Map<String,r>());}r.fj(this.name,this.parent,Map<String,r> A):this.Qp=A,this.NF=new UnmodifiableMapView(A){if(parent!=null)parent.Qp[name]=this;}h get level{if(TG){if(Pp!=null)return Pp;if(parent!=null)return parent.level;}return kT;}set level(h A){if(TG&&parent!=null){Pp=A;}else{if(parent!=null){throw new UnsupportedError('Please set "hierarchicalLoggingEnabled" to true if you want to ' 'change the level on a non-root logger.');}kT=A;}}Stream<VE> get pY=>Sp();bool PY(h A)=>(A>=level);void vG(h B,A,[Object I,StackTrace G,Zone H]){Object K;if(PY(B)){if(A is Function){A=A();}String C;if(A is String){C=A;}else{C=A.toString();K=A;}if(G==null&&B>=Gd){G=StackTrace.current;I??= 'autogenerated stack trace for ${B} ${C}';}if(H==null)H=Zone.current;var L=new VE(B,C,AY,I,G,H,K);if(TG){var D=this;while(D!=null){D.Tp(L);D=D.parent;}}else{lT.Tp(L);}}}void wB(A,[Object B,StackTrace C])=>vG(h.nT,A,B,C);void vB(A,[Object B,StackTrace C])=>vG(h.oT,A,B,C);void YC(A,[Object B,StackTrace C])=>vG(h.aM,A,B,C);void PF(A,[Object B,StackTrace C])=>vG(h.bM,A,B,C);void RE(A,[Object B,StackTrace C])=>vG(h.pT,A,B,C);void OE(A,[Object B,StackTrace C])=>vG(h.qT,A,B,C);Stream<VE> Sp(){if(TG||parent==null){if(Rp==null){Rp=new StreamController<VE>.broadcast(sync:true);}return Rp.stream;}else{return lT.Sp();}}void Tp(VE A){if(Rp!=null){Rp.add(A);}}static final r lT=new r('');static final Map<String,r> Hd=<String,r>{};}class h implements Comparable<h>{final String name;final int value;const h(this.name,this.value);static const h Id=const h('ALL',0);static const h mT=const h('OFF',2000);static const h nT=const h('FINEST',300);static const h oT=const h('FINER',400);static const h aM=const h('FINE',500);static const h Jd=const h('CONFIG',700);static const h bM=const h('INFO',800);static const h pT=const h('WARNING',900);static const h qT=const h('SEVERE',1000);static const h Kd=const h('SHOUT',1200);static const List<h> Ld=const[Id,nT,oT,aM,Jd,bM,pT,qT,Kd,mT];bool operator==(Object A)=>A is h&&value==A.value;bool operator<(h A)=>value<A.value;bool operator<=(h A)=>value<=A.value;bool operator>(h A)=>value>A.value;bool operator>=(h A)=>value>=A.value;int compareTo(h A)=>value-A.value;int get hashCode=>value;String toString()=>name;}class VE{final h level;final String message;final Object di;final String QP;final DateTime UZ;final int KZ;static int Md=0;final Object error;final StackTrace stackTrace;final Zone zone;VE(this.level,this.message,this.QP,[this.error,this.stackTrace,this.zone,this.di]):UZ=new DateTime.now(),KZ=VE.Md++ ;String toString()=>'[${level.name}] ${QP}: ${message}';}final ea=new jQ.Wj();class jQ extends XD{final int blockSize=16*aF;jQ.Wj();ByteConversionSink startChunkedConversion(Sink<TB> A)=>new ByteConversionSink.from(new kQ(A));}const fa=const[0xd76aa478,0xe8c7b756,0x242070db,0xc1bdceee,0xf57c0faf,0x4787c62a,0xa8304613,0xfd469501,0x698098d8,0x8b44f7af,0xffff5bb1,0x895cd7be,0x6b901122,0xfd987193,0xa679438e,0x49b40821,0xf61e2562,0xc040b340,0x265e5a51,0xe9b6c7aa,0xd62f105d,0x02441453,0xd8a1e681,0xe7d3fbc8,0x21e1cde6,0xc33707d6,0xf4d50d87,0x455a14ed,0xa9e3e905,0xfcefa3f8,0x676f02d9,0x8d2a4c8a,0xfffa3942,0x8771f681,0x6d9d6122,0xfde5380c,0xa4beea44,0x4bdecfa9,0xf6bb4b60,0xbebfbc70,0x289b7ec6,0xeaa127fa,0xd4ef3085,0x04881d05,0xd9d4d039,0xe6db99e5,0x1fa27cf8,0xc4ac5665,0xf4292244,0x432aff97,0xab9423a7,0xfc93a039,0x655b59c3,0x8f0ccc92,0xffeff47d,0x85845dd1,0x6fa87e4f,0xfe2ce6e0,0xa3014314,0x4e0811a1,0xf7537e82,0xbd3af235,0x2ad7d2bb,0xeb86d391];const ga=const[07,12,17,22,07,12,17,22,07,12,17,22,07,12,17,22,05,09,14,20,05,09,14,20,05,09,14,20,05,09,14,20,04,11,16,23,04,11,16,23,04,11,16,23,04,11,16,23,06,10,15,21,06,10,15,21,06,10,15,21,06,10,15,21];class kQ extends hI{final X=new Uint32List(4);kQ(Sink<TB> A):super(A,16,endian:Endianness.LITTLE_ENDIAN){X[0]=0x67452301;X[1]=0xefcdab89;X[2]=0x98badcfe;X[3]=0x10325476;}void OL(Uint32List K){assert(K.length==16);var I=X[0];var B=X[1];var D=X[2];var C=X[3];int G;int H;for(var A=0;A<64;A++ ){if(A<16){G=(B&D)|((~B&qD)&C);H=A;}else if(A<32){G=(C&B)|((~C&qD)&D);H=((5*A)+1)%16;}else if(A<48){G=B^D^C;H=((3*A)+5)%16;}else{G=D^(B|(~C&qD));H=(7*A)%16;}var L=C;C=D;D=B;B=l(B,iI(l(l(I,G),l(fa[A],K[H])),ga[A]));I=L;}X[0]=l(I,X[0]);X[1]=l(B,X[1]);X[2]=l(D,X[2]);X[3]=l(C,X[3]);}}class pU extends MN implements aG{pU(String A):super(A,()=>new qU(A));}class qU implements aG,NN{final String path;Stream<gC> get mK=>Up.stream;final Up=new StreamController<gC>.broadcast();Future get bP=>Vp.future;final Vp=new Completer();StreamSubscription Wp;qU(this.path){Xp();Vp.complete();}void Xp(){Wp=new File(path).watch().transform(new Ce<FileSystemEvent>()).listen(Yp,onError:Up.addError,onDone:Zp);}void Yp(List<FileSystemEvent> A){if(A.any((B)=>B.type==FileSystemEvent.DELETE)){return;}Up.add(new gC(vD.QJ,path));}Zp()async{var A=await new File(path).exists();if(Up.isClosed)return;if(A){Up.add(new gC(vD.QJ,path));Xp();}else{Up.add(new gC(vD.uU,path));close();}}void close(){if(Wp!=null)Wp.cancel();Wp=null;Up.close();}}wC qZ(String A,String B,String C,String D,List<String> G,Map<String,String> H,I,Function K,dC L,{bool negatable,bool splitCommas,bool hide: false}){return new wC.Gj(A,B,C,D,G,H,I,K,L,negatable:negatable,splitCommas:splitCommas,hide:hide);}class wC{final String name;final String pG;final List<String> lO;final II;final Function callback;final String Ki;final String Cj;final Map<String,String> Vh;final dC type;final bool negatable;final bool NZ;final bool hide;bool get AG=>type==dC.DQ;bool get QY=>type==dC.TL;wC.Gj(this.name,this.pG,this.Ki,this.Cj,List<String> A,Map<String,String> B,this.II,this.callback,dC C,{this.negatable,bool splitCommas,this.hide: false}):this.lO=A==null?null:new UnmodifiableListView(A),this.Vh=B==null?null:new UnmodifiableMapView(B),this.type=C,this.NZ=splitCommas==null?C==dC.TL:splitCommas{if(name.isEmpty){throw new ArgumentError('Name cannot be empty.');}else if(name.startsWith('-')){throw new ArgumentError('Name ${name} cannot start with "-".');}if(CQ.hasMatch(name)){throw new ArgumentError('Name "${name}" contains invalid characters.');}if(pG!=null){if(pG.length!=1){throw new ArgumentError('Abbreviation must be null or have length 1.');}else if(pG=='-'){throw new ArgumentError('Abbreviation cannot be "-".');}if(CQ.hasMatch(pG)){throw new ArgumentError('Abbreviation is an invalid character.');}}}dynamic DY(A){if(A!=null)return A;if(!QY)return II;if(II!=null)return [II];return [] ;}static final CQ=new RegExp(r'''[ \t\r\n"'\\/]''');}class dC{static const DQ=const dC.Hj("OptionType.FLAG");static const rZ=const dC.Hj("OptionType.SINGLE");static const TL=const dC.Hj("OptionType.MULTIPLE");final String name;const dC.Hj(this.name);}class dF{XE S;String GB;bool FC;List<String> s;List<String> BC;String get HP=>ap()[1];bool get isAbsolute=>GB!=null;factory dF.ij(String A,XE D){var H=D.EY(A);var K=D.FC(A);if(H!=null)A=A.substring(H.length);var I=<String>[] ;var G=<String>[] ;var B=0;if(A.isNotEmpty&&D.q(A.codeUnitAt(0))){G.add(A[0]);B=1;}else{G.add('');}for(var C=B;C<A.length;C++ ){if(D.q(A.codeUnitAt(C))){I.add(A.substring(B,C));G.add(A[C]);B=C+1;}}if(B<A.length){I.add(A.substring(B));G.add('');}return new dF.jj(D,H,K,I,G);}dF.jj(this.S,this.GB,this.FC,this.s,this.BC);String get oO{var A=this.vF();A.VI();if(A.s.isEmpty)return GB==null?'':GB;return A.s.last;}String get pO=>ap()[0];void VI(){while(!s.isEmpty&&s.last==''){s.removeLast();BC.removeLast();}if(BC.length>0)BC[BC.length-1]='';}void tE({bool canonicalize: false}){var C=0;var A=<String>[] ;for(var B in s){if(B=='.'||B==''){}else if(B=='..'){if(A.length>0){A.removeLast();}else{C++ ;}}else{A.add(canonicalize?S.VX(B):B);}}if(!isAbsolute){A.insertAll(0,new List.filled(C,'..'));}if(A.length==0&&!isAbsolute){A.add('.');}var D=new List<String>.generate(A.length,(G)=>S.TD,growable:true);D.insert(0,isAbsolute&&A.length>0&&S.wG(GB)?S.TD:'');s=A;BC=D;if(GB!=null&&S==iB.KJ){if(canonicalize)GB=GB.toLowerCase();GB=GB.replaceAll('/','\\');}VI();}String toString(){var A=new StringBuffer();if(GB!=null)A.write(GB);for(var B=0;B<s.length;B++ ){A.write(BC[B]);A.write(s[B]);}A.write(BC.last);return A.toString();}List<String> ap(){var A=s.lastWhere((C)=>C!='',orElse:()=>null);if(A==null)return ['',''];if(A=='..')return ['..',''];var B=A.lastIndexOf('.');if(B<=0)return [A,''];return [A.substring(0,B),A.substring(B)];}dF vF()=>new dF.jj(S,GB,FC,new List.from(s),new List.from(BC));}final sZ=new RegExp(r'^-([a-zA-Z0-9])$');final tZ=new RegExp(r'^-([a-zA-Z0-9]+)(.*)$');final uZ=new RegExp(r'^--([a-zA-Z\-_0-9]+)(=(.*))?$');class BH{final String XX;final BH parent;final VD HE;final List<String> VC;final NE=<String>[] ;final Map<String,dynamic> yE=<String,dynamic>{};BH(this.XX,this.HE,this.VC,[this.parent,List<String> A]){if(A!=null)this.NE.addAll(A);}String get current=>VC[0];VF fB(){var H=VC.toList();var C=null;while(VC.length>0){if(current=='--'){VC.removeAt(0);break;}var D=HE.FI[current];if(D!=null){vC(NE.isEmpty,'Cannot specify arguments before a command.');var A=VC.removeAt(0);var I=new BH(A,D,VC,this,NE);try {C=I.fB();}on aI catch (G){if(A==null)rethrow;throw new aI(G.message,[A]..addAll(G.FI));}NE.clear();break;}if(wY())continue;if(uY(this))continue;if(XP())continue;if(!HE.KX)break;NE.add(VC.removeAt(0));}HE.uE.forEach((K,B){if(B.callback==null)return;B.callback(B.DY(yE[K]));});NE.addAll(VC);VC.clear();return pZ(HE,yE,XX,C,NE,H);}void CZ(wC A){vC(VC.length>0,'Missing argument for "${A.name}".');setOption(yE,A,current);VC.removeAt(0);}bool wY(){var B=sZ.firstMatch(current);if(B==null)return false;var A=HE.oK(B[1]);if(A==null){vC(parent!=null,'Could not find an option or flag "-${B[1]}".');return parent.wY();}VC.removeAt(0);if(A.AG){FL(yE,A,true);}else{CZ(A);}return true;}bool uY(BH G){var A=tZ.firstMatch(current);if(A==null)return false;var B=A[1].substring(0,1);var D=HE.oK(B);if(D==null){vC(parent!=null,'Could not find an option with short name "-${B}".');return parent.uY(G);}else if(!D.AG){var H='${A[1].substring(1)}${A[2]}';setOption(yE,D,H);}else{vC(A[2]=='','Option "-${B}" is a flag and cannot handle value ' '"${A[1].substring(1)}${A[2]}".');for(var C=0;C<A[1].length;C++ ){var B=A[1].substring(C,C+1);G.vY(B);}}VC.removeAt(0);return true;}void vY(String A){var B=HE.oK(A);if(B==null){vC(parent!=null,'Could not find an option with short name "-${A}".');parent.vY(A);return;}vC(B.AG,'Option "-${A}" must be a flag to be in a collapsed "-".');FL(yE,B,true);}bool XP(){var C=uZ.firstMatch(current);if(C==null)return false;var A=C[1];var B=HE.uE[A];if(B!=null){VC.removeAt(0);if(B.AG){vC(C[3]==null,'Flag option "${A}" should not be given a value.');FL(yE,B,true);}else if(C[3]!=null){setOption(yE,B,C[3]);}else{CZ(B);}}else if(A.startsWith('no-')){A=A.substring('no-'.length);B=HE.uE[A];if(B==null){vC(parent!=null,'Could not find an option named "${A}".');return parent.XP();}VC.removeAt(0);vC(B.AG,'Cannot negate non-flag option "${A}".');vC(B.negatable,'Cannot negate option "${A}".');FL(yE,B,false);}else{vC(parent!=null,'Could not find an option named "${A}".');return parent.XP();}return true;}void vC(bool A,String B){if(!A)throw new aI(B);}void setOption(Map C,wC A,String B){assert(!A.AG);if(!A.QY){bp(A,B);C[A.name]=B;return;}var D=C.putIfAbsent(A.name,()=><String>[] );if(A.NZ){for(var G in B.split(",")){bp(A,G);D.add(G);}}else{bp(A,B);D.add(B);}}void FL(Map B,wC A,bool C){assert(A.AG);B[A.name]=C;}void bp(wC A,String B){if(A.lO==null)return;vC(A.lO.contains(B),'"${B}" is not an allowed value for option "${A.name}".');}}abstract class cM{}class Nd implements cM{Random li=new Random.secure();List<int> Bi(int C){var A=new List<int>();for(var B=0;B<C;B++ ){A.add(li.nextInt(256));}return A;}}class RH{cM HZ;XD hash;int cp;int dp;RH({cM saltGenerator,XD hash,int iterations: 1000,int keyLength: 32}){this.HZ=saltGenerator==null?new Nd():saltGenerator;this.hash=hash==null?ha:hash;this.cp=iterations;this.dp=keyLength;}String Ji(String A,{List<int> salt}){if(salt==null){salt=HZ.Bi(32);}var B=rT.Od(salt,A,hash,cp,dp);return rT.Pd(salt,B);}}class rT{static List<int> Od(List<int> A,String B,XD C,int D,int G){var H=new JU(hash:C);return H.Ai(B,new String.fromCharCodes(A),D,G);}static String Pd(List<int> C,List<int> D){var B=BASE64.encode(C);var G=BASE64.encode(D);var H=B.length;var A="${H}";while(A.length<3){A="0${A}";}return "${A}${B}${G}";}}final cD HD=Wd();String get sT{var B=Uri.base;if(B==tT)return SH;tT=B;if(iB.hM==iB.VG){SH=B.resolve('.').toString();return SH;}else{var A=B.toFilePath();var C=A.length-1;assert(A[C]=='/'||A[C]=='\\');SH=C==0?A:A.substring(0,C);return SH;}}Uri tT;String SH;String get Qd=>HD.TD;String uT(String A)=>HD.oO(A);String Rd(String A)=>HD.pO(A);String GJ(String A)=>HD.ih(A);String vT(String A)=>HD.HP(A);String Sd(String A)=>HD.mi(A);bool wT(String A)=>HD.isAbsolute(A);bool Td(String A)=>HD.sG(A);String QB(String A,[String B,String C,String D,String G,String H,String I,String K])=>HD.join(A,B,C,D,G,H,I,K);List<String> HJ(String A)=>HD.split(A);String Ud(String A)=>HD.tE(A);String Vd(A)=>HD.hi(A);class JJ implements Exception{String message;JJ(this.message);String toString()=>"PathException: ${message}";}class JU{XD hash;List<int> ep=new List<int>(4);int fp=null;JU({this.hash});List<int> Ai(String H,String I,int K,int B){if(B>(2<<31-1)*ZP){throw "derived key too long";}var C=(B/ZP).ceil();var L=B-(C-1)*ZP;var D=<int>[] ;for(var A=1;A<=C; ++A){var G=gp(H,I,K,A);if(A<C){D.addAll(G);}else{D.addAll(G.sublist(0,L));}}return D;}int get ZP{if(fp!=null){return fp;}var A=hash.convert([1,2,3]);var B=A.QD.length;return B;}List<int> gp(String D,String O,int V,int b){var A=new hL(hash,D.codeUnits);var B=new ad();var C=A.startChunkedConversion(B);C.add(O.codeUnits);hp(C,b);C.close();B.close();var G=B.Di();var H=G;var I=new List.from(G);for(var K=1;K<V;K++ ){A=new hL(hash,D.codeUnits);var L=A.convert(H);ip(I,L.QD);H=L.QD;}return I;}void hp(ByteConversionSink B,int A){ep[0]=A>>24;ep[1]=A>>16;ep[2]=A>>8;ep[3]=A;B.add(ep);}void ip(List<int> B,List<int> C){for(var A=0;A<B.length;A++ ){B[A]=B[A]^C[A];}}}class ad extends ChunkedConversionSink<TB>{final List<TB> GX=<TB>[] ;void add(TB A){GX.add(A);}void close(){}List<int> Di()=>GX.fold([] ,(A,B)=>A..addAll(B.QD));}class jM extends dD{final Function jp;jM(A,this.jp):super(A);UB DB(rB B){var A=kp.DB(B);if(A.rE){return A.tC(jp(A.value));}else{return A;}}bool IC(P A){return A is jM&&super.IC(A)&&jp==A.jp;}}class KU extends dD{P lp;P mp;KU(A,this.lp,this.mp):super(A);UB DB(rB C){var A=C;do{A=lp.DB(A);}while((A as UB).rE);var B=kp.DB(A);if(B.zF){return B;}A=B;do{A=mp.DB(A);}while((A as UB).rE);return A.tC(B.value);}List<P> get NF=>[kp,lp,mp];void replace(P A,P B){super.replace(A,B);if(lp==A){lp=B;}if(mp==A){mp=B;}}}class PU extends dD{PU(A):super(A);UB DB(rB A){var B=kp.DB(A);if(B.rE){var C=A.buffer is String?A.buffer.substring(A.position,B.position):A.buffer.sublist(A.position,B.position);return B.tC(C);}else{return B;}}}class UU extends dD{UU(A):super(A);UB DB(rB B){var A=kp.DB(B);if(A.rE){var C=new eF(A.value,B.buffer,B.position,A.position);return A.tC(C);}else{return A;}}}class WG extends P{final YE np;final String op;WG(this.np,this.op);UB DB(rB A){var C=A.buffer;var B=A.position;if(B<C.length&&np.test(C.codeUnitAt(B))){return A.tC(C[B],B+1);}return A.pE(op);}String toString()=>'${super.toString()}[${op}]';bool IC(P A){return A is WG&&super.IC(A)&&np==A.np&&op==A.op;}}abstract class YE{}class MU implements YE{final YE yY;MU(this.yY);bool test(int A)=>!yY.test(A);}YE dd(Iterable<XG> K){var H=new List.from(K,growable:false);H.sort((C,D){return C.start!=D.start?C.start-D.start:C.stop-D.stop;});var A=new List();for(var B in H){if(A.isEmpty){A.add(B);}else{var I=A.last;if(I.stop+1>=B.start){var L=new XG(I.start,B.stop);A[A.length-1]=L;}else{A.add(B);}}}if(A.length==1){return A[0].start==A[0].stop?new vM(A[0].start):A[0];}else{return new YU(A.length,A.map((G)=>G.start).toList(growable:false) as List<int>,A.map((G)=>G.stop).toList(growable:false) as List<int>);}}P p(A,[String B]){return new WG(new vM(WH(A)),B!=null?B:'"${A}" expected');}class vM implements YE{final int value;const vM(this.value);bool test(int A)=>identical(this.value,A);}P LJ([String A]){return new WG(ed,A!=null?A:'digit expected');}class VU implements YE{const VU();bool test(int A)=>48<=A&&A<=57;}const ed=const VU();P XU(String A,[String B]){return new WG(gd.fB(A).value,B!=null?B:'[${A}] expected');}P fd(){var B=DF().map((A)=>new XG(WH(A),WH(A)));var C=DF().FG(p('-')).FG(DF()).map((A)=>new XG(WH(A[0]),WH(A[2])));var D=C.vE(B).AL().map((A)=>dd(A as Iterable<XG>));return p('^').LE().FG(D).map((A)=>A[0]==null?A[1]:new MU(A[1]));}final gd=fd();class YU implements YE{final int length;final List<int> PZ;final List<int> QZ;YU(this.length,this.PZ,this.QZ);bool test(int D){var A=0;var B=length;while(A<B){var C=A+((B-A)>>1);var G=PZ[C]-D;if(G==0){return true;}else if(G<0){A=C+1;}else{B=C;}}return 0<A&&D<=QZ[A-1];}}class XG implements YE{final int start;final int stop;XG(this.start,this.stop);bool test(int A)=>start<=A&&A<=stop;}P hd([String A]){return new WG(jd,A!=null?A:'whitespace expected');}class ZU implements YE{const ZU();bool test(int A){if(A<256){return A==0x09||A==0x0A||A==0x0B||A==0x0C||A==0x0D||A==0x20||A==0x85||A==0xA0;}else{return A==0x1680||A==0x180E||A==0x2000||A==0x2001||A==0x2002||A==0x2003||A==0x2004||A==0x2005||A==0x2006||A==0x2007||A==0x2008||A==0x2009||A==0x200A||A==0x2028||A==0x2029||A==0x202F||A==0x205F||A==0x3000||A==0xFEFF;}}}const jd=const ZU();int WH(A){if(A is num){return A.round();}var B=A.toString();if(B.length!=1){throw new ArgumentError('${B} is not a character');}return B.codeUnitAt(0);}class dD extends P{P kp;dD(this.kp);UB DB(rB A){return kp.DB(A);}List<P> get NF=>[kp];void replace(P A,P B){super.replace(A,B);if(kp==A){kp=B;}}}class mM extends dD{final String op;mM(A,this.op):super(A);UB DB(rB B){var A=kp.DB(B);if(A.zF||A.position==A.buffer.length){return A;}return A.pE(op,A.position);}String toString()=>'${super.toString()}[${op}]';bool IC(P A){return A is mM&&super.IC(A)&&op==A.op;}}class OU extends dD{OU(A):super(A);UB DB(rB B){var A=kp.DB(B);if(A.rE){return B.tC(A.value);}else{return A;}}}class rM extends dD{final String op;rM(A,this.op):super(A);UB DB(rB A){var B=kp.DB(A);if(B.zF){return A.tC(null);}else{return A.pE(op);}}String toString()=>'${super.toString()}[${op}]';bool IC(P A){return A is rM&&super.IC(A)&&op==A.op;}}class tM extends dD{final pp;tM(A,this.pp):super(A);UB DB(rB A){var B=kp.DB(A);if(B.rE){return B;}else{return A.tC(pp);}}bool IC(P A){return A is tM&&super.IC(A)&&pp==A.pp;}}abstract class uM extends P{final List<P> qp;uM(this.qp);List<P> get NF=>qp;void replace(P B,P C){super.replace(B,C);for(var A=0;A<qp.length;A++ ){if(qp[A]==B){qp[A]=C;}}}}class VH extends uM{factory VH(Iterable<P> A){return new VH.kj(new List.from(A,growable:false));}VH.kj(List<P> A):super(A);UB DB(rB C){var A;for(var B=0;B<qp.length;B++ ){A=qp[B].DB(C);if(A.rE){return A;}}return A;}P vE(P A){return new VH(new List()..addAll(qp)..add(A));}}class fF extends uM{factory fF(Iterable<P> A){return new fF.lj(new List.from(A,growable:false));}fF.lj(List<P> A):super(A);UB DB(rB G){var C=G;var D=new List(qp.length);for(var A=0;A<qp.length;A++ ){var B=qp[A].DB(C);if(B.zF){return B;}D[A]=B.value;C=B;}return C.tC(D);}P FG(P A){return new fF(new List()..addAll(qp)..add(A));}}class rB{const rB(this.buffer,this.position);final buffer;final int position;UB tC(B,[int A]){return new NU(buffer,A==null?this.position:A,B);}UB pE(String B,[int A]){return new oM(buffer,A==null?this.position:A,B);}String toString()=>'Context[${LL()}]';String LL()=>eF.SU(buffer,position);}abstract class UB extends rB{const UB(A,B):super(A,B);bool get rE=>false;bool get zF=>false;get value;String get message;}class NU extends UB{const NU(A,B,this.value):super(A,B);bool get rE=>true;final value;String get message=>null;String toString()=>'Success[${LL()}]: ${value}';}class oM extends UB{const oM(A,B,this.message):super(A,B);bool get zF=>true;get value=>throw new QU(this);final String message;String toString()=>'Failure[${LL()}]: ${message}';}class QU extends Error{final oM pE;QU(this.pE);String toString()=>'${pE.message} at ${pE.LL()}';}abstract class qM{const qM();P start();P R(Function A,[B,C,D,G,H,I]){var K=[B,C,D,G,H,I].takeWhile((L)=>L!=null).toList(growable:false);return new tD(A,K);}P ah({Function start: null,List arguments: const[] }){return rp(new tD(start!=null?start:this.start,arguments));}P rp(tD C){var H=new Map();P I(tD C){var A=H[C];if(A==null){var D=[C];A=C.resolve();while(A is tD){if(D.contains(A)){throw new StateError('Recursive references detected: ${D}');}D.add(A);A=A.resolve();}for(var V in D){H[V]=A;}}return A;}var G=[I(C)];var K=new Set.from(G);while(G.isNotEmpty){var L=G.removeLast();for(var B in L.NF){if(B is tD){var O=I(B);L.replace(B,O);B=O;}if(!K.contains(B)){K.add(B);G.add(B);}}}return H[C];}}class WU extends dD{WU(qM A):super(A.ah());}class tD extends P{final Function function;final List arguments;tD(this.function,this.arguments);P resolve()=>Function.apply(function,arguments);bool operator==(A){if(A is!tD||A.function!=function||A.arguments.length!=arguments.length){return false;}for(var B=0;B<arguments.length;B++ ){var C=arguments[B],D=A.arguments[B];if(C is P&&C is!tD&&D is P&&D is!tD){if(!C.NY(D)){return false;}}else{if(C!=D){return false;}}}return true;}int get hashCode=>function.hashCode;UB DB(rB A)=>throw new UnsupportedError('References cannot be parsed.');}abstract class P{UB DB(rB A);UB fB(A){return DB(new rB(A,0));}Iterable QF(B){var A=new List();DI().map((C)=>A.add(C)).FG(DF()).vE(DF()).QE().fB(B);return A;}Iterable Yi(B){var A=new List();map((C)=>A.add(C)).vE(DF()).QE().fB(B);return A;}P LE([A])=>new tM(this,A);P QE()=>BL(0,TH);P AL()=>BL(1,TH);P BL(int A,int B){return new LU(this,A,B);}P KL(int A)=>BL(A,A);P FG(P A)=>new fF([this,A]);P operator&(P A)=>this.FG(A);P vE(P A)=>new VH([this,A]);P operator|(P A)=>this.vE(A);P DI()=>new OU(this);P QI([String A])=>new rM(this,A);P mY([String A])=>QI(A).FG(DF()).wE(1);P JP()=>new PU(this);P MC()=>new UU(this);P trim([P A,P B]){if(A==null)A=hd();if(B==null)B=A;return new KU(this,A,B);}P end([String A='end of input expected']){return new mM(this,A);}P map(Function A)=>new jM(this,A);P wE(int A){return this.map((List B){return B[A<0?B.length+A:A];});}P gi(List<int> C){return this.map((List B){return C.map((A){return B[A<0?B.length+A:A];}).toList();});}P XI(P B,{bool includeSeparators: true,bool optionalSeparatorAtEnd: false}){var D=new fF([B,this]).QE();var H=new fF(optionalSeparatorAtEnd?[this,D,B.LE(B)]:[this,D]);return H.map((List C){var A=new List();A.add(C[0]);for(var G in C[1]){if(includeSeparators){A.add(G[0]);}A.add(G[1]);}if(includeSeparators&&optionalSeparatorAtEnd&&!identical(C[2],B)){A.add(C[2]);}return A;});}bool NY(P B,[Set<P> A]){if(A==null){A=new Set();}if(this==B||A.contains(this)){return true;}A.add(this);return runtimeType==B.runtimeType&&IC(B)&&Ii(B,A);}bool IC(P A)=>true;bool Ii(P D,Set<P> G){var B=NF,C=D.NF;if(B.length!=C.length){return false;}for(var A=0;A<B.length;A++ ){if(!B[A].NY(C[A],G)){return false;}}return true;}List<P> get NF=>const[] ;void replace(P A,P B){}}P DF([String A='input expected']){return new lM(A);}class lM extends P{final String op;lM(this.op);UB DB(rB A){var B=A.position;var C=A.buffer;return B<C.length?A.tC(C[B],B+1):A.pE(op);}bool IC(P A){return A is lM&&super.IC(A)&&op==A.op;}}P nM(A,[String B]){return TU(1,(C)=>A.indexOf(C)>=0,B!=null?B:'any of ${A} expected');}P UH(String A,[String B]){return TU(A.length,(String C)=>A==C,B!=null?B:'${A} expected');}typedef bool RU(_0);P TU(int A,RU B,String C){return new sM(A,B,C);}class sM extends P{final int sp;final RU np;final String op;sM(this.sp,this.np,this.op);UB DB(rB A){final C=A.position;final B=C+sp;if(B<=A.buffer.length){var D=A.buffer is String?A.buffer.substring(C,B):A.buffer.sublist(C,B);if(np(D)){return A.tC(D,B);}}return A.pE(op);}String toString()=>'${super.toString()}[${op}]';bool IC(P A){return A is sM&&super.IC(A)&&sp==A.sp&&np==A.np&&op==A.op;}}const int TH=-1;abstract class kM extends dD{final int tp;final int up;kM(P A,this.tp,this.up):super(A){assert(0<=tp);assert(up==TH||tp<=up);}String toString(){var A=up==TH?'*':up;return '${super.toString()}[${tp}..${A}]';}bool IC(P A){return A is kM&&super.IC(A)&&tp==A.tp&&up==A.up;}}class LU extends kM{LU(P A,int B,int C):super(A,B,C);UB DB(rB D){var B=D;var C=new List();while(C.length<tp){var A=kp.DB(B);if(A.zF){return A;}C.add(A.value);B=A;}while(up==TH||C.length<up){var A=kp.DB(B);if(A.zF){return B.tC(C);}C.add(A.value);B=A;}return B.tC(C);}}class eF{final value;final buffer;final int start;final int stop;const eF(this.value,this.buffer,this.start,this.stop);get input=>buffer is String?buffer.substring(start,stop):buffer.sublist(start,stop);int get length=>stop-start;int get JC=>eF.pM(buffer,start)[0];int get LB=>eF.pM(buffer,start)[1];String toString()=>'Token[${SU(buffer,start)}]: ${value}';bool operator==(A){return A is eF&&value==A.value&&start==A.start&&stop==A.stop;}int get hashCode=>value.hashCode+start.hashCode+stop.hashCode;static P bd()=>cd;static final P cd=p('\n')|(p('\r')&p('\n').LE());static List<int> pM(String G,int A){var B=1,C=0;for(var D in bd().MC().Yi(G)){if(A<D.stop){return [B,A-C+1];}B++ ;C=D.stop;}return [B,A-C+1];}static String SU(A,int B){if(A is String){var C=eF.pM(A,B);return '${C[0]}:${C[1]}';}else{return '${B}';}}}class rU extends MN implements aG{rU(String A,{Duration pollingDelay}):super(A,(){return new sU(A,pollingDelay!=null?pollingDelay:new Duration(seconds:1));});}class sU implements aG,NN{final String path;Stream<gC> get mK=>vp.stream;final vp=new StreamController<gC>.broadcast();Future get bP=>wp.future;final wp=new Completer();Timer xp;DateTime yp;sU(this.path,Duration A){xp=new Timer.periodic(A,(B)=>zp());zp();}Future zp()async{var B=await new File(path).exists();if(vp.isClosed)return;if(yp!=null&&!B){vp.add(new gC(vD.uU,path));close();return;}var A;try {try {A=await Be(path);}finally {if(vp.isClosed)return;}}on FileSystemException catch (C,D){vp.addError(C,D);close();return;}if(yp==A)return;if(yp==null){yp=A;wp.complete();}else{yp=A;vp.add(new gC(vD.QJ,path));}}void close(){xp.cancel();vp.close();}}class EU extends XE{EU();final name='posix';final TD='/';final BC=const['/'];final JZ=new RegExp(r'/');final lY=new RegExp(r'[^/]$');final GZ=new RegExp(r'^/');final EZ=null;bool iK(String A)=>A.contains('/');bool q(int A)=>A==ID;bool wG(String A)=>A.isNotEmpty&&!q(A.codeUnitAt(A.length-1));int SD(String A,{bool withDrive: false}){if(A.isNotEmpty&&q(A.codeUnitAt(0)))return 1;return 0;}bool FC(String A)=>false;String TI(Uri A){if(A.scheme==''||A.scheme=='file'){return Uri.decodeComponent(A.path);}throw new ArgumentError("Uri ${A} must have scheme 'file:'.");}}class ZQ<W> extends Object with ListMixin<W> implements Queue<W>{static const int aQ=8;List<W> Aq;int Bq;int Cq;ZQ([int A]):Bq=0,Cq=0{if(A==null||A<aQ){A=aQ;}else if(!bQ(A)){A=cQ(A);}assert(bQ(A));Aq=new List<W>(A);}void add(W A){Dq(A);}void addAll(Iterable<W> G){if(G is List){var B=G;int A=B.length;int C=this.length;if(C+A>=Aq.length){Eq(C+A);Aq.setRange(C,C+A,B,0);Cq+= A;}else{int D=Aq.length-Cq;if(A<D){Aq.setRange(Cq,Cq+A,B,0);Cq+= A;}else{int H=A-D;Aq.setRange(Cq,Cq+D,B,0);Aq.setRange(0,H,B,D);Cq=H;}}}else{for(W I in G)Dq(I);}}String toString()=>IterableBase.iterableToFullString(this,"{","}");void addLast(W A){Dq(A);}void addFirst(W A){Bq=(Bq-1)&(Aq.length-1);Aq[Bq]=A;if(Bq==Cq)Fq();}W removeFirst(){if(Bq==Cq)throw new StateError("No element");W A=Aq[Bq];Aq[Bq]=null;Bq=(Bq+1)&(Aq.length-1);return A;}W removeLast(){if(Bq==Cq)throw new StateError("No element");Cq=(Cq-1)&(Aq.length-1);W A=Aq[Cq];Aq[Cq]=null;return A;}int get length=>(Cq-Bq)&(Aq.length-1);void set length(int A){if(A<0)throw new RangeError("Length ${A} may not be negative.");int C=A-length;if(C>=0){if(Aq.length<=A){Eq(A);}Cq=(Cq+C)&(Aq.length-1);return;}int B=Cq+C;if(B>=0){Aq.fillRange(B,Cq,null);}else{B+= Aq.length;Aq.fillRange(0,Cq,null);Aq.fillRange(B,Aq.length,null);}Cq=B;}W operator[](int A){if(A<0||A>=length){throw new RangeError("Index ${A} must be in the range [0..${length}).");}return Aq[(Bq+A)&(Aq.length-1)];}void operator[]=(int A,W B){if(A<0||A>=length){throw new RangeError("Index ${A} must be in the range [0..${length}).");}Aq[(Bq+A)&(Aq.length-1)]=B;}static bool bQ(int A)=>(A&(A-1))==0;static int cQ(int A){assert(A>0);A=(A<<1)-1;for(;;){int B=A&(A-1);if(B==0)return A;A=B;}}void Dq(W A){Aq[Cq]=A;Cq=(Cq+1)&(Aq.length-1);if(Bq==Cq)Fq();}void Fq(){List<W> A=new List<W>(Aq.length*2);int B=Aq.length-Bq;A.setRange(0,B,Aq,Bq);A.setRange(B,B+Bq,Aq,0);Bq=0;Cq=Aq.length;Aq=A;}int Gq(List<W> A){assert(A.length>=length);if(Bq<=Cq){int C=Cq-Bq;A.setRange(0,C,Aq,Bq);return C;}else{int B=Aq.length-Bq;A.setRange(0,B,Aq,Bq);A.setRange(B,B+Cq,Aq,0);return Cq+B;}}void Eq(int A){assert(A>=length);A+= A>>1;int C=cQ(A);List<W> B=new List<W>(C);Cq=Gq(B);Aq=B;Bq=0;}}abstract class YG<zB,OB> implements Map<zB,OB>{factory YG()=>new MJ();}class MJ<zB,OB> implements YG<zB,OB>{final Map<zB,OB> Hq;final Map<OB,zB> Iq;YG<OB,zB> Jq;MJ():this.mj(new HashMap(),new HashMap());MJ.mj(this.Hq,this.Iq);OB operator[](Object A)=>Hq[A];void operator[]=(zB A,OB B){Kq(A,B,false);}void replace(zB A,OB B){Kq(A,B,true);}void addAll(Map<zB,OB> A)=>A.forEach((B,C)=>Kq(B,C,false));bool containsKey(Object A)=>Hq.containsKey(A);bool containsValue(Object A)=>Iq.containsKey(A);void forEach(void A(zB key,OB value))=>Hq.forEach(A);bool get isEmpty=>Hq.isEmpty;bool get isNotEmpty=>Hq.isNotEmpty;Iterable<zB> get keys=>Hq.keys;int get length=>Hq.length;Iterable<OB> get values=>Iq.keys;YG<OB,zB> get Ri{if(Jq==null){Jq=new MJ.mj(Iq,Hq);}return Jq;}OB putIfAbsent(zB A,OB C()){var B=Hq[A];if(B!=null)return B;if(!Hq.containsKey(A))return Kq(A,C(),false);return null;}OB remove(Object A){Iq.remove(Hq[A]);return Hq.remove(A);}void clear(){Hq.clear();Iq.clear();}OB Kq(zB B,OB A,bool D){if(B==null)throw new ArgumentError("null key");if(A==null)throw new ArgumentError("null value");var C=Hq[B];if(C==A)return A;if(Iq.containsKey(A)){if(!D)throw new ArgumentError("Mapping for ${A} exists");Hq.remove(Iq[A]);}Iq.remove(C);Hq[B]=A;Iq[A]=B;return A;}}Iterable kd(Iterable<Iterable> A)=>A.expand((B)=>B);typedef NN zd();abstract class MN implements ON{final zd Lq;final String path;Stream<gC> get mK=>Mq.stream;StreamController<gC> Mq;Future get bP=>Nq.future;var Nq=new Completer();MN(this.path,this.Lq){var A;var B;Mq=new StreamController<gC>.broadcast(onListen:(){A=Lq();B=A.mK.listen(Mq.add,onError:Mq.addError,onDone:Mq.close);A.bP.then(Nq.complete);},onCancel:(){B.cancel();A.close();Nq=new Completer();},sync:true);}}abstract class NN implements ON{}final lQ=new mQ.Xj();class mQ extends XD{final int blockSize=16*aF;mQ.Xj();ByteConversionSink startChunkedConversion(Sink<TB> A)=>new ByteConversionSink.from(new nQ(A));}class nQ extends hI{final X=new Uint32List(5);final Uint32List Oq;nQ(Sink<TB> A):Oq=new Uint32List(80),super(A,16){X[0]=0x67452301;X[1]=0xEFCDAB89;X[2]=0x98BADCFE;X[3]=0x10325476;X[4]=0xC3D2E1F0;}void OL(Uint32List K){assert(K.length==16);var H=X[0];var B=X[1];var D=X[2];var G=X[3];var I=X[4];for(var A=0;A<80;A++ ){if(A<16){Oq[A]=K[A];}else{Oq[A]=iI(Oq[A-3]^Oq[A-8]^Oq[A-14]^Oq[A-16],1);}var C=l(l(iI(H,5),I),Oq[A]);if(A<20){C=l(l(C,(B&D)|(~B&G)),0x5A827999);}else if(A<40){C=l(l(C,(B^D^G)),0x6ED9EBA1);}else if(A<60){C=l(l(C,(B&D)|(B&G)|(D&G)),0x8F1BBCDC);}else{C=l(l(C,B^D^G),0xCA62C1D6);}I=G;G=D;D=iI(B,30);B=H;H=C&qD;}X[0]=l(H,X[0]);X[1]=l(B,X[1]);X[2]=l(D,X[2]);X[3]=l(G,X[3]);X[4]=l(I,X[4]);}}final ha=new oQ.Yj();class oQ extends XD{final int blockSize=16*aF;oQ.Yj();ByteConversionSink startChunkedConversion(Sink<TB> A)=>new ByteConversionSink.from(new pQ(A));}const List<int> ia=const[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];class pQ extends hI{final X=new Uint32List(8);final Uint32List Pq;pQ(Sink<TB> A):Pq=new Uint32List(64),super(A,16){X[0]=0x6a09e667;X[1]=0xbb67ae85;X[2]=0x3c6ef372;X[3]=0xa54ff53a;X[4]=0x510e527f;X[5]=0x9b05688c;X[6]=0x1f83d9ab;X[7]=0x5be0cd19;}int Qq(int A,int B)=>(B>>A)|((B<<(32-A))&qD);int Rq(int A,int B,int C)=>(A&B)^((~A&qD)&C);int Sq(int A,int B,int C)=>(A&B)^(A&C)^(B&C);int Tq(int A)=>Qq(2,A)^Qq(13,A)^Qq(22,A);int Uq(int A)=>Qq(6,A)^Qq(11,A)^Qq(25,A);int Vq(int A)=>Qq(7,A)^Qq(18,A)^(A>>3);int Wq(int A)=>Qq(17,A)^Qq(19,A)^(A>>10);void OL(Uint32List O){assert(O.length==16);for(var A=0;A<16;A++ ){Pq[A]=O[A];}for(var A=16;A<64;A++ ){Pq[A]=l(l(Wq(Pq[A-2]),Pq[A-7]),l(Vq(Pq[A-15]),Pq[A-16]));}var B=X[0];var D=X[1];var G=X[2];var K=X[3];var C=X[4];var H=X[5];var I=X[6];var L=X[7];for(var A=0;A<64;A++ ){var V=l(l(L,Uq(C)),l(Rq(C,H,I),l(ia[A],Pq[A])));var b=l(Tq(B),Sq(B,D,G));L=I;I=H;H=C;C=l(K,V);K=G;G=D;D=B;B=l(V,b);}X[0]=l(B,X[0]);X[1]=l(D,X[1]);X[2]=l(G,X[2]);X[3]=l(K,X[3]);X[4]=l(C,X[4]);X[5]=l(H,X[5]);X[6]=l(I,X[6]);X[7]=l(L,X[7]);}}abstract class eB implements Comparable<eB>{factory eB(mC A,mC B,String C)=>new xM(A,B,C);}class xM extends cU{final mC start;final mC end;final String GG;xM(this.start,this.end,this.GG){if(end.AB!=start.AB){throw new ArgumentError("Source URLs \"${start.AB}\" and " " \"${end.AB}\" don't match.");}else if(end.offset<start.offset){throw new ArgumentError('End ${end} must come after start ${start}.');}else if(GG.length!=start.fX(end)){throw new ArgumentError('Text "${GG}" must be ${start.fX(end)} ' 'characters long.');}}}class bU implements Exception{String get message=>Xq;final String Xq;eB get N=>Yq;final eB Yq;bU(this.Xq,this.Yq);String toString({color}){if(N==null)return message;return "Error on "+N.message(message,color:color);}}class yM extends bU implements FormatException{dynamic get source=>Zq;final Zq;int get offset=>N==null?null:N.start.offset;yM(String A,eB B,[this.Zq]):super(A,B);}abstract class cU implements eB{Uri get AB=>start.AB;int get length=>end.offset-start.offset;int compareTo(eB A){var B=start.compareTo(A.start);return B==0?end.compareTo(A.end):B;}String message(String C,{color}){var A=new StringBuffer();A.write('line ${start.JC+1}, column ${start.LB+1}');if(AB!=null)A.write(' of ${Vd(AB)}');A.write(': ${C}');var B=this.Li(color:color);if(!B.isEmpty){A.writeln();A.write(B);}return A.toString();}String Li({color}){if(color==true)color=ld;if(color==false)color=null;var C=start.LB;var A=new StringBuffer();String B;if(this is zM){var D=(this as zM).context;var G=od(D,GG,C);if(G!=null&&G>0){A.write(D.substring(0,G));D=D.substring(G);}var K=D.indexOf('\n');B=K==-1?D:D.substring(0,K+1);C=JG.min(C,B.length);}else if(length==0){return "";}else{B=GG.split("\n").first;C=0;}var H=JG.min(C+end.offset-start.offset,B.length);if(color!=null){A.write(B.substring(0,C));A.write(color);A.write(B.substring(C,H));A.write(aU);A.write(B.substring(H));}else{A.write(B);}if(!B.endsWith('\n'))A.write('\n');for(var I=0;I<C;I++ ){if(B.codeUnitAt(I)==TQ){A.writeCharCode(TQ);}else{A.writeCharCode(Qa);}}if(color!=null)A.write(color);A.write('^'*JG.max(H-C,1));if(color!=null)A.write(aU);return A.toString();}bool operator==(A)=>A is eB&&start==A.start&&end==A.end;int get hashCode=>start.hashCode+(31*end.hashCode);String toString()=>'<${runtimeType}: from ${start} to ${end} "${GG}">';}class ZG extends BN implements pd{final gF aq;int get JC=>aq.rK(position);int get LB=>aq.KP(position);FF get state=>new fU(this,position);RB bq;EF get location=>aq.location(position);RB get WC=>location.KC();ZG(String A,{sourceUrl,int position}):aq=new gF(A,url:sourceUrl),super(A,sourceUrl:sourceUrl,position:position);factory ZG.Jk(String string,{sourceUrl,int position})=AN;RB LC(FF B,[FF A]){var C=A==null?position:A.position;return aq.N(B.position,C);}bool QF(Pattern A){if(!super.QF(A)){bq=null;return false;}bq=aq.N(position,tG.end);return true;}void error(String A,{Match match,int position,int length}){gU(string,match,position,length);if(match==null&&position==null&&length==null)match=tG;if(position==null){position=match==null?this.position:match.start;}if(length==null)length=match==null?1:match.end-match.start;var B=aq.N(position,position+length);throw new NJ(A,B,string);}}class fU implements FF{final ZG cq;final int position;int get JC=>cq.aq.rK(position);int get LB=>cq.aq.KP(position);fU(this.cq,this.position);}class zM extends xM{}typedef DateTime Ae(String _0);Ae tU;Future<DateTime> Be(String A){if(tU!=null){return new Future.value(tU(A));}return FileStat.stat(A).then((B)=>B.modified);}final qd=new RegExp("/").pattern=="\\/";class BN{final Uri AB;final String string;int get position=>dq;set position(int A){if(A<0||A>string.length){throw new ArgumentError("Invalid position ${A}");}dq=A;}int dq=0;Match get tG=>eq;Match eq;String get NE=>string.substring(position);bool get qE=>position==string.length;BN(this.string,{sourceUrl,int position}):AB=sourceUrl is String?Uri.parse(sourceUrl):sourceUrl{if(position!=null)this.position=position;}int f(){if(qE)fq("more input");return string.codeUnitAt(dq++ );}int k([int A]){if(A==null)A=0;var B=position+A;if(B<0||B>=string.length)return null;return string.codeUnitAt(B);}bool mB(Pattern B){var A=QF(B);if(A)dq=eq.end;return A;}void nK(Pattern A,{String name}){if(mB(A))return;if(name==null){if(A is RegExp){var B=A.pattern;if(!qd)B=B.replaceAll("/","\\/");name="/${B}/";}else{name=A.toString().replaceAll("\\","\\\\").replaceAll('"','\\"');name='"${name}"';}}fq(name);}bool QF(Pattern A){eq=A.matchAsPrefix(string,position);return eq!=null;}String substring(int B,[int A]){if(A==null)A=position;return string.substring(B,A);}void error(String A,{Match match,int position,int length}){gU(string,match,position,length);if(match==null&&position==null&&length==null)match=tG;if(position==null){position=match==null?this.position:match.start;}if(length==null)length=match==null?1:match.end-match.start;var B=new gF(string,url:AB);var C=B.N(position,position+length);throw new NJ(A,C,string);}void fq(String A){error("expected ${A}.",position:this.position,length:0);}}abstract class iB{static final iB Yd=new EU();static final iB KJ=new GU();static final iB VG=new FU();static final iB hM=Zd();static iB Zd(){if(Uri.base.scheme!='file')return iB.VG;if(!Uri.base.path.endsWith('/'))return iB.VG;if(new Uri(path:'a/b').toFilePath()=='a\\b')return iB.KJ;return iB.Yd;}String get name;cD get context=>new cD(style:this);String get TD;String EY(String A);String TI(Uri A);String toString()=>name;}uD XH(dynamic A)=>new uD(A);class uD{dynamic value;uD(this.value);int get ZC{if(value is int){return value;}return 0;}String get bB{if(value is String){return value;}return "";}uD operator[](dynamic A){try {value=value[A];}catch (B){value=null;}return this;}uD elementAt(int B,[dynamic A]){try {value=value[B];}catch (C){value=null;}if(value==null&&A!=null){value=A;}return this;}uD last(){if(value is Iterable){value=value.last;}else{value=null;}return this;}uD ei([int A=0]){if(value==null){value=A;}else{value=int.parse(value.toString(),onError:(B)=>A);}return this;}uD replaceAll(String A,String B){value=value.toString().replaceAll(A,B);return this;}uD split(String A){value=value.toString().split(A);return this;}uD trim(){value=value.toString().trim();return this;}}abstract class iU{static final int EN=sd();static final int rd=td();static final Map<String,String> OJ=Platform.environment;static final String jU=Platform.operatingSystem;static dynamic kU(){throw new UnsupportedError("Unsupported operating system.");}static int sd(){switch (jU){case "android":case "linux":if(rd==64){return 64;}var A=<String>[] ;var B=DN("/etc/ld.so.conf");if(B!=null){hU(B,A,new Set<String>());}A.add("/lib");A.add("/lib64");for(var B in A){var G=AJ.dT(QB(B,"libc.so.*"));for(var C in G){C=DN(C);if(C==null){continue;}var D=new File(C);if(D.existsSync()){var H=XH(CN("file",["-b",D.path])).trim().bB;if(H.startsWith("ELF 64-bit")){return 64;}}}}return 32;case "macos":if(XH(CN("uname",["-m"])).trim().bB=="x86_64"){return 64;}return 32;case "windows":var I=XH(OJ["PROCESSOR_ARCHITEW6432"]).bB;if(!I.isEmpty){return 64;}switch (OJ["PROCESSOR_ARCHITECTURE"]){case "AMD64":case "IA64":return 64;}return 32;default:kU();}return null;}static int td(){switch (jU){case "android":case "linux":return XH(CN("getconf",["LONG_BIT"])).trim().ei().ZC;case "macos":if(Platform.version.contains("macos_ia32")){return 32;}else if(Platform.version.contains("macos_x64")){return 64;}else{return EN;}break;case "windows":var A=XH(OJ["PROCESSOR_ARCHITEW6432"]).bB;if(!A.isEmpty){return 32;}switch (OJ["PROCESSOR_ARCHITECTURE"]){case "AMD64":case "IA64":return 64;}return 32;default:kU();}return null;}}String CN(String B,List<String> C,{bool runInShell: false}){try {var A=Process.runSync(B,C,runInShell:runInShell);if(A.exitCode==0){return A.stdout.toString();}}catch (D){}return null;}String DN(String A){while(true){if(!AJ.wc(A,"link")){break;}try {A=new Link(A).resolveSymbolicLinksSync();}catch (B){return null;}}return A;}void hU(String B,List<String> D,Set<String> C){B=DN(B);if(B==null){return;}var G=new File(B);if(!G.existsSync()){return;}var K=AJ.uc(B);for(var A in G.readAsLinesSync()){A=A.trim();var H=A.indexOf("#");if(H!=-1){A=A.substring(0,H);}if(A.isEmpty){continue;}var I=false;if(A.startsWith("include ")){A=A.substring(8);I=true;}if(Td(A)){A=QB(K,A);}if(I){for(var B in AJ.dT(A)){if(!C.contains(B)){C.add(B);hU(B,D,C);}}}else{D.add(A);}}}class lU extends WU{lU():super(new yd());}class ud{String encode(Map<String,dynamic> B){var A=new wd();A.GP(B,name:[] );return A.toString();}}abstract class vd{}typedef void FN<OB>(OB _0);class wd{static final RegExp xd=new RegExp(r'^[A-Za-z0-9_-]+$');final StringBuffer gq=new StringBuffer();void NP(){if(gq.isNotEmpty)gq.writeln();}void Pi(List<String> B,{bool array: false}){if(B.isNotEmpty){NP();NP();gq.write(array?'[[':'[');for(int A=0;A<B.length;A++ ){if(A!=0)gq.write('.');sX(B[A]);}gq.write(array?']]':']');}}sP(A){while(A is vd)A=A.Ik();return A;}void GP(Map<String,dynamic> H,{List<String> name,bool array: false}){var C={};var D={};H.forEach((B,A){A=sP(A);if(A is Map){D[B]=A;return;}if(A is Iterable&&A.length>0){A=A.map(sP);if(A.every((G)=>G is Map)){D[B]=A;return;}}C[B]=A;});if(array||C.isNotEmpty){Pi(name,array:array);C.forEach(Qi);}D.forEach((B,A){name.add(B);if(A is Map){GP(A,name:name);}else if(A is Iterable){A.forEach((G){GP(G,name:name,array:true);});}name.removeLast();});}void Qi(String A,B){NP();sX(A);gq.write(' = ');tX(B);}void sX(String A){if(xd.hasMatch(A)){gq.write(A);}else{rX(A);}}void tX(A){A=sP(A);FN B=Gi(A);if(B==null)throw new IN(A);B(A);}FN Gi(A){if(A is num)return qh;if(A is bool)return lh;if(A is DateTime)return mh;if(A is String)return rh;if(A is Iterable)return kh;return null;}void qh(num A){gq.write('${A}');}void lh(bool A){gq.write(A?'true':'false');}void mh(DateTime A){gq.write(A.toIso8601String());}Type Bj(Iterable B){if(B.isEmpty)return null;if(identical(1,1.0)&&B.every((A)=>A is num)&&B.any((A)=>A is int)&&B.any((A)=>A is!int)){return num;}return B.map((A)=>A.runtimeType).reduce((C,D){if(C!=D)throw new JN(B);return C;});}void kh(Iterable B){var D=Bj(B);gq.write('[');for(var A=0;A<B.length;A++ ){var C=B.elementAt(A);if(A!=0)gq.write(', ');tX(C);if(D==num&&C is int)gq.write('.0');}gq.write(']');}FN<String> Fi(String A){var C=[JD.eD['"'],JD.eD['\\']];bool B(String D)=>JD.eD.values.where((G)=>!C.contains(G)).any(D.codeUnits.contains);if(A.contains('\n')||A.contains('\r')){if(A.split(new RegExp('\n|\r')).any(B)){return oh;}return ph;}if(A.contains("'")||B(A)){return rX;}return nh;}void rh(String A){var B=Fi(A);B(A);}void hq(String A,{String quotes,Iterable<int> esc: const[] ,bool multiline: false}){if(esc.isNotEmpty){A=A.codeUnits.map((int B){if(esc.contains(B)){return '\\${JD.eD.Ri[B]}';}return new String.fromCharCode(B);}).join();}if(multiline){if(quotes=='"""')A=A.replaceAll('"""',r'\"\"\"');}else if(A.contains('\n')||A.contains('\r')){throw new PJ('Newlines are only allowed in multi-line strings!');}if(!esc.contains(quotes.codeUnitAt(0))&&A.contains(quotes)){throw new PJ('"${quotes}" are prohibited in non-basic strings.');}gq.write(quotes);if(multiline)gq.writeln();gq.write(A);gq.write(quotes);}void rX(String A)=>hq(A,quotes:'"',esc:JD.eD.values);void oh(String B)=>hq(B,quotes:'"""',esc:JD.eD.values.where((A)=>A!=JD.eD['"']&&A!=JD.eD['n']&&A!=JD.eD['r']),multiline:true);void nh(String A)=>hq(A,quotes:"'");void ph(String A)=>hq(A,quotes:"'''",multiline:true);String toString()=>gq.toString();}class GN{final String LI;GN(this.LI);bool operator==(A)=>A is GN&&A.LI==LI;int get hashCode=>LI.hashCode;String toString()=>'The escape sequence "${LI}" is invalid!';}class PJ{final String NI;PJ(this.NI);bool operator==(A)=>A is PJ&&A.NI==NI;int get hashCode=>NI.hashCode;String toString()=>NI;}class YH{final String name;YH(this.name);bool operator==(A)=>A is YH&&A.name==name;int get hashCode=>name.hashCode;String toString()=>'Cannot redefine "${name}"!';}class HN{final String name;HN(this.name);bool operator==(A)=>A is HN&&A.name==name;int get hashCode=>name.hashCode;String toString()=>'Cannot define table "${name}"! Parent must be a table!';}class IN{final value;IN(this.value);bool operator==(A)=>A is IN&&A.value==value;int get hashCode=>value.hashCode;String toString()=>'"${value}" cannot be encoded as a TOMl value!';}class JN{final Iterable d;JN(this.d);bool operator==(A)=>A is JN&&A.d==d;int get hashCode=>d.hashCode;String toString()=>'The items of "${d}" must all be of the same type!';}class JD extends qM{static final YG<String,int> eD=new YG()..addAll({'b':0x08,'t':0x09,'n':0x0A,'f':0x0C,'r':0x0D,'"':0x22,r'\':0x5C});start()=>R(EP).end();MC(A,[bool C=false,bool B]){if(B==null)B=C;if(A is Function)A=R(A);var D=R(OF,C);var G=R(OF,B);return A.JP().trim(D,G);}OF([bool A=false])=>A?R(OF)|R(OI):R(uP)|R(fh);uP()=>p(' ')|p('\t');OI()=>p('\n')|p('\r')&p('\n');fh()=>p('#')&R(OI).mY().QE();value()=>R(jK)|R(pK)|R(tK)|R(fK)|R(SZ)|R(d)|R(sK);P iq({P quotes,P esc,bool multiline: false}){var A=quotes;if(multiline)A=(A&R(iX).LE()).wE(0);var C=quotes;if(!multiline)C|= R(OI);var B=C.mY();if(esc!=null)B=esc|B;return (A&B.QE()&quotes).trim(R(OF)).wE(1).map((List D)=>D.join());}SZ()=>R(ai)|R(QX)|R(ci)|R(Wi);QX()=>iq(quotes:p('"'),esc:R(lK));lK()=>p('\\')&(R(rP)|R(iP));rP()=>p('u')&R(HY).KL(4).JP()|p('U')&R(HY).KL(8).JP();iP()=>DF();HY()=>XU('0-9a-fA-F');ai()=>iq(quotes:UH('"""'),esc:R(bi),multiline:true);bi()=>R(vP)|R(lK);vP()=>p('\\')&R(iX).AL()&R(uP).QE();iX()=>R(uP).QE()&R(OI);Wi()=>iq(quotes:UH("'"));ci()=>iq(quotes:UH("'''"),multiline:true);tK()=>R(MC,jq);jq()=>nM('+-').LE()&(p('0')|R(cX));cX()=>LJ().AL().XI(p('_'));pK()=>R(MC,kq);kq()=>R(jq)&(R(uh)&R(uX).LE()|R(uX));uh()=>p('.')&R(cX);uX()=>nM('eE')&R(jq);fK()=>R(MC,lq);lq()=>UH('true')|UH('false');jK()=>R(MC,mq);mq()=>R(xh)&p('T')&R(yh);xh()=>R(hh)&p('-')&R(wF)&p('-')&R(wF);yh()=>R(fi)&R(wi);fi()=>R(wF)&p(':')&R(wF)&p(':')&R(wF)&(p('.')&LJ().BL(1,6)).LE();wi()=>p('Z')|R(vi);vi()=>nM('+-')&R(wF)&p(':')&R(wF);wF()=>LJ().KL(2);hh()=>LJ().KL(4);d()=>oE(jK)|oE(pK)|oE(tK)|oE(fK)|oE(SZ)|oE(d)|oE(sK);oE(A)=>R(MC,p('['),false,true)&R(A).XI(R(MC,p(','),true),optionalSeparatorAtEnd:true,includeSeparators:false).LE([] )&R(MC,p(']'),true,false);nP()=>R(IL).trim(R(OF,true))&R(PP);IL()=>p('[')&R(ui)&p(']');oP()=>R(pP).trim(R(OF,true))&R(PP);pP()=>p('[')&R(IL)&p(']');sK()=>R(MC,p('{'))&R(vK).XI(MC(p(',')),optionalSeparatorAtEnd:false,includeSeparators:false).LE([] )&R(MC,p('}'));key()=>R(MC,Zh)|R(ki);Zh()=>XU('A-Za-z0-9_-').AL();ki()=>R(QX);ui()=>R(key).XI(p('.'),includeSeparators:false);vK()=>R(key)&p('=')&R(value);PP()=>R(vK).XI(R(OI)&R(OF,true).QE(),includeSeparators:false,optionalSeparatorAtEnd:true).LE([] );EP()=>R(OF,true).QE()&R(PP)&(R(nP)|R(oP)).QE();}class yd extends JD{lK()=>super.lK().wE(1);iP()=>super.iP().map((String A){if(JD.eD.containsKey(A)){return new String.fromCharCode(JD.eD[A]);}throw new GN('\\${A}');});rP()=>super.rP().wE(1).map((A)=>new String.fromCharCode(int.parse(A,radix:16)));vP()=>super.vP().map((A)=>'');tK()=>super.tK().map((A)=>int.parse(A.replaceAll('_','')));pK()=>super.pK().map((A)=>double.parse(A.replaceAll('_','')));fK()=>super.fK().map((A)=>A=='true');jK()=>super.jK().map(DateTime.parse);oE(A)=>super.oE(A).wE(1);nP()=>super.nP().map((List A)=>{'type':'table','parent':A[0].sublist(0,A[0].length-1),'name':A[0].last,'pairs':A[1]});IL()=>super.IL().wE(1);oP()=>super.oP().map((List A)=>{'type':'table-array','parent':A[0].sublist(0,A[0].length-1),'name':A[0].last,'pairs':A[1]});pP()=>super.pP().wE(1);sK()=>super.sK().wE(1).map((List C){var A={};C.forEach((Map B){A[B['key']]=B['value'];});return A;});vK()=>super.vK().gi([0,2]).map((List A)=>{'key':A[0],'value':A[1]});EP()=>super.EP().map((List b){var I={};var n=new Set();void K(String A){if(n.contains(A))throw new YH(A);n.add(A);}Function EB(Map gB,[String CC])=>(Map G){var A=CC==null?G['key']:'${CC}.${G['key']}';K(A);if(gB.containsKey(G['key']))throw new YH(A);gB[G['key']]=G['value'];};b[1].forEach(EB(I));b[2].forEach((Map C){var B=I;var A=[] ;C['parent'].forEach((String H){B=B.putIfAbsent(H,()=>{});if(B is List){H='${H}[${B.length-1}]';B=B.last;}A.add(H);if(B is!Map)throw new HN(A.join('.'));});A.add(C['name']);A=A.join('.');var L;if(C['type']=='table-array'){var O=B.putIfAbsent(C['name'],(){K(A);return [] ;});if(O is Map)throw new YH(A);var NC=O.length;O.add(L={});A='${A}[${NC}]';}else{L=B.putIfAbsent(C['name'],()=>{});}K(A);C['pairs'].forEach(EB(L,A));});V(D){if(D is Map){return new UnmodifiableMapView(new Map.fromIterables(D.keys,D.values.map(V)));}if(D is List){return new UnmodifiableListView(D.map(V));}return D;}return V(I);});}abstract class KN<W> extends ListBase<W>{static const int mU=8;List<W> nq;TypedData get oq=>nq as TypedData;int pq;KN(List<W> A):this.nq=A,this.pq=A.length;int get length=>pq;W operator[](int A){if(A>=length)throw new RangeError.index(A,this);return nq[A];}void operator[]=(int A,W B){if(A>=length)throw new RangeError.index(A,this);nq[A]=B;}void set length(int A){if(A<pq){W D=qq;for(int C=A;C<pq;C++ ){nq[C]=D;}}else if(A>nq.length){List<W> B;if(nq.length==0){B=rq(A);}else{B=sq(A);}B.setRange(0,pq,nq);nq=B;}pq=A;}void tq(W A){if(pq==nq.length)uq(pq);nq[pq++ ]=A;}void add(W A){tq(A);}void addAll(Iterable<W> C,[int A=0,int B]){RangeError.checkNotNegative(A,"start");if(B!=null&&A>B){throw new RangeError.range(B,A,null,"end");}vq(C,A,B);}void insertAll(int D,Iterable<W> G,[int B=0,int A]){RangeError.checkValidIndex(D,this,"index",pq+1);RangeError.checkNotNegative(B,"start");if(A!=null){if(B>A){throw new RangeError.range(A,B,null,"end");}if(B==A)return;}if(D==pq){vq(G,B,A);return;}if(A==null&&G is List){A=G.length;}if(A!=null){wq(D,G,B,A);return;}var C=pq;var H=B;for(var I in G){if(H>0){H-- ;continue;}if(C==nq.length){uq(C);}nq[C++ ]=I;}if(H>0){throw new StateError("Too few elements");}if(A!=null&&C<A){throw new RangeError.range(A,B,C,"end");}LN(nq,D,pq);LN(nq,pq,C);LN(nq,D,C);pq=C;return;}static void LN(List B,int C,int A){A-- ;while(C<A){var D=B[C];var G=B[A];B[A]=D;B[C]=G;C++ ;A-- ;}}void vq(Iterable<W> A,[int B=0,int C]){if(A is List)C??= A.length;if(C!=null){wq(pq,A,B,C);return;}var D=0;for(var G in A){if(D>=B)add(G);D++ ;}if(D<B)throw new StateError("Too few elements");}void wq(int B,Iterable<W> A,int G,int C){if(A is List){C??= A.length;if(G>A.length||C>A.length){throw new StateError("Too few elements");}}else{assert(C!=null);}var D=C-G;var H=pq+D;xq(H);nq.setRange(B+D,pq+D,nq,B);nq.setRange(B,B+D,A,G);pq=H;}void insert(int A,W C){if(A<0||A>pq){throw new RangeError.range(A,0,pq);}if(pq<nq.length){nq.setRange(A+1,pq+1,nq,A);nq[A]=C;pq++ ;return;}List<W> B=sq(null);B.setRange(0,A,nq);B.setRange(A+1,pq+1,nq,A);B[A]=C;pq++ ;nq=B;}void xq(int A){if(A<=nq.length)return;var B=sq(A);B.setRange(0,pq,nq);nq=B;}List<W> sq(int B){int A=nq.length*2;if(B!=null&&A<B){A=B;}else if(A<mU){A=mU;}return rq(A);}void uq(int A){nq=sq(null)..setRange(0,A,nq);}void setRange(int B,int A,Iterable<W> C,[int D=0]){if(A>pq)throw new RangeError.range(A,0,pq);yq(B,A,C,D);}void yq(int B,int C,Iterable<W> A,int D){if(A is KN<W>){nq.setRange(B,C,A.nq,D);}else{nq.setRange(B,C,A,D);}}int get elementSizeInBytes=>oq.elementSizeInBytes;int get lengthInBytes=>pq*oq.elementSizeInBytes;int get offsetInBytes=>oq.offsetInBytes;ByteBuffer get buffer=>oq.buffer;W get qq;List<W> rq(int A);}abstract class nU extends KN<int>{nU(List<int> A):super(A);int get qq=>0;}class oU extends nU{oU([int A=0]):super(new Uint8List(A));Uint8List rq(int A)=>new Uint8List(A);}abstract class Za<zB,OB> implements Map<zB,OB>{static DH(){throw new UnsupportedError("Cannot modify an unmodifiable Map");}void operator[]=(zB A,OB B)=>DH();OB putIfAbsent(zB A,OB B())=>DH();void addAll(Map<zB,OB> A)=>DH();OB remove(Object A)=>DH();void clear()=>DH();}class FU extends XE{FU();final name='url';final TD='/';final BC=const['/'];final JZ=new RegExp(r'/');final lY=new RegExp(r"(^[a-zA-Z][-+.a-zA-Z\d]*://|[^/])$");final GZ=new RegExp(r"[a-zA-Z][-+.a-zA-Z\d]*://[^/]*");final EZ=new RegExp(r"^/");bool iK(String A)=>A.contains('/');bool q(int A)=>A==ID;bool wG(String A){if(A.isEmpty)return false;if(!q(A.codeUnitAt(A.length-1)))return true;return A.endsWith("://")&&SD(A)==A.length;}int SD(String A,{bool withDrive: false}){if(A.isEmpty)return 0;if(q(A.codeUnitAt(0)))return 1;for(var C=0;C<A.length;C++ ){var D=A.codeUnitAt(C);if(q(D))return 0;if(D==dM){if(C==0)return 0;if(A.startsWith('//',C+1))C+= 3;var B=A.indexOf('/',C);if(B<=0)return A.length;if(!withDrive||A.length<B+3)return B;if(!A.startsWith('file://'))return B;if(!IU(A,B+1))return B;return A.length==B+3?B+3:B+4;}}return 0;}bool FC(String A)=>A.isNotEmpty&&q(A.codeUnitAt(0));String TI(Uri A)=>A.toString();}const qD=0xFFFFFFFF;const ja=8;const aF=4;int l(int A,int B)=>(A+B)&qD;int iI(int A,int C){var B=C&31;return ((A<<B)&qD)|((A&qD)>>(32-B));}bool HU(int A)=>(A>=xT&&A<=yT)||(A>=zT&&A<=AU);bool IU(String A,int B){if(A.length<B+2)return false;if(!HU(A.codeUnitAt(B)))return false;if(A.codeUnitAt(B+1)!=dM)return false;if(A.length==B+2)return true;return A.codeUnitAt(B+2)==ID;}int od(String B,String C,int D){var I=C=='';var A=B.indexOf(C);while(A!=-1){var G=B.lastIndexOf('\n',A)+1;var H=A-G;if(D==H||(I&&D==H+1)){return G;}A=B.indexOf(C,A+1);}return null;}void gU(String C,Match D,int A,int B){if(D!=null&&(A!=null||B!=null)){throw new ArgumentError("Can't pass both match and position/length.");}if(A!=null){if(A<0){throw new RangeError("position must be greater than or equal to 0.");}else if(A>C.length){throw new RangeError("position must be less than or equal to the " "string length.");}}if(B!=null&&B<0){throw new RangeError("length must be greater than or equal to 0.");}if(A!=null&&B!=null&&A+B>C.length){throw new RangeError("position plus length must not go beyond the end of " "the string.");}}class Ce<DC> implements StreamTransformer<DC,List<DC>>{Stream<List<DC>> bind(Stream<DC> C){var A=new Queue<DC>();return new StreamTransformer<DC,List<DC>>.fromHandlers(handleData:(D,B){A.add(D);Timer.run((){if(A.isEmpty)return;B.add(A.toList());A.clear();});},handleDone:(B){if(A.isNotEmpty){B.add(A.toList());A.clear();}B.close();}).bind(C);}}class gC{final vD type;final String path;gC(this.type,this.path);String toString()=>"${type} ${path}";}class vD{static const uU=const vD("remove");static const QJ=const vD("modify");final String zq;const vD(this.zq);String toString()=>zq;}abstract class ON{}const iM=0x20;class GU extends XE{GU();final name='windows';final TD='\\';final BC=const['/','\\'];final JZ=new RegExp(r'[/\\]');final lY=new RegExp(r'[^/\\]$');final GZ=new RegExp(r'^(\\\\[^\\]+\\[^\\/]+|[a-zA-Z]:[/\\])');final EZ=new RegExp(r"^[/\\](?![/\\])");bool iK(String A)=>A.contains('/');bool q(int A)=>A==ID||A==UG;bool wG(String A){if(A.isEmpty)return false;return !q(A.codeUnitAt(A.length-1));}int SD(String A,{bool withDrive: false}){if(A.isEmpty)return 0;if(A.codeUnitAt(0)==ID)return 1;if(A.codeUnitAt(0)==UG){if(A.length<2||A.codeUnitAt(1)!=UG)return 1;var B=A.indexOf('\\',2);if(B>0){B=A.indexOf('\\',B+1);if(B>0)return B;}return A.length;}if(A.length<3)return 0;if(!HU(A.codeUnitAt(0)))return 0;if(A.codeUnitAt(1)!=dM)return 0;if(!q(A.codeUnitAt(2)))return 0;return 3;}bool FC(String A)=>SD(A)==1;String TI(Uri B){if(B.scheme!=''&&B.scheme!='file'){throw new ArgumentError("Uri ${B} must have scheme 'file:'.");}var A=B.path;if(B.host==''){if(A.length>=3&&A.startsWith('/')&&IU(A,1)){A=A.replaceFirst("/","");}}else{A='\\\\${B.host}${A}';}return Uri.decodeComponent(A.replaceAll("/","\\"));}bool hK(int A,int B){if(A==B)return true;if(A==ID)return B==UG;if(A==UG)return B==ID;if(A^B!=iM)return false;var C=A|iM;return C>=zT&&C<=AU;}bool YP(String A,String C){if(identical(A,C))return true;if(A.length!=C.length)return false;for(var B=0;B<A.length;B++ ){if(!hK(A.codeUnitAt(B),C.codeUnitAt(B))){return false;}}return true;}int UX(int A){if(A==ID)return UG;if(A<xT)return A;if(A>yT)return A;return A|iM;}String VX(String A)=>A.toLowerCase();}Af(String A,{sourceUrl})=>Bf(A,sourceUrl:sourceUrl).value;jB Bf(String A,{sourceUrl})=>Cf(A,sourceUrl:sourceUrl).vO;fG Cf(String D,{sourceUrl}){var A=new DV(D,sourceUrl:sourceUrl);var B=A.load();if(B==null){return new fG.tj(new sB.xj(null,A.N),A.N,null,const[] );}var C=A.load();if(C!=null){throw new m("Only expected one document.",C.N);}return B;}Map De()=>new HashMap(equals:Ee,hashCode:vU);bool Ee(A,B)=>new Fe().XC(A,B);class Fe{final Ar=[] ;final Br=[] ;bool XC(A,B){if(A is sB)A=A.value;if(B is sB)B=B.value;for(var C=0;C<Ar.length;C++ ){var D=identical(A,Ar[C]);var G=identical(B,Br[C]);if(D&&G)return true;if(D||G)return false;}Ar.add(A);Br.add(B);try {if(A is List&&B is List){return Cr(A,B);}else if(A is Map&&B is Map){return Dr(A,B);}else if(A is num&&B is num){return Er(A,B);}else{return A==B;}}finally {Ar.removeLast();Br.removeLast();}}bool Cr(List B,List C){if(B.length!=C.length)return false;for(var A=0;A<B.length;A++ ){if(!XC(B[A],C[A]))return false;}return true;}bool Dr(Map A,Map B){if(A.length!=B.length)return false;for(var C in A.keys){if(!B.containsKey(C))return false;if(!XC(A[C],B[C]))return false;}return true;}bool Er(num A,num B){if(A.isNaN&&B.isNaN)return true;return A==B;}}int vU(G){var B=[] ;C(A){if(B.any((H)=>identical(H,A)))return -1;B.add(A);try {if(A is Map){var D=const YQ();return D.hash(A.keys.map(C))^D.hash(A.values.map(C));}else if(A is Iterable){return const WQ().hash(A.map(vU));}else if(A is sB){return A.value.hashCode;}else{return A.hashCode;}}finally {B.removeLast();}}return C(G);}class CB{final t type;final RB N;CB(this.type,this.N);String toString()=>type.toString();}class RJ implements CB{get type=>t.Ge;final RB N;final gH versionDirective;final List<LD> JL;final bool isImplicit;RJ(this.N,{this.versionDirective,List<LD> tagDirectives,this.isImplicit: true}):JL=tagDirectives==null?[] :tagDirectives;String toString()=>"DOCUMENT_START";}class SJ implements CB{get type=>t.yU;final RB N;final bool isImplicit;SJ(this.N,{this.isImplicit: true});String toString()=>"DOCUMENT_END";}class PN implements CB{get type=>t.zU;final RB N;final String name;PN(this.N,this.name);String toString()=>"ALIAS ${name}";}abstract class QN implements CB{String get anchor;String get tag;String toString(){var A=new StringBuffer('${type}');if(anchor!=null)A.write(" &${anchor}");if(tag!=null)A.write(" ${tag}");return A.toString();}}class KD extends QN{get type=>t.AV;final RB N;final String anchor;final String tag;final String value;final yB S;KD(this.N,this.value,this.S,{this.anchor,this.tag});String toString()=>"${super.toString()} \"${value}\"";}class ZH extends QN{get type=>t.BV;final RB N;final String anchor;final String tag;final nC S;ZH(this.N,this.S,{this.anchor,this.tag});}class aH extends QN{get type=>t.CV;final RB N;final String anchor;final String tag;final nC S;aH(this.N,this.S,{this.anchor,this.tag});}class t{static const wU=const t.pj("STREAM_START");static const xU=const t.pj("STREAM_END");static const Ge=const t.pj("DOCUMENT_START");static const yU=const t.pj("DOCUMENT_END");static const zU=const t.pj("ALIAS");static const AV=const t.pj("SCALAR");static const BV=const t.pj("SEQUENCE_START");static const TJ=const t.pj("SEQUENCE_END");static const CV=const t.pj("MAPPING_START");static const UJ=const t.pj("MAPPING_END");final String name;const t.pj(this.name);String toString()=>name;}class m extends yM{m(String A,eB B):super(A,B);}class DV{final RN Fr;final Gr=new Map<String,jB>();RB get N=>Hr;RB Hr;DV(String B,{sourceUrl}):Fr=new RN(B,sourceUrl:sourceUrl){var A=Fr.fB();Hr=A.N;assert(A.type==t.wU);}fG load(){if(Fr.qE)return null;var A=Fr.fB();if(A.type==t.xU){Hr=Hr.expand(A.N);return null;}var B=Ir(A);Hr=Hr.expand(B.N);Gr.clear();return B;}fG Ir(RJ A){var C=Jr(Fr.fB());var B=Fr.fB() as SJ;assert(B.type==t.yU);return new fG.tj(C,A.N.expand(B.N),A.versionDirective,A.JL,startImplicit:A.isImplicit,endImplicit:B.isImplicit);}jB Jr(CB A){switch (A.type){case t.zU:return Kr(A);case t.AV:return Lr(A);case t.BV:return Mr(A);case t.CV:return Nr(A);default:throw "Unreachable";}}void Or(String A,jB B){if(A==null)return;Gr[A]=B;}jB Kr(PN A){var B=Gr[A.name];if(B!=null)return B;throw new m("Undefined alias.",A.N);}jB Lr(KD A){var B;if(A.tag=="!"){B=new sB.wj(A.value,A);}else if(A.tag!=null){B=Pr(A);}else{B=Qr(A);}Or(A.anchor,B);return B;}jB Mr(ZH A){if(A.tag!="!"&&A.tag!=null&&A.tag!="tag:yaml.org,2002:seq"){throw new m("Invalid tag for sequence.",A.N);}var D=<jB>[] ;var C=new eV.vj(D,A.N,A.S);Or(A.anchor,C);var B=Fr.fB();while(B.type!=t.TJ){D.add(Jr(B));B=Fr.fB();}fV(C,A.N.expand(B.N));return C;}jB Nr(aH A){if(A.tag!="!"&&A.tag!=null&&A.tag!="tag:yaml.org,2002:map"){throw new m("Invalid tag for mapping.",A.N);}var D=De();var C=new dV.uj(D,A.N,A.S);Or(A.anchor,C);var B=Fr.fB();while(B.type!=t.UJ){var G=Jr(B);var H=Jr(Fr.fB());D[G]=H;B=Fr.fB();}fV(C,A.N.expand(B.N));return C;}sB Pr(KD A){switch (A.tag){case "tag:yaml.org,2002:null":var B=Rr(A);if(B!=null)return B;throw new m("Invalid null scalar.",A.N);case "tag:yaml.org,2002:bool":var B=Sr(A);if(B!=null)return B;throw new m("Invalid bool scalar.",A.N);case "tag:yaml.org,2002:int":var B=Tr(A,allowFloat:false);if(B!=null)return B;throw new m("Invalid int scalar.",A.N);case "tag:yaml.org,2002:float":var B=Tr(A,allowInt:false);if(B!=null)return B;throw new m("Invalid float scalar.",A.N);case "tag:yaml.org,2002:str":return new sB.wj(A.value,A);default:throw new m('Undefined tag: ${A.tag}.',A.N);}}sB Qr(KD A)=>Ur(A)??new sB.wj(A.value,A);sB Ur(KD A){var B=A.value.length;if(B==0)return new sB.wj(null,A);var C=A.value.codeUnitAt(0);switch (C){case eI:case YL:case ZL:return Tr(A);case Ua:case Sa:return B==4?Rr(A):null;case Wa:case Ta:return B==4?Sr(A):null;case VQ:case Ra:return B==5?Sr(A):null;case Ya:return B==1?new sB.wj(null,A):null;default:if(C>=AF&&C<=fI)return Tr(A);return null;}}sB Rr(KD A){switch (A.value){case "":case "null":case "Null":case "NULL":case "~":return new sB.wj(null,A);default:return null;}}sB Sr(KD A){switch (A.value){case "true":case "True":case "TRUE":return new sB.wj(true,A);case "false":case "False":case "FALSE":return new sB.wj(false,A);default:return null;}}jB Tr(KD A,{bool allowInt: true,bool allowFloat: true}){var B=Vr(A.value,allowInt:allowInt,allowFloat:allowFloat);return B==null?null:new sB.wj(B,A);}num Vr(String A,{bool allowInt: true,bool allowFloat: true}){assert(allowInt||allowFloat);var B=A.codeUnitAt(0);var G=A.length;if(allowInt&&G==1){var H=B-AF;return H>=0&&H<=9?H:null;}var C=A.codeUnitAt(1);if(allowInt&&B==AF){if(C==Xa)return int.parse(A,onError:(D)=>null);if(C==Va){var K=A.substring(2);return int.parse(K,radix:8,onError:(D)=>null);}}if((B>=AF&&B<=fI)||((B==YL||B==ZL)&&C>=AF&&C<=fI)){var I=null;if(allowInt){I=int.parse(A,radix:10,onError:(D)=>null);}if(allowFloat)I??= double.parse(A,(D)=>null);return I;}if(!allowFloat)return null;if((B==eI&&C>=AF&&C<=fI)||(B==ZL||B==YL)&&C==eI){if(G==5){switch (A){case "+.inf":case "+.Inf":case "+.INF":return double.INFINITY;case "-.inf":case "-.Inf":case "-.INF":return -double.INFINITY;}}return double.parse(A,(D)=>null);}if(G==4&&B==eI){switch (A){case ".inf":case ".Inf":case ".INF":return double.INFINITY;case ".nan":case ".NaN":case ".NAN":return double.NAN;}}return null;}}class RN{final ZN Wr;final Xr=new List<U>();var Yr=U.EV;final Zr=new Map<String,LD>();bool get qE=>Yr==U.NV;RN(String A,{sourceUrl}):Wr=new ZN(A,sourceUrl:sourceUrl);CB fB(){try {if(qE)throw new StateError("No more events.");var B=ar();return B;}on NJ catch (A){throw new m(A.message,A.N);}}CB ar(){switch (Yr){case U.EV:return br();case U.SN:return cr();case U.FV:return dr();case U.TN:return er();case U.GV:return fr(block:true);case U.He:return fr(block:true,indentlessSequence:true);case U.Ie:return fr();case U.HV:Wr.mB();return gr();case U.UN:return gr();case U.VJ:return hr();case U.IV:Wr.mB();return ir();case U.WJ:return ir();case U.XJ:return jr();case U.JV:return kr(first:true);case U.VN:return kr();case U.KV:return lr();case U.WN:return mr();case U.XN:return nr();case U.LV:return or(first:true);case U.YJ:return or();case U.YN:return pr();case U.MV:return pr(empty:true);default:throw "Unreachable";}}CB br(){var A=Wr.mB();assert(A.type==M.XV);Yr=U.SN;return new CB(t.wU,A.N);}CB cr(){var A=Wr.aB();while(A.type==M.oJ){A=Wr.rC();}if(A.type!=M.lJ&&A.type!=M.mJ&&A.type!=M.nJ&&A.type!=M.eH){qr();Xr.add(U.TN);Yr=U.GV;return new RJ(A.N.start.KC());}if(A.type==M.eH){Yr=U.NV;Wr.mB();return new CB(t.xU,A.N);}var C=A.N;var B=qr();var D=B.first;var G=B.last;A=Wr.aB();if(A.type!=M.nJ){throw new m("Expected document start.",A.N);}Xr.add(U.TN);Yr=U.FV;Wr.mB();return new RJ(C.expand(A.N),versionDirective:D,tagDirectives:G,isImplicit:false);}CB dr(){var A=Wr.aB();switch (A.type){case M.lJ:case M.mJ:case M.nJ:case M.oJ:case M.eH:Yr=Xr.removeLast();return rr(A.N.start);default:return fr(block:true);}}CB er(){Zr.clear();Yr=U.SN;var A=Wr.aB();if(A.type==M.oJ){Wr.mB();return new SJ(A.N,isImplicit:false);}else{return new SJ(A.N.start.KC(),isImplicit:true);}}CB fr({bool block: false,bool indentlessSequence: false}){var A=Wr.aB();if(A is oN){Wr.mB();Yr=Xr.removeLast();return new PN(A.N,A.name);}var D;var G;var B=A.N.start.KC();H(A){D=A.name;B=B.expand(A.N);return Wr.rC();}I(A){G=A;B=B.expand(A.N);return Wr.rC();}if(A is jJ){A=H(A);if(A is kJ)A=I(A);}else if(A is kJ){A=I(A);if(A is jJ)A=H(A);}var C;if(G!=null){if(G.sC==null){C=G.HL;}else{var K=Zr[G.sC];if(K==null){throw new m("Undefined tag handle.",G.N);}C=K.EG+G.HL;}}if(indentlessSequence&&A.type==M.eG){Yr=U.VJ;return new ZH(B.expand(A.N),nC.kN,anchor:D,tag:C);}if(A is bG){if(C==null&&A.S!=yB.iJ)C="!";Yr=Xr.removeLast();Wr.mB();return new KD(B.expand(A.N),A.value,A.S,anchor:D,tag:C);}if(A.type==M.ZV){Yr=U.JV;return new ZH(B.expand(A.N),nC.lN,anchor:D,tag:C);}if(A.type==M.aV){Yr=U.LV;return new aH(B.expand(A.N),nC.lN,anchor:D,tag:C);}if(block&&A.type==M.YV){Yr=U.HV;return new ZH(B.expand(A.N),nC.kN,anchor:D,tag:C);}if(block&&A.type==M.pJ){Yr=U.IV;return new aH(B.expand(A.N),nC.kN,anchor:D,tag:C);}if(D!=null||C!=null){Yr=Xr.removeLast();return new KD(B,'',yB.iJ,anchor:D,tag:C);}throw new m("Expected node content.",B);}CB gr(){var A=Wr.aB();if(A.type==M.eG){A=Wr.rC();if(A.type==M.eG||A.type==M.iF){Yr=U.UN;return rr(A.N.end);}else{Xr.add(U.UN);return fr(block:true);}}if(A.type==M.iF){Wr.mB();Yr=Xr.removeLast();return new CB(t.TJ,A.N);}throw new m("While parsing a block collection, expected '-'.",A.N.start.KC());}CB hr(){var A=Wr.aB();if(A.type!=M.eG){Yr=Xr.removeLast();return new CB(t.TJ,A.N.start.KC());}var B=A.N.start;A=Wr.rC();if(A.type==M.eG||A.type==M.bE||A.type==M.zD||A.type==M.iF){Yr=U.VJ;return rr(B);}else{Xr.add(U.VJ);return fr(block:true);}}CB ir(){var A=Wr.aB();if(A.type==M.bE){var B=A.N.start;A=Wr.rC();if(A.type==M.bE||A.type==M.zD||A.type==M.iF){Yr=U.XJ;return rr(B);}else{Xr.add(U.XJ);return fr(block:true,indentlessSequence:true);}}if(A.type==M.zD){Yr=U.XJ;return rr(A.N.start);}if(A.type==M.iF){Wr.mB();Yr=Xr.removeLast();return new CB(t.UJ,A.N);}throw new m("Expected a key while parsing a block mapping.",A.N.start.KC());}CB jr(){var A=Wr.aB();if(A.type!=M.zD){Yr=U.WJ;return rr(A.N.start);}var B=A.N.start;A=Wr.rC();if(A.type==M.bE||A.type==M.zD||A.type==M.iF){Yr=U.WJ;return rr(B);}else{Xr.add(U.WJ);return fr(block:true,indentlessSequence:true);}}CB kr({bool first: false}){if(first)Wr.mB();var A=Wr.aB();if(A.type!=M.cG){if(!first){if(A.type!=M.jF){throw new m("While parsing a flow sequence, expected ',' or ']'.",A.N.start.KC());}A=Wr.rC();}if(A.type==M.bE){Yr=U.KV;Wr.mB();return new aH(A.N,nC.lN);}else if(A.type!=M.cG){Xr.add(U.VN);return fr();}}Wr.mB();Yr=Xr.removeLast();return new CB(t.TJ,A.N);}CB lr(){var A=Wr.aB();if(A.type==M.zD||A.type==M.jF||A.type==M.cG){var B=A.N.start;Yr=U.WN;return rr(B);}else{Xr.add(U.WN);return fr();}}CB mr(){var A=Wr.aB();if(A.type==M.zD){A=Wr.rC();if(A.type!=M.jF&&A.type!=M.cG){Xr.add(U.XN);return fr();}}Yr=U.XN;return rr(A.N.start);}CB nr(){Yr=U.VN;return new CB(t.UJ,Wr.aB().N.start.KC());}CB or({bool first: false}){if(first)Wr.mB();var A=Wr.aB();if(A.type!=M.dG){if(!first){if(A.type!=M.jF){throw new m("While parsing a flow mapping, expected ',' or '}'.",A.N.start.KC());}A=Wr.rC();}if(A.type==M.bE){A=Wr.rC();if(A.type!=M.zD&&A.type!=M.jF&&A.type!=M.dG){Xr.add(U.YN);return fr();}else{Yr=U.YN;return rr(A.N.start);}}else if(A.type!=M.dG){Xr.add(U.MV);return fr();}}Wr.mB();Yr=Xr.removeLast();return new CB(t.UJ,A.N);}CB pr({bool empty: false}){var A=Wr.aB();if(empty){Yr=U.YJ;return rr(A.N.start);}if(A.type==M.zD){A=Wr.rC();if(A.type!=M.jF&&A.type!=M.dG){Xr.add(U.YJ);return fr();}}Yr=U.YJ;return rr(A.N.start);}CB rr(mC A)=>new KD(A.KC(),'',yB.iJ);fH<gH,List<LD>> qr(){var A=Wr.aB();var B;var C=<LD>[] ;while(A.type==M.lJ||A.type==M.mJ){if(A is mN){if(B!=null){throw new m("Duplicate %YAML directive.",A.N);}if(A.CG!=1||A.RF==0){throw new m("Incompatible YAML document. This parser only supports YAML 1.1 " "and 1.2.",A.N);}else if(A.RF>2){cV("Warning: this parser only supports YAML 1.1 and 1.2.",A.N);}B=new gH(A.CG,A.RF);}else if(A is nN){var D=new LD(A.sC,A.EG);sr(D,A.N);C.add(D);}A=Wr.rC();}sr(new LD("!","!"),A.N.start.KC(),allowDuplicates:true);sr(new LD("!!","tag:yaml.org,2002:"),A.N.start.KC(),allowDuplicates:true);return new fH(B,C);}void sr(LD A,RB B,{bool allowDuplicates: false}){if(Zr.containsKey(A.sC)){if(allowDuplicates)return;throw new m("Duplicate %TAG directive.",B);}Zr[A.sC]=A;}}class U{static const EV=const U("STREAM_START");static const SN=const U("DOCUMENT_START");static const FV=const U("DOCUMENT_CONTENT");static const TN=const U("DOCUMENT_END");static const GV=const U("BLOCK_NODE");static const He=const U("BLOCK_NODE_OR_INDENTLESS_SEQUENCE");static const Ie=const U("FLOW_NODE");static const HV=const U("BLOCK_SEQUENCE_FIRST_ENTRY");static const UN=const U("BLOCK_SEQUENCE_ENTRY");static const VJ=const U("INDENTLESS_SEQUENCE_ENTRY");static const IV=const U("BLOCK_MAPPING_FIRST_KEY");static const WJ=const U("BLOCK_MAPPING_KEY");static const XJ=const U("BLOCK_MAPPING_VALUE");static const JV=const U("FLOW_SEQUENCE_FIRST_ENTRY");static const VN=const U("FLOW_SEQUENCE_ENTRY");static const KV=const U("FLOW_SEQUENCE_ENTRY_MAPPING_KEY");static const WN=const U("FLOW_SEQUENCE_ENTRY_MAPPING_VALUE");static const XN=const U("FLOW_SEQUENCE_ENTRY_MAPPING_END");static const LV=const U("FLOW_MAPPING_FIRST_KEY");static const YJ=const U("FLOW_MAPPING_KEY");static const YN=const U("FLOW_MAPPING_VALUE");static const MV=const U("FLOW_MAPPING_EMPTY_VALUE");static const NV=const U("END");final String name;const U(this.name);String toString()=>name;}class ZN{static const wD=0x9;static const xD=0xA;static const yD=0xD;static const fD=0x20;static const Je=0x24;static const Ke=0x28;static const Le=0x29;static const bH=0x2B;static const cH=0x2C;static const ZJ=0x2D;static const Me=0x2E;static const aN=0x3F;static const aJ=0x3A;static const Ne=0x3B;static const Oe=0x3D;static const bJ=0x5B;static const dH=0x5D;static const bN=0x7B;static const cJ=0x7D;static const cN=0x23;static const OV=0x26;static const PV=0x2A;static const QV=0x21;static const Pe=0x7C;static const Qe=0x3C;static const Re=0x3E;static const hF=0x27;static const dJ=0x22;static const eJ=0x25;static const dN=0x40;static const RV=0x60;static const Se=0x7E;static const Te=0x0;static const Ue=0x7;static const Ve=0x8;static const We=0xB;static const Xe=0xC;static const Ye=0x1B;static const SV=0x2F;static const eN=0x5C;static const Ze=0x5F;static const fJ=0x85;static const ae=0xA0;static const be=0x2028;static const ce=0x2029;static const fN=0xFEFF;static const aE=0x30;static const gJ=0x39;static const hJ=0x61;static const de=0x62;static const ee=0x65;static const TV=0x66;static const fe=0x6E;static const ge=0x72;static const he=0x74;static const ie=0x75;static const je=0x76;static const ke=0x78;static const le=0x7A;static const gN=0x41;static const UV=0x46;static const me=0x4C;static const ne=0x4E;static const oe=0x50;static const pe=0x55;static const qe=0x5A;final ZG tr;var ur=false;var vr=false;final wr=new ZQ<NB>();var xr=0;var yr=false;final zr=<int>[-1];var As=true;final Bs=<hN>[null];int get Cs=>zr.last;bool get Ds=>Bs.length==1;bool get Es=>tr.qE||Fs;bool get Fs=>Gs(0);bool get Hs=>Is(0);bool get Js=>Ks(0);bool get Ls{var A=tr.k();if(A==null)return false;switch (A){case ZJ:case Ne:case SV:case aJ:case dN:case OV:case Oe:case bH:case Je:case Me:case Se:case aN:case PV:case hF:case Ke:case Le:case eJ:return true;default:return (A>=aE&&A<=gJ)||(A>=hJ&&A<=le)||(A>=gN&&A<=qe);}}bool get Ms{if(!Ns)return false;switch (tr.k()){case cH:case bJ:case dH:case bN:case cJ:return false;default:return true;}}bool get Os{var A=tr.k();return A!=null&&(A>=aE&&A<=gJ);}bool get Ps{var A=tr.k();if(A==null)return false;return (A>=aE&&A<=gJ)||(A>=hJ&&A<=TV)||(A>=gN&&A<=UV);}bool get Qs=>Rs(0);bool get Ss{var A=tr.k();if(A==null)return false;switch (A){case xD:case yD:case fN:return false;case wD:case fJ:return true;default:return (A>=0x00020&&A<=0x00007E)||(A>=0x000A0&&A<=0x00D7FF)||(A>=0x0E000&&A<=0x00FFFD)||(A>=0x10000&&A<=0x10FFFF);}}bool get Ns{var A=tr.k();if(A==null)return false;switch (A){case xD:case yD:case fN:case fD:return false;case fJ:return true;default:return (A>=0x00020&&A<=0x00007E)||(A>=0x000A0&&A<=0x00D7FF)||(A>=0x0E000&&A<=0x00FFFD)||(A>=0x10000&&A<=0x10FFFF);}}bool get Ts{return tr.LB==0&&Is(3)&&(tr.QF('---')||tr.QF('...'));}ZN(String A,{sourceUrl}):tr=new ZG.Jk(A,sourceUrl:sourceUrl);NB mB(){if(vr)throw new StateError("Out of tokens.");if(!yr)Us();var A=wr.removeFirst();yr=false;xr++ ;vr=A is NB&&A.type==M.eH;return A;}NB rC(){mB();return aB();}NB aB(){if(vr)return null;if(!yr)Us();return wr.first;}void Us(){while(true){if(wr.isNotEmpty){Vs();if(!Bs.any((A)=>A!=null&&A.ML==xr)){break;}}Ws();}yr=true;}void Ws(){if(!ur){Xs();return;}Ys();Vs();Zs(tr.LB);if(tr.qE){bs();return;}if(tr.LB==0){if(tr.k()==eJ){cs();return;}if(Is(3)){if(tr.QF('---')){ds(M.nJ);return;}if(tr.QF('...')){ds(M.oJ);return;}}}switch (tr.k()){case bJ:es(M.ZV);return;case bN:es(M.aV);return;case dH:fs(M.cG);return;case cJ:fs(M.dG);return;case cH:gs();return;case PV:hs(anchor:false);return;case OV:hs(anchor:true);return;case QV:js();return;case hF:ks(singleQuote:true);return;case dJ:ks(singleQuote:false);return;case Pe:if(!Ds)ls();ms(literal:true);return;case Re:if(!Ds)ls();ms(literal:false);return;case eJ:case dN:case RV:ls();return;case ZJ:if(Rs(1)){ns();}else{os();}return;case aN:if(Rs(1)){ns();}else{ps();}return;case aJ:if(!Ds&&wr.isNotEmpty){var A=wr.last;if(A.type==M.cG||A.type==M.dG||(A.type==M.bV&&(A as bG).S.Ti)){qs();return;}}if(Rs(1)){ns();}else{qs();}return;default:if(!Ss)ls();ns();return;}throw 'Inaccessible';}void ls()=>tr.error("Unexpected character.",length:1);void Vs(){for(var A=0;A<Bs.length;A++ ){var B=Bs[A];if(B==null)continue;if(!Ds)continue;if(B.JC==tr.JC)continue;if(B.cP){throw new m("Expected ':'.",tr.WC);}Bs[A]=null;}}void rs(){var A=Ds&&Cs==tr.LB;assert(As||!A);if(!As)return;ss();Bs[Bs.length-1]=new hN(xr+wr.length,tr.JC,tr.LB,tr.location,required:A);}void ss(){var A=Bs.last;if(A!=null&&A.cP){throw new m("Could not find expected ':' for simple key.",A.location.KC());}Bs[Bs.length-1]=null;}void ts(){Bs.add(null);}void us(){if(Ds)return;Bs.removeLast();}void vs(int A,M C,mC D,{int tokenNumber}){if(!Ds)return;if(Cs!=-1&&Cs>=A)return;zr.add(A);var B=new NB(C,D.KC());if(tokenNumber==null){wr.add(B);}else{wr.insert(tokenNumber-xr,B);}}void Zs(int A){if(!Ds)return;while(Cs>A){wr.add(new NB(M.iF,tr.WC));zr.removeLast();}}void ws()=>Zs(-1);void Xs(){ur=true;wr.add(new NB(M.XV,tr.WC));}void bs(){ws();ss();As=false;wr.add(new NB(M.eH,tr.WC));}void cs(){ws();ss();As=false;var A=xs();if(A!=null)wr.add(A);}void ds(M A){ws();ss();As=false;var B=tr.state;tr.f();tr.f();tr.f();wr.add(new NB(A,tr.LC(B)));}void es(M A){rs();ts();As=true;ys(A);}void fs(M A){ss();us();As=false;ys(A);}void gs(){ss();As=true;ys(M.jF);}void os(){if(Ds){if(!As){throw new m("Block sequence entries are not allowed here.",tr.WC);}vs(tr.LB,M.YV,tr.location);}else{}ss();As=true;ys(M.eG);}void ps(){if(Ds){if(!As){throw new m("Mapping keys are not allowed here.",tr.WC);}vs(tr.LB,M.pJ,tr.location);}As=Ds;ys(M.bE);}void qs(){var A=Bs.last;if(A!=null){wr.insert(A.ML-xr,new NB(M.bE,A.location.KC()));vs(A.LB,M.pJ,A.location,tokenNumber:A.ML);Bs[Bs.length-1]=null;As=false;}else if(Ds){if(!As){throw new m("Mapping values are not allowed here. Did you miss a colon " "earlier?",tr.WC);}vs(tr.LB,M.pJ,tr.location);As=true;}else if(As){As=false;ys(M.bE);}ys(M.zD);}void ys(M A){var B=tr.state;tr.f();wr.add(new NB(A,tr.LC(B)));}void hs({bool anchor: true}){rs();As=false;wr.add(zs(anchor:anchor));}void js(){rs();As=false;wr.add(At());}void ms({bool literal: false}){ss();As=true;wr.add(Bt(literal:literal));}void ks({bool singleQuote: false}){rs();As=false;wr.add(Ct(singleQuote:singleQuote));}void ns(){rs();As=false;wr.add(Dt());}void Ys(){var A=false;while(true){if(tr.LB==0)tr.mB("\uFEFF");while(tr.k()==fD||((!Ds||!A)&&tr.k()==wD)){tr.f();}if(tr.k()==wD){tr.error("Tab characters are not allowed as indentation.",length:1);}Et();if(Fs){Ft();if(Ds)As=true;A=true;}else{break;}}}NB xs(){var A=tr.state;tr.f();var B;var C=Gt();if(C=="YAML"){B=Ht(A);}else if(C=="TAG"){B=It(A);}else{cV("Warning: unknown directive.",tr.LC(A));while(!Es){tr.f();}return null;}Jt();Et();if(!Es){throw new m("Expected comment or line break after directive.",tr.LC(A));}Ft();return B;}String Gt(){var B=tr.position;while(Ns){tr.f();}var A=tr.substring(B);if(A.isEmpty){throw new m("Expected directive name.",tr.WC);}else if(!Hs){throw new m("Unexpected character in directive name.",tr.WC);}return A;}NB Ht(FF A){Jt();var B=Kt();tr.nK('.');var C=Kt();return new mN(tr.LC(A),B,C);}int Kt(){var B=tr.position;while(Os){tr.f();}var A=tr.substring(B);if(A.isEmpty){throw new m("Expected version number.",tr.WC);}return int.parse(A);}NB It(FF A){Jt();var B=Lt(directive:true);if(!Js){throw new m("Expected whitespace.",tr.WC);}Jt();var C=Mt();if(!Hs){throw new m("Expected whitespace.",tr.WC);}return new nN(tr.LC(A),B,C);}NB zs({bool anchor: true}){var C=tr.state;tr.f();var D=tr.position;while(Ms){tr.f();}var B=tr.substring(D);var A=tr.k();if(B.isEmpty||(!Hs&&A!=aN&&A!=aJ&&A!=cH&&A!=dH&&A!=cJ&&A!=eJ&&A!=dN&&A!=RV)){throw new m("Expected alphanumeric character.",tr.WC);}if(anchor){return new jJ(tr.LC(C),B);}else{return new oN(tr.LC(C),B);}}NB At(){var A;var B;var C=tr.state;if(tr.k(1)==Qe){tr.f();tr.f();A='';B=Mt();tr.nK('>');}else{A=Lt();if(A.length>1&&A.startsWith('!')&&A.endsWith('!')){B=Mt(flowSeparators:false);}else{B=Mt(head:A,flowSeparators:false);if(B.isEmpty){A=null;B='!';}else{A='!';}}}return new kJ(tr.LC(C),A,B);}String Lt({bool directive: false}){tr.nK('!');var A=new StringBuffer('!');var B=tr.position;while(Ls){tr.f();}A.write(tr.substring(B));if(tr.k()==QV){A.writeCharCode(tr.f());}else{if(directive&&A.toString()!='!')tr.nK('!');}return A.toString();}String Mt({String head,bool flowSeparators: true}){var B=head==null?0:head.length;var C=new StringBuffer();if(B>1)C.write(head.substring(1));var D=tr.position;var A=tr.k();while(Ls||(flowSeparators&&(A==cH||A==bJ||A==dH))){tr.f();A=tr.k();}return Uri.decodeFull(tr.substring(D));}NB Bt({bool literal: false}){var L=tr.state;tr.f();var I=gD.re;var D=0;var A=tr.k();if(A==bH||A==ZJ){I=A==bH?gD.jN:gD.iN;tr.f();if(Os){if(tr.k()==aE){throw new m("0 may not be used as an indentation indicator.",tr.LC(L));}D=tr.f()-aE;}}else if(Os){if(tr.k()==aE){throw new m("0 may not be used as an indentation indicator.",tr.LC(L));}D=tr.f()-aE;A=tr.k();if(A==bH||A==ZJ){I=A==bH?gD.jN:gD.iN;tr.f();}}Jt();Et();if(!Es){throw new m("Expected comment or line break.",tr.WC);}Ft();var C=0;if(D!=0){C=Cs>=0?Cs+D:D;}var G=Nt(C);C=G.first;var K=G.last;var B=new StringBuffer();var H='';var O=false;var V=false;var b=tr.state;while(tr.LB==C&&!tr.qE){if(Ts)break;V=Js;if(!literal&&H.isNotEmpty&&!O&&!V){if(K.isEmpty)B.writeCharCode(fD);}else{B.write(H);}H='';B.write(K);O=Js;var n=tr.position;while(!Es){tr.f();}B.write(tr.substring(n));b=tr.state;if(!tr.qE)H=Ot();var G=Nt(C);C=G.first;K=G.last;}if(I!=gD.iN)B.write(H);if(I==gD.jN)B.write(K);return new bG(tr.LC(L,b),B.toString(),literal?yB.te:yB.ue);}fH<int,String> Nt(int A){var B=0;var C=new StringBuffer();while(true){while((A==0||tr.LB<A)&&tr.k()==fD){tr.f();}if(tr.LB>B)B=tr.LB;if(!Fs)break;C.write(Ot());}if(A==0){A=B;if(A<Cs+1)A=Cs+1;}return new fH(A,C.toString());}NB Ct({bool singleQuote: false}){var V=tr.state;var A=new StringBuffer();tr.f();while(true){if(Ts){tr.error("Unexpected document indicator.");}if(tr.qE){throw new m("Unexpected end of file.",tr.WC);}var D=false;while(!Hs){var G=tr.k();if(singleQuote&&G==hF&&tr.k(1)==hF){tr.f();tr.f();A.writeCharCode(hF);}else if(G==(singleQuote?hF:dJ)){break;}else if(!singleQuote&&G==eN&&Gs(1)){tr.f();Ft();D=true;break;}else if(!singleQuote&&G==eN){var I=tr.state;var B=null;switch (tr.k(1)){case aE:A.writeCharCode(Te);break;case hJ:A.writeCharCode(Ue);break;case de:A.writeCharCode(Ve);break;case he:case wD:A.writeCharCode(wD);break;case fe:A.writeCharCode(xD);break;case je:A.writeCharCode(We);break;case TV:A.writeCharCode(Xe);break;case ge:A.writeCharCode(yD);break;case ee:A.writeCharCode(Ye);break;case fD:case dJ:case SV:case eN:A.writeCharCode(tr.k(1));break;case ne:A.writeCharCode(fJ);break;case Ze:A.writeCharCode(ae);break;case me:A.writeCharCode(be);break;case oe:A.writeCharCode(ce);break;case ke:B=2;break;case ie:B=4;break;case pe:B=8;break;default:throw new m("Unknown escape character.",tr.LC(I));}tr.f();tr.f();if(B!=null){var C=0;for(var L=0;L<B;L++ ){if(!Ps){tr.f();throw new m("Expected ${B}-digit hexidecimal number.",tr.LC(I));}C=(C<<4)+Pt(tr.f());}if((C>=0xD800&&C<=0xDFFF)||C>0x10FFFF){throw new m("Invalid Unicode character escape code.",tr.LC(I));}A.writeCharCode(C);}}else{A.writeCharCode(tr.f());}}if(tr.k()==(singleQuote?hF:dJ)){break;}var H=new StringBuffer();var O='';var K=new StringBuffer();while(Js||Fs){if(Js){if(!D){H.writeCharCode(tr.f());}else{tr.f();}}else{if(!D){H.clear();O=Ot();D=true;}else{K.write(Ot());}}}if(D){if(O.isNotEmpty&&K.isEmpty){A.writeCharCode(fD);}else{A.write(K);}}else{A.write(H);H.clear();}}tr.f();return new bG(tr.LC(V),A.toString(),singleQuote?yB.VV:yB.WV);}NB Dt(){var I=tr.state;var G=tr.state;var B=new StringBuffer();var A='';var C='';var D=new StringBuffer();var H=Cs+1;while(true){if(Ts)break;if(tr.k()==cN)break;if(Qs){if(A.isNotEmpty){if(C.isEmpty){B.writeCharCode(fD);}else{B.write(C);}A='';C='';}else{B.write(D);D.clear();}}var K=tr.position;while(Qs){tr.f();}B.write(tr.substring(K));G=tr.state;if(!Js&&!Fs)break;while(Js||Fs){if(Js){if(A.isNotEmpty&&tr.LB<H&&tr.k()==wD){tr.error("Expected a space but found a tab.",length:1);}if(A.isEmpty){D.writeCharCode(tr.f());}else{tr.f();}}else{if(A.isEmpty){A=Ot();D.clear();}else{C=Ot();}}}if(Ds&&tr.LB<H)break;}if(A.isNotEmpty)As=true;return new bG(tr.LC(I,G),B.toString(),yB.iJ);}void Ft(){var A=tr.k();if(A!=yD&&A!=xD)return;tr.f();if(A==yD&&tr.k()==xD)tr.f();}String Ot(){var A=tr.k();if(A!=yD&&A!=xD){throw new m("Expected newline.",tr.WC);}tr.f();if(A==yD&&tr.k()==xD)tr.f();return "\n";}bool Ks(int B){var A=tr.k(B);return A==fD||A==wD;}bool Gs(int B){var A=tr.k(B);return A==yD||A==xD;}bool Is(int B){var A=tr.k(B);return A==null||A==fD||A==wD||A==yD||A==xD;}bool Rs(int A){switch (tr.k(A)){case aJ:return Qt(A+1);case cN:var B=tr.k(A-1);return B!=fD&&B!=wD;default:return Qt(A);}}bool Qt(int B){var A=tr.k(B);switch (A){case cH:case bJ:case dH:case bN:case cJ:return Ds;case fD:case wD:case xD:case yD:case fN:return false;case fJ:return true;default:return A!=null&&((A>=0x00020&&A<=0x00007E)||(A>=0x000A0&&A<=0x00D7FF)||(A>=0x0E000&&A<=0x00FFFD)||(A>=0x10000&&A<=0x10FFFF));}}int Pt(int A){if(A<=gJ)return A-aE;if(A<=UV)return 10+A-gN;return 10+A-hJ;}void Jt(){while(Js){tr.f();}}void Et(){if(tr.k()!=cN)return;while(!Es){tr.f();}}}class hN{final int ML;final mC location;final int JC;final int LB;final bool cP;hN(this.ML,this.JC,this.LB,this.location,{bool required}):cP=required;}class gD{static const iN=const gD("STRIP");static const re=const gD("CLIP");static const jN=const gD("KEEP");final String name;const gD(this.name);String toString()=>name;}class yB{static const se=const yB.qj("ANY");static const iJ=const yB.qj("PLAIN");static const te=const yB.qj("LITERAL");static const ue=const yB.qj("FOLDED");static const VV=const yB.qj("SINGLE_QUOTED");static const WV=const yB.qj("DOUBLE_QUOTED");final String name;bool get Ti=>this==VV||this==WV;const yB.qj(this.name);String toString()=>name;}class nC{static const kN=const nC.rj("BLOCK");static const lN=const nC.rj("FLOW");final String name;const nC.rj(this.name);String toString()=>name;}class NB{final M type;final RB N;NB(this.type,this.N);String toString()=>type.toString();}class mN implements NB{get type=>M.lJ;final RB N;final int CG;final int RF;mN(this.N,this.CG,this.RF);String toString()=>"VERSION_DIRECTIVE ${CG}.${RF}";}class nN implements NB{get type=>M.mJ;final RB N;final String sC;final String EG;nN(this.N,this.sC,this.EG);String toString()=>"TAG_DIRECTIVE ${sC} ${EG}";}class jJ implements NB{get type=>M.we;final RB N;final String name;jJ(this.N,this.name);String toString()=>"ANCHOR ${name}";}class oN implements NB{get type=>M.ve;final RB N;final String name;oN(this.N,this.name);String toString()=>"ALIAS ${name}";}class kJ implements NB{get type=>M.xe;final RB N;final String sC;final String HL;kJ(this.N,this.sC,this.HL);String toString()=>"TAG ${sC} ${HL}";}class bG implements NB{get type=>M.bV;final RB N;final String value;final yB S;bG(this.N,this.value,this.S);String toString()=>"SCALAR ${S} \"${value}\"";}class M{static const XV=const M.sj("STREAM_START");static const eH=const M.sj("STREAM_END");static const lJ=const M.sj("VERSION_DIRECTIVE");static const mJ=const M.sj("TAG_DIRECTIVE");static const nJ=const M.sj("DOCUMENT_START");static const oJ=const M.sj("DOCUMENT_END");static const YV=const M.sj("BLOCK_SEQUENCE_START");static const pJ=const M.sj("BLOCK_MAPPING_START");static const iF=const M.sj("BLOCK_END");static const ZV=const M.sj("FLOW_SEQUENCE_START");static const cG=const M.sj("FLOW_SEQUENCE_END");static const aV=const M.sj("FLOW_MAPPING_START");static const dG=const M.sj("FLOW_MAPPING_END");static const eG=const M.sj("BLOCK_ENTRY");static const jF=const M.sj("FLOW_ENTRY");static const bE=const M.sj("KEY");static const zD=const M.sj("VALUE");static const ve=const M.sj("ALIAS");static const we=const M.sj("ANCHOR");static const xe=const M.sj("TAG");static const bV=const M.sj("SCALAR");final String name;const M.sj(this.name);String toString()=>name;}class fH<W,Jf>{final W first;final Jf last;fH(this.first,this.last);String toString()=>'(${first}, ${last})';}void cV(String A,[eB B])=>ze(A,B);typedef dynamic ye(String _0,[eB _1]);ye ze=(A,[B]){if(B!=null)A=B.message(A);print(A);};String Df(B){var A=new StringBuffer();Ef(B,A);return A.toString();}void Ef(A,StringSink B){pN(A,0,B,true);}void pN(A,int C,StringSink B,bool D){if(A is Map){Gf(A,C,B,D);}else if(A is Iterable){If(A,C,B,D);}else if(A is String){B..writeln('"${Ff(A)}"');}else if(A is double){B.writeln("!!float ${A}");}else{B.writeln(A);}}String Ff(String A)=>A.replaceAll('"',r'\"').replaceAll("\n",r"\n");void Gf(Map C,int B,StringSink A,bool G){if(!G){A.writeln();B+= 2;}final H=Hf(C);H.forEach((D){final I=C[D];gV(B,A);A..write(D)..write(': ');pN(I,B,A,false);});}Iterable<String> Hf(Map H){final B=[] ;final C=[] ;final D=[] ;H.forEach((A,G){if(G is String){B.add(A);}else if(G is Map){C.add(A);}else{D.add(A);}});return kd([B..sort(),C..sort(),D..sort()]) as Iterable<String>;}void If(Iterable C,int B,StringSink A,bool D){if(!D){A.writeln();B+= 2;}C.forEach((G){gV(B,A);A.write('- ');pN(G,B,A,false);});}void gV(int A,StringSink B)=>B.write(' '*A);class fG{final jB vO;final eB N;final gH versionDirective;final List<LD> JL;final bool startImplicit;final bool endImplicit;fG.tj(this.vO,this.N,this.versionDirective,List<LD> A,{this.startImplicit: false,this.endImplicit: false}):JL=new UnmodifiableListView(A);String toString()=>vO.toString();}class gH{final int CG;final int RF;gH(this.CG,this.RF);String toString()=>"%YAML ${CG}.${RF}";}class LD{final String sC;final String EG;LD(this.sC,this.EG);String toString()=>"%TAG ${sC} ${EG}";}abstract class jB{eB get N=>Rt;eB Rt;get value;}class dV extends jB with MapMixin,Za{final Map<dynamic,jB> kC;final nC S;Map get value=>this;Iterable get keys=>kC.keys.map((A)=>A.value);dV.uj(Map<dynamic,jB> A,eB B,this.S):kC=new UnmodifiableMapView<dynamic,jB>(A){Rt=B;}operator[](B){var A=kC[B];return A==null?null:A.value;}}class eV extends jB with ListMixin{final List<jB> kC;final nC S;List get value=>this;int get length=>kC.length;set length(int A){throw new UnsupportedError("Cannot modify an unmodifiable List");}eV.vj(List<jB> A,eB B,this.S):kC=new UnmodifiableListView<jB>(A){Rt=B;}operator[](int A)=>kC[A].value;operator[]=(int A,B){throw new UnsupportedError("Cannot modify an unmodifiable List");}}class sB extends jB{final value;final yB S;sB.wj(this.value,KD A):S=A.S{Rt=A.N;}sB.xj(this.value,eB A):S=yB.se{Rt=A;}String toString()=>value.toString();}void fV(jB A,eB B){A.Rt=B;}